/*!
 * jQuery JavaScript Library v1.11.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:19Z
 */
function TeiViewer(t,e){t.currentPage=1,t.formNumber=1,t.maxPage="1",t.pages=[],t.imagesOnly=!1,t.display="both",t.build=function(e){t.pages=e.pages,t.maxPage=t.pages.length},t.to_trusted=function(t){return e.trustAsHtml(t)},t.previousPage=function(){t.currentPage>1&&(t.currentPage--,t.formNumber=t.currentPage)},t.nextPage=function(){t.currentPage<t.maxPage&&(t.currentPage++,t.formNumber=t.currentPage)},t.textUpdated=function(){if(t.formNumber<1)t.formNumber=t.currentPage;else{var e=parseInt(t.formNumber);e<=t.maxPage?t.currentPage=e:t.formNumber=t.currentPage}}}function TeiViewerDirective(){function t(t,n,i){tei.error?alert("The supplied transcript is not formatted properly for playback"):(t.build(tei),t.$watch("currentPage",e),t.$watch("display",function(){e(t.currentPage)}))}function e(t){var e=document.querySelectorAll("#tei-container li.page:nth-child(1)")[0].offsetTop,n=document.querySelectorAll("#tei-container li.page:nth-child("+t+")"),i=document.getElementById("tei-container");i.scrollTop=n[0].offsetTop-e}return{restrict:"E",templateUrl:"tei_viewer.html",link:t}}function URLify(t,e){return t=downcode(t),t=t.replace(/[^-\w\s]/g," "),t=t.replace(/^\s+|\s+$/g,""),t=t.replace(/[-\s]+/g,"-"),t=t.toLowerCase(),t.substring(0,e)}function addRestoreDefaultBehavior(){$("[data-behavior='restore-default']").each(function(){var t=$("[data-default-value]",$(this)),e=$($("[data-in-place-edit-target]",$(this)).data("in-place-edit-target"),$(this)),n=$("[data-restore-default]",$(this));t.on("blur",function(){$(this).val()==$(this).data("default-value")?n.addClass("hidden"):n.removeClass("hidden")}),n.on("click",function(i){i.preventDefault(),t.val(t.data("default-value")),e.text(t.data("default-value")),n.hide()})})}function addCheckboxToggleBehavior(){function t(t){return $("input[type='checkbox']",t).length==$("input[type='checkbox']:checked",t).length}function e(e,n){t(n)?e.text(e.data("deselect-text")):e.text(e.data("select-text"))}$("[data-behavior='metadata-select']").each(function(){var n=$(this),i=n.parents("th"),r=i.closest("table"),o=$("tr td:nth-child("+(i.index()+1)+")",r),a=$("input[type='checkbox']",o);e(n,o),n.on("click",function(i){i.preventDefault();var r=t(o);o.each(function(){$("input[type='checkbox']",$(this)).prop("checked",!r),e(n,o)})}),a.each(function(){$(this).on("change",function(){e(n,o)})})})}function addEnableToggleBehavior(){$("[data-behavior='enable-feature']").each(function(){var t=$(this),e=$($(this).data("target"));t.on("change",function(){$(this).is(":checked")?e.find("input:checkbox").not("[data-behavior='enable-feature']").prop("checked",!0).attr("disabled",!1):e.find("input:checkbox").not("[data-behavior='enable-feature']").prop("checked",!1).attr("disabled",!0)})})}function observedForms(){return $("[data-form-observer]")}function serializeObservedForms(t){t.each(function(){serializeFormStatus($(this)),unbindObservedFormSubmit()})}function unbindObservedFormSubmit(){observedForms().each(function(){$(this).on("submit",function(){$(this).data("being-submitted",!0)})})}function serializeFormStatus(t){t.data("serialized-form",formSerialization(t))}function formSerialization(t){var e=[],n=0;return $("[contenteditable='true']",t).each(function(){e.push("&contenteditable_"+n+"="+$(this).text())}),t.serialize()+e.join()}function serializedFormStatus(t){return t.data("serialized-form")}function observedFormsStatusHasChanged(){var t=!1;return observedForms().each(function(){$(this).data("being-submitted")||serializedFormStatus($(this))!=formSerialization($(this))&&(t=!0)}),t}function itemsBloodhound(){var t=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.title)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:$("form[data-autocomplete-exhibit-catalog-index-path]").data("autocomplete-exhibit-catalog-index-path").replace("%25QUERY","%QUERY"),filter:function(t){return $.map(t.docs,function(t){return t})}}});return t.initialize(),t}function itemsTemplate(){return'<div class="autocomplete-item{{#if private}} blacklight-private{{/if}}">{{#if thumbnail}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'}function addAutocompletetoMastheadUpload(){$("[data-masthead-typeahead]").length>0&&$("[data-masthead-typeahead]").spotlightSearchTypeAhead({bloodhound:itemsBloodhound(),template:itemsTemplate()}).on("click",function(){$(this).select()}).on("typeahead:selected typeahead:autocompleted",function(t,e){var n=$($(this).data("remoteUrlField")),i=$($(this).data("target-panel"));swapInputForPanel($(this),i,e),$($(this).data("id-field")).val(e.global_id),n.val(e.full_images[0]).trigger("change"),$(this).attr("type","text"),$(".thumbs-list li",i).on("click.masthead",function(){var t=$(".thumbs-list li").index($(this));n.val(e.full_images[t]).trigger("change")})})}function addAutocompletetoFeaturedImage(){$("[data-featured-item-typeahead]").length>0&&$("[data-featured-item-typeahead]").spotlightSearchTypeAhead({bloodhound:itemsBloodhound(),template:itemsTemplate()}).on("click",function(){$(this).select()}).on("change",function(){$($(this).data("id-field")).val("")}).on("typeahead:selected typeahead:autocompleted",function(t,e){$($(this).data("id-field")).val(e.id)})}function swapInputForPanel(t,e,n){$(".pic.thumbnail img",e).attr("src",n.thumbnail).show(),$("[data-item-grid-thumbnail]",e).attr("value",n.thumbnail),$("[data-panel-title]",e).text(n.title),n["private"]&&e.addClass("blacklight-private"),$("[data-panel-id-display]",e).text(n.id),$(t.data("id_field")).val(n.id),e.multiImageSelector(n.image_versions),$(t.data("checkbox_field")).prop("checked",!0),t.attr("type","hidden"),e.show()}function addRemoveAutocompletedPanelBehavior(){$("[data-item-grid-panel-remove]").on("click",function(t){t.preventDefault();var e=$(this).closest("li.dd-item"),n=$("[data-target-panel='#"+e.attr("id")+"']");$("input[type='hidden']",e).prop("value",""),n.attr("value",""),n.attr("type","text"),e.hide()})}function replaceName(t,e){t.prop("name",t.prop("name").replace(/\d/,e))}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e="length"in t&&t.length,n=rt.type(t);return"function"===n||rt.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(rt.isFunction(e))return rt.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return rt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(dt.test(e))return rt.filter(e,t,n);e=rt.filter(e,t)}return rt.grep(t,function(t){return rt.inArray(t,e)>=0!==n})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=wt[t]={};return rt.each(t.match(bt)||[],function(t,n){e[n]=!0}),e}function a(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(ft.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(a(),rt.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(St,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:$t.test(n)?rt.parseJSON(n):n}catch(r){}rt.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!rt.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,n,i){if(rt.acceptData(t)){var r,o,a=rt.expando,s=t.nodeType,l=s?rt.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=G.pop()||rt.guid++:a),l[u]||(l[u]=s?{}:{toJSON:rt.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=rt.extend(l[u],e):l[u].data=rt.extend(l[u].data,e)),o=l[u],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[rt.camelCase(e)]=n),"string"==typeof e?(r=o[e],null==r&&(r=o[rt.camelCase(e)])):r=o,r}}function h(t,e,n){if(rt.acceptData(t)){var i,r,o=t.nodeType,a=o?rt.cache:t,s=o?t[rt.expando]:rt.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){rt.isArray(e)?e=e.concat(rt.map(e,rt.camelCase)):e in i?e=[e]:(e=rt.camelCase(e),e=e in i?[e]:e.split(" ")),r=e.length;for(;r--;)delete i[e[r]];if(n?!u(i):!rt.isEmptyObject(i))return}(n||(delete a[s].data,u(a[s])))&&(o?rt.cleanData([t],!0):nt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return ft.activeElement}catch(t){}}function m(t){var e=Bt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function g(t,e){var n,i,r=0,o=typeof t.getElementsByTagName!==kt?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==kt?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||rt.nodeName(i,e)?o.push(i):rt.merge(o,g(i,e));return void 0===e||e&&rt.nodeName(t,e)?rt.merge([t],o):o}function v(t){At.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==rt.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Kt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){for(var n,i=0;null!=(n=t[i]);i++)rt._data(n,"globalEval",!e||rt._data(e[i],"globalEval"))}function _(t,e){if(1===e.nodeType&&rt.hasData(t)){var n,i,r,o=rt._data(t),a=rt._data(e,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)rt.event.add(e,n,s[n][i])}a.data&&(a.data=rt.extend({},a.data))}}function k(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!nt.noCloneEvent&&e[rt.expando]){r=rt._data(e);for(i in r.events)rt.removeEvent(e,i,r.handle);e.removeAttribute(rt.expando)}"script"===n&&e.text!==t.text?(b(e).text=t.text,w(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),nt.html5Clone&&t.innerHTML&&!rt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&At.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function $(e,n){var i,r=rt(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(r[0]))?i.display:rt.css(r[0],"display");return r.detach(),o}function S(t){var e=ft,n=Jt[t];return n||(n=$(t,e),"none"!==n&&n||(Qt=(Qt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qt[0].contentWindow||Qt[0].contentDocument).document,e.write(),e.close(),n=$(t,e),Qt.detach()),Jt[t]=n),n}function T(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=de.length;r--;)if(e=de[r]+n,e in t)return e;return i}function C(t,e){for(var n,i,r,o=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(o[a]=rt._data(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ct(i)&&(o[a]=rt._data(i,"olddisplay",S(i.nodeName)))):(r=Ct(i),(n&&"none"!==n||!r)&&rt._data(i,"olddisplay",r?n:rt.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function P(t,e,n){var i=le.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function A(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=rt.css(t,n+Et[o],!0,r)),i?("content"===n&&(a-=rt.css(t,"padding"+Et[o],!0,r)),"margin"!==n&&(a-=rt.css(t,"border"+Et[o]+"Width",!0,r))):(a+=rt.css(t,"padding"+Et[o],!0,r),"padding"!==n&&(a+=rt.css(t,"border"+Et[o]+"Width",!0,r)));return a}function D(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=te(t),a=nt.boxSizing&&"border-box"===rt.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=ee(t,e,o),(0>r||null==r)&&(r=t.style[e]),ie.test(r))return r;i=a&&(nt.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+A(t,e,n||(a?"border":"content"),i,o)+"px"}function N(t,e,n,i,r){return new N.prototype.init(t,e,n,i,r)}function O(){return setTimeout(function(){pe=void 0}),pe=rt.now()}function I(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=Et[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function M(t,e,n){for(var i,r=(be[e]||[]).concat(be["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,e,t))return i}function B(t,e,n){var i,r,o,a,s,l,u,c,h=this,d={},p=t.style,f=t.nodeType&&Ct(t),m=rt._data(t,"fxshow");n.queue||(s=rt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,rt.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=rt.css(t,"display"),c="none"===u?rt._data(t,"olddisplay")||S(t.nodeName):u,"inline"===c&&"none"===rt.css(t,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==S(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],me.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}d[i]=m&&m[i]||rt.style(t,i)}else u=void 0;if(rt.isEmptyObject(d))"inline"===("none"===u?S(t.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(f=m.hidden):m=rt._data(t,"fxshow",{}),o&&(m.hidden=!f),f?rt(t).show():h.done(function(){rt(t).hide()}),h.done(function(){var e;rt._removeData(t,"fxshow");for(e in d)rt.style(t,e,d[e])});for(i in d)a=M(f?m[i]:0,i,h),i in m||(m[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function R(t,e){var n,i,r,o,a;for(n in t)if(i=rt.camelCase(n),r=e[i],o=t[n],rt.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=rt.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function j(t,e,n){var i,r,o=0,a=ye.length,s=rt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=pe||O(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),1>o&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:pe||O(),duration:n.duration,tweens:[],createTween:function(e,n){var i=rt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(R(c,u.opts.specialEasing);a>o;o++)if(i=ye[o].call(u,t,c,u.opts))return i;return rt.map(c,M,u),rt.isFunction(u.opts.start)&&u.opts.start.call(t,u),rt.fx.timer(rt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function L(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(bt)||[];if(rt.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function F(t,e,n,i){function r(s){var l;return o[s]=!0,rt.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=t===Ue;return r(e.dataTypes[0])||!o["*"]&&r("*")}function H(t,e){var n,i,r=rt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&rt.extend(!0,t,n),t}function z(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function U(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function q(t,e,n,i){var r;if(rt.isArray(e))rt.each(e,function(e,r){n||Ke.test(t)?i(t,r):q(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==rt.type(e))i(t,e);else for(r in e)q(t+"["+r+"]",e[r],n,i)}function V(){try{return new t.XMLHttpRequest}catch(e){}}function W(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function K(t){return rt.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var G=[],X=G.slice,Y=G.concat,Z=G.push,Q=G.indexOf,J={},tt=J.toString,et=J.hasOwnProperty,nt={},it="1.11.3",rt=function(t,e){return new rt.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:it,constructor:rt,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return rt.each(this,t,e)},map:function(t){return this.pushStack(rt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:G.sort,splice:G.splice},rt.extend=rt.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||rt.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(r=arguments[s]))for(i in r)t=a[i],n=r[i],a!==n&&(u&&n&&(rt.isPlainObject(n)||(e=rt.isArray(n)))?(e?(e=!1,o=t&&rt.isArray(t)?t:[]):o=t&&rt.isPlainObject(t)?t:{},a[i]=rt.extend(u,o,n)):void 0!==n&&(a[i]=n));return a},rt.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray||function(t){return"array"===rt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!rt.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==rt.type(t)||t.nodeType||rt.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&rt.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(at,"ms-").replace(st,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,a=t.length,s=n(t);if(i){if(s)for(;a>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(s)for(;a>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?rt.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Q)return Q.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;)t[r++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;a>o;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)r=e(t[o],o,i),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,i),null!=r&&l.push(r);return Y.apply([],l)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),rt.isFunction(t)?(n=X.call(arguments,2),i=function(){return t.apply(e||this,n.concat(X.call(arguments)))},i.guid=t.guid=t.guid||rt.guid++,i):void 0},now:function(){return+new Date},support:nt}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()});var ut=/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){function e(t,e,n,i){var r,o,a,s,l,u,h,p,f,m;if((e?e.ownerDocument||e:F)!==N&&D(e),e=e||N,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!i&&I){if(11!==s&&(r=yt.exec(t)))if(a=r[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&j(e,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((a=r[3])&&x.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(a)),n}if(x.qsa&&(!M||!M.test(t))){if(p=h=L,f=e,m=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=S(t),(h=e.getAttribute("id"))?p=h.replace(wt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=bt.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{h||e.removeAttribute("id")}}}return E(t.replace(lt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[L]=!0,t}function r(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)_.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=z++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,a){var s,l,u=[H,o];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[L]||(e[L]={}),(s=l[i])&&s[0]===H&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,a))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function g(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,i,r))&&(a.push(o),u&&e.push(s));return a}function v(t,e,n,r,o,a){return r&&!r[L]&&(r=v(r)),o&&!o[L]&&(o=v(o,a)),i(function(i,a,s,l){var u,c,h,d=[],p=[],f=a.length,v=i||m(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?v:g(v,d,t,s,l),b=n?o||(i?t:f||r)?[]:a:y;if(n&&n(y,b,s,l),r)for(u=g(b,p),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(b[p[c]]=!(y[p[c]]=h));if(i){if(o||t){if(o){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);o(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=o?tt(i,h):d[c])>-1&&(i[u]=!(a[u]=h))}}else b=g(b===a?b.splice(f,b.length):b),o?o(null,a,b,l):Q.apply(a,b)})}function y(t){for(var e,n,i,r=t.length,o=_.relative[t[0].type],a=o||_.relative[" "],s=o?1:0,l=p(function(t){return t===e},a,!0),u=p(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,i){var r=!o&&(i||n!==C)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];r>s;s++)if(n=_.relative[t[s].type])c=[p(f(c),n)];else{if(n=_.filter[t[s].type].apply(null,t[s].matches),n[L]){for(i=++s;r>i&&!_.relative[t[i].type];i++);return v(s>1&&f(c),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(lt,"$1"),n,i>s&&y(t.slice(s,i)),r>i&&y(t=t.slice(i)),r>i&&d(t))}c.push(n)}return f(c)}function b(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var c,h,d,p=0,f="0",m=i&&[],v=[],y=C,b=i||o&&_.find.TAG("*",u),w=H+=null==y?1:Math.random()||.1,x=b.length;for(u&&(C=a!==N&&a);f!==x&&null!=(c=b[f]);f++){if(o&&c){for(h=0;d=t[h++];)if(d(c,a,s)){l.push(c);break}u&&(H=w)}r&&((c=!d&&c)&&p--,i&&m.push(c))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(m,v,a,s);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Y.call(l));v=g(v)}Q.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(H=w,C=y),m};return r?i(a):a}var w,x,_,k,$,S,T,E,C,P,A,D,N,O,I,M,B,R,j,L="sizzle"+1*new Date,F=t.document,H=0,z=0,U=n(),q=n(),V=n(),W=function(t,e){return t===e&&(A=!0),0},K=1<<31,G={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,Q=X.push,J=X.slice,tt=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=it.replace("w","w#"),ot="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",at=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),_t=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},kt=function(){D()};try{Q.apply(X=J.call(F.childNodes),F.childNodes),X[F.childNodes.length].nodeType}catch($t){Q={apply:X.length?function(t,e){Z.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},$=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:F;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,O=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",kt,!1):n.attachEvent&&n.attachEvent("onunload",kt)),I=!$(i),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(i.getElementsByClassName),x.getById=r(function(t){return O.appendChild(t).id=L,!i.getElementsByName||!i.getElementsByName(L).length}),x.getById?(_.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(xt,_t);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(xt,_t);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},_.find.CLASS=x.getElementsByClassName&&function(t,e){return I?e.getElementsByClassName(t):void 0},B=[],M=[],(x.qsa=vt.test(i.querySelectorAll))&&(r(function(t){O.appendChild(t).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+L+"-]").length||M.push("~="),t.querySelectorAll(":checked").length||M.push(":checked"),t.querySelectorAll("a#"+L+"+*").length||M.push(".#.+[+~]")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(x.matchesSelector=vt.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){x.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),B.push("!=",at)}),M=M.length&&new RegExp(M.join("|")),B=B.length&&new RegExp(B.join("|")),e=vt.test(O.compareDocumentPosition),j=e||vt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===F&&j(F,t)?-1:e===i||e.ownerDocument===F&&j(F,e)?1:P?tt(P,t)-tt(P,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,r=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!o||!s)return t===i?-1:e===i?1:o?-1:s?1:P?tt(P,t)-tt(P,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===F?-1:u[r]===F?1:0},i):N},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==N&&D(t),n=n.replace(ht,"='$1']"),x.matchesSelector&&I&&(!B||!B.test(n))&&(!M||!M.test(n)))try{var i=R.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,N,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==N&&D(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==N&&D(t);var n=_.attrHandle[e.toLowerCase()],i=n&&G.call(_.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:x.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(A=!x.detectDuplicates,P=!x.sortStable&&t.slice(0),t.sort(W),A){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return P=null,t},k=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},_=e.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(st," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,p,f,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(c=g[L]||(g[L]={}),u=c[t]||[],p=u[0]===H&&u[1],d=u[0]===H&&u[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[H,p,d];break}}else if(y&&(u=(e[L]||(e[L]={}))[t])&&u[0]===H)d=u[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[L]||(h[L]={}))[t]=[H,d]),h!==e)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var r,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[L]?o(n):o.length>1?(r=[t,t,"",n],_.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=tt(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=T(t.replace(lt,"$1"));return r[L]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(xt,_t),function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:i(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,_t).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=l(w);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,S=e.tokenize=function(t,n){var i,r,o,a,s,l,u,c=q[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=_.preFilter;s;){(!i||(r=ut.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ct.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(lt," ")}),s=s.slice(i.length));for(a in _.filter)!(r=ft[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):q(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],r=[],o=V[t+" "];if(!o){for(e||(e=S(t)),n=e.length;n--;)o=y(e[n]),o[L]?i.push(o):r.push(o);o=V(t,b(r,i)),o.selector=t}return o},E=e.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,h=!i&&S(t=u.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&I&&_.relative[o[1].type]){if(e=(_.find.ID(a.matches[0].replace(xt,_t),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ft.needsContext.test(t)?0:o.length;r--&&(a=o[r],!_.relative[s=a.type]);)if((l=_.find[s])&&(i=l(a.matches[0].replace(xt,_t),bt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return Q.apply(n,i),n;break}}return(u||T(t,h))(i,e,!I,n,bt.test(t)&&c(e.parentNode)||e),n},x.sortStable=L.split("").sort(W).join("")===L,x.detectDuplicates=!!A,D(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(N.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);rt.find=ut,rt.expr=ut.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ut.uniqueSort,rt.text=ut.getText,rt.isXMLDoc=ut.isXML,rt.contains=ut.contains;var ct=rt.expr.match.needsContext,ht=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?rt.find.matchesSelector(i,t)?[i]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;r>e;e++)if(rt.contains(i[e],this))return!0}));for(e=0;r>e;e++)rt.find(t,i[e],n);return n=this.pushStack(r>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ct.test(t)?rt(t):t||[],!1).length}});var pt,ft=t.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=rt.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:mt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:ft,!0)),ht.test(n[1])&&rt.isPlainObject(e))for(n in e)rt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=ft.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pt.find(t);this.length=1,this[0]=i}return this.context=ft,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?"undefined"!=typeof pt.ready?pt.ready(t):t(rt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))};gt.prototype=rt.fn,pt=rt(ft);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(t,e,n){for(var i=[],r=t[e];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!rt(r).is(n));)1===r.nodeType&&i.push(r),r=r[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),rt.fn.extend({has:function(t){var e,n=rt(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(rt.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=ct.test(t)||"string"!=typeof t?rt(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?rt.unique(o):o)},index:function(t){return t?"string"==typeof t?rt.inArray(this[0],rt(t)):rt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.unique(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return rt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return rt.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return rt.dir(t,"nextSibling")},prevAll:function(t){return rt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return rt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return rt.dir(t,"previousSibling",n)},siblings:function(t){return rt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return rt.sibling(t.firstChild)},contents:function(t){return rt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(n,i){var r=rt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=rt.filter(i,r)),this.length>1&&(yt[t]||(r=rt.unique(r)),vt.test(t)&&(r=r.reverse())),this.pushStack(r)}});var bt=/\S+/g,wt={};rt.Callbacks=function(t){t="string"==typeof t?wt[t]||o(t):rt.extend({},t);var e,n,i,r,a,s,l=[],u=!t.once&&[],c=function(o){for(n=t.memory&&o,i=!0,a=s||0,s=0,r=l.length,e=!0;l&&r>a;a++)if(l[a].apply(o[0],o[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function o(e){rt.each(e,function(e,n){var i=rt.type(n);"function"===i?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),e?r=l.length:n&&(s=i,c(n))}return this},remove:function(){return l&&rt.each(arguments,function(t,n){for(var i;(i=rt.inArray(n,l,i))>-1;)l.splice(i,1),e&&(r>=i&&r--,a>=i&&a--)}),this},has:function(t){return t?rt.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||h.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):c(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(n){rt.each(e,function(e,o){var a=rt.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,i):i}},r={};return i.pipe=i.then,rt.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=X.call(arguments),a=o.length,s=1!==a||t&&rt.isFunction(t.promise)?a:0,l=1===s?t:rt.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?X.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&rt.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,e)):--s;return s||l.resolveWith(i,o),l.promise()}});var xt;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){if(t===!0?!--rt.readyWait:!rt.isReady){if(!ft.body)return setTimeout(rt.ready);rt.isReady=!0,t!==!0&&--rt.readyWait>0||(xt.resolveWith(ft,[rt]),rt.fn.triggerHandler&&(rt(ft).triggerHandler("ready"),rt(ft).off("ready")))}}}),rt.ready.promise=function(e){if(!xt)if(xt=rt.Deferred(),"complete"===ft.readyState)setTimeout(rt.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{ft.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&ft.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!rt.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}a(),rt.ready()}}()}return xt.promise(e)};var _t,kt="undefined";for(_t in rt(nt))break;nt.ownLast="0"!==_t,nt.inlineBlockNeedsLayout=!1,rt(function(){var t,e,n,i;n=ft.getElementsByTagName("body")[0],n&&n.style&&(e=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==kt&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=ft.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(e){nt.deleteExpando=!1}}t=null}(),rt.acceptData=function(t){var e=rt.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var $t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?rt.cache[t[rt.expando]]:t[rt.expando],!!t&&!u(t)},data:function(t,e,n){return c(t,e,n)},removeData:function(t,e){return h(t,e)},_data:function(t,e,n){return c(t,e,n,!0)},_removeData:function(t,e){return h(t,e,!0)}}),rt.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=rt.data(o),1===o.nodeType&&!rt._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),l(o,i,r[i])));rt._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){rt.data(this,t)}):arguments.length>1?this.each(function(){rt.data(this,t,e)}):o?l(o,t,rt.data(o,t)):void 0},removeData:function(t){return this.each(function(){rt.removeData(this,t)})}}),rt.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=rt._data(t,e),n&&(!i||rt.isArray(n)?i=rt._data(t,e,rt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=rt.queue(t,e),i=n.length,r=n.shift(),o=rt._queueHooks(t,e),a=function(){rt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return rt._data(t,n)||rt._data(t,n,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(t,e+"queue"),rt._removeData(t,n)})})}}),rt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?rt.queue(this[0],t):void 0===e?this:this.each(function(){var n=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=rt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=rt._data(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Et=["Top","Right","Bottom","Left"],Ct=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},Pt=rt.access=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===rt.type(n)){r=!0;for(s in n)rt.access(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,rt.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(rt(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},At=/^(?:checkbox|radio)$/i;!function(){var t=ft.createElement("input"),e=ft.createElement("div"),n=ft.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===e.firstChild.nodeType,nt.tbody=!e.getElementsByTagName("tbody").length,nt.htmlSerialize=!!e.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),nt.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){nt.noCloneEvent=!1}),e.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(i){nt.deleteExpando=!1}}}(),function(){var e,n,i=ft.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(nt[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),nt[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Dt=/^(?:input|select|textarea)$/i,Nt=/^key/,Ot=/^(?:mouse|pointer|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,Mt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,p,f,m,g=rt._data(t);if(g){for(n.handler&&(l=n,n=l.handler,r=l.selector),n.guid||(n.guid=rt.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(t){return typeof rt===kt||t&&rt.event.triggered===t.type?void 0:rt.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(bt)||[""],s=e.length;s--;)o=Mt.exec(e[s])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(u=rt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=rt.event.special[p]||{},h=rt.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=a[p])||(d=a[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,i,f,c)!==!1||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),rt.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,d,p,f,m,g=rt.hasData(t)&&rt._data(t);if(g&&(c=g.events)){for(e=(e||"").match(bt)||[""],u=e.length;u--;)if(s=Mt.exec(e[u])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(h=rt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,h.remove&&h.remove.call(t,a));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,g.handle)!==!1||rt.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)rt.event.remove(t,p+e[u],n,i,!0);rt.isEmptyObject(c)&&(delete g.handle,rt._removeData(t,"events"))}},trigger:function(e,n,i,r){var o,a,s,l,u,c,h,d=[i||ft],p=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(s=c=i=i||ft,3!==i.nodeType&&8!==i.nodeType&&!It.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,e=e[rt.expando]?e:new rt.Event(p,"object"==typeof e&&e),
e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:rt.makeArray(n,[e]),u=rt.event.special[p]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!rt.isWindow(i)){for(l=u.delegateType||p,It.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(i.ownerDocument||ft)&&d.push(c.defaultView||c.parentWindow||t)}for(h=0;(s=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:u.bindType||p,o=(rt._data(s,"events")||{})[e.type]&&rt._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&rt.acceptData(s)&&(e.result=o.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),n)===!1)&&rt.acceptData(i)&&a&&i[p]&&!rt.isWindow(i)){c=i[a],c&&(i[a]=null),rt.event.triggered=p;try{i[p]()}catch(m){}rt.event.triggered=void 0,c&&(i[a]=c)}return e.result}},dispatch:function(t){t=rt.event.fix(t);var e,n,i,r,o,a=[],s=X.call(arguments),l=(rt._data(this,"events")||{})[t.type]||[],u=rt.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=rt.event.handlers.call(this,t,l),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],o=0;s>o;o++)i=e[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?rt(n,this).index(l)>=0:rt.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[rt.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ot.test(r)?this.mouseHooks:Nt.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new rt.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=o.srcElement||ft),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||ft,r=i.documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=rt.extend(new rt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?rt.event.trigger(r,null,e):rt.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=ft.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===kt&&(t[i]=null),t.detachEvent(i,n))},rt.Event=function(t,e){return this instanceof rt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(t,e)},rt.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!rt.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),nt.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=rt.nodeName(e,"input")||rt.nodeName(e,"button")?e.form:void 0;n&&!rt._data(n,"submitBubbles")&&(rt.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),rt._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&rt.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),nt.changeBubbles||(rt.event.special.change={setup:function(){return Dt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,t,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(t){var e=t.target;Dt.test(e.nodeName)&&!rt._data(e,"changeBubbles")&&(rt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||rt.event.simulate("change",this.parentNode,t,!0)}),rt._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),nt.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){rt.event.simulate(e,t.target,rt.event.fix(t),!0)};rt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=rt._data(i,e);r||i.addEventListener(t,n,!0),rt._data(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=rt._data(i,e)-1;r?rt._data(i,e,r):(i.removeEventListener(t,n,!0),rt._removeData(i,e))}}}),rt.fn.extend({on:function(t,e,n,i,r){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(o in t)this.on(o,e,n,t[o],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===r&&(a=i,i=function(t){return rt().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=rt.guid++)),this.each(function(){rt.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,rt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){rt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?rt.event.trigger(t,e,n,!0):void 0}});var Bt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Rt=/ jQuery\d+="(?:null|\d+)"/g,jt=new RegExp("<(?:"+Bt+")[\\s/>]","i"),Lt=/^\s+/,Ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ht=/<([\w:]+)/,zt=/<tbody/i,Ut=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^$|\/(?:java|ecma)script/i,Kt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yt=m(ft),Zt=Yt.appendChild(ft.createElement("div"));Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,rt.extend({clone:function(t,e,n){var i,r,o,a,s,l=rt.contains(t.ownerDocument,t);if(nt.html5Clone||rt.isXMLDoc(t)||!jt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Zt.innerHTML=t.outerHTML,Zt.removeChild(o=Zt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(i=g(o),s=g(t),a=0;null!=(r=s[a]);++a)i[a]&&k(r,i[a]);if(e)if(n)for(s=s||g(t),i=i||g(o),a=0;null!=(r=s[a]);a++)_(r,i[a]);else _(t,o);return i=g(o,"script"),i.length>0&&x(i,!l&&g(t,"script")),i=s=r=null,o},buildFragment:function(t,e,n,i){for(var r,o,a,s,l,u,c,h=t.length,d=m(e),p=[],f=0;h>f;f++)if(o=t[f],o||0===o)if("object"===rt.type(o))rt.merge(p,o.nodeType?[o]:o);else if(Ut.test(o)){for(s=s||d.appendChild(e.createElement("div")),l=(Ht.exec(o)||["",""])[1].toLowerCase(),c=Xt[l]||Xt._default,s.innerHTML=c[1]+o.replace(Ft,"<$1></$2>")+c[2],r=c[0];r--;)s=s.lastChild;if(!nt.leadingWhitespace&&Lt.test(o)&&p.push(e.createTextNode(Lt.exec(o)[0])),!nt.tbody)for(o="table"!==l||zt.test(o)?"<table>"!==c[1]||zt.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)rt.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(rt.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else p.push(e.createTextNode(o));for(s&&d.removeChild(s),nt.appendChecked||rt.grep(g(p,"input"),v),f=0;o=p[f++];)if((!i||-1===rt.inArray(o,i))&&(a=rt.contains(o.ownerDocument,o),s=g(d.appendChild(o),"script"),a&&x(s),n))for(r=0;o=s[r++];)Wt.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(t,e){for(var n,i,r,o,a=0,s=rt.expando,l=rt.cache,u=nt.deleteExpando,c=rt.event.special;null!=(n=t[a]);a++)if((e||rt.acceptData(n))&&(r=n[s],o=r&&l[r])){if(o.events)for(i in o.events)c[i]?rt.event.remove(n,i):rt.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u?delete n[s]:typeof n.removeAttribute!==kt?n.removeAttribute(s):n[s]=null,G.push(r))}}}),rt.fn.extend({text:function(t){return Pt(this,function(t){return void 0===t?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?rt.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||rt.cleanData(g(n)),n.parentNode&&(e&&rt.contains(n.ownerDocument,n)&&x(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&rt.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&rt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return Pt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Rt,""):void 0;if("string"==typeof t&&!qt.test(t)&&(nt.htmlSerialize||!jt.test(t))&&(nt.leadingWhitespace||!Lt.test(t))&&!Xt[(Ht.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ft,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(rt.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,rt.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var n,i,r,o,a,s,l=0,u=this.length,c=this,h=u-1,d=t[0],p=rt.isFunction(d);if(p||u>1&&"string"==typeof d&&!nt.checkClone&&Vt.test(d))return this.each(function(n){var i=c.eq(n);p&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(u&&(s=rt.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=rt.map(g(s,"script"),b),r=o.length;u>l;l++)i=s,l!==h&&(i=rt.clone(i,!0,!0),r&&rt.merge(o,g(i,"script"))),e.call(this[l],i,l);if(r)for(a=o[o.length-1].ownerDocument,rt.map(o,w),l=0;r>l;l++)i=o[l],Wt.test(i.type||"")&&!rt._data(i,"globalEval")&&rt.contains(a,i)&&(i.src?rt._evalUrl&&rt._evalUrl(i.src):rt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Gt,"")));s=n=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var n,i=0,r=[],o=rt(t),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),rt(o[i])[e](n),Z.apply(r,n.get());return this.pushStack(r)}});var Qt,Jt={};!function(){var t;nt.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=ft.getElementsByTagName("body")[0],n&&n.style?(e=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==kt&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ft.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var te,ee,ne=/^margin/,ie=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),re=/^(top|right|bottom|left)$/;t.getComputedStyle?(te=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},ee=function(t,e,n){var i,r,o,a,s=t.style;return n=n||te(t),a=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||rt.contains(t.ownerDocument,t)||(a=rt.style(t,e)),ie.test(a)&&ne.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):ft.documentElement.currentStyle&&(te=function(t){return t.currentStyle},ee=function(t,e,n){var i,r,o,a,s=t.style;return n=n||te(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),ie.test(a)&&!re.test(e)&&(i=s.left,r=t.runtimeStyle,o=r&&r.left,o&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,n,i,r;n=ft.getElementsByTagName("body")[0],n&&n.style&&(e=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,r=e.appendChild(ft.createElement("div")),r.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight),e.removeChild(r)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=e.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),n.removeChild(i))}var n,i,r,o,a,s,l;n=ft.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,rt.extend(nt,{reliableHiddenOffsets:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),rt.swap=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r};var oe=/alpha\([^)]*\)/i,ae=/opacity\s*=\s*([^)]*)/,se=/^(none|table(?!-c[ea]).+)/,le=new RegExp("^("+Tt+")(.*)$","i"),ue=new RegExp("^([+-])=("+Tt+")","i"),ce={position:"absolute",visibility:"hidden",display:"block"},he={letterSpacing:"0",fontWeight:"400"},de=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ee(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=rt.camelCase(e),l=t.style;if(e=rt.cssProps[s]||(rt.cssProps[s]=E(l,s)),a=rt.cssHooks[e]||rt.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e];if(o=typeof n,"string"===o&&(r=ue.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(rt.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||rt.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var r,o,a,s=rt.camelCase(e);return e=rt.cssProps[s]||(rt.cssProps[s]=E(t.style,s)),a=rt.cssHooks[e]||rt.cssHooks[s],a&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=ee(t,e,i)),"normal"===o&&e in he&&(o=he[e]),""===n||n?(r=parseFloat(o),n===!0||rt.isNumeric(r)?r||0:o):o}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,n,i){return n?se.test(rt.css(t,"display"))&&0===t.offsetWidth?rt.swap(t,ce,function(){return D(t,e,i)}):D(t,e,i):void 0},set:function(t,n,i){var r=i&&te(t);return P(t,n,i?A(t,e,i,nt.boxSizing&&"border-box"===rt.css(t,"boxSizing",!1,r),r):0)}}}),nt.opacity||(rt.cssHooks.opacity={get:function(t,e){return ae.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=rt.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===rt.trim(o.replace(oe,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=oe.test(o)?o.replace(oe,r):o+" "+r)}}),rt.cssHooks.marginRight=T(nt.reliableMarginRight,function(t,e){return e?rt.swap(t,{display:"inline-block"},ee,[t,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Et[i]+e]=o[i]||o[i-2]||o[0];return r}},ne.test(t)||(rt.cssHooks[t+e].set=P)}),rt.fn.extend({css:function(t,e){return Pt(this,function(t,e,n){var i,r,o={},a=0;if(rt.isArray(e)){for(i=te(t),r=e.length;r>a;a++)o[e[a]]=rt.css(t,e[a],!1,i);return o}return void 0!==n?rt.style(t,e,n):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ct(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=N,N.prototype={constructor:N,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(rt.cssNumber[n]?"":"px")},cur:function(){var t=N.propHooks[this.prop];return t&&t.get?t.get(this):N.propHooks._default.get(this)},run:function(t){var e,n=N.propHooks[this.prop];return this.options.duration?this.pos=e=rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[rt.cssProps[t.prop]]||rt.cssHooks[t.prop])?rt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},rt.fx=N.prototype.init,rt.fx.step={};var pe,fe,me=/^(?:toggle|show|hide)$/,ge=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),ve=/queueHooks$/,ye=[B],be={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=ge.exec(e),o=r&&r[3]||(rt.cssNumber[t]?"":"px"),a=(rt.cssNumber[t]||"px"!==o&&+i)&&ge.exec(rt.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,rt.style(n.elem,t,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};rt.Animation=rt.extend(j,{tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],be[n]=be[n]||[],be[n].unshift(e)},prefilter:function(t,e){e?ye.unshift(t):ye.push(t)}}),rt.speed=function(t,e,n){var i=t&&"object"==typeof t?rt.extend({},t):{complete:n||!n&&e||rt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!rt.isFunction(e)&&e};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=rt.isEmptyObject(t),o=rt.speed(e,n,i),a=function(){var e=j(this,rt.extend({},t),o);(r||rt._data(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=rt.timers,a=rt._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ve.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));(e||!n)&&rt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=rt._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=rt.timers,a=i?i.length:0;for(n.finish=!0,rt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var n=rt.fn[e];rt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,i,r)}}),rt.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),rt.timers=[],rt.fx.tick=function(){var t,e=rt.timers,n=0;for(pe=rt.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||rt.fx.stop(),pe=void 0},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){fe||(fe=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(fe),fe=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(t,e){return t=rt.fx?rt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,r;e=ft.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=ft.createElement("select"),r=n.appendChild(ft.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==e.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!t.value,nt.optSelected=r.selected,nt.enctype=!!ft.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!r.disabled,t=ft.createElement("input"),t.setAttribute("value",""),nt.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),nt.radioValue="t"===t.value}();var we=/\r/g;rt.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=rt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,rt(this).val()):t,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(t){return null==t?"":t+""})),e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(we,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(t){var e=rt.find.attr(t,"value");return null!=e?e:rt.trim(rt.text(t))}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],(n.selected||l===r)&&(nt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!rt.nodeName(n.parentNode,"optgroup"))){if(e=rt(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=rt.makeArray(e),a=r.length;a--;)if(i=r[a],rt.inArray(rt.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){return rt.isArray(e)?t.checked=rt.inArray(rt(t).val(),e)>=0:void 0}},nt.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xe,_e,ke=rt.expr.attrHandle,$e=/^(?:checked|selected)$/i,Se=nt.getSetAttribute,Te=nt.input;rt.fn.extend({attr:function(t,e){return Pt(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===kt?rt.prop(t,e,n):(1===o&&rt.isXMLDoc(t)||(e=e.toLowerCase(),i=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?_e:xe)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=rt.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void rt.removeAttr(t,e))},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(bt);if(o&&1===t.nodeType)for(;n=o[r++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)?Te&&Se||!$e.test(n)?t[i]=!1:t[rt.camelCase("default-"+n)]=t[i]=!1:rt.attr(t,n,""),t.removeAttribute(Se?n:i)},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),_e={set:function(t,e,n){return e===!1?rt.removeAttr(t,n):Te&&Se||!$e.test(n)?t.setAttribute(!Se&&rt.propFix[n]||n,n):t[rt.camelCase("default-"+n)]=t[n]=!0,n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ke[e]||rt.find.attr;ke[e]=Te&&Se||!$e.test(e)?function(t,e,i){var r,o;return i||(o=ke[e],ke[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,ke[e]=o),r}:function(t,e,n){return n?void 0:t[rt.camelCase("default-"+e)]?e.toLowerCase():null}}),Te&&Se||(rt.attrHooks.value={set:function(t,e,n){return rt.nodeName(t,"input")?void(t.defaultValue=e):xe&&xe.set(t,e,n)}}),Se||(xe={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},ke.id=ke.name=ke.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},rt.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xe.set},rt.attrHooks.contenteditable={set:function(t,e,n){xe.set(t,""===e?!1:e,n)}},rt.each(["width","height"],function(t,e){rt.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),nt.style||(rt.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ee=/^(?:input|select|textarea|button|object)$/i,Ce=/^(?:a|area)$/i;rt.fn.extend({prop:function(t,e){return Pt(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return t=rt.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!rt.isXMLDoc(t),o&&(e=rt.propFix[e]||e,r=rt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=rt.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}}}),nt.hrefNormalized||rt.each(["href","src"],function(t,e){rt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),nt.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),nt.enctype||(rt.propFix.enctype="encoding");var Pe=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,n,i,r,o,a,s=0,l=this.length,u="string"==typeof t&&t;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(bt)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pe," "):" ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=rt.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,r,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(bt)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pe," "):"")){
for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=t?rt.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):rt.isFunction(t)?this.each(function(n){rt(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=rt(this),o=t.match(bt)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===kt||"boolean"===n)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||t===!1?"":rt._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pe," ").indexOf(e)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Ae=rt.now(),De=/\?/,Ne=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,r=rt.trim(e+"");return r&&!rt.trim(r.replace(Ne,function(t,e,r,o){return n&&e&&(i=0),0===i?t:(n=r||e,i+=!o-!r,"")}))?Function("return "+r)():rt.error("Invalid JSON: "+e)},rt.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+e),n};var Oe,Ie,Me=/#.*$/,Be=/([?&])_=[^&]*/,Re=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Le=/^(?:GET|HEAD)$/,Fe=/^\/\//,He=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ze={},Ue={},qe="*/".concat("*");try{Ie=location.href}catch(Ve){Ie=ft.createElement("a"),Ie.href="",Ie=Ie.href}Oe=He.exec(Ie.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie,type:"GET",isLocal:je.test(Oe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,rt.ajaxSettings),e):H(rt.ajaxSettings,t)},ajaxPrefilter:L(ze),ajaxTransport:L(Ue),ajax:function(t,e){function n(t,e,n,i){var r,c,v,y,w,_=e;2!==b&&(b=2,s&&clearTimeout(s),u=void 0,a=i||"",x.readyState=t>0?4:0,r=t>=200&&300>t||304===t,n&&(y=z(h,x,n)),y=U(h,y,x,r),r?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(rt.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(rt.etag[o]=w)),204===t||"HEAD"===h.type?_="nocontent":304===t?_="notmodified":(_=y.state,c=y.data,v=y.error,r=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),x.status=t,x.statusText=(e||_)+"",r?f.resolveWith(d,[c,_,x]):f.rejectWith(d,[x,_,v]),x.statusCode(g),g=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[x,h,r?c:v]),m.fireWith(d,[x,_]),l&&(p.trigger("ajaxComplete",[x,h]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,a,s,l,u,c,h=rt.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?rt(d):rt.event,f=rt.Deferred(),m=rt.Callbacks("once memory"),g=h.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!c)for(c={};e=Re.exec(a);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return u&&u.abort(e),n(0,e),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||Ie)+"").replace(Me,"").replace(Fe,Oe[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=rt.trim(h.dataType||"*").toLowerCase().match(bt)||[""],null==h.crossDomain&&(i=He.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Oe[1]&&i[2]===Oe[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Oe[3]||("http:"===Oe[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=rt.param(h.data,h.traditional)),F(ze,h,e,x),2===b)return x;l=rt.event&&h.global,l&&0===rt.active++&&rt.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Le.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(De.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Be.test(o)?o.replace(Be,"$1_="+Ae++):o+(De.test(o)?"&":"?")+"_="+Ae++)),h.ifModified&&(rt.lastModified[o]&&x.setRequestHeader("If-Modified-Since",rt.lastModified[o]),rt.etag[o]&&x.setRequestHeader("If-None-Match",rt.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+qe+"; q=0.01":""):h.accepts["*"]);for(r in h.headers)x.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===b))return x.abort();w="abort";for(r in{success:1,error:1,complete:1})x[r](h[r]);if(u=F(Ue,h,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,u.send(v,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return rt.get(t,e,n,"json")},getScript:function(t,e){return rt.get(t,void 0,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,n,i,r){return rt.isFunction(n)&&(r=r||i,i=n,n=void 0),rt.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(t){if(rt.isFunction(t))return this.each(function(e){rt(this).wrapAll(t.call(this,e))});if(this[0]){var e=rt(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return rt.isFunction(t)?this.each(function(e){rt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=rt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(n){rt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||rt.css(t,"display"))},rt.expr.filters.visible=function(t){return!rt.expr.filters.hidden(t)};var We=/%20/g,Ke=/\[\]$/,Ge=/\r?\n/g,Xe=/^(?:submit|button|image|reset|file)$/i,Ye=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var n,i=[],r=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){r(this.name,this.value)});else for(n in t)q(n,t[n],e,r);return i.join("&").replace(We,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&Ye.test(this.nodeName)&&!Xe.test(t)&&(this.checked||!At.test(t))}).map(function(t,e){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(t){return{name:e.name,value:t.replace(Ge,"\r\n")}}):{name:e.name,value:n.replace(Ge,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||W()}:V;var Ze=0,Qe={},Je=rt.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Qe)Qe[t](void 0,!0)}),nt.cors=!!Je&&"withCredentials"in Je,Je=nt.ajax=!!Je,Je&&rt.ajaxTransport(function(t){if(!t.crossDomain||nt.cors){var e;return{send:function(n,i){var r,o=t.xhr(),a=++Ze;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(t.hasContent&&t.data||null),e=function(n,r){var s,l,u;if(e&&(r||4===o.readyState))if(delete Qe[a],e=void 0,o.onreadystatechange=rt.noop,r)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(c){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Qe[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=ft.head||rt("head")[0]||ft.documentElement;return{send:function(i,r){e=ft.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||r(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||rt.expando+"_"+Ae++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=rt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(en,"$1"+r):e.jsonp!==!1&&(e.url+=(De.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||rt.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,tn.push(r)),a&&rt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),rt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||ft;var i=ht.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=rt.buildFragment([t],e,r),r&&r.length&&rt(r).remove(),rt.merge([],i.childNodes))};var nn=rt.fn.load;rt.fn.load=function(t,e,n){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var i,r,o,a=this,s=t.indexOf(" ");return s>=0&&(i=rt.trim(t.slice(s,t.length)),t=t.slice(0,s)),rt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&rt.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,a.html(i?rt("<div>").append(rt.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,r||[t.responseText,e,t])}),this},rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length};var rn=t.document.documentElement;rt.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u,c=rt.css(t,"position"),h=rt(t),d={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=rt.css(t,"top"),l=rt.css(t,"left"),u=("absolute"===c||"fixed"===c)&&rt.inArray("auto",[o,l])>-1,u?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),rt.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):h.css(d)}},rt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return e=o.documentElement,rt.contains(e,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=K(o),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===rt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(n=t.offset()),n.top+=rt.css(t[0],"borderTopWidth",!0),n.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-rt.css(i,"marginTop",!0),left:e.left-n.left-rt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||rn;t&&!rt.nodeName(t,"html")&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||rn})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);rt.fn[t]=function(i){return Pt(this,function(t,i,r){var o=K(t);return void 0===r?o?e in o?o[e]:o.document.documentElement[i]:t[i]:void(o?o.scrollTo(n?rt(o).scrollLeft():r,n?r:rt(o).scrollTop()):t[i]=r)},t,i,arguments.length,null)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=T(nt.pixelPosition,function(t,n){return n?(n=ee(t,e),ie.test(n)?rt(t).position()[e]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){rt.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Pt(this,function(e,n,i){var r;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?rt.css(e,n,a):rt.style(e,n,i,a)},e,o?i:void 0,o,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var on=t.jQuery,an=t.$;return rt.noConflict=function(e){return t.$===rt&&(t.$=an),e&&t.jQuery===rt&&(t.jQuery=on),rt},typeof e===kt&&(t.jQuery=t.$=rt),rt}),function(t,e){"use strict";t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=n.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&t.data("remote")!==!1},handleRemote:function(i){var r,o,a,s,l,u;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,l=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var c=i.data("ujs:submit-button");c&&(a.push(c),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);return u={type:r||"GET",data:a,dataType:l,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[t,r])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(o)},s&&(u.xhrFields={withCredentials:s}),o&&(u.url=o),n.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=n.csrfToken(),l=n.csrfParam(),u=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';l===e||s===e||n.isCrossDomain(r)||(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&u.attr("target",a),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";"undefined"!=typeof t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),r=!1;if(!i)return!0;if(n.fire(t,"confirm")){try{r=n.confirm(i)}catch(o){(console.error||console.log).call(console,o.stack||o)}e=n.fire(t,"confirm:complete",[r])}return r&&e},blankInputs:function(e,n,i){var r,o,a=t(),s=n||"input,textarea",l=e.find(s);return l.each(function(){if(r=t(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val(),o===i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(e){var i=t(this),r=i.data("method"),o=i.data("params"),a=e.metaKey||e.ctrlKey;if(!n.allowAction(i))return n.stopEverything(e);if(!a&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(a&&(!r||"GET"===r)&&!o)return!0;var s=n.handleRemote(i);return s===!1?n.enableElement(i):s.fail(function(){n.enableElement(i)}),!1}return r?(n.handleMethod(i),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=t(this),s=n.isRemote(a);if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")===e&&(r=n.blankInputs(a,n.requiredInputSelector,!1),r&&n.fire(a,"ajax:aborted:required",[r])))return n.stopEverything(i);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var l=n.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(a)},13),l}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this===e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this===e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(){var t,e,n,i,r,o,a,s,l,u,c,h,d,p,f,m,g,v,y,b,w,x,_,k,$,S,T,E,C,P,A,D,N,O,I,M,B,R,j,L,F,H,z,U,q,V,W,K,G,X,Y,Z,Q,J,tt,et,nt=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},it=function(t,e){function n(){this.constructor=t}for(var i in e)rt.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},rt={}.hasOwnProperty,ot=[].slice,at=function(t,e){return function(){return t.apply(e,arguments)}};O={},d=10,Z=!1,j=null,y=null,D=null,H=null,et=null,i={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},k=function(t){var e;return t=new n(t),W(),h(),null!=j&&j.start(),Z&&(e=Q(t.absolute))?($(e),S(t,null,!1)):S(t,X)},Q=function(t){var e;return e=O[t],e&&!e.transitionCacheDisabled?e:void 0},w=function(t){return null==t&&(t=!0),Z=t},b=function(t){return null==t&&(t=!0),u?t?null!=j?j:j=new o("html"):(null!=j&&j.uninstall(),j=null):void 0},S=function(t,e,n){return null==n&&(n=!0),J(i.FETCH,{url:t.absolute}),null!=et&&et.abort(),et=new XMLHttpRequest,et.open("GET",t.withoutHashForIE10compatibility(),!0),et.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),et.setRequestHeader("X-XHR-Referer",H),et.onload=function(){var n;return J(i.RECEIVE,{url:t.absolute}),(n=R())?(z(t),U(),p.apply(null,_(n)),N(),"function"==typeof e&&e(),J(i.LOAD)):document.location.href=v()||t.absolute},j&&n&&(et.onprogress=function(t){return function(t){var e;return e=t.lengthComputable?t.loaded/t.total*100:j.value+(100-j.value)/10,j.advanceTo(e)}}(this)),et.onloadend=function(){return et=null},et.onerror=function(){return document.location.href=t.absolute},et.send()},$=function(t){return null!=et&&et.abort(),p(t.title,t.body),L(t),J(i.RESTORE)},h=function(){var t;return t=new n(y.url),O[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},m(d)},M=function(t){return null==t&&(t=d),/^[\d]+$/.test(t)?d=parseInt(t):void 0},m=function(t){var e,n,r,o,a,s;for(a=Object.keys(O),e=a.map(function(t){return O[t].cachedAt}).sort(function(t,e){return e-t}),s=[],n=0,o=a.length;o>n;n++)r=a[n],O[r].cachedAt<=e[t]&&(J(i.EXPIRE,O[r]),s.push(delete O[r]));return s},p=function(e,n,r,o){return J(i.BEFORE_UNLOAD),document.title=e,document.documentElement.replaceChild(n,document.body),null!=r&&t.update(r),Y(),o&&x(),y=window.history.state,null!=j&&j.done(),J(i.CHANGE),J(i.UPDATE)},x=function(){var t,e,n,i,r,o,a,s,l,u,c,h;for(h=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),n=0,r=h.length;r>n;n++)if(c=h[n],""===(l=c.type)||"text/javascript"===l){for(e=document.createElement("script"),u=c.attributes,i=0,o=u.length;o>i;i++)t=u[i],e.setAttribute(t.name,t.value);c.hasAttribute("async")||(e.async=!1),e.appendChild(document.createTextNode(c.innerHTML)),s=c.parentNode,a=c.nextSibling,s.removeChild(c),s.insertBefore(e,a)}},K=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},Y=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},z=function(t){return(t=new n(t)).absolute!==H?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},U=function(){var t,e;return(t=et.getResponseHeader("X-XHR-Redirected-To"))?(t=new n(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",t.href+e)):void 0},v=function(){var t;return null!=(t=et.getResponseHeader("Location"))&&new n(t).crossOrigin()?t:void 0},W=function(){return H=document.location.href},V=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},q=function(){return y=window.history.state},N=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new n).hasNoHash()?(window.history.replaceState(y,"",t.withoutHash()),document.location.hash=t.hash):void 0},L=function(t){return window.scrollTo(t.positionX,t.positionY)},X=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},f=function(t){var e,n,i;if(null==t||"object"!=typeof t)return t;e=new t.constructor;for(n in t)i=t[n],e[n]=f(i);return e},B=function(t){var e,n;return n=(null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},J=function(t,e){var n;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},I=function(t){return!J(i.BEFORE_CHANGE,{url:t})},R=function(){var t,e,n,i,r,o;return e=function(){var t;return 400<=(t=et.status)&&600>t},o=function(){var t;return null!=(t=et.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},i=function(t){var e,n,i,r,o;for(r=t.querySelector("head").childNodes,o=[],e=0,n=r.length;n>e;e++)i=r[e],null!=("function"==typeof i.getAttribute?i.getAttribute("data-turbolinks-track"):void 0)&&o.push(i.getAttribute("src")||i.getAttribute("href"));return o},t=function(t){var e;return D||(D=i(document)),e=i(t),e.length!==D.length||r(e,D).length!==D.length},r=function(t,e){var n,i,r,o,a;for(t.length>e.length&&(r=[e,t],t=r[0],e=r[1]),o=[],n=0,i=t.length;i>n;n++)a=t[n],nt.call(e,a)>=0&&o.push(a);return o},!e()&&o()&&(n=g(et.responseText),n&&!t(n))?n:void 0},_=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,K(e.querySelector("body")),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},g=function(t){var e;return e=document.documentElement.cloneNode(),e.innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e},n=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype.crossOrigin=function(){return this.origin!==(new t).origin},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),r=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void e.__super__.constructor.apply(this,arguments))}return it(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,n,i,r;for(n=1<=arguments.length?ot.call(arguments,0):[],i=0,r=n.length;r>i;i++)t=n[i],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(n),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(I(this.link.absolute)||tt(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new r(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick());
},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),o=function(){function t(t){this.elementSelector=t,this._trickle=at(this._trickle,this),this.value=0,this.content="",this.speed=300,this.opacity=.99,this.install()}var e;return e="turbolinks-progress-bar",t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)},t.prototype.start=function(){return this.advanceTo(5)},t.prototype.advanceTo=function(t){var e;if(t>(e=this.value)&&100>=e){if(this.value=t,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){return this.value>0?(this.advanceTo(100),this._reset()):void 0},t.prototype._reset=function(){var t;return t=this.opacity,setTimeout(function(t){return function(){return t.opacity=0,t._updateStyle()}}(this),this.speed/2),setTimeout(function(e){return function(){return e.value=0,e.opacity=t,e._withSpeed(0,function(){return e._updateStyle(!0)})}}(this),this.speed)},t.prototype._startTrickle=function(){return this.trickling?void 0:(this.trickling=!0,setTimeout(this._trickle,this.speed))},t.prototype._stopTrickle=function(){return delete this.trickling},t.prototype._trickle=function(){return this.trickling?(this.advanceTo(this.value+Math.random()/2),setTimeout(this._trickle,this.speed)):void 0},t.prototype._withSpeed=function(t,e){var n,i;return n=this.speed,this.speed=t,i=e(),this.speed=n,i},t.prototype._updateStyle=function(t){return null==t&&(t=!1),t&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},t.prototype._createCSSRule=function(){return this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),c=function(t){return setTimeout(t,500)},C=function(){return document.addEventListener("DOMContentLoaded",function(){return J(i.CHANGE),J(i.UPDATE)},!0)},A=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e,n){return jQuery.trim(e.responseText)?J(i.UPDATE):void 0}):void 0},P=function(t){var e,i;return(null!=(i=t.state)?i.turbolinks:void 0)?(e=O[new n(t.state.url).absolute])?(h(),$(e)):tt(t.target.location.href):void 0},E=function(){return V(),q(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(t){return V(),q()},!1),c(function(){return window.addEventListener("popstate",P,!1)})},T=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),l=window.history&&window.history.pushState&&window.history.replaceState&&T,a=!navigator.userAgent.match(/CriOS\//),G="GET"===(F=B("request_method"))||""===F,u=l&&a&&G,s=document.addEventListener&&document.createEvent,s&&(C(),A()),u?(tt=k,E()):tt=function(t){return document.location.href=t},this.Turbolinks={visit:tt,pagesCached:M,enableTransitionCache:w,enableProgressBar:b,allowLinkExtensions:r.allowExtensions,supported:u,EVENTS:f(i)}}.call(this),Blacklight=function(){var t=new Array;return{onLoad:function(e){t.push(e)},activate:function(){for(var e=0;e<t.length;e++)t[e].call()}}}(),$(document).on("page:load",function(){Blacklight.activate()}),$(document).ready(function(){Blacklight.activate()}),function(t){Blacklight.do_search_autofocus_fallback=function(){"undefined"!=typeof Modernizer&&Modernizr.autofocus||t("input[autofocus]").focus()},Blacklight.onLoad(function(){Blacklight.do_search_autofocus_fallback()})}(jQuery),function(t){t.fn.bl_checkbox_submit=function(e){return this.each(function(){function n(t){s.prop("checked",t),l.toggleClass("checked",t),t?(r.find("input[name=_method]").val("delete"),u.text(r.attr("data-present"))):(r.find("input[name=_method]").val("put"),u.text(r.attr("data-absent")))}var i=t.extend({},t.fn.bl_checkbox_submit.defaults,e),r=t(this);r.children().hide(),r.find("input[type=submit]").remove(),r.addClass("form-horizontal");var o=r.attr("data-doc-id")||Math.random(),a=0!=r.find("input[name=_method][value=delete]").size(),s=t('<input type="checkbox">').addClass(i.css_class).attr("id",i.css_class+"_"+o),l=t("<label>").addClass(i.css_class).attr("for",i.css_class+"_"+o).attr("title",r.attr("title")||""),u=t("<span>");l.append(s),l.append(" "),l.append(u);var c=t("<div class='checkbox' />").addClass(i.css_class).append(l);r.append(c),n(a),s.click(function(){return u.text(r.attr("data-inprogress")),l.attr("disabled","disabled"),s.attr("disabled","disabled"),t.ajax({url:r.attr("action"),dataType:"json",type:r.attr("method").toUpperCase(),data:r.serialize(),error:function(){alert("Error"),n(a),l.removeAttr("disabled"),s.removeAttr("disabled")},success:function(t,e,o){0!=o.status?(a=!a,n(a),l.removeAttr("disabled"),s.removeAttr("disabled"),i.success.call(r,a,o.responseJSON)):(alert("Error"),n(a),l.removeAttr("disabled"),s.removeAttr("disabled"))}}),!1})}),this},t.fn.bl_checkbox_submit.defaults={css_class:"bl_checkbox_submit",success:function(){}}}(jQuery),function(t){Blacklight.do_bookmark_toggle_behavior=function(){t(Blacklight.do_bookmark_toggle_behavior.selector).bl_checkbox_submit({css_class:"toggle_bookmark",success:function(e,n){n.bookmarks&&t("[data-role=bookmark-counter]").text(n.bookmarks.count)}})},Blacklight.do_bookmark_toggle_behavior.selector="form.bookmark_toggle",Blacklight.onLoad(function(){Blacklight.do_bookmark_toggle_behavior()})}(jQuery),void 0===Blacklight.ajaxModal&&(Blacklight.ajaxModal={}),Blacklight.ajaxModal.modalSelector="#ajax-modal",Blacklight.ajaxModal.triggerLinkSelector="a[data-ajax-modal~=trigger], a.lightboxLink,a.more_facets_link,.ajax_modal_launch",Blacklight.ajaxModal.triggerFormSelector="form[data-ajax-modal~=trigger], form.ajax_form",Blacklight.ajaxModal.preserveLinkSelector=Blacklight.ajaxModal.modalSelector+" a[data-ajax-modal~=preserve]",Blacklight.ajaxModal.preserveFormSelector=Blacklight.ajaxModal.modalSelector+" form[data-ajax-modal~=preserve]",Blacklight.ajaxModal.containerSelector="[data-ajax-modal~=container]",Blacklight.ajaxModal.modalCloseSelector="[data-ajax-modal~=close], span.ajax-close-modal",Blacklight.ajaxModal.onFailure=function(t){var e="<div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>\xd7</button>Network Error</div>";$(Blacklight.ajaxModal.modalSelector).find(".modal-content").html(e),$(Blacklight.ajaxModal.modalSelector).modal("show")},Blacklight.ajaxModal.receiveAjax=function(t){if(0==t.readyState)Blacklight.ajaxModal.onFailure(t);else{var e=t.responseText,n=$("<div>").append(jQuery.parseHTML(e)).find(Blacklight.ajaxModal.containerSelector).first();0!==n.size()&&(e=n.html()),$(Blacklight.ajaxModal.modalSelector).find(".modal-content").html(e);var i=$.Event("loaded.blacklight.ajax-modal");if($(Blacklight.ajaxModal.modalSelector).trigger(i),i.isDefaultPrevented())return;$(Blacklight.ajaxModal.modalSelector).modal("show")}},Blacklight.ajaxModal.modalAjaxLinkClick=function(t){t.preventDefault();var e=$.ajax({url:$(this).attr("href"),dataType:"script"});e.always(Blacklight.ajaxModal.receiveAjax)},Blacklight.ajaxModal.modalAjaxFormSubmit=function(t){t.preventDefault();var e=$.ajax({url:$(this).attr("action"),data:$(this).serialize(),type:$(this).attr("method"),dataType:"script"});e.always(Blacklight.ajaxModal.receiveAjax)},Blacklight.ajaxModal.setup_modal=function(){var t=$.Event("setup.blacklight.ajax-modal");$("body").trigger(t),t.isDefaultPrevented()||($("body").on("click",Blacklight.ajaxModal.triggerLinkSelector+", "+Blacklight.ajaxModal.preserveLinkSelector,Blacklight.ajaxModal.modalAjaxLinkClick),$("body").on("submit",Blacklight.ajaxModal.triggerFormSelector+", "+Blacklight.ajaxModal.preserveFormSelector,Blacklight.ajaxModal.modalAjaxFormSubmit),$("body").on("loaded.blacklight.ajax-modal",Blacklight.ajaxModal.check_close_ajax_modal),$("body ").on("click",Blacklight.ajaxModal.modalSelector+" a[data-dismiss~=modal]",function(t){t.preventDefault()}))},Blacklight.ajaxModal.check_close_ajax_modal=function(t){$(t.target).find(Blacklight.ajaxModal.modalCloseSelector).length&&(modal_flashes=$(this).find(".flash_messages"),$(t.target).modal("hide"),t.preventDefault(),main_flashes=$("#main-flashes"),main_flashes.append(modal_flashes),modal_flashes.fadeIn(500))},Blacklight.onLoad(function(){Blacklight.ajaxModal.setup_modal()}),function(t){Blacklight.do_search_context_behavior=function(){t("a[data-context-href]").on("click.search-context",Blacklight.handleSearchContextMethod)},Blacklight.handleSearchContextMethod=function(e){var n=t(this),i=n.data("context-href"),r="post",o=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),s=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+i+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />',c='<input name="redirect" value="'+n.attr("href")+'" type="hidden" />';return(e.metaKey||e.ctrlKey)&&(o="_blank"),void 0!==s&&void 0!==a&&(u+='<input name="'+s+'" value="'+a+'" type="hidden" />'),o&&l.attr("target",o),l.hide().append(u).append(c).appendTo("body"),l.submit(),!1},Blacklight.onLoad(function(){Blacklight.do_search_context_behavior()})}(jQuery),function(t){Blacklight.onLoad(function(){t(document).on("click","a[data-toggle=collapse][href='#'], [data-toggle=collapse] a[href='#']",function(t){t.preventDefault()})})}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.6
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.6
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),r=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!r&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(e=r.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),e||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var r=t(i);this.addAriaAndCollapsedClass(e(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=t(this);r.attr("data-target")||i.preventDefault();var o=e(r),a=o.data("bs.collapse"),s=a?"toggle":r.data();n.call(o,s)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.6
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(r).remove(),t(o).each(function(){var i=t(this),r=e(i),o={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(r[0],n.target)||(r.trigger(n=t.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.6",a.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var o=e(r),a=o.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var s={relatedTarget:this};if(o.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=e(i),a=r.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&r.find(o).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.6
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t(o);e&&e.preventDefault(),a.length||(a=r.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.6
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),a=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new n(this,a)),"string"==typeof e?o[e](i):a.show&&o.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),r=i.attr("href"),o=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(o,a,this)})}(jQuery),$(".no-js").removeClass("no-js").addClass("js"),/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e=0,n=Array.prototype.slice;return t.cleanData=function(e){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=t._data(r,"events"),i&&i.remove&&t(r).triggerHandler("remove")}catch(a){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var r,o,a,s,l={},u=e.split(".")[0];return e=e.split(".")[1],r=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[u]=t[u]||{},o=t[u][e],a=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(l[e]=i)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:u,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,r,o=n.call(arguments,1),a=0,s=o.length;s>a;a++)for(i in o[a])r=o[a][i],o[a].hasOwnProperty(i)&&void 0!==r&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=n.call(arguments,1),l=this;return a?this.each(function(){var n,i=t.data(this,r);return"instance"===o?(l=i,!1):i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,r);e?(e.option(o||{}),e._init&&e._init()):t.data(this,r,new i(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,s):n.bind(u,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}}),t.widget}),/* ========================================================================
 * Bootstrap: button.js v3.3.6
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.button"),o="object"==typeof e&&e;r||i.data("bs.button",r=new n(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();e+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(t.proxy(function(){i[r](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),t(n.target).is('input[type="radio"]')||t(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.6
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=o[0].offsetWidth,d=o[0].offsetHeight;if(u){var p=s,f=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+d>f.bottom?"top":"top"==s&&c.top-d<f.top?"bottom":"right"==s&&c.right+h>f.width?"left":"left"==s&&c.left-h<f.left?"right":s,o.removeClass(p).addClass(s)}var m=this.getCalculatedOffset(s,c,h,d);this.applyPlacement(m,s);var g=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-r+l:2*c.top-o+u,p=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][p],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,a,s,o)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var u=e.left-o,c=e.left+o+n;u<a.left?r.left=a.left-u:c>a.right&&(r.left=a.left+a.width-c)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.6
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.6",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.6
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(i);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(e,i,r){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var a=i.find("> .active"),s=r&&t.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery);var HydraEditor=function(t){var e=function(e,n){this.element=t(e),this.options=n,this.controls=t('<span class="input-group-btn field-controls">'),this.remover=t('<button type="button" class="btn btn-danger remove"><i class="icon-white glyphicon-minus"></i><span>Remove</span></button>'),this.adder=t('<button type="button" class="btn btn-success add"><i class="icon-white glyphicon-plus"></i><span>Add</span></button>'),this.fieldWrapperClass=".field-wrapper",this.warningClass=".has-warning",this.listClass=".listing",this.init()};return e.prototype={init:function(){this._addInitialClasses(),this._appendControls(),this._attachEvents(),this._addCallbacks()},_addInitialClasses:function(){this.element.addClass("managed"),t(this.fieldWrapperClass,this.element).addClass("input-group input-append")},_appendControls:function(){t(this.fieldWrapperClass,this.element).append(this.controls),t(this.fieldWrapperClass+":not(:last-child) .field-controls",this.element).append(this.remover),t(".field-controls:last",this.element).append(this.adder)},_attachEvents:function(){var t=this;this.element.on("click",".remove",function(e){t.removeFromList(e)}),this.element.on("click",".add",function(e){t.addToList(e)})},_addCallbacks:function(){this.element.bind("managed_field:add",this.options.add),this.element.bind("managed_field:remove",this.options.remove)},addToList:function(e){e.preventDefault();var n=t(e.target).parents(this.fieldWrapperClass);if(this.inputIsEmpty(n))this.displayEmptyWarning();else{var i=t(this.listClass,this.element);this.clearEmptyWarning(),i.append(this._newField(n))}},inputIsEmpty:function(t){return""===t.children("input.multi-text-field").val()},_newField:function(t){var e=this.createNewField(t);return this._changeControlsToRemove(t),e},createNewField:function(t){return $newField=t.clone(),$newChildren=$newField.children("input"),$newChildren.val("").removeProp("required"),$newChildren.first().focus(),this.element.trigger("managed_field:add",$newChildren.first()),$newField},_changeControlsToRemove:function(e){var n=this.remover.clone();$activeFieldControls=e.children(".field-controls"),t(".add",$activeFieldControls).remove(),$activeFieldControls.prepend(n)},clearEmptyWarning:function(){$listing=t(this.listClass,this.element),$listing.children(this.warningClass).remove()},displayEmptyWarning:function(){$listing=t(this.listClass,this.element);var e=t("<div class='message has-warning'>cannot add new empty field</div>");$listing.children(this.warningClass).remove(),$listing.append(e)},removeFromList:function(e){e.preventDefault();var n=t(e.target).parents(this.fieldWrapperClass);n.remove(),this.element.trigger("managed_field:remove",n)},destroy:function(){t(this.fieldWrapperClass,this.element).removeClass("input-append"),this.element.removeClass("managed")}},e.DEFAULTS={add:null,remove:null},{FieldManager:e}}(jQuery);!function(t){t.fn.manage_fields=function(e){return this.each(function(){var n=t(this),i=n.data("manage_fields"),r=t.extend({},HydraEditor.FieldManager.DEFAULTS,n.data(),"object"==typeof e&&e);i||n.data("manage_fields",i=new HydraEditor.FieldManager(this,r))})}}(jQuery),Blacklight.onLoad(function(){$(".multi_value.form-group").manage_fields()}),function(t){var e=function(){t("#aux-search-submit-header").hide(),t('input[name="works"]').on("change",function(e){t(this).closest("form").submit()})};Blacklight.onLoad(function(){e()})}(jQuery),Blacklight.onLoad(function(){function t(t){$('[data-behavior="extra"][data-id="'+t+'"]').show()}function e(t){$('[data-behavior="extra"][data-id="'+t+'"]').hide()}$('[data-behavior="extra"]').hide(),$(".batch_document_selector").click(function(){this.checked?t($(this).attr("value")):e($(this).attr("value"))})}),/*
 * JavaScript Templates 2.4.1
 * https://github.com/blueimp/JavaScript-Templates
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Inspired by John Resig's JavaScript Micro-Templating:
 * http://ejohn.org/blog/javascript-micro-templating/
 */
function(t){"use strict";var e=function(t,n){var i=/[^\w\-\.:]/.test(t)?new Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+t.replace(e.regexp,e.func)+"';return _s;"):e.cache[t]=e.cache[t]||e(e.load(t));return n?i(n,e):function(t){return i(t,e)}};e.cache={},e.load=function(t){return document.getElementById(t).innerHTML},e.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,e.func=function(t,e,n,i,r,o){return e?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[e]||"\\"+e:n?"="===n?"'+_e("+i+")+'":"'+("+i+"==null?'':"+i+")+'":r?"';":o?"_s+='":void 0},e.encReg=/[<>&"'\x00]/g,e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},e.encode=function(t){return(null==t?"":""+t).replace(e.encReg,function(t){return e.encMap[t]||""})},e.arg="o",e.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return e}):t.tmpl=e}(this),/*
 * jQuery File Upload Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):"object"==typeof exports?t(require("jquery"),require("./vendor/jquery.ui.widget")):t(window.jQuery)}(function(t){"use strict";function e(e){var n="dragover"===e;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var r=i.dataTransfer;r&&-1!==t.inArray("Files",r.types)&&this._trigger(e,t.Event(e,{delegatedEvent:i}))!==!1&&(i.preventDefault(),n&&(r.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,n){return e=this.messages[e]||e.toString(),n&&t.each(n,function(t,n){e=e.replace("{"+t+"}",n)}),e},formData:function(t){return t.serializeArray()},add:function(e,n){return e.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&t(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(e-this.loaded)*(1e3/i)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_initProgressObject:function(e){var n={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,n):e._progress=n},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,n){if(e.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&e.loaded!==e.total)return;n._time=r,i=Math.floor(e.loaded/e.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),n),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)}),e.xhr=function(){return i})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var n,i=this,r=e.files[0],o=e.multipart||!t.support.xhrFileUpload,a="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),o&&!e.blob&&this._isInstanceOf("File",r)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:a,value:e.blob}):t.each(e.files,function(i,r){n.push({name:"array"===t.type(e.paramName)&&e.paramName[i]||a,value:r})})):(i._isInstanceOf("FormData",e.formData)?n=e.formData:(n=new FormData,t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})),e.blob?n.append(a,e.blob,r.name):t.each(e.files,function(r,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append("array"===t.type(e.paramName)&&e.paramName[r]||a,o,o.uploadName||o.name)})),e.data=n):(e.contentType=r.type||"application/octet-stream",e.data=e.blob||r),e.blob=null},_initIframeSettings:function(e){var n=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&n&&n!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var r=t.Deferred(),o=r.promise();return n=n||this.options.context||o,e===!0?r.resolveWith(n,i):e===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(e,n){var i=this,r=function(e){return t.Deferred().resolveWith(i,e).promise()};n.process=function(e,o){return(e||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return n.errorThrown?t.Deferred().rejectWith(i,[n]).promise():r(arguments)}).pipe(e,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)!==!1&&i._onSend(e,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){e.uploadedBytes=e.uploadedBytes||0;var i,r,o=this,a=e.files[0],s=a.size,l=e.uploadedBytes,u=e.maxChunkSize||s,c=this._blobSlice,h=t.Deferred(),d=h.promise();return this._isXHRUpload(e)&&c&&(l||s>u)&&!e.data?n?!0:l>=s?(a.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",a.error])):(r=function(){var n=t.extend({},e),d=n._progress.loaded;n.blob=c.call(a,l,l+u,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&t.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,u){l=o._getUploadedBytes(u)||l+n.chunkSize,d+n.chunkSize-n._progress.loaded&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=a,n.jqXHR=u,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>l?r():h.resolveWith(n.context,[i,a,u])}).fail(function(t,e,i){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),h.rejectWith(n.context,[t,e,i])})},this._enhancePromise(d),d.abort=function(){return i.abort()},r(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=e,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(t,e,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=t,r.textStatus=i.textStatus=e,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(t,e,n,i){this._trigger("always",null,i)},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var i,r,o,a,s=this,l=s._getAJAXSettings(n),u=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",t.Event("send",{delegatedEvent:e}),l)===!1)&&s._getXHRPromise(!1,l.context,r)||s._chunkedUpload(l)||t.ajax(l)).done(function(t,e,n){s._onDone(t,e,n,l)}).fail(function(t,e,n){s._onFail(t,e,n,l)}).always(function(t,e,n){if(s._onAlways(t,e,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=t.Deferred(),this._slots.push(o),a=o.pipe(u)):(this._sequence=this._sequence.pipe(u,u),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(l.context,r),u())},this._enhancePromise(a)):u()},_onAdd:function(e,n){var i,r,o,a,s=this,l=!0,u=t.extend({},this.options,n),c=n.files,h=c.length,d=u.limitMultiFileUploads,p=u.limitMultiFileUploadSize,f=u.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(u),v=0;if(!h)return!1;if(p&&void 0===c[0].size&&(p=void 0),(u.singleFileUploads||d||p)&&this._isXHRUpload(u))if(u.singleFileUploads||p||!d)if(!u.singleFileUploads&&p)for(o=[],i=[],a=0;h>a;a+=1)m+=c[a].size+f,(a+1===h||m+c[a+1].size+f>p||d&&a+1-v>=d)&&(o.push(c.slice(v,a+1)),r=g.slice(v,a+1),r.length||(r=g),i.push(r),v=a+1,m=0);else i=g;else for(o=[],i=[],a=0;h>a;a+=d)o.push(c.slice(a,a+d)),r=g.slice(a,a+d),r.length||(r=g),i.push(r);else o=[c],i=[g];return n.originalFiles=c,t.each(o||c,function(r,a){var u=t.extend({},n);return u.files=o?a:[a],u.paramName=i[r],s._initResponseObject(u),s._initProgressObject(u),s._addConvenienceMethods(e,u),l=s._trigger("add",t.Event("add",{delegatedEvent:e}),u)}),l},_replaceFileInput:function(e){var n=e.fileInput,i=n.clone(!0),r=n.is(document.activeElement);e.fileInputClone=i,t("<form></form>").append(i)[0].reset(),n.after(i).detach(),r&&i.focus(),t.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===n[0]?i[0]:e}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(e,n){var i,r=this,o=t.Deferred(),a=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])},s=function(t){r._handleFileTreeEntries(t,n+e.name+"/").done(function(t){o.resolve(t)}).fail(a)},l=function(){i.readEntries(function(t){t.length?(u=u.concat(t),l()):s(u)},a)},u=[];return n=n||"",e.isFile?e._file?(e._file.relativePath=n,o.resolve(e._file)):e.file(function(t){t.relativePath=n,o.resolve(t)},a):e.isDirectory?(i=e.createReader(),l()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,function(t){return i._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,i,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(i=e.prop("value"),!i)return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i),n._trigger("change",t.Event("change",{delegatedEvent:e}),i)!==!1&&n._onAdd(e,i)})},_onPaste:function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(t.each(n,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)}),this._trigger("paste",t.Event("paste",{delegatedEvent:e}),i)!==!1&&this._onAdd(e,i))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var n=this,i=e.dataTransfer,r={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,n._trigger("drop",t.Event("drop",{delegatedEvent:e}),r)!==!1&&n._onAdd(e,r)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var i=-1!==t.inArray(e,this._specialOptions);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),n=e.pop();return e.shift(),new RegExp(e.join("/"),n)},_isRegExpOption:function(e,n){return"url"!==e&&"string"===t.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var e=this,n=this.options,i=this.element.data();t.each(this.element[0].attributes,function(t,r){var o,a=r.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()}),o=i[a],e._isRegExpOption(a,o)&&(o=e._getRegExp(o)),n[a]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,r=this,o=t.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(e.fileInput).always(function(t){if(!i){if(!t.length)return void o.reject();e.files=t,n=r._onSend(null,e),n.then(function(t,e,n){o.resolve(t,e,n)},function(t,e,n){o.reject(t,e,n)})}}),this._enhancePromise(a)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),/*
 * jQuery File Upload User Interface Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],t):"object"==typeof exports?t(require("jquery"),require("tmpl")):t(window.jQuery,window.tmpl)}(function(t,e){"use strict";t.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(e){return e.result&&t.isArray(e.result.files)?e.result.files:[]},add:function(e,n){if(e.isDefaultPrevented())return!1;var i=t(this),r=i.data("blueimp-fileupload")||i.data("fileupload"),o=r.options;n.context=r._renderUpload(n.files).data("data",n).addClass("processing"),o.filesContainer[o.prependFiles?"prepend":"append"](n.context),r._forceReflow(n.context),r._transition(n.context),n.process(function(){return i.fileupload("process",n)}).always(function(){n.context.each(function(e){t(this).find(".size").text(r._formatFileSize(n.files[e].size))}).removeClass("processing"),r._renderPreviews(n)}).done(function(){n.context.find(".start").prop("disabled",!1),r._trigger("added",e,n)!==!1&&(o.autoUpload||n.autoUpload)&&n.autoUpload!==!1&&n.submit()}).fail(function(){n.files.error&&n.context.each(function(e){var i=n.files[e].error;i&&t(this).find(".error").text(i)})})},send:function(e,n){if(e.isDefaultPrevented())return!1;var i=t(this).data("blueimp-fileupload")||t(this).data("fileupload");return n.context&&n.dataType&&"iframe"===n.dataType.substr(0,6)&&n.context.find(".progress").addClass(!t.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),i._trigger("sent",e,n)},done:function(e,n){if(e.isDefaultPrevented())return!1;var i,r,o=t(this).data("blueimp-fileupload")||t(this).data("fileupload"),a=n.getFilesFromResponse||o.options.getFilesFromResponse,s=a(n);n.context?n.context.each(function(a){var l=s[a]||{error:"Empty file upload result"};r=o._addFinishedDeferreds(),o._transition(t(this)).done(function(){var a=t(this);i=o._renderDownload([l]).replaceAll(a),o._forceReflow(i),o._transition(i).done(function(){n.context=t(this),o._trigger("completed",e,n),o._trigger("finished",e,n),r.resolve()})})}):(i=o._renderDownload(s)[o.options.prependFiles?"prependTo":"appendTo"](o.options.filesContainer),o._forceReflow(i),r=o._addFinishedDeferreds(),o._transition(i).done(function(){n.context=t(this),o._trigger("completed",e,n),o._trigger("finished",e,n),r.resolve()}))},fail:function(e,n){if(e.isDefaultPrevented())return!1;var i,r,o=t(this).data("blueimp-fileupload")||t(this).data("fileupload");n.context?n.context.each(function(a){if("abort"!==n.errorThrown){var s=n.files[a];s.error=s.error||n.errorThrown||n.i18n("unknownError"),r=o._addFinishedDeferreds(),o._transition(t(this)).done(function(){var a=t(this);i=o._renderDownload([s]).replaceAll(a),o._forceReflow(i),o._transition(i).done(function(){n.context=t(this),o._trigger("failed",e,n),o._trigger("finished",e,n),r.resolve()})})}else r=o._addFinishedDeferreds(),o._transition(t(this)).done(function(){t(this).remove(),o._trigger("failed",e,n),o._trigger("finished",e,n),r.resolve()})}):"abort"!==n.errorThrown?(n.context=o._renderUpload(n.files)[o.options.prependFiles?"prependTo":"appendTo"](o.options.filesContainer).data("data",n),o._forceReflow(n.context),r=o._addFinishedDeferreds(),o._transition(n.context).done(function(){n.context=t(this),o._trigger("failed",e,n),o._trigger("finished",e,n),r.resolve()})):(o._trigger("failed",e,n),o._trigger("finished",e,n),o._addFinishedDeferreds().resolve())},progress:function(e,n){if(e.isDefaultPrevented())return!1;var i=Math.floor(n.loaded/n.total*100);n.context&&n.context.each(function(){t(this).find(".progress").attr("aria-valuenow",i).children().first().css("width",i+"%")})},progressall:function(e,n){if(e.isDefaultPrevented())return!1;var i=t(this),r=Math.floor(n.loaded/n.total*100),o=i.find(".fileupload-progress"),a=o.find(".progress-extended");a.length&&a.html((i.data("blueimp-fileupload")||i.data("fileupload"))._renderExtendedProgress(n)),o.find(".progress").attr("aria-valuenow",r).children().first().css("width",r+"%")},start:function(e){if(e.isDefaultPrevented())return!1;var n=t(this).data("blueimp-fileupload")||t(this).data("fileupload");n._resetFinishedDeferreds(),n._transition(t(this).find(".fileupload-progress")).done(function(){n._trigger("started",e)})},stop:function(e){if(e.isDefaultPrevented())return!1;var n=t(this).data("blueimp-fileupload")||t(this).data("fileupload"),i=n._addFinishedDeferreds();t.when.apply(t,n._getFinishedDeferreds()).done(function(){n._trigger("stopped",e)}),n._transition(t(this).find(".fileupload-progress")).done(function(){t(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),t(this).find(".progress-extended").html("&nbsp;"),i.resolve()})},processstart:function(e){return e.isDefaultPrevented()?!1:void t(this).addClass("fileupload-processing")},processstop:function(e){return e.isDefaultPrevented()?!1:void t(this).removeClass("fileupload-processing")},destroy:function(e,n){if(e.isDefaultPrevented())return!1;var i=t(this).data("blueimp-fileupload")||t(this).data("fileupload"),r=function(){i._transition(n.context).done(function(){t(this).remove(),i._trigger("destroyed",e,n)})};n.url?(n.dataType=n.dataType||i.options.dataType,t.ajax(n).done(r).fail(function(){i._trigger("destroyfailed",e,n)})):r()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(e){return e||(e=t.Deferred()),this._finishedUploads.push(e),e},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var e=t(this),n=e.prop("href"),i=e.prop("download"),r="application/octet-stream";e.bind("dragstart",function(t){try{t.originalEvent.dataTransfer.setData("DownloadURL",[r,i,n].join(":"))}catch(e){}})},_formatFileSize:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB"},_formatBitrate:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" Gbit/s":t>=1e6?(t/1e6).toFixed(2)+" Mbit/s":t>=1e3?(t/1e3).toFixed(2)+" kbit/s":t.toFixed(2)+" bit/s"},_formatTime:function(t){var e=new Date(1e3*t),n=Math.floor(t/86400);return n=n?n+"d ":"",n+("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)},_formatPercentage:function(t){return(100*t).toFixed(2)+" %"},_renderExtendedProgress:function(t){return this._formatBitrate(t.bitrate)+" | "+this._formatTime(8*(t.total-t.loaded)/t.bitrate)+" | "+this._formatPercentage(t.loaded/t.total)+" | "+this._formatFileSize(t.loaded)+" / "+this._formatFileSize(t.total)},_renderTemplate:function(e,n){if(!e)return t();var i=e({files:n,formatFileSize:this._formatFileSize,options:this.options});return i instanceof t?i:t(this.options.templatesContainer).html(i).children()},_renderPreviews:function(e){e.context.find(".preview").each(function(n,i){t(i).append(e.files[n].preview)})},_renderUpload:function(t){return this._renderTemplate(this.options.uploadTemplate,t)},_renderDownload:function(t){return this._renderTemplate(this.options.downloadTemplate,t).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(e){e.preventDefault();var n=t(e.currentTarget),i=n.closest(".template-upload"),r=i.data("data");n.prop("disabled",!0),r&&r.submit&&r.submit()},_cancelHandler:function(e){e.preventDefault();var n=t(e.currentTarget).closest(".template-upload,.template-download"),i=n.data("data")||{};i.context=i.context||n,i.abort?i.abort():(i.errorThrown="abort",this._trigger("fail",e,i))},_deleteHandler:function(e){e.preventDefault();var n=t(e.currentTarget);this._trigger("destroy",e,t.extend({context:n.closest(".template-download"),type:"DELETE"},n.data()))},_forceReflow:function(e){return t.support.transition&&e.length&&e[0].offsetWidth},_transition:function(e){var n=t.Deferred();return t.support.transition&&e.hasClass("fade")&&e.is(":visible")?e.bind(t.support.transition.end,function(i){i.target===e[0]&&(e.unbind(t.support.transition.end),n.resolveWith(e))}).toggleClass("in"):(e.toggleClass("in"),n.resolveWith(e)),n},_initButtonBarEventHandlers:function(){var e=this.element.find(".fileupload-buttonbar"),n=this.options.filesContainer;this._on(e.find(".start"),{click:function(t){t.preventDefault(),n.find(".start").click()}}),this._on(e.find(".cancel"),{click:function(t){t.preventDefault(),n.find(".cancel").click()}}),this._on(e.find(".delete"),{click:function(t){t.preventDefault(),n.find(".toggle:checked").closest(".template-download").find(".delete").click(),e.find(".toggle").prop("checked",!1)}}),this._on(e.find(".toggle"),{change:function(e){n.find(".toggle").prop("checked",t(e.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var t=this.options;t.templatesContainer=this.document[0].createElement(t.filesContainer.prop("nodeName")),e&&(t.uploadTemplateId&&(t.uploadTemplate=e(t.uploadTemplateId)),t.downloadTemplateId&&(t.downloadTemplate=e(t.downloadTemplateId)))},_initFilesContainer:function(){var e=this.options;void 0===e.filesContainer?e.filesContainer=this.element.find(".files"):e.filesContainer instanceof t||(e.filesContainer=t(e.filesContainer))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates()},_create:function(){this._super(),this._resetFinishedDeferreds(),t.support.fileInput||this._disableFileInputButton()},enable:function(){var t=!1;this.options.disabled&&(t=!0),this._super(),t&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}),/*
 * jQuery File Upload Processing Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],t):t("object"==typeof exports?require("jquery"):window.jQuery)}(function(t){"use strict";var e=t.blueimp.fileupload.prototype.options.add;t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var r=t(this);i.process(function(){return r.fileupload("process",i)}),e.call(this,n,i)}},processActions:{},_processFile:function(e,n){var i=this,r=t.Deferred().resolveWith(i,[e]),o=r.promise();return this._trigger("process",null,e),t.each(e.processQueue,function(e,r){var a=function(e){return n.errorThrown?t.Deferred().rejectWith(i,[n]).promise():i.processActions[r.action].call(i,e,r)};o=o.pipe(a,r.always&&a)}),o.done(function(){i._trigger("processdone",null,e),i._trigger("processalways",null,e)}).fail(function(){i._trigger("processfail",null,e),i._trigger("processalways",null,e)}),o},_transformProcessQueue:function(e){var n=[];t.each(e.processQueue,function(){var i={},r=this.action,o=this.prefix===!0?r:this.prefix;t.each(this,function(n,r){"string"===t.type(r)&&"@"===r.charAt(0)?i[n]=e[r.slice(1)||(o?o+n.charAt(0).toUpperCase()+n.slice(1):n)]:i[n]=r}),n.push(i)}),e.processQueue=n},processing:function(){return this._processing},process:function(e){var n=this,i=t.extend({},this.options,e);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),t.each(e.files,function(r){var o=r?t.extend({},i):i,a=function(){return e.errorThrown?t.Deferred().rejectWith(n,[e]).promise():n._processFile(o,e)};o.index=r,n._processing+=1,n._processingQueue=n._processingQueue.pipe(a,a).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload Validation Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],t):t("object"==typeof exports?require("jquery"):window.jQuery)}(function(t){"use strict";t.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{getNumberOfFiles:t.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,n){if(n.disabled)return e;var i,r=t.Deferred(),o=this.options,a=e.files[e.index];return(n.minFileSize||n.maxFileSize)&&(i=a.size),"number"===t.type(n.maxNumberOfFiles)&&(o.getNumberOfFiles()||0)+e.files.length>n.maxNumberOfFiles?a.error=o.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(a.type)||n.acceptFileTypes.test(a.name)?i>n.maxFileSize?a.error=o.i18n("maxFileSize"):"number"===t.type(i)&&i<n.minFileSize?a.error=o.i18n("minFileSize"):delete a.error:a.error=o.i18n("acceptFileTypes"),a.error||e.files.error?(e.files.error=!0,r.rejectWith(this,[e])):r.resolveWith(this,[e]),r.promise()}}})}),/*
 * jQuery File Upload Plugin Localization Example 6.5
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
window.locale={fileupload:{errors:{maxFileSize:"File is too big",minFileSize:"File is too small",acceptFileTypes:"Filetype not allowed",maxNumberOfFiles:"Max number of files exceeded",uploadedBytes:"Uploaded bytes exceed file size",emptyResult:"Empty file upload result"},error:"Error",start:"Start",cancel:"Cancel",destroy:"Delete"}};var max_file_size=2e8,max_file_size_str="200 MB",max_total_file_size=5e8,max_file_count=100,max_total_file_size_str="500 MB",first_file_after_max="",filestoupload=0;!function(t){"use strict";t.fn.curationConcernsUploader=function(e){function n(){if(u==filestoupload&&u>0){var e=t("#redirect-loc").html();t(location).attr("href",e)}else c.length>0&&(0==u?t("#fail").show():t("#partial_fail").show(),t("#errmsg").html(c),t("#errmsg").show())}function i(e,n){filestoupload++,t("#terms_of_service").is(":checked")&&t("#main_upload_start").attr("disabled",!1)}function r(e,n){"acceptFileTypes"==n.files[0].error&&t(t("#fileupload .files .cancel button")[n.context[0].rowIndex]).click();var i=parseInt(t("#total_upload_size").val())+n.files[0].size;t("#total_upload_size").val(i),n.files[0].size>max_file_size?(t(t("#fileupload .files .cancel button")[n.context[0].rowIndex]).click(),t("#errmsg").html(n.files[0].name+" is too big. No files over "+max_file_size_str+" can be uploaded."),t("#errmsg").fadeIn("slow")):i>max_total_file_size?(""==first_file_after_max&&(first_file_after_max=n.files[0].name),t(t("#fileupload .files .cancel button")[n.context[0].rowIndex]).click(),t("#total_upload_size").val(max_total_file_size),t("#errmsg").html("All files selected from "+first_file_after_max+" and after will not be uploaded because your total upload is too big. You may not upload more than "+max_total_file_size_str+" in one upload."),t("#errmsg").fadeIn("slow")):filestoupload>max_file_count&&(""==first_file_after_max&&(first_file_after_max=n.files[0].name),t(t("#fileupload .files .cancel button")[n.context[0].rowIndex]).click(),t("#errmsg").html("All files selected from "+first_file_after_max+" and after will not be uploaded because your total number of files is too big. You may not upload more than "+max_file_count+" files in one upload."),t("#errmsg").fadeIn("slow"))}function o(e,n){var i=t.isArray(n.result)&&n.result[0]||{error:"emptyResult"};i.error?(c.length>0&&(c+="<br/>"),c+=i.error):u++}function a(e,n){t("#relative_path").val(n.files[0].webkitRelativePath),l.afterSubmit&&l.afterSubmit(this,e,n)}function s(e,n){if("abort"==n.errorThrown){if(filestoupload--,u==filestoupload&&u>0){var i=t("#redirect-loc").html()+"?file_count="+filestoupload;t(location).attr("href",i)}t("#total_upload_size").val(parseInt(t("#total_upload_size").val())-n.files[0].size)}else{c.length>0&&(c+="<br/>");var r=n.jqXHR.responseJSON;if(422==n.jqXHR.status){var o=r.message+": "+r.errors.files;n.errorThrown=o,c+=o}else r.message?(n.errorThrown=r.message,c+=r.message):c+=n.errorThrown+": "+n.textStatus}}var l=t.extend({},e),u=0,c="";t("#fail").hide(),t("#partial_fail").hide(),t("#errmsg").hide();return this.each(function(){t(this).fileupload(),t("#fileupload").fileupload("option","redirect",window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s")),t("#fileupload").fileupload("option","acceptFileTypes",/^[^\.].*$/i),t("#fileupload").bind("fileuploadstop",n),t("#fileupload").bind("fileuploadadd",i),t("#fileupload").bind("fileuploadadded",r),t("#fileupload").bind("fileuploaddone",o),t("#fileupload").bind("fileuploadsubmit",a),t("#fileupload").bind("fileuploadfail",s)})}}(jQuery),Blacklight.onLoad(function(){$("#fileupload").curationConcernsUploader()}),Blacklight.onLoad(function(){$("abbr").tooltip(),$("[data-toggle='dropdown']").dropdown(),$('a[data-toggle="popover"]').popover({html:!0}).click(function(){return!1})}),
//! OpenSeadragon 1.2.1
//! Built on 2015-01-29
//! Git commit: v1.2.1-0-2f9563d
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
/*
 * OpenSeadragon
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/*
 * Portions of this source file taken from jQuery:
 *
 * Copyright 2011 John Resig
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
/*
 * Portions of this source file taken from mattsnider.com:
 *
 * Copyright (c) 2006-2013 Matt Snider
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
 * OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
 * THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
window.OpenSeadragon=window.OpenSeadragon||function(t){return new OpenSeadragon.Viewer(t)},function(t){t.version={versionStr:"1.2.1",major:parseInt("1",10),minor:parseInt("2",10),revision:parseInt("1",10)};var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==typeof t&&"setInterval"in t},t.type=function(t){return null===t||void 0===t?String(t):e[n.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return void 0===n||i.call(e,n)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0},t.supportsCanvas=function(){var e=document.createElement("canvas");return!(!t.isFunction(e.getContext)||!e.getContext("2d"))}()}(OpenSeadragon),function(t){function e(t,e){return e&&t!=document.body?document.body:t.offsetParent}t.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=arguments.length,l=!1,u=1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},u=2),"object"==typeof a||OpenSeadragon.isFunction(a)||(a={}),s===u&&(a=this,--u);s>u;u++)if(t=arguments[u],null!==t||void 0!==t)for(e in t)n=a[e],i=t[e],a!==i&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(r=OpenSeadragon.isArray(i)))?(r?(r=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},a[e]=OpenSeadragon.extend(l,o,i)):void 0!==i&&(a[e]=i));return a},t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,pixelsPerWheelLine:40,autoResize:!0,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorRotate:!0,degrees:0,opacity:1,layersAspectRatioEpsilon:1e-4,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){var n=arguments;return void 0===n&&(n=[]),e.apply(t,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(n){var i,r,o=new t.Point;for(n=t.getElement(n),i="fixed"==t.getElementStyle(n).position,r=e(n,i);r;)o.x+=n.offsetLeft,o.y+=n.offsetTop,i&&(o=o.plus(t.getPageScroll())),n=r,i="fixed"==t.getElementStyle(n).position,r=e(n,i);return o},getElementOffset:function(e){e=t.getElement(e);var n,i,r=e&&e.ownerDocument,o={top:0,left:0};return r?(n=r.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(o=e.getBoundingClientRect()),i=r==r.window?r:9===r.nodeType?r.defaultView||r.parentWindow:!1,new t.Point(o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0),o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0))):new t.Point},getElementSize:function(e){return e=t.getElement(e),new t.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=t.getElement(e),e.currentStyle}:function(e){return e=t.getElement(e),window.getComputedStyle(e,"")},pointInElement:function(e,n){e=t.getElement(e);var i=t.getElementOffset(e),r=t.getElementSize(e);return n.x>=i.x&&n.x<i.x+r.x&&n.y<i.y+r.y&&n.y>=i.y},getEvent:function(e){return e?t.getEvent=function(t){return t}:t.getEvent=function(){return window.event},t.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.pageX,n.y=e.pageY,n};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,n}}return t.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},n=document.body||{};if("number"==typeof window.pageXOffset)t.getPageScroll=function(){return new t.Point(window.pageXOffset,window.pageYOffset)};else if(n.scrollLeft||n.scrollTop)t.getPageScroll=function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new t.Point(0,0);t.getPageScroll=function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return t.getPageScroll()},setPageScroll:function(e){if("undefined"!=typeof window.scrollTo)t.setPageScroll=function(t){window.scrollTo(t.x,t.y)};else{var n=t.getPageScroll();if(n.x===e.x&&n.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var i=t.getPageScroll();if(i.x!==n.x&&i.y!==n.y)return void(t.setPageScroll=function(t){document.body.scrollLeft=t.x,document.body.scrollTop=t.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,i=t.getPageScroll(),i.x!==n.x&&i.y!==n.y)return void(t.setPageScroll=function(t){document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y});t.setPageScroll=function(t){}}return t.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},n=document.body||{};if("number"==typeof window.innerWidth)t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!n.clientWidth&&!n.clientHeight)throw new Error("Unknown window size, no known technique.");t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)}}return t.getWindowSize()},makeCenteredNode:function(e){e=t.getElement(e);var n=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(n[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(n[1].style,{display:"table-row"}),t.extend(n[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),n[0].appendChild(n[1]),n[1].appendChild(n[2]),n[2].appendChild(e),n[0]},makeNeutralElement:function(t){var e=document.createElement(t),n=e.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",e},now:function(){return Date.now?t.now=Date.now:t.now=function(){return(new Date).getTime()},t.now()},makeTransparentImage:function(e){return t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img");return n.src=e,n},t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<7&&(t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img"),i=null;return i=t.makeNeutralElement("span"),i.style.display="inline-block",n.onload=function(){i.style.width=i.style.width||n.width+"px",i.style.height=i.style.height||n.height+"px",n.onload=null,n=null},n.src=e,i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",i}),t.makeTransparentImage(e)},setElementOpacity:function(e,n,i){var r,o;e=t.getElement(e),i&&!t.Browser.alpha&&(n=Math.round(n)),t.Browser.opacity?e.style.opacity=1>n?n:"":1>n?(r=Math.round(100*n),o="alpha(opacity="+r+")",e.style.filter=o):e.style.filter=""},setElementTouchActionNone:function(e){e=t.getElement(e),"undefined"!=typeof e.style.touchAction?e.style.touchAction="none":"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,n){e=t.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+n+" ")&&(e.className+=" "+n):e.className=n},indexOf:function(t,e,n){return Array.prototype.indexOf?this.indexOf=function(t,e,n){return t.indexOf(e,n)}:this.indexOf=function(t,e,n){var i,r,o=n?n:0;if(!t)throw new TypeError;if(r=t.length,0===r||o>=r)return-1;for(0>o&&(o=r-Math.abs(o)),i=o;r>i;i++)if(t[i]===e)return i;return-1},this.indexOf(t,e,n)},removeClass:function(e,n){var i,r,o=[];for(e=t.getElement(e),i=e.className.split(/\s+/),r=0;r<i.length;r++)i[r]&&i[r]!==n&&o.push(i[r]);e.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,n,i,r){e=t.getElement(e),e.addEventListener(n,i,r)};if(window.attachEvent)return function(e,n,i,r){e=t.getElement(e),e.attachEvent("on"+n,i)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,n,i,r){e=t.getElement(e),e.removeEventListener(n,i,r)};if(window.detachEvent)return function(e,n,i,r){e=t.getElement(e),e.detachEvent("on"+n,i)};throw new Error("No known event model.")}(),cancelEvent:function(e){e=t.getEvent(e),e.preventDefault?t.cancelEvent=function(t){t.preventDefault()}:t.cancelEvent=function(e){e=t.getEvent(e),e.cancel=!0,e.returnValue=!1},t.cancelEvent(e)},stopEvent:function(e){e=t.getEvent(e),e.stopPropagation?t.stopEvent=function(t){t.stopPropagation()}:t.stopEvent=function(e){e=t.getEvent(e),e.cancelBubble=!0},t.stopEvent(e)},createCallback:function(t,e){var n,i=[];for(n=2;n<arguments.length;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;n<arguments.length;n++)r.push(arguments[n]);return e.apply(t,r)}},getUrlParameter:function(t){var e=i[t];return e?e:null},getUrlProtocol:function(t){var e=t.match(/^([a-z]+:)\/\//i);return null===e?window.location.protocol:e[1].toLowerCase()},createAjaxRequest:function(e){var n;try{n=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(i){n=!1}if(n)window.XMLHttpRequest?t.createAjaxRequest=function(t){return t?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:t.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");t.createAjaxRequest=function(){return new XMLHttpRequest}}return t.createAjaxRequest(e)},makeAjaxRequest:function(e,n,i){var r=t.getUrlProtocol(e),o=t.createAjaxRequest("file:"===r);if(!t.isFunction(n))throw new Error("makeAjaxRequest requires a success callback");o.onreadystatechange=function(){if(4==o.readyState){o.onreadystatechange=function(){};var a="http:"===r||"https:"===r?200:0;o.status===a?n(o):(t.console.log("AJAX request returned %d: %s",o.status,e),t.isFunction(i)&&i(o))}};try{o.open("GET",e,!0),o.send(null)}catch(a){var s=a.message,l=t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<10;l&&"undefined"!=typeof a.number&&-2147024891==a.number&&(s+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),t.console.log("%s while making AJAX request: %s",a.name,s),o.onreadystatechange=function(){},t.isFunction(i)&&i(o,a)}},jsonp:function(e){var n,i=e.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+t.now(),a=window[o],s="$1"+o+"$2",l=e.param||"callback",u=e.callback;i=i.replace(/(\=)\?(&|$)|\?\?/i,s),i+=(/\?/.test(i)?"&":"?")+l+"="+o,window[o]=function(e){if(a)window[o]=a;else try{delete window[o]}catch(n){}u&&t.isFunction(u)&&u(e)},n=document.createElement("script"),(void 0!==e.async||!1!==e.async)&&(n.async="async"),e.scriptCharset&&(n.charset=e.scriptCharset),n.src=i,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=void 0)},r.insertBefore(n,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)t.parseXml=function(t){var e,n=null;return e=new DOMParser,n=e.parseFromString(t,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");t.parseXml=function(t){var e=null;return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e}}return t.parseXml(e)},imageFormatSupported:function(t){return t=t?t:"",!!n[t.toLowerCase()]}}),t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var n={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},i={};!function(){var e,n=(navigator.appName,navigator.appVersion),r=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(r.substring(r.indexOf("MSIE")+5,r.indexOf(";",r.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(r.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(r.substring(r.indexOf("Firefox")+8))):r.indexOf("Safari")>=0?(t.Browser.vendor=r.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(r.substring(r.substring(0,r.indexOf("Safari")).lastIndexOf("/")+1,r.indexOf("Safari")))):(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(r)&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(n)}var o,a,s,l=window.location.search.substring(1),u=l.split("&");for(s=0;s<u.length;s++)o=u[s],a=o.indexOf("="),a>0&&(i[o.substring(0,a)]=decodeURIComponent(o.substring(a+1)));t.Browser.alpha=!(t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9||t.Browser.vendor==t.BROWSERS.CHROME&&t.Browser.version<2),t.Browser.opacity=!(t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version<9)}();var r=function(t){};t.console=window.console||{log:r,debug:r,info:r,warn:r,error:r},function(e){var n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(n&&i)t.requestAnimationFrame=function(){return n.apply(e,arguments)},t.cancelAnimationFrame=function(){return i.apply(e,arguments)};else{var r,o=[],a=[],s=0;t.requestAnimationFrame=function(e){return o.push([++s,e]),r||(r=setInterval(function(){if(o.length){var e=t.now(),n=a;for(a=o,o=n;a.length;)a.shift()[1](e)}else clearInterval(r),r=void 0},20)),s},t.cancelAnimationFrame=function(t){var e,n;for(e=0,n=o.length;n>e;e+=1)if(o[e][0]===t)return void o.splice(e,1);for(e=0,n=a.length;n>e;e+=1)if(a[e][0]===t)return void a.splice(e,1)}}}(window),t._processDZIError=function(t){var e=t.getElementsByTagName("Message")[0],n=e.firstChild.nodeValue;throw new Error(n)}}(OpenSeadragon),/*
 * OpenSeadragon - full-screen support functions
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.fullscreenElement},e.requestFullScreen=function(t){return t.requestFullscreen()},e.exitFullScreen=function(){document.exitFullscreen()},e.fullScreenEventName="fullscreenchange",e.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.msFullscreenElement},e.requestFullScreen=function(t){return t.msRequestFullscreen()},e.exitFullScreen=function(){document.msExitFullscreen()},e.fullScreenEventName="MSFullscreenChange",e.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitFullscreenElement},e.requestFullScreen=function(t){return t.webkitRequestFullscreen()},e.exitFullScreen=function(){document.webkitExitFullscreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},e.requestFullScreen=function(t){return t.webkitRequestFullScreen()},e.exitFullScreen=function(){document.webkitCancelFullScreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.mozFullScreenElement},e.requestFullScreen=function(t){return t.mozRequestFullScreen()},e.exitFullScreen=function(){document.mozCancelFullScreen()},e.fullScreenEventName="mozfullscreenchange",e.fullScreenErrorEventName="mozfullscreenerror"),e.isFullScreen=function(){return null!==e.getFullScreenElement()},e.cancelFullScreen=function(){t.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),e.exitFullScreen()},t.extend(t,e)}(OpenSeadragon),/*
 * OpenSeadragon - EventSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.EventSource=function(){this.events={}},t.EventSource.prototype={addHandler:function(e,n,i){var r=this.events[e];r||(this.events[e]=r=[]),n&&t.isFunction(n)&&(r[r.length]={handler:n,userData:i||null})},removeHandler:function(e,n){var i,r=this.events[e],o=[];if(r&&t.isArray(r)){for(i=0;i<r.length;i++)r[i].handler!==n&&o.push(r[i]);this.events[e]=o}},removeAllHandlers:function(t){if(t)this.events[t]=[];else for(var e in this.events)this.events[e]=[]},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,n){var i,r=e.length;for(i=0;r>i;i++)e[i]&&(n.eventSource=t,n.userData=e[i].userData,e[i].handler(n))}):null},raiseEvent:function(t,e){var n=this.getHandler(t);n&&(e||(e={}),n(this,e))}}}(OpenSeadragon),/*
 * OpenSeadragon - MouseTracker
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){var n,i=ft[e.hash],r=i.activePointersLists.length;for(n=0;r>n;n++)i.activePointersLists[n].captureCount>0&&(t.removeEvent(t.MouseTracker.captureElement,"mousemove",i.mousemovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"mouseup",i.mouseupcaptured,!0),t.removeEvent(t.MouseTracker.captureElement,t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",i.pointermovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",i.pointerupcaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"touchmove",i.touchmovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"touchend",i.touchendcaptured,!0),i.activePointersLists[n].captureCount=0);for(n=0;r>n;n++)i.activePointersLists.pop()}function n(n){var i,r,o=ft[n.hash];if(!o.tracking){for(r=0;r<t.MouseTracker.subscribeEvents.length;r++)i=t.MouseTracker.subscribeEvents[r],t.addEvent(n.element,i,o[i],!1);e(n),o.tracking=!0}}function i(n){var i,r,o=ft[n.hash];if(o.tracking){for(r=0;r<t.MouseTracker.subscribeEvents.length;r++)i=t.MouseTracker.subscribeEvents[r],t.removeEvent(n.element,i,o[i],!1);e(n),o.tracking=!1}}function r(e,n){var i=ft[e.hash];if("pointerevent"===n)return{upName:t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:i.pointerupcaptured,moveName:t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:i.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:i.mouseupcaptured,moveName:"mousemove",moveHandler:i.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function o(e,n){var i,o=e.getActivePointersListByType(n);o.captureCount++,1===o.captureCount&&(t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?e.element.setCapture(!0):(i=r(e,t.MouseTracker.havePointerEvents?"pointerevent":n),t.addEvent(t.MouseTracker.captureElement,i.upName,i.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,i.moveName,i.moveHandler,!0)))}function a(e,n){var i,o=e.getActivePointersListByType(n);o.captureCount--,0===o.captureCount&&(t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?e.element.releaseCapture():(i=r(e,t.MouseTracker.havePointerEvents?"pointerevent":n),t.removeEvent(t.MouseTracker.captureElement,i.moveName,i.moveHandler,!0),t.removeEvent(t.MouseTracker.captureElement,i.upName,i.upHandler,!0)))}function s(e){var n;if(t.MouseTracker.unprefixedPointerEvents)n=e.pointerType;else switch(e.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function l(e){return t.getMousePosition(e)}function u(t,e){return c(l(t),e)}function c(e,n){var i=t.getElementOffset(n);return e.minus(i)}function h(e,n){return new t.Point((e.x+n.x)/2,(e.y+n.y)/2)}function d(e,n){e.clickHandler&&t.cancelEvent(n)}function p(e,n){e.dblClickHandler&&t.cancelEvent(n)}function f(e,n){var i;e.keyDownHandler&&(n=t.getEvent(n),i=e.keyDownHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i||t.cancelEvent(n))}function m(e,n){var i;e.keyUpHandler&&(n=t.getEvent(n),i=e.keyUpHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i||t.cancelEvent(n))}function g(e,n){var i;e.keyHandler&&(n=t.getEvent(n),i=e.keyHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i||t.cancelEvent(n))}function v(e,n){var i;e.focusHandler&&(n=t.getEvent(n),i=e.focusHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i===!1&&t.cancelEvent(n))}function y(e,n){var i;e.blurHandler&&(n=t.getEvent(n),i=e.blurHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i===!1&&t.cancelEvent(n))}function b(t,e){x(t,e,e)}function w(e,n){n=t.getEvent(n);var i={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==t.MouseTracker.wheelEventName?i.deltaY=-1/t.DEFAULT_SETTINGS.pixelsPerWheelLine*n.wheelDelta:i.deltaY=n.detail,x(e,i,n)}function x(e,n,i){var r,o=0;o=n.deltaY<0?1:-1,e.scrollHandler&&(r=e.scrollHandler({eventSource:e,pointerType:"mouse",position:u(n,e.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:e.userData}),r===!1&&t.cancelEvent(i))}function _(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}function k(e,n){n=t.getEvent(n),S(e,n)}function $(e,n){n=t.getEvent(n),n.currentTarget===n.relatedTarget||_(n.currentTarget,n.relatedTarget)||S(e,n)}function S(e,n){var i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:t.now()};at(e,n,[i])}function T(e,n){n=t.getEvent(n),C(e,n)}function E(e,n){n=t.getEvent(n),n.currentTarget===n.relatedTarget||_(n.currentTarget,n.relatedTarget)||C(e,n)}function C(e,n){var i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:t.now()};st(e,n,[i])}function P(e){return t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?1===e?0:2===e?2:4===e?1:-1:e}function A(e,n){var i;n=t.getEvent(n),i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:t.now()},lt(e,n,[i],P(n.button))&&(t.stopEvent(n),o(e,"mouse")),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler)&&t.cancelEvent(n)}function D(t,e){O(t,e)}function N(e,n){O(e,n),t.stopEvent(n)}function O(e,n){var i;n=t.getEvent(n),i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:t.now()},ut(e,n,[i],P(n.button))&&a(e,"mouse")}function I(t,e){B(t,e)}function M(e,n){B(e,n),t.stopEvent(n)}function B(e,n){var i;n=t.getEvent(n),i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:t.now()},ct(e,n,[i])}function R(t,e,n){var i,r=n.getLength(),o=[];for(i=0;r>i;i++)o.push(n.getByIndex(i));o.length>0&&(ut(t,e,o,0),n.captureCount=1,a(t,"touch"),st(t,e,o))}function j(e,n){var i,r,a,s,u=n.changedTouches.length,c=[],h=e.getActivePointersListByType("touch");for(i=t.now(),h.getLength()>n.touches.length-u&&(t.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),R(e,n,h)),r=0;u>r;r++)c.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:l(n.changedTouches[r]),currentTime:i});for(at(e,n,c),r=0;r<pt.length;r++)if(pt[r]!==e&&pt[r].isTracking()&&_(pt[r].element,e.element)){for(s=[],a=0;u>a;a++)s.push({id:n.changedTouches[a].identifier,type:"touch",currentPos:l(n.changedTouches[a]),currentTime:i});at(pt[r],n,s)}lt(e,n,c,0)&&(t.stopEvent(n),o(e,"touch")),t.cancelEvent(n)}function L(t,e){H(t,e)}function F(e,n){H(e,n),t.stopEvent(n)}function H(e,n){var i,r,o,s,u=n.changedTouches.length,c=[];for(i=t.now(),r=0;u>r;r++)c.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:l(n.changedTouches[r]),currentTime:i});for(ut(e,n,c,0)&&a(e,"touch"),st(e,n,c),r=0;r<pt.length;r++)if(pt[r]!==e&&pt[r].isTracking()&&_(pt[r].element,e.element)){for(s=[],o=0;u>o;o++)s.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:l(n.changedTouches[o]),currentTime:i});st(pt[r],n,s)}t.cancelEvent(n)}function z(t,e){q(t,e)}function U(e,n){q(e,n),t.stopEvent(n)}function q(e,n){var i,r=n.changedTouches.length,o=[];for(i=0;r>i;i++)o.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:l(n.changedTouches[i]),currentTime:t.now()});ct(e,n,o),t.cancelEvent(n)}function V(t,e){var n,i=e.changedTouches.length,r=[];for(n=0;i>n;n++)r.push({id:e.changedTouches[n].identifier,type:"touch"});ht(t,e,r)}function W(t,e){return e.stopPropagation(),e.preventDefault(),!1}function K(t,e){return e.stopPropagation(),e.preventDefault(),!1}function G(e,n){var i;n.currentTarget===n.relatedTarget||_(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:s(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:t.now()},at(e,n,[i]))}function X(e,n){var i;n.currentTarget===n.relatedTarget||_(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:s(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:t.now()},st(e,n,[i]))}function Y(e,n){var i;i={id:n.pointerId,type:s(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:t.now()},lt(e,n,[i],n.button)&&(t.stopEvent(n),o(e,i.type)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.cancelEvent(n)}function Z(t,e){J(t,e)}function Q(e,n){var i=e.getActivePointersListByType(s(n));i.getById(n.pointerId)&&J(e,n),t.stopEvent(n)}function J(e,n){var i;i={id:n.pointerId,type:s(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:t.now()},ut(e,n,[i],n.button)&&a(e,i.type)}function tt(t,e){nt(t,e)}function et(e,n){var i=e.getActivePointersListByType(s(n));i.getById(n.pointerId)&&nt(e,n),t.stopEvent(n)}function nt(e,n){var i;i={id:n.pointerId,type:s(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:t.now()},ct(e,n,[i])}function it(t,e){var n;n={id:e.pointerId,type:s(e)},ht(t,e,[n])}function rt(t,e){return e.hasOwnProperty("isPrimary")||(0===t.getLength()?e.isPrimary=!0:e.isPrimary=!1),e.speed=0,e.direction=0,e.contactPos=e.currentPos,e.contactTime=e.currentTime,e.lastPos=e.currentPos,e.lastTime=e.currentTime,t.add(e)}function ot(t,e){var n,i;return t.getById(e.id)?(n=t.removeById(e.id),e.hasOwnProperty("isPrimary")||(i=t.getPrimary(),i||(i=t.getByIndex(0),i&&(i.isPrimary=!0)))):n=t.getLength(),n}function at(e,n,i){var r,o,a,s,l=e.getActivePointersListByType(i[0].type),u=i.length;for(r=0;u>r;r++)o=i[r],a=l.getById(o.id),a?(a.insideElement=!0,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime,o=a):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,rt(l,o)),e.enterHandler&&(s=e.enterHandler({eventSource:e,pointerType:o.type,position:c(o.currentPos,e.element),buttons:l.buttons,pointers:e.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==l.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),s===!1&&t.cancelEvent(n))}function st(e,n,i){var r,o,a,s,l=(ft[e.hash],e.getActivePointersListByType(i[0].type)),u=i.length;for(r=0;u>r;r++)o=i[r],a=l.getById(o.id),a&&(a.captured?(a.insideElement=!1,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime):ot(l,a),o=a),e.exitHandler&&(s=e.exitHandler({eventSource:e,pointerType:o.type,position:c(o.currentPos,e.element),buttons:l.buttons,pointers:e.getActivePointerCount(),insideElementPressed:a?a.insideElementPressed:!1,buttonDownAny:0!==l.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),s===!1&&t.cancelEvent(n))}function lt(e,n,i,r){var o,a,s,l,u=ft[e.hash],d=e.getActivePointersListByType(i[0].type),p=i.length;if("undefined"!=typeof n.buttons?d.buttons=n.buttons:t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?0===r?d.buttons+=1:1===r?d.buttons+=4:2===r?d.buttons+=2:3===r?d.buttons+=8:4===r?d.buttons+=16:5===r&&(d.buttons+=32):0===r?d.buttons|=1:1===r?d.buttons|=4:2===r?d.buttons|=2:3===r?d.buttons|=8:4===r?d.buttons|=16:5===r&&(d.buttons|=32),0!==r)return e.nonPrimaryPressHandler&&(o=e.nonPrimaryPressHandler({eventSource:e,pointerType:i[0].type,position:c(i[0].currentPos,e.element),button:r,buttons:d.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),!1;for(a=0;p>a;a++)s=i[a],l=d.getById(s.id),l?(l.captured=!0,l.insideElementPressed=!0,l.insideElement=!0,l.contactPos=s.currentPos,l.contactTime=s.currentTime,l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=s.currentPos,l.currentTime=s.currentTime,s=l):(s.captured=!0,s.insideElementPressed=!0,s.insideElement=!0,rt(d,s)),d.contacts++,(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(e,s),1===d.contacts?e.pressHandler&&(o=e.pressHandler({eventSource:e,pointerType:s.type,position:c(s.contactPos,e.element),buttons:d.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)):2===d.contacts&&e.pinchHandler&&"touch"===s.type&&(u.pinchGPoints=d.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=h(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos));return!0}function ut(e,n,i,r){var o,a,s,l,u,d,p,f=ft[e.hash],m=e.getActivePointersListByType(i[0].type),g=i.length,v=!1,y=!1;if("undefined"!=typeof n.buttons?m.buttons=n.buttons:t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?0===r?m.buttons-=1:1===r?m.buttons-=4:2===r?m.buttons-=2:3===r?m.buttons-=8:4===r?m.buttons-=16:5===r&&(m.buttons-=32):0===r?m.buttons^=-2:1===r?m.buttons^=-5:2===r?m.buttons^=-3:3===r?m.buttons^=-9:4===r?m.buttons^=-17:5===r&&(m.buttons^=-33),0!==r)return e.nonPrimaryReleaseHandler&&(o=e.nonPrimaryReleaseHandler({eventSource:e,pointerType:i[0].type,position:c(i[0].currentPos,e.element),button:r,buttons:m.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),!1;for(l=0;g>l;l++)u=i[l],d=m.getById(u.id),d&&(d.captured&&(d.captured=!1,v=!0,y=!0),d.lastPos=d.currentPos,d.lastTime=d.currentTime,d.currentPos=u.currentPos,d.currentTime=u.currentTime,d.insideElement||ot(m,d),a=d.currentPos,s=d.currentTime,y?(m.contacts--,(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(e,d),0===m.contacts?(e.releaseHandler&&(o=e.releaseHandler({eventSource:e,pointerType:d.type,position:c(a,e.element),buttons:m.buttons,insideElementPressed:d.insideElementPressed,insideElementReleased:d.insideElement,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),e.dragEndHandler&&!d.currentPos.equals(d.contactPos)&&(o=e.dragEndHandler({eventSource:e,pointerType:d.type,position:c(d.currentPos,e.element),speed:d.speed,direction:d.direction,shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),(e.clickHandler||e.dblClickHandler)&&d.insideElement&&(p=s-d.contactTime<=e.clickTimeThreshold&&d.contactPos.distanceTo(a)<=e.clickDistThreshold,e.clickHandler&&(o=e.clickHandler({eventSource:e,pointerType:d.type,position:c(d.currentPos,e.element),quick:p,shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),e.dblClickHandler&&p&&(m.clicks++,1===m.clicks?(f.lastClickPos=a,f.dblClickTimeOut=setTimeout(function(){m.clicks=0},e.dblClickTimeThreshold)):2===m.clicks&&(clearTimeout(f.dblClickTimeOut),m.clicks=0,f.lastClickPos.distanceTo(a)<=e.dblClickDistThreshold&&(o=e.dblClickHandler({eventSource:e,pointerType:d.type,position:c(d.currentPos,e.element),shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),f.lastClickPos=null)))):2===m.contacts&&e.pinchHandler&&"touch"===d.type&&(f.pinchGPoints=m.asArray(),f.lastPinchDist=f.currentPinchDist=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),f.lastPinchCenter=f.currentPinchCenter=h(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos))):e.releaseHandler&&(o=e.releaseHandler({eventSource:e,pointerType:d.type,position:c(a,e.element),buttons:m.buttons,insideElementPressed:d.insideElementPressed,insideElementReleased:d.insideElement,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)));return v}function ct(e,n,i){var r,o,a,s,l,u,d=ft[e.hash],p=e.getActivePointersListByType(i[0].type),f=i.length;for("undefined"!=typeof n.buttons&&(p.buttons=n.buttons),r=0;f>r;r++)o=i[r],a=p.getById(o.id),a?(o.hasOwnProperty("isPrimary")&&(a.isPrimary=o.isPrimary),a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,rt(p,o));e.stopHandler&&"mouse"===i[0].type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout(function(){dt(e,n,i[0].type)},e.stopDelay)),0===p.contacts?e.moveHandler&&(u=e.moveHandler({eventSource:e,pointerType:i[0].type,position:c(i[0].currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),u===!1&&t.cancelEvent(n)):1===p.contacts?(e.moveHandler&&(a=p.asArray()[0],u=e.moveHandler({eventSource:e,pointerType:a.type,position:c(a.currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),u===!1&&t.cancelEvent(n)),e.dragHandler&&(a=p.asArray()[0],l=a.currentPos.minus(a.lastPos),u=e.dragHandler({eventSource:e,pointerType:a.type,position:c(a.currentPos,e.element),buttons:p.buttons,delta:l,speed:a.speed,direction:a.direction,shift:n.shiftKey,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),u===!1&&t.cancelEvent(n))):2===p.contacts&&(e.moveHandler&&(s=p.asArray(),u=e.moveHandler({eventSource:e,pointerType:s[0].type,position:c(h(s[0].currentPos,s[1].currentPos),e.element),buttons:p.buttons,isTouchEvent:"touch"===s[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),u===!1&&t.cancelEvent(n)),e.pinchHandler&&"touch"===i[0].type&&(l=d.pinchGPoints[0].currentPos.distanceTo(d.pinchGPoints[1].currentPos),l!=d.currentPinchDist&&(d.lastPinchDist=d.currentPinchDist,d.currentPinchDist=l,d.lastPinchCenter=d.currentPinchCenter,d.currentPinchCenter=h(d.pinchGPoints[0].currentPos,d.pinchGPoints[1].currentPos),u=e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:d.pinchGPoints,lastCenter:c(d.lastPinchCenter,e.element),center:c(d.currentPinchCenter,e.element),lastDistance:d.lastPinchDist,distance:d.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),u===!1&&t.cancelEvent(n))))}function ht(t,e,n){ut(t,e,n,0),st(t,e,n)}function dt(t,e,n){t.stopHandler&&t.stopHandler({eventSource:t,pointerType:n,position:u(e,t.element),buttons:t.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:e,preventDefaultAction:!1,userData:t.userData})}var pt=[],ft={};t.MouseTracker=function(e){pt.push(this);var n=arguments;t.isPlainObject(e)||(e={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=e.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=e.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=e.userData||null,this.stopDelay=e.stopDelay||50,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.nonPrimaryPressHandler=e.nonPrimaryPressHandler||null,this.releaseHandler=e.releaseHandler||null,this.nonPrimaryReleaseHandler=e.nonPrimaryReleaseHandler||null,this.moveHandler=e.moveHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dblClickHandler=e.dblClickHandler||null,this.dragHandler=e.dragHandler||null,this.dragEndHandler=e.dragEndHandler||null,this.pinchHandler=e.pinchHandler||null,this.stopHandler=e.stopHandler||null,this.keyDownHandler=e.keyDownHandler||null,this.keyUpHandler=e.keyUpHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var i=this;ft[this.hash]={click:function(t){d(i,t)},dblclick:function(t){p(i,t)},keydown:function(t){f(i,t)},keyup:function(t){m(i,t)},keypress:function(t){g(i,t)},focus:function(t){v(i,t)},blur:function(t){y(i,t)},wheel:function(t){b(i,t)},mousewheel:function(t){w(i,t)},DOMMouseScroll:function(t){w(i,t)},MozMousePixelScroll:function(t){w(i,t)},mouseenter:function(t){k(i,t)},mouseleave:function(t){T(i,t)},mouseover:function(t){$(i,t)},mouseout:function(t){E(i,t)},mousedown:function(t){A(i,t)},mouseup:function(t){D(i,t)},mouseupcaptured:function(t){N(i,t)},mousemove:function(t){I(i,t)},mousemovecaptured:function(t){M(i,t)},touchstart:function(t){j(i,t)},touchend:function(t){L(i,t)},touchendcaptured:function(t){F(i,t)},touchmove:function(t){z(i,t)},touchmovecaptured:function(t){U(i,t)},touchcancel:function(t){V(i,t)},gesturestart:function(t){W(i,t)},gesturechange:function(t){K(i,t)},pointerover:function(t){G(i,t)},MSPointerOver:function(t){G(i,t)},pointerout:function(t){X(i,t)},MSPointerOut:function(t){X(i,t)},pointerdown:function(t){Y(i,t)},MSPointerDown:function(t){Y(i,t)},pointerup:function(t){Z(i,t)},MSPointerUp:function(t){Z(i,t)},pointermove:function(t){tt(i,t)},MSPointerMove:function(t){tt(i,t)},pointercancel:function(t){it(i,t)},MSPointerCancel:function(t){it(i,t)},pointerupcaptured:function(t){Q(i,t)},pointermovecaptured:function(t){et(i,t)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},e.startDisabled||this.setTracking(!0)},t.MouseTracker.prototype={destroy:function(){var t;for(i(this),this.element=null,t=0;t<pt.length;t++)if(pt[t]===this){pt.splice(t,1);break}ft[this.hash]=null,delete ft[this.hash]},isTracking:function(){return ft[this.hash].tracking},setTracking:function(t){return t?n(this):i(this),this},getActivePointersListByType:function(e){var n,i,r=ft[this.hash],o=r.activePointersLists.length;for(n=0;o>n;n++)if(r.activePointersLists[n].type===e)return r.activePointersLists[n];return i=new t.MouseTracker.GesturePointList(e),r.activePointersLists.push(i),i},getActivePointerCount:function(){var t,e=ft[this.hash],n=e.activePointersLists.length,i=0;for(t=0;n>t;t++)i+=e.activePointersLists[t].getLength();return i},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},t.MouseTracker.gesturePointVelocityTracker=function(){var e=[],n=0,i=0,r=function(t,e){return t.hash.toString()+e.type+e.id.toString()},o=function(){var n,r,o,a,s,l,u=e.length,c=t.now();for(a=c-i,i=c,n=0;u>n;n++)r=e[n],o=r.gPoint,o.direction=Math.atan2(o.currentPos.y-r.lastPos.y,o.currentPos.x-r.lastPos.x),s=r.lastPos.distanceTo(o.currentPos),r.lastPos=o.currentPos,l=1e3*s/(a+1),o.speed=.75*l+.25*o.speed},a=function(a,s){var l=r(a,s);e.push({guid:l,gPoint:s,lastPos:s.currentPos}),1===e.length&&(i=t.now(),n=window.setInterval(o,50))},s=function(t,i){var o,a=r(t,i),s=e.length;for(o=0;s>o;o++)if(e[o].guid===a){e.splice(o,1),s--,0===s&&window.clearInterval(n);break}};return{addPoint:a,removePoint:s}}(),t.MouseTracker.captureElement=document,t.MouseTracker.wheelEventName=t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t.MouseTracker.supportsMouseCapture=function(){var e=document.createElement("div");return t.isFunction(e.setCapture)&&t.isFunction(e.releaseCapture)}(),t.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",t.MouseTracker.wheelEventName],"DOMMouseScroll"==t.MouseTracker.wheelEventName&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||t.Browser.vendor!==t.BROWSERS.IE)?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?t.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:t.MouseTracker.maxTouchPoints=0,t.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),t.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?t.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:t.MouseTracker.maxTouchPoints=0,t.MouseTracker.haveMouseEnter=!1):(t.MouseTracker.havePointerEvents=!1,t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?(t.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),t.MouseTracker.haveMouseEnter=!0):(t.MouseTracker.subscribeEvents.push("mouseover","mouseout"),t.MouseTracker.haveMouseEnter=!1),t.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.maxTouchPoints=10),t.MouseTracker.GesturePointList=function(t){this._gPoints=[],this.type=t,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(t){return this._gPoints.push(t)},removeById:function(t){var e,n=this._gPoints.length;for(e=0;n>e;e++)if(this._gPoints[e].id===t){this._gPoints.splice(e,1);break}return this._gPoints.length},getByIndex:function(t){return t<this._gPoints.length?this._gPoints[t]:null},getById:function(t){var e,n=this._gPoints.length;for(e=0;n>e;e++)if(this._gPoints[e].id===t)return this._gPoints[e];return null},getPrimary:function(t){var e,n=this._gPoints.length;for(e=0;n>e;e++)if(this._gPoints[e].isPrimary)return this._gPoints[e];return null}}}(OpenSeadragon),/*
 * OpenSeadragon - Control
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},t.Control=function(e,n,i){var r=e.parentNode;"number"==typeof n&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer="undefined"==typeof n.attachToViewer?!0:n.attachToViewer,this.autoFade="undefined"==typeof n.autoFade?!0:n.autoFade,this.element=e,this.anchor=n.anchor,this.container=i,this.anchor==t.ControlAnchor.ABSOLUTE?(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==t.ControlAnchor.TOP_RIGHT||this.anchor==t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(e){this.wrapper.style.display=e?this.anchor==t.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(e){this.element[t.SIGNAL]&&t.Browser.vendor==t.BROWSERS.IE?t.setElementOpacity(this.element,e,!0):t.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),/*
 * OpenSeadragon - ControlDock
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(t,e){var n,i=t.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==e)return n;return-1}t.ControlDock=function(e){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("div"),controls:[]},e),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<r.length;i++)n=r[i],this.controls[n]=t.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,i){n=t.getElement(n);var r=null;if(!(e(this,n)>=0)){switch(i.anchor){case t.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:r=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case t.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new t.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){n=t.getElement(n);var i=e(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;t>=0;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;e>=0;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),/*
 * OpenSeadragon - Viewer
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function($){function _getSafeElemSize(t){return t=$.getElement(t),new $.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function getTileSourceImplementation(viewer,tileSource,successCallback,failCallback){var _this=viewer;"string"==$.type(tileSource)&&(tileSource.match(/\s*<.*/)?tileSource=$.parseXml(tileSource):tileSource.match(/\s*[\{\[].*/)&&(tileSource=eval("("+tileSource+")"))),setTimeout(function(){if("string"==$.type(tileSource))tileSource=new $.TileSource(tileSource,function(t){successCallback(t.tileSource)}),tileSource.addHandler("open-failed",function(t){failCallback(t)});else if($.isPlainObject(tileSource)||tileSource.nodeType)if($.isFunction(tileSource.getTileUrl)){var t=new $.TileSource(tileSource);t.getTileUrl=tileSource.getTileUrl,successCallback(t)}else{var e=$.TileSource.determineType(_this,tileSource);if(!e)return void failCallback({message:"Unable to load TileSource",source:tileSource});var n=e.prototype.configure.apply(_this,[tileSource]),i=new e(n);successCallback(i)}else successCallback(tileSource)},1)}function openTileSource(t,e){var n,i=t;return i.source&&i.close(),THIS[i.hash].prevContainerSize=_getSafeElemSize(i.container),i.collectionMode?(i.source=new $.TileSourceCollection({rows:i.collectionRows,layout:i.collectionLayout,tileSize:i.collectionTileSize,tileSources:i.tileSources,tileMargin:i.collectionTileMargin}),i.viewport=i.viewport?i.viewport:new $.Viewport({collectionMode:!0,collectionTileSource:i.source,containerSize:THIS[i.hash].prevContainerSize,contentSize:i.source.dimensions,springStiffness:i.springStiffness,animationTime:i.animationTime,showNavigator:!1,minZoomImageRatio:1,maxZoomPixelRatio:1,viewer:i,degrees:i.degrees})):(e&&(i.source=e),i.viewport=i.viewport?i.viewport:new $.Viewport({containerSize:THIS[i.hash].prevContainerSize,contentSize:i.source.dimensions,springStiffness:i.springStiffness,animationTime:i.animationTime,minZoomImageRatio:i.minZoomImageRatio,maxZoomPixelRatio:i.maxZoomPixelRatio,visibilityRatio:i.visibilityRatio,wrapHorizontal:i.wrapHorizontal,wrapVertical:i.wrapVertical,defaultZoomLevel:i.defaultZoomLevel,minZoomLevel:i.minZoomLevel,maxZoomLevel:i.maxZoomLevel,viewer:i,degrees:i.degrees,navigatorRotate:i.navigatorRotate,homeFillsViewer:i.homeFillsViewer})),i.preserveViewport&&i.viewport.resetContentSize(i.source.dimensions),i.preserveOverlays&&(i.overlays=i.currentOverlays),i.source.overlays=i.source.overlays||[],i.drawer=new $.Drawer({viewer:i,source:i.source,viewport:i.viewport,element:i.drawersContainer,opacity:i.opacity,maxImageCacheCount:i.maxImageCacheCount,imageLoaderLimit:i.imageLoaderLimit,minZoomImageRatio:i.minZoomImageRatio,wrapHorizontal:i.wrapHorizontal,wrapVertical:i.wrapVertical,immediateRender:i.immediateRender,blendTime:i.blendTime,alwaysBlend:i.alwaysBlend,minPixelRatio:i.collectionMode?0:i.minPixelRatio,timeout:i.timeout,debugMode:i.debugMode,debugGridColor:i.debugGridColor,crossOriginPolicy:i.crossOriginPolicy}),i.drawers=[i.drawer],i.drawer.canRotate()||(i.rotateLeft&&(n=i.buttons.buttons.indexOf(i.rotateLeft),i.buttons.buttons.splice(n,1),i.buttons.element.removeChild(i.rotateLeft.element)),i.rotateRight&&(n=i.buttons.buttons.indexOf(i.rotateRight),i.buttons.buttons.splice(n,1),i.buttons.element.removeChild(i.rotateRight.element))),i.showNavigator&&!i.collectionMode&&(i.navigator?i.navigator.open(e):i.navigator=new $.Navigator({id:i.navigatorId,position:i.navigatorPosition,sizeRatio:i.navigatorSizeRatio,maintainSizeRatio:i.navigatorMaintainSizeRatio,top:i.navigatorTop,left:i.navigatorLeft,width:i.navigatorWidth,height:i.navigatorHeight,autoResize:i.navigatorAutoResize,tileSources:e,tileHost:i.tileHost,prefixUrl:i.prefixUrl,viewer:i,navigatorRotate:i.navigatorRotate})),i.showReferenceStrip&&!i.referenceStrip&&(i.referenceStrip=new $.ReferenceStrip({id:i.referenceStripElement,position:i.referenceStripPosition,sizeRatio:i.referenceStripSizeRatio,scroll:i.referenceStripScroll,height:i.referenceStripHeight,width:i.referenceStripWidth,tileSources:i.tileSources,tileHost:i.tileHost,prefixUrl:i.prefixUrl,viewer:i})),THIS[i.hash].animating=!1,THIS[i.hash].forceRedraw=!0,i._updateRequestId=scheduleUpdate(i,updateMulti),VIEWERS[i.hash]=i,loadOverlays(i),i.raiseEvent("open",{source:e}),i}function loadOverlays(t){t.currentOverlays=[];for(var e=0;e<t.overlays.length;e++)t.currentOverlays[e]=getOverlayObject(t,t.overlays[e]);for(var n=0;n<t.source.overlays.length;n++)t.currentOverlays[e+n]=getOverlayObject(t,t.source.overlays[n])}function getOverlayObject(t,e){if(e instanceof $.Overlay)return e;var n=null;if(e.element)n=$.getElement(e.element);else{var i=e.id?e.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());n=$.getElement(e.id),n||(n=document.createElement("a"),n.href="#/overlay/"+i),n.id=i,$.addClass(n,e.className?e.className:"openseadragon-overlay")}var r=e.location;r||(r=e.width&&e.height?void 0!==e.px?t.viewport.imageToViewportRectangle(new $.Rect(e.px,e.py,e.width,e.height)):new $.Rect(e.x,e.y,e.width,e.height):void 0!==e.px?t.viewport.imageToViewportCoordinates(new $.Point(e.px,e.py)):new $.Point(e.x,e.y));var o=e.placement;return o&&"string"===$.type(o)&&(o=$.OverlayPlacement[e.placement.toUpperCase()]),new $.Overlay({element:n,location:r,placement:o,onDraw:e.onDraw,checkResize:e.checkResize})}function getOverlayIndex(t,e){var n;for(n=t.length-1;n>=0;n--)if(t[n].element===e)return n;return-1}function drawOverlays(t,e,n){var i,r=e.length;for(i=0;r>i;i++)e[i].drawHTML(n,t)}function scheduleUpdate(t,e){return $.requestAnimationFrame(function(){e(t)})}function scheduleControlsFade(t){$.requestAnimationFrame(function(){updateControlsFade(t)})}function beginControlsAutoHide(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=$.now()+t.controlsFadeDelay,window.setTimeout(function(){scheduleControlsFade(t)},t.controlsFadeDelay))}function updateControlsFade(t){var e,n,i,r;if(t.controlsShouldFade){for(e=$.now(),n=e-t.controlsFadeBeginTime,i=1-n/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),r=t.controls.length-1;r>=0;r--)t.controls[r].autoFade&&t.controls[r].setOpacity(i);i>0&&scheduleControlsFade(t)}}function abortControlsAutoHide(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;e>=0;e--)t.controls[e].setOpacity(1)}function onFocus(){abortControlsAutoHide(this)}function onBlur(){beginControlsAutoHide(this)}function onCanvasKeyDown(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(new $.Point(0,-.05)),this.viewport.applyConstraints(),!1;case 40:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(new $.Point(0,.05)),this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(new $.Point(-.05,0)),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(new $.Point(.05,0)),this.viewport.applyConstraints(),!1;default:return!0}}function onCanvasKeyPress(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(new $.Point(0,-.05)),this.viewport.applyConstraints(),!1;case 115:case 83:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(new $.Point(0,.05)),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(new $.Point(-.05,0)),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(new $.Point(.05,0)),this.viewport.applyConstraints(),!1;default:return!0}}function onCanvasClick(t){var e,n=document.activeElement==this.canvas;n||this.canvas.focus(),!t.preventDefaultAction&&this.viewport&&t.quick&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.clickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-click",{tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasDblClick(t){var e;!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.dblClickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-double-click",{tracker:t.eventSource,position:t.position,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasDrag(t){var e;!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta.negate()),e.flickEnabled),this.constrainDuringPan&&this.viewport.applyConstraints()),this.raiseEvent("canvas-drag",{tracker:t.eventSource,position:t.position,delta:t.delta,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasDragEnd(t){var e;if(!t.preventDefaultAction&&this.viewport){if(e=this.gestureSettingsByDeviceType(t.pointerType),e.flickEnabled&&t.speed>=e.flickMinSpeed){var n=e.flickMomentum*(t.speed*Math.cos(t.direction-Math.PI/180*this.viewport.degrees)),i=e.flickMomentum*(t.speed*Math.sin(t.direction-Math.PI/180*this.viewport.degrees)),r=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),o=this.viewport.pointFromPixel(new $.Point(r.x-n,r.y-i));this.panHorizontal||(o.x=r.x),this.panVertical||(o.y=r.y),this.viewport.panTo(o,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasEnter(t){this.raiseEvent("canvas-enter",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function onCanvasExit(t){this.raiseEvent("canvas-exit",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function onCanvasPress(t){this.raiseEvent("canvas-press",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function onCanvasRelease(t){this.raiseEvent("canvas-release",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function onCanvasNonPrimaryPress(t){this.raiseEvent("canvas-nonprimary-press",{tracker:t.eventSource,position:t.position,pointerType:t.pointerType,button:t.button,buttons:t.buttons,originalEvent:t.originalEvent})}function onCanvasNonPrimaryRelease(t){this.raiseEvent("canvas-nonprimary-release",{tracker:t.eventSource,position:t.position,pointerType:t.pointerType,button:t.button,buttons:t.buttons,originalEvent:t.originalEvent})}function onCanvasPinch(t){var e,n,i,r;if(!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.pinchToZoom&&(n=this.viewport.pointFromPixel(t.center,!0),i=this.viewport.pointFromPixel(t.lastCenter,!0),r=i.minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(t.distance/t.lastDistance,n,!0),this.viewport.panBy(r,!0),this.viewport.applyConstraints()),e.pinchRotate)){var o=Math.atan2(t.gesturePoints[0].currentPos.y-t.gesturePoints[1].currentPos.y,t.gesturePoints[0].currentPos.x-t.gesturePoints[1].currentPos.x),a=Math.atan2(t.gesturePoints[0].lastPos.y-t.gesturePoints[1].lastPos.y,t.gesturePoints[0].lastPos.x-t.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-a)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:t.eventSource,gesturePoints:t.gesturePoints,lastCenter:t.lastCenter,center:t.center,lastDistance:t.lastDistance,distance:t.distance,shift:t.shift,originalEvent:t.originalEvent}),!1}function onCanvasScroll(t){var e,n;return!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.scrollToZoom&&(n=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(n,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),!1}function onContainerEnter(t){THIS[this.hash].mouseInside=!0,abortControlsAutoHide(this),this.raiseEvent("container-enter",{tracker:t.eventSource,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function onContainerExit(t){t.pointers<1&&(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-exit",{tracker:t.eventSource,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function updateMulti(t){return t.source?(updateOnce(t),void(t.source&&(t._updateRequestId=scheduleUpdate(t,updateMulti)))):void(t._updateRequestId=null)}function updateOnce(t){var e,n;if(t.source){if(t.autoResize&&(e=_getSafeElemSize(t.container),!e.equals(THIS[t.hash].prevContainerSize))){var i=t.viewport.getBounds(),r=t.viewport.getCenter();resizeViewportAndRecenter(t,e,i,r),THIS[t.hash].prevContainerSize=e,THIS[t.hash].forceRedraw=!0}n=t.viewport.update(),t.referenceStrip&&(n=t.referenceStrip.update(t.viewport)||n),!THIS[t.hash].animating&&n&&(t.raiseEvent("animation-start"),abortControlsAutoHide(t)),n?(updateDrawers(t),drawOverlays(t.viewport,t.currentOverlays,t.overlaysContainer),t.navigator&&t.navigator.update(t.viewport),t.raiseEvent("animation")):(THIS[t.hash].forceRedraw||drawersNeedUpdate(t))&&(updateDrawers(t),drawOverlays(t.viewport,t.currentOverlays,t.overlaysContainer),t.navigator&&t.navigator.update(t.viewport),THIS[t.hash].forceRedraw=!1),THIS[t.hash].animating&&!n&&(t.raiseEvent("animation-finish"),THIS[t.hash].mouseInside||beginControlsAutoHide(t)),THIS[t.hash].animating=n}}function resizeViewportAndRecenter(t,e,n,i){var r=t.viewport;r.resize(e,!0);var o=1/t.source.aspectRatio,a=n.width<=1?n.width:1,s=n.height<=o?n.height:o,l=new $.Rect(i.x-a/2,i.y-s/2,a,s);r.fitBounds(l,!0)}function updateDrawers(t){for(var e=0;e<t.drawers.length;e++)t.drawers[e].update()}function drawersNeedUpdate(t){for(var e=0;e<t.drawers.length;e++)if(t.drawers[e].needsUpdate())return!0;return!1}function resolveUrl(t,e){return t?t+e:e}function beginZoomingIn(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function beginZoomingOut(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=1/this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function endZooming(){THIS[this.hash].zooming=!1}function scheduleZoom(t){$.requestAnimationFrame($.delegate(t,doZoom))}function doZoom(){var t,e,n;THIS[this.hash].zooming&&this.viewport&&(t=$.now(),e=t-THIS[this.hash].lastZoomTime,n=Math.pow(THIS[this.hash].zoomFactor,e/1e3),this.viewport.zoomBy(n),this.viewport.applyConstraints(),THIS[this.hash].lastZoomTime=t,scheduleZoom(this))}function doSingleZoomIn(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function doSingleZoomOut(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function lightUp(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function onHome(){this.viewport&&this.viewport.goHome()}function onFullScreen(){this.isFullPage()&&!$.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function onRotateLeft(){if(this.viewport){var t=this.viewport.getRotation();0===t?t=270:t-=90,this.viewport.setRotation(t)}}function onRotateRight(){if(this.viewport){var t=this.viewport.getRotation();270===t?t=0:t+=90,this.viewport.setRotation(t)}}function onPrevious(){var t=THIS[this.hash].sequence-1;this.navPrevNextWrap&&0>t&&(t+=this.tileSources.length),this.goToPage(t)}function onNext(){var t=THIS[this.hash].sequence+1;this.navPrevNextWrap&&t>=this.tileSources.length&&(t=0),this.goToPage(t)}var THIS={},VIEWERS={};$.Viewer=function(t){var e,n=arguments,i=this;if($.isPlainObject(t)||(t={id:n[0],xmlPath:n.length>1?n[1]:void 0,prefixUrl:n.length>2?n[2]:void 0,controls:n.length>3?n[3]:void 0,overlays:n.length>4?n[4]:void 0}),t.config&&($.extend(!0,t,t.config),delete t.config),$.extend(!0,this,{id:t.id,hash:t.hash||t.id,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,drawers:[],drawersContainer:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},$.DEFAULT_SETTINGS,t),"undefined"==typeof this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");"undefined"!=typeof THIS[this.hash]&&$.console.warn("Hash "+this.hash+" has already been used."),THIS[this.hash]={fsBoundsDelta:new $.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,sequenced:!1,sequence:0,fullPage:!1,onfullscreenchange:null},this._updateRequestId=null,this.currentOverlays=[],$.EventSource.call(this),this.addHandler("open-failed",function(t){var e=$.getString("Errors.OpenFailed",t.eventSource,t.message);i._showMessage(e)}),$.ControlDock.call(this,t);var r;for(this.xmlPath&&(this.tileSources=[this.xmlPath]),this.tileSources&&($.isArray(this.tileSources)?(this.tileSources.length>1&&(THIS[this.hash].sequenced=!0),this.initialPage>this.tileSources.length-1&&(this.initialPage=this.tileSources.length-1),r=this.tileSources[this.initialPage],THIS[this.hash].sequence=this.initialPage):r=this.tileSources),this.element=this.element||document.getElementById(this.id),this.canvas=$.makeNeutralElement("div"),this.drawersContainer=$.makeNeutralElement("div"),this.overlaysContainer=$.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),$.setElementTouchActionNone(this.canvas),this.canvas.tabIndex=t.tabIndex||0,this.container.className="openseadragon-container",function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.canvas.appendChild(this.drawersContainer),this.canvas.appendChild(this.overlaysContainer),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new $.MouseTracker({element:this.canvas,startDisabled:this.mouseNavEnabled?!1:!0,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:$.delegate(this,onCanvasKeyDown),keyHandler:$.delegate(this,onCanvasKeyPress),clickHandler:$.delegate(this,onCanvasClick),dblClickHandler:$.delegate(this,onCanvasDblClick),dragHandler:$.delegate(this,onCanvasDrag),dragEndHandler:$.delegate(this,onCanvasDragEnd),enterHandler:$.delegate(this,onCanvasEnter),exitHandler:$.delegate(this,onCanvasExit),pressHandler:$.delegate(this,onCanvasPress),releaseHandler:$.delegate(this,onCanvasRelease),nonPrimaryPressHandler:$.delegate(this,onCanvasNonPrimaryPress),nonPrimaryReleaseHandler:$.delegate(this,onCanvasNonPrimaryRelease),scrollHandler:$.delegate(this,onCanvasScroll),pinchHandler:$.delegate(this,onCanvasPinch)}),this.outerTracker=new $.MouseTracker({element:this.container,startDisabled:this.mouseNavEnabled?!1:!0,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:$.delegate(this,onContainerEnter),exitHandler:$.delegate(this,onContainerExit)}),this.toolbar&&(this.toolbar=new $.ControlDock({element:this.toolbar})),this.bindStandardControls(),this.bindSequenceControls(),r&&(this.open(r),this.tileSources.length>1&&this._updateSequenceButtons(this.initialPage)),e=0;e<this.customControls.length;e++)this.addControl(this.customControls[e].id,{anchor:this.customControls[e].anchor});$.requestAnimationFrame(function(){beginControlsAutoHide(i)})},$.extend($.Viewer.prototype,$.EventSource.prototype,$.ControlDock.prototype,{isOpen:function(){return!!this.source},openDzi:function(t){return this.open(t)},openTileSource:function(t){return this.open(t)},open:function(t){var e=this;return e._hideMessage(),getTileSourceImplementation(e,t,function(t){openTileSource(e,t)},function(t){e.raiseEvent("open-failed",t)}),this},close:function(){return THIS[this.hash]?(null!==this._updateRequestId&&($.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),this.drawersContainer.innerHTML="",this.drawer&&this.drawer.destroy(),this.source=null,this.drawer=null,this.drawers=[],this.viewport=this.preserveViewport?this.viewport:null,VIEWERS[this.hash]=null,delete VIEWERS[this.hash],this.raiseEvent("close"),this):this},destroy:function(){if(this.close(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),THIS[this.hash]=null,delete THIS[this.hash],this.canvas=null,this.container=null,this.element=null},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this.raiseEvent("mouse-enabled",{enabled:t}),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;t<this.controls.length;t++)e=e&&this.controls[t].isVisibile();return e},setControlsEnabled:function(t){return t?abortControlsAutoHide(this):beginControlsAutoHide(this),this.raiseEvent("controls-enabled",{enabled:t}),this},isFullPage:function(){return THIS[this.hash].fullPage},setFullPage:function(t){var e,n,i=document.body,r=i.style,o=document.documentElement.style,a=this;if(t==this.isFullPage())return this;var s={fullPage:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",s),s.preventDefaultAction)return this;if(t){for(this.elementSize=$.getElementSize(this.element),this.pageScroll=$.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=r.margin,this.docMargin=o.margin,r.margin="0",o.margin="0",this.bodyPadding=r.padding,this.docPadding=o.padding,r.padding="0",o.padding="0",this.bodyWidth=r.width,this.bodyHeight=r.height,r.width="100%",r.height="100%",this.previousBody=[],THIS[this.hash].prevElementParent=this.element.parentNode,THIS[this.hash].prevNextSibling=this.element.nextSibling,THIS[this.hash].prevElementWidth=this.element.style.width,THIS[this.hash].prevElementHeight=this.element.style.height,e=i.childNodes.length,n=0;e>n;n++)this.previousBody.push(i.childNodes[0]),i.removeChild(i.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,i.appendChild(this.toolbar.element),$.addClass(this.toolbar.element,"fullpage")),$.addClass(this.element,"fullpage"),i.appendChild(this.element),this.element.style.height=$.getWindowSize().y+"px",this.element.style.width=$.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=$.getElementSize(this.element).y-$.getElementSize(this.toolbar.element).y+"px"),THIS[this.hash].fullPage=!0,$.delegate(this,onContainerEnter)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,r.margin=this.bodyMargin,o.margin=this.docMargin,r.padding=this.bodyPadding,o.padding=this.docPadding,r.width=this.bodyWidth,r.height=this.bodyHeight,i.removeChild(this.element),e=this.previousBody.length,n=0;e>n;n++)i.appendChild(this.previousBody.shift());$.removeClass(this.element,"fullpage"),THIS[this.hash].prevElementParent.insertBefore(this.element,THIS[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(i.removeChild(this.toolbar.element),$.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=THIS[this.hash].prevElementWidth,this.element.style.height=THIS[this.hash].prevElementHeight;var l=0,u=function(){$.setPageScroll(a.pageScroll);var t=$.getPageScroll();l++,(10>l&&t.x!==a.pageScroll.x||t.y!==a.pageScroll.y)&&$.requestAnimationFrame(u)};$.requestAnimationFrame(u),THIS[this.hash].fullPage=!1,$.delegate(this,onContainerExit)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var e=this;if(!$.supportsFullScreen)return this.setFullPage(t);if($.isFullScreen()===t)return this;var n={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var i=function(){var t=$.isFullScreen();t||($.removeEvent(document,$.fullScreenEventName,i),$.removeEvent(document,$.fullScreenErrorEventName,i),e.setFullPage(!1),e.isFullPage()&&(e.element.style.width=e.fullPageStyleWidth,e.element.style.height=e.fullPageStyleHeight)),e.navigator&&e.viewport&&e.navigator.update(e.viewport),e.raiseEvent("full-screen",{fullScreen:t})};$.addEvent(document,$.fullScreenEventName,i),$.addEvent(document,$.fullScreenErrorEventName,i),$.requestFullScreen(document.body)}else $.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this.raiseEvent("visible",{visible:t}),this},addLayer:function(t){function e(t){n.raiseEvent("add-layer-failed",t)}var n=this,i=t.tileSource;if(!this.isOpen())throw new Error("An image must be loaded before adding layers.");if(!i)throw new Error("No tile source provided as new layer.");if(this.collectionMode)throw new Error("Layers not supported in collection mode.");return getTileSourceImplementation(this,i,function(i){if(i instanceof Array)return void e({message:"Sequences can not be added as layers.",source:i,options:t});for(var r=0;r<n.drawers.length;r++){var o=n.drawers[r].source.aspectRatio,a=o-i.aspectRatio;if(Math.abs(a)>n.layersAspectRatioEpsilon)return void e({message:"Aspect ratio mismatch with layer "+r+".",source:i,options:t})}var s=new $.Drawer({viewer:n,source:i,viewport:n.viewport,element:n.drawersContainer,opacity:void 0!==t.opacity?t.opacity:n.opacity,maxImageCacheCount:n.maxImageCacheCount,imageLoaderLimit:n.imageLoaderLimit,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,timeout:n.timeout,debugMode:n.debugMode,debugGridColor:n.debugGridColor});n.drawers.push(s),void 0!==t.level&&n.setLayerLevel(s,t.level),THIS[n.hash].forceRedraw=!0,n.raiseEvent("add-layer",{options:t,drawer:s})},function(n){n.options=t,e(n)}),this},getLayerAtLevel:function(t){if(t>=this.drawers.length)throw new Error("Level bigger than number of layers.");return this.drawers[t]},getLevelOfLayer:function(t){return $.indexOf(this.drawers,t)},getLayersCount:function(){return this.drawers.length},setLayerLevel:function(t,e){var n=this.getLevelOfLayer(t);if(e>=this.drawers.length)throw new Error("Level bigger than number of layers.");if(e===n||-1===n)return this;if(0===e||0===n){if(THIS[this.hash].sequenced)throw new Error("Cannot reassign base level when in sequence mode.");this.drawer=0===e?t:this.getLayerAtLevel(e),this.source=this.drawer.source}if(this.drawers.splice(n,1),this.drawers.splice(e,0,t),this.drawersContainer.removeChild(t.canvas),0===e){var i=this.drawers[1].canvas;i.parentNode.insertBefore(t.canvas,i)}else{var r=this.drawers[e-1].canvas;r.parentNode.insertBefore(t.canvas,r.nextSibling)}return this.raiseEvent("layer-level-changed",{drawer:t,previousLevel:n,newLevel:e}),this},removeLayer:function(t){var e=this.drawers.indexOf(t);if(-1===e)return this;if(0===e){if(THIS[this.hash].sequenced)throw new Error("Cannot remove base layer when in sequence mode.");if(1===this.drawers.length)return this.close(),this;this.drawer=this.drawers[1]}return this.drawers.splice(e,1),this.drawersContainer.removeChild(t.canvas),this.raiseEvent("remove-layer",{drawer:t}),this},forceRedraw:function(){return THIS[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=$.delegate(this,onFocus),e=$.delegate(this,onBlur),n=$.delegate(this,onNext),i=$.delegate(this,onPrevious),r=this.navImages,o=!0;return this.showSequenceControl&&THIS[this.hash].sequenced&&((this.previousButton||this.nextButton)&&(o=!1),this.previousButton=new $.Button({element:this.previousButton?$.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.PreviousPage"),srcRest:resolveUrl(this.prefixUrl,r.previous.REST),srcGroup:resolveUrl(this.prefixUrl,r.previous.GROUP),srcHover:resolveUrl(this.prefixUrl,r.previous.HOVER),srcDown:resolveUrl(this.prefixUrl,r.previous.DOWN),onRelease:i,onFocus:t,onBlur:e}),this.nextButton=new $.Button({element:this.nextButton?$.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.NextPage"),srcRest:resolveUrl(this.prefixUrl,r.next.REST),srcGroup:resolveUrl(this.prefixUrl,r.next.GROUP),srcHover:resolveUrl(this.prefixUrl,r.next.HOVER),srcDown:resolveUrl(this.prefixUrl,r.next.DOWN),onRelease:n,onFocus:t,onBlur:e}),this.navPrevNextWrap||this.previousButton.disable(),o&&(this.paging=new $.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:$.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||$.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=$.delegate(this,beginZoomingIn),e=$.delegate(this,endZooming),n=$.delegate(this,doSingleZoomIn),i=$.delegate(this,beginZoomingOut),r=$.delegate(this,doSingleZoomOut),o=$.delegate(this,onHome),a=$.delegate(this,onFullScreen),s=$.delegate(this,onRotateLeft),l=$.delegate(this,onRotateRight),u=$.delegate(this,onFocus),c=$.delegate(this,onBlur),h=this.navImages,d=[],p=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(p=!1),this.showZoomControl&&(d.push(this.zoomInButton=new $.Button({element:this.zoomInButton?$.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomIn"),srcRest:resolveUrl(this.prefixUrl,h.zoomIn.REST),srcGroup:resolveUrl(this.prefixUrl,h.zoomIn.GROUP),srcHover:resolveUrl(this.prefixUrl,h.zoomIn.HOVER),srcDown:resolveUrl(this.prefixUrl,h.zoomIn.DOWN),onPress:t,onRelease:e,onClick:n,onEnter:t,onExit:e,onFocus:u,onBlur:c
})),d.push(this.zoomOutButton=new $.Button({element:this.zoomOutButton?$.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomOut"),srcRest:resolveUrl(this.prefixUrl,h.zoomOut.REST),srcGroup:resolveUrl(this.prefixUrl,h.zoomOut.GROUP),srcHover:resolveUrl(this.prefixUrl,h.zoomOut.HOVER),srcDown:resolveUrl(this.prefixUrl,h.zoomOut.DOWN),onPress:i,onRelease:e,onClick:r,onEnter:i,onExit:e,onFocus:u,onBlur:c}))),this.showHomeControl&&d.push(this.homeButton=new $.Button({element:this.homeButton?$.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.Home"),srcRest:resolveUrl(this.prefixUrl,h.home.REST),srcGroup:resolveUrl(this.prefixUrl,h.home.GROUP),srcHover:resolveUrl(this.prefixUrl,h.home.HOVER),srcDown:resolveUrl(this.prefixUrl,h.home.DOWN),onRelease:o,onFocus:u,onBlur:c})),this.showFullPageControl&&d.push(this.fullPageButton=new $.Button({element:this.fullPageButton?$.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.FullPage"),srcRest:resolveUrl(this.prefixUrl,h.fullpage.REST),srcGroup:resolveUrl(this.prefixUrl,h.fullpage.GROUP),srcHover:resolveUrl(this.prefixUrl,h.fullpage.HOVER),srcDown:resolveUrl(this.prefixUrl,h.fullpage.DOWN),onRelease:a,onFocus:u,onBlur:c})),this.showRotationControl&&(d.push(this.rotateLeftButton=new $.Button({element:this.rotateLeftButton?$.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.RotateLeft"),srcRest:resolveUrl(this.prefixUrl,h.rotateleft.REST),srcGroup:resolveUrl(this.prefixUrl,h.rotateleft.GROUP),srcHover:resolveUrl(this.prefixUrl,h.rotateleft.HOVER),srcDown:resolveUrl(this.prefixUrl,h.rotateleft.DOWN),onRelease:s,onFocus:u,onBlur:c})),d.push(this.rotateRightButton=new $.Button({element:this.rotateRightButton?$.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.RotateRight"),srcRest:resolveUrl(this.prefixUrl,h.rotateright.REST),srcGroup:resolveUrl(this.prefixUrl,h.rotateright.GROUP),srcHover:resolveUrl(this.prefixUrl,h.rotateright.HOVER),srcDown:resolveUrl(this.prefixUrl,h.rotateright.DOWN),onRelease:l,onFocus:u,onBlur:c}))),p&&(this.buttons=new $.ButtonGroup({buttons:d,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",$.delegate(this,lightUp)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||$.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return THIS[this.hash].sequence},goToPage:function(t){return t>=0&&t<this.tileSources.length&&(this.raiseEvent("page",{page:t}),THIS[this.hash].sequence=t,this._updateSequenceButtons(t),this.open(this.tileSources[t]),this.referenceStrip&&this.referenceStrip.setFocus(t)),this},addOverlay:function(t,e,n,i){var r;return r=$.isPlainObject(t)?t:{element:t,location:e,placement:n,onDraw:i},t=$.getElement(r.element),getOverlayIndex(this.currentOverlays,t)>=0?this:(this.currentOverlays.push(getOverlayObject(this,r)),THIS[this.hash].forceRedraw=!0,this.raiseEvent("add-overlay",{element:t,location:r.location,placement:r.placement}),this)},updateOverlay:function(t,e,n){var i;return t=$.getElement(t),i=getOverlayIndex(this.currentOverlays,t),i>=0&&(this.currentOverlays[i].update(e,n),THIS[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:e,placement:n})),this},removeOverlay:function(t){var e;return t=$.getElement(t),e=getOverlayIndex(this.currentOverlays,t),e>=0&&(this.currentOverlays[e].destroy(),this.currentOverlays.splice(e,1),THIS[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return THIS[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},_updateSequenceButtons:function(t){this.nextButton&&(this.tileSources.length-1===t?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(t>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var e=$.makeNeutralElement("div");e.appendChild(document.createTextNode(t)),this.messageDiv=$.makeCenteredNode(e),$.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var t=this.messageDiv;t&&(t.parentNode.removeChild(t),delete this.messageDiv)},gestureSettingsByDeviceType:function(t){switch(t){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}}})}(OpenSeadragon),/*
 * OpenSeadragon - Navigator
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(t){t.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(t.position).rotate(-this.viewer.viewport.degrees,this.viewer.viewport.getHomeBounds().getCenter())),this.viewer.viewport.applyConstraints())}function n(t){this.viewer.viewport&&(this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta)))}function i(t){t.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(t){return this.viewer.raiseEvent("navigator-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),!1}function o(t,e){t.style.webkitTransform="rotate("+e+"deg)",t.style.mozTransform="rotate("+e+"deg)",t.style.msTransform="rotate("+e+"deg)",t.style.oTransform="rotate("+e+"deg)",t.style.transform="rotate("+e+"deg)"}t.Navigator=function(a){var s,l,u=a.viewer,c=this;a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),a.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:!0},a.position&&("BOTTOM_RIGHT"==a.position?a.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==a.position?a.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==a.position?a.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==a.position?a.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:"ABSOLUTE"==a.position&&(a.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",a=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize}),a.minPixelRatio=this.minPixelRatio=u.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!=t.ControlAnchor.NONE&&!function(t,e){t.margin="0px",t.border=e+"px solid #555",t.padding="0px",t.background="#000",t.opacity=.8,t.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t,e){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border=e+"px solid #900",t.margin="0px",t.padding="0px",t.background="transparent",t["float"]="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",u.addControl(this.element,a.controlOptions),a.controlOptions.anchor!=t.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!=t.ControlAnchor.NONE&&(a.width&&a.height?(this.element.style.height="number"==typeof a.height?a.height+"px":a.height,this.element.style.width="number"==typeof a.width?a.width+"px":a.width):(s=t.getElementSize(u.element),this.element.style.height=Math.round(s.y*a.sizeRatio)+"px",this.element.style.width=Math.round(s.x*a.sizeRatio)+"px",this.oldViewerSize=s),l=t.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate&&a.viewer.addHandler("rotate",function(t){o(c.displayRegionContainer,t.degrees),o(c.displayRegion,-t.degrees),c.viewport.setRotation(t.degrees)}),this.innerTracker.destroy(),this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,e),releaseHandler:t.delegate(this,i),scrollHandler:t.delegate(this,r)})},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){var e=new t.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);if(!e.equals(this.oldContainerSize)){var n=this.viewport.getBounds(),i=this.viewport.getCenter();this.viewport.resize(e,!0);var r=1/this.source.aspectRatio,o=n.width<=1?n.width:1,a=n.height<=r?n.height:r,s=new t.Rect(i.x-o/2,i.y-a/2,o,a);this.viewport.fitBounds(s,!0),this.oldContainerSize=e,this.drawer.update()}}},update:function(e){var n,i,r,o,a,s;n=t.getElementSize(this.viewer.element),n.equals(this.oldViewerSize)||(this.oldViewerSize=n,this.maintainSizeRatio?(i=n.x*this.sizeRatio,r=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.updateSize()),e&&this.viewport&&(o=e.getBounds(!0),a=this.viewport.pixelFromPoint(o.getTopLeft(),!1),s=this.viewport.pixelFromPoint(o.getBottomRight(),!1).minus(this.totalBorderWidths),function(t){t.top=Math.round(a.y)+"px",t.left=Math.round(a.x)+"px";var e=Math.abs(a.x-s.x),n=Math.abs(a.y-s.y);t.width=Math.round(Math.max(e,0))+"px",t.height=Math.round(Math.max(n,0))+"px"}(this.displayRegion.style))},open:function(e){this.updateSize();var n=this.viewer.viewport.containerSize.times(this.sizeRatio),i=e.getTileSize(e.maxLevel);return i>n.x||i>n.y?this.minPixelRatio=Math.min(n.x,n.y)/i:this.minPixelRatio=this.viewer.minPixelRatio,t.Viewer.prototype.open.apply(this,[e])}})}(OpenSeadragon),/*
 * OpenSeadragon - getString/setString
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){var e={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};t.extend(t,{getString:function(n){var i,r=n.split("."),o=null,a=arguments,s=e;for(i=0;i<r.length-1;i++)s=s[r[i]]||{};return o=s[r[i]],"string"!=typeof o&&(t.console.debug("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(t){var e=parseInt(t.match(/\d+/),10)+1;return e<a.length?a[e]:""})},setString:function(t,n){var i,r=t.split("."),o=e;for(i=0;i<r.length-1;i++)o[r[i]]||(o[r[i]]={}),o=o[r[i]];o[r[i]]=n}})}(OpenSeadragon),/*
 * OpenSeadragon - Point
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,n){var i=e*Math.PI/180,r=Math.cos(i)*(this.x-n.x)-Math.sin(i)*(this.y-n.y)+n.x,o=Math.sin(i)*(this.x-n.x)+Math.cos(i)*(this.y-n.y)+n.y;return new t.Point(r,o)},toString:function(){return"("+Math.round(this.x)+","+Math.round(this.y)+")"}}}(OpenSeadragon),/*
 * OpenSeadragon - TileSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function($){function processResponse(xhr){var responseText=xhr.responseText,status=xhr.status,statusText,data;if(!xhr)throw new Error($.getString("Errors.Security"));if(200!==xhr.status&&0!==xhr.status)throw status=xhr.status,statusText=404==status?"Not Found":xhr.statusText,new Error($.getString("Errors.Status",status,statusText));if(responseText.match(/\s*<.*/))try{data=xhr.responseXML&&xhr.responseXML.documentElement?xhr.responseXML:$.parseXml(responseText)}catch(e){data=xhr.responseText}else data=responseText.match(/\s*[\{\[].*/)?eval("("+responseText+")"):responseText;return data}$.TileSource=function(t,e,n,i,r,o){var a,s,l=null,u=arguments;for(a=$.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},$.EventSource.call(this),$.extend(!0,this,a),s=0;s<arguments.length;s++)if($.isFunction(arguments[s])){l=arguments[s],this.addHandler("ready",function(t){l(t)});break}"string"==$.type(arguments[0])?(this.aspectRatio=1,this.dimensions=new $.Point(10,10),this.tileSize=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(arguments[0])):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new $.Point(a.width,a.height),this.tileSize=a.tileSize?a.tileSize:0,this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,l&&$.isFunction(l)&&l(this))},$.TileSource.prototype={getTileSize:function(t){return this.tileSize},getLevelScale:function(t){var e,n={};for(e=0;e<=this.maxLevel;e++)n[e]=1/Math.pow(2,this.maxLevel-e);return this.getLevelScale=function(t){return n[t]},this.getLevelScale(t)},getNumTiles:function(t){var e=this.getLevelScale(t),n=Math.ceil(e*this.dimensions.x/this.getTileSize(t)),i=Math.ceil(e*this.dimensions.y/this.getTileSize(t));return new $.Point(n,i)},getPixelRatio:function(t){var e=this.dimensions.times(this.getLevelScale(t)),n=1/e.x,i=1/e.y;return new $.Point(n,i)},getClosestLevel:function(t){var e,n,i;for(e=this.minLevel;e<this.maxLevel&&(i=this.getNumTiles(e),n=Math.floor(Math.max(t.x,t.y)/this.getTileSize(e)),!(Math.max(i.x,i.y)+1>=n));e++);return Math.max(0,e-1)},getTileAtPoint:function(t,e){var n=e.times(this.dimensions.x).times(this.getLevelScale(t)),i=Math.floor(n.x/this.getTileSize(t)),r=Math.floor(n.y/this.getTileSize(t));return new $.Point(i,r)},getTileBounds:function(t,e,n){var i=this.dimensions.times(this.getLevelScale(t)),r=this.getTileSize(t),o=0===e?0:r*e-this.tileOverlap,a=0===n?0:r*n-this.tileOverlap,s=r+(0===e?1:2)*this.tileOverlap,l=r+(0===n?1:2)*this.tileOverlap,u=1/i.x;return s=Math.min(s,i.x-o),l=Math.min(l,i.y-a),new $.Rect(o*u,a*u,s*u,l*u)},getImageInfo:function(t){var e,n,i,r,o,a,s,l=this;t&&(o=t.split("/"),a=o[o.length-1],s=a.lastIndexOf("."),s>-1&&(o[o.length-1]=a.slice(0,s))),n=function(e){"string"==typeof e&&(e=$.parseXml(e));var n=$.TileSource.determineType(l,e,t);return n?(r=n.prototype.configure.apply(l,[e,t]),i=new n(r),l.ready=!0,void l.raiseEvent("ready",{tileSource:i})):void l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(e=t.split("/").pop().replace(".js",""),$.jsonp({url:t,async:!1,callbackName:e,callback:n})):$.makeAjaxRequest(t,function(t){var e=processResponse(t);n(e)},function(e,n){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(r){var o;o="undefined"!=typeof n&&n.toString?n.toString():"Unknown error",i=o+" attempting to load TileSource"}l.raiseEvent("open-failed",{message:i,source:t})})},supports:function(t,e){return!1},configure:function(t,e){throw new Error("Method not implemented.")},getTileUrl:function(t,e,n){throw new Error("Method not implemented.")},tileExists:function(t,e,n){var i=this.getNumTiles(t);return t>=this.minLevel&&t<=this.maxLevel&&e>=0&&n>=0&&e<i.x&&n<i.y}},$.extend(!0,$.TileSource.prototype,$.EventSource.prototype),$.TileSource.determineType=function(t,e,n){var i;for(i in OpenSeadragon)if(i.match(/.+TileSource$/)&&$.isFunction(OpenSeadragon[i])&&$.isFunction(OpenSeadragon[i].prototype.supports)&&OpenSeadragon[i].prototype.supports.call(t,e,n))return OpenSeadragon[i];$.console.error("No TileSource was able to open %s %s",n,e)}}(OpenSeadragon),/*
 * OpenSeadragon - DziTileSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e,i){if(!i||!i.documentElement)throw new Error(t.getString("Errors.Xml"));var r,o,a,s,l,u=i.documentElement,c=u.localName||u.tagName,h=i.documentElement.namespaceURI,d=null,p=[];if("Image"==c)try{if(s=u.getElementsByTagName("Size")[0],void 0===s&&(s=u.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(s.getAttribute("Height"),10),Width:parseInt(s.getAttribute("Width"),10)}}},!t.imageFormatSupported(d.Image.Format))throw new Error(t.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(r=u.getElementsByTagName("DisplayRect"),void 0===r&&(r=u.getElementsByTagNameNS(h,"DisplayRect")[0]),l=0;l<r.length;l++)o=r[l],a=o.getElementsByTagName("Rect")[0],void 0===a&&(a=o.getElementsByTagNameNS(h,"Rect")[0]),p.push({Rect:{X:parseInt(a.getAttribute("X"),10),Y:parseInt(a.getAttribute("Y"),10),Width:parseInt(a.getAttribute("Width"),10),Height:parseInt(a.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return p.length&&(d.Image.DisplayRect=p),n(e,d)}catch(f){throw f instanceof Error?f:new Error(t.getString("Errors.Dzi"))}else{if("Collection"==c)throw new Error(t.getString("Errors.Dzc"));if("Error"==c)return t._processDZIError(u)}throw new Error(t.getString("Errors.Dzi"))}function n(e,n){var i,r,o=n.Image,a=o.Url,s=o.Format,l=o.Size,u=o.DisplayRect||[],c=parseInt(l.Width,10),h=parseInt(l.Height,10),d=parseInt(o.TileSize,10),p=parseInt(o.Overlap,10),f=[];for(r=0;r<u.length;r++)i=u[r].Rect,f.push(new t.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return t.extend(!0,{width:c,height:h,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:s,displayRects:f},n)}t.DziTileSource=function(e,n,i,r,o,a,s,l,u){var c,h,d,p;if(p=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=p.tilesUrl,this.fileFormat=p.fileFormat,this.displayRects=p.displayRects,this.displayRects)for(c=this.displayRects.length-1;c>=0;c--)for(h=this.displayRects[c],d=h.minLevel;d<=h.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(h);t.TileSource.apply(this,[p])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){var n;return t.Image?n=t.Image.xmlns:t.documentElement&&("Image"==t.documentElement.localName||"Image"==t.documentElement.tagName)&&(n=t.documentElement.namespaceURI),"http://schemas.microsoft.com/deepzoom/2008"==n||"http://schemas.microsoft.com/deepzoom/2009"==n},configure:function(i,r){var o;return o=t.isPlainObject(i)?n(this,i):e(this,i),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+)\.(dzi|xml|js)(\?.*|$)/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?o.queryParams=r.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(t,e,n){return[this.tilesUrl,t,"/",e,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(t,e,n){var i,r,o,a,s,l,u,c=this._levelRects[t];if(!c||!c.length)return!0;for(u=c.length-1;u>=0;u--)if(i=c[u],!(t<i.minLevel||t>i.maxLevel)&&(r=this.getLevelScale(t),o=i.x*r,a=i.y*r,s=o+i.width*r,l=a+i.height*r,o=Math.floor(o/this.tileSize),a=Math.floor(a/this.tileSize),s=Math.ceil(s/this.tileSize),l=Math.ceil(l/this.tileSize),e>=o&&s>e&&n>=a&&l>n))return!0;return!1}})}(OpenSeadragon),/*
 * OpenSeadragon - IIIFTileSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){if(!e||!e.documentElement)throw new Error(t.getString("Errors.Xml"));var i=e.documentElement,r=i.tagName,o=null;if("info"==r)try{return o={},n(i,o),o}catch(a){throw a instanceof Error?a:new Error(t.getString("Errors.IIIF"))}throw new Error(t.getString("Errors.IIIF"))}function n(e,i,r){var o,a;if(3==e.nodeType&&r)a=e.nodeValue.trim(),a.match(/^\d*$/)&&(a=Number(a)),i[r]?(t.isArray(i[r])||(i[r]=[i[r]]),i[r].push(a)):i[r]=a;else if(1==e.nodeType)for(o=0;o<e.childNodes.length;o++)n(e.childNodes[o],i,e.nodeName)}t.IIIFTileSource=function(e){if(t.extend(!0,this,e),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(e.tileSizePerScaleFactor={},this.tile_width)e.tileSize=this.tile_width;else if(this.tile_height)e.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)e.tileSize=this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var n=0;n<this.tiles.length;n++)for(var i=0;i<this.tiles[n].scaleFactors.length;i++){var r=this.tiles[n].scaleFactors[i];this.scale_factors.push(r),e.tileSizePerScaleFactor[r]=this.tiles[n].width}}else{for(var o=Math.min(this.height,this.width),a=[256,512,1024],s=[],l=0;l<a.length;l++)a[l]<=o&&s.push(a[l]);s.length>0?e.tileSize=Math.max.apply(null,s):e.tileSize=o,this.tile_width=e.tileSize,this.tile_height=e.tileSize}e.maxLevel||(this.scale_factors?e.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):e.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),t.TileSource.apply(this,[e])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.protocol&&"http://iiif.io/api/image"==t.protocol?!0:!t["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=t["@context"]&&"http://iiif.io/api/image/1/context.json"!=t["@context"]?t.profile&&0===t.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")?!0:t.identifier&&t.width&&t.height?!0:t.documentElement&&"info"==t.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==t.documentElement.namespaceURI?!0:!1:!0},configure:function(n,i){if(t.isPlainObject(n))return n["@context"]?n:(n["@context"]="http://iiif.io/api/image/1.0/context.json",n["@id"]=i.replace("/info.json",""),n);var r=e(n);return r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=i.replace("/info.xml",""),r},getTileSize:function(t){var e=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[e]&&(this.tileSize=this.tileSizePerScaleFactor[e]),this.tileSize},getTileUrl:function(t,e,n){var i,r,o,a,s,l,u,c,h,d,p="0",f=Math.pow(.5,this.maxLevel-t),m=Math.ceil(this.width*f),g=Math.ceil(this.height*f);return i=Math.ceil(this.getTileSize(t)/f),r=i,h=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",m<this.tile_width&&g<this.tile_height?(c=m+",",o="full"):(a=e*i,s=n*r,l=Math.min(i,this.width-a),u=Math.min(r,this.height-s),c=Math.ceil(l*f)+",",o=[a,s,l,u].join(",")),d=[this["@id"],o,c,p,h].join("/")}})}(OpenSeadragon),/*
 * OpenSeadragon - OsmTileSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.OsmTileSource=function(e,n,i,r,o){var a;a=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},a.width&&a.height||(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,t.TileSource.apply(this,[a])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"openstreetmaps"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){return this.tilesUrl+(t-8)+"/"+e+"/"+n+".png"}})}(OpenSeadragon),/*
 * OpenSeadragon - TmsTileSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.TmsTileSource=function(e,n,i,r,o){var a;a=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var s,l=256*Math.ceil(a.width/256),u=256*Math.ceil(a.height/256);s=l>u?l/256:u/256,a.maxLevel=Math.ceil(Math.log(s)/Math.log(2))-1,a.tileSize=256,a.width=l,a.height=u,t.TileSource.apply(this,[a])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"tiledmapservice"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){var i=this.getNumTiles(t).y-1;return this.tilesUrl+t+"/"+e+"/"+(i-n)+".png"}})}(OpenSeadragon),/*
 * OpenSeadragon - LegacyTileSource
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){var n,i,r=[];for(i=0;i<e.length;i++)n=e[i],n.height&&n.width&&n.url&&(n.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)$/)||n.mimetype&&n.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))?r.push({url:n.url,width:Number(n.width),height:Number(n.height)}):t.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return r.sort(function(t,e){return t.height-e.height})}function n(e,n){if(!n||!n.documentElement)throw new Error(t.getString("Errors.Xml"));var r,o,a=n.documentElement,s=a.tagName,l=null,u=[];if("image"==s)try{for(l={type:a.getAttribute("type"),levels:[]},u=a.getElementsByTagName("level"),o=0;o<u.length;o++)r=u[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return i(e,l)}catch(c){throw c instanceof Error?c:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==s)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==s)throw new Error("Error: "+n)}throw new Error("Unknown element "+s)}function i(t,e){return e.levels}t.LegacyTileSource=function(n){var i,r,o;t.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=e(i.levels),i.levels.length>0?(r=i.levels[i.levels.length-1].width,o=i.levels[i.levels.length-1].height):(r=0,o=0,t.console.error("No supported image formats found")),t.extend(!0,i,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),t.TileSource.apply(this,[i]),this.levels=i.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(e,r){var o;return o=t.isPlainObject(e)?i(this,e):n(this,e)},getLevelScale:function(t){var e=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){var n=this.getLevelScale(e);return n?new t.Point(1,1):new t.Point(0,0)},getTileAtPoint:function(e,n){return new t.Point(0,0)},getTileUrl:function(t,e,n){var i=null;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(i=this.levels[t].url),i}})}(OpenSeadragon),/*
 * OpenSeadragon - TileSourceCollection
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.TileSourceCollection=function(e,n,i,r){var o;o=t.isPlainObject(e)?e:{tileSize:arguments[0],tileSources:arguments[1],rows:arguments[2],layout:arguments[3]},o.layout||(o.layout="horizontal");var a=0,s=1,l=Math.ceil(o.tileSources.length/o.rows),u=l>=o.rows?l:o.rows;for("horizontal"==o.layout?(o.width=o.tileSize*l,o.height=o.tileSize*o.rows):(o.height=o.tileSize*l,o.width=o.tileSize*o.rows),o.tileOverlap=-o.tileMargin,o.tilesPerRow=l;s<o.tileSize*u;)s=2*s,a++;o.minLevel=a,t.TileSource.apply(this,[o])},t.extend(t.TileSourceCollection.prototype,t.TileSource.prototype,{getTileBounds:function(e,n,i){var r=this.dimensions.times(this.getLevelScale(e)),o=this.tileSize*n-this.tileOverlap,a=this.tileSize*i-this.tileOverlap,s=this.tileSize+1*this.tileOverlap,l=this.tileSize+1*this.tileOverlap,u=1/r.x;return s=Math.min(s,r.x-o),l=Math.min(l,r.y-a),new t.Rect(o*u,a*u,s*u,l*u)},configure:function(t,e){},getTileUrl:function(t,e,n){return null}})}(OpenSeadragon),/*
 * OpenSeadragon - Button
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){t.requestAnimationFrame(function(){n(e)})}function n(n){var i,r,o;n.shouldFade&&(i=t.now(),r=i-n.fadeBeginTime,o=1-r/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&t.setElementOpacity(n.imgGroup,o,!0),o>0&&e(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=t.now()+n.fadeDelay,window.setTimeout(function(){e(n)},n.fadeDelay)}function r(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}function o(e,n){e.element.disabled||(n>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(r(e),e.currentState=t.ButtonState.GROUP),n>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),n>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function a(e,n){e.element.disabled||(n<=t.ButtonState.HOVER&&e.currentState==t.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=t.ButtonState.HOVER),n<=t.ButtonState.GROUP&&e.currentState==t.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=t.ButtonState.GROUP),n<=t.ButtonState.REST&&e.currentState==t.ButtonState.GROUP&&(i(e),e.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var n=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("div"),e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&t.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){e.insideElementPressed?(o(n,t.ButtonState.DOWN),n.raiseEvent("enter",{originalEvent:e.originalEvent})):e.buttonDownAny||o(n,t.ButtonState.HOVER)},focusHandler:function(t){this.enterHandler(t),n.raiseEvent("focus",{originalEvent:t.originalEvent})},exitHandler:function(e){a(n,t.ButtonState.GROUP),e.insideElementPressed&&n.raiseEvent("exit",{originalEvent:e.originalEvent})},blurHandler:function(t){this.exitHandler(t),n.raiseEvent("blur",{originalEvent:t.originalEvent})},pressHandler:function(e){o(n,t.ButtonState.DOWN),n.raiseEvent("press",{originalEvent:e.originalEvent})},releaseHandler:function(e){e.insideElementPressed&&e.insideElementReleased?(a(n,t.ButtonState.HOVER),n.raiseEvent("release",{originalEvent:e.originalEvent})):e.insideElementPressed?a(n,t.ButtonState.GROUP):o(n,t.ButtonState.HOVER)},clickHandler:function(t){t.quick&&n.raiseEvent("click",{originalEvent:t.originalEvent})},keyHandler:function(t){return 13===t.keyCode?(n.raiseEvent("click",{originalEvent:t.originalEvent}),n.raiseEvent("release",{originalEvent:t.originalEvent}),!1):!0}}),a(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){o(this,t.ButtonState.GROUP)},notifyGroupExit:function(){a(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),/*
 * OpenSeadragon - ButtonGroup
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var n,i=this.buttons.concat([]),r=this;if(this.element=e.element||t.makeNeutralElement("div"),!e.group)for(this.label=t.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;n<i.length;n++)this.element.appendChild(i[n].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){var e;for(e=0;e<r.buttons.length;e++)r.buttons[e].notifyGroupEnter()},exitHandler:function(t){var e;if(!t.insideElementPressed)for(e=0;e<r.buttons.length;e++)r.buttons[e].notifyGroupExit()}})},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),/*
 * OpenSeadragon - Rect
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.Rect=function(t,e,n,i){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.width="number"==typeof n?n:0,this.height="number"==typeof i?i:0},t.Rect.prototype={getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height)},getTopRight:function(){return new t.Point(this.x+this.width,this.y)},getBottomLeft:function(){return new t.Point(this.x,this.y+this.height)},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2)},getSize:function(){return new t.Point(this.width,this.height)},equals:function(e){return e instanceof t.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},times:function(t){return new OpenSeadragon.Rect(this.x*t,this.y*t,this.width*t,this.height*t)},rotate:function(e,n){var i,r=this.width,o=this.height;if(e=(e+360)%360,e%90!==0)throw new Error("Currently only 0, 90, 180, and 270 degrees are supported.");if(0===e)return new t.Rect(this.x,this.y,this.width,this.height);switch(n=n||this.getCenter(),e){case 90:i=this.getBottomLeft(),r=this.height,o=this.width;break;case 180:i=this.getBottomRight();break;case 270:i=this.getTopRight(),r=this.height,o=this.width;break;default:i=this.getTopLeft()}return i=i.rotate(e,n),new t.Rect(i.x,i.y,r,o)},toString:function(){return"["+Math.round(100*this.x)+","+Math.round(100*this.y)+","+Math.round(100*this.width)+"x"+Math.round(100*this.height)+"]"}}}(OpenSeadragon),/*
 * OpenSeadragon - ReferenceStrip
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-e.delta.x>0?n>-(o-s.x)&&(this.element.style.marginLeft=n+2*e.delta.x+"px",i(this,s.x,n+2*e.delta.x)):-e.delta.x<0&&0>n&&(this.element.style.marginLeft=n+2*e.delta.x+"px",i(this,s.x,n+2*e.delta.x)):-e.delta.y>0?r>-(a-s.y)&&(this.element.style.marginTop=r+2*e.delta.y+"px",i(this,s.y,r+2*e.delta.y)):-e.delta.y<0&&0>r&&(this.element.style.marginTop=r+2*e.delta.y+"px",i(this,s.y,r+2*e.delta.y))),!1}function n(e){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?e.scroll>0?n>-(o-s.x)&&(this.element.style.marginLeft=n-60*e.scroll+"px",i(this,s.x,n-60*e.scroll)):e.scroll<0&&0>n&&(this.element.style.marginLeft=n-60*e.scroll+"px",i(this,s.x,n-60*e.scroll)):e.scroll<0?r>s.y-a&&(this.element.style.marginTop=r+60*e.scroll+"px",i(this,s.y,r+60*e.scroll)):e.scroll>0&&0>r&&(this.element.style.marginTop=r+60*e.scroll+"px",i(this,s.y,r+60*e.scroll))),!1}function i(e,n,i){var r,o,a,s,l,u,c;for(r="horizontal"==e.scroll?e.panelWidth:e.panelHeight,o=Math.ceil(n/r)+5,a=Math.ceil((Math.abs(i)+n)/r)+1,o=a-o,o=0>o?0:o,u=o;a>u&&u<e.panels.length;u++)c=e.panels[u],c.activePanel||(s=new t.Viewer({id:c.id,tileSources:[e.viewer.tileSources[u]],element:c,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),s.displayRegion=t.makeNeutralElement("textarea"),s.displayRegion.id=c.id+"-displayregion",s.displayRegion.className="displayregion",l=s.displayRegion.style,l.position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l["float"]="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=e.panelWidth-4+"px",l.height=e.panelHeight-4+"px",s.displayRegion.innerTracker=new t.MouseTracker({element:s.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(s.displayRegion),c.activePanel=!0)}function r(t){var e=t.eventSource.element;return"horizontal"==this.scroll?e.style.marginBottom="0px":e.style.marginLeft="0px",!1}function o(e){var n=e.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+t.getElementSize(n).y/2+"px":n.style.marginLeft="-"+t.getElementSize(n).x/2+"px",!1}function a(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function s(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 61:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var l={};t.ReferenceStrip=function(u){var c,h,d,p=this,f=u.viewer,m=t.getElementSize(f.element);for(u.id||(u.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=u.id,this.element.className="referencestrip"),u=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},u,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,u),l[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=f,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,e),scrollHandler:t.delegate(this,n),enterHandler:t.delegate(this,r),exitHandler:t.delegate(this,o),keyDownHandler:t.delegate(this,a),keyHandler:t.delegate(this,s)}),u.width&&u.height?(this.element.style.width=u.width+"px",this.element.style.height=u.height+"px",f.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):"horizontal"==u.scroll?(this.element.style.width=m.x*u.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.height=m.y*u.sizeRatio+"px",f.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=m.y*u.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.width=m.x*u.sizeRatio+"px",f.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=m.x*this.sizeRatio+8,this.panelHeight=m.y*this.sizeRatio+8,this.panels=[],d=0;d<f.tileSources.length;d++)c=t.makeNeutralElement("div"),c.id=this.element.id+"-"+d,c.style.width=p.panelWidth+"px",c.style.height=p.panelHeight+"px",c.style.display="inline",c.style["float"]="left",c.style.cssFloat="left",c.style.styleFloat="left",c.style.padding="2px",t.setElementTouchActionNone(c),c.innerTracker=new t.MouseTracker({element:c,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.eventSource.dragging=t.now()},releaseHandler:function(e){var n=e.eventSource,i=n.element.id,r=Number(i.split("-")[2]),o=t.now();e.insideElementPressed&&e.insideElementReleased&&n.dragging&&o-n.dragging<n.clickTimeThreshold&&(n.dragging=null,f.goToPage(r))}}),this.element.appendChild(c),c.activePanel=!1,this.panels.push(c);i(this,"vertical"==this.scroll?m.y:m.y,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventSource.prototype,t.Viewer.prototype,{setFocus:function(e){var n,o=t.getElement(this.element.id+"-"+e),a=t.getElementSize(this.viewer.canvas),s=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(e)*(this.panelWidth+3),n>u+a.x-this.panelWidth?(n=Math.min(n,s-a.x),this.element.style.marginLeft=-n+"px",i(this,a.x,-n)):u>n&&(n=Math.max(0,n-a.x/2),this.element.style.marginLeft=-n+"px",i(this,a.x,-n))):(n=Number(e)*(this.panelHeight+3),n>c+a.y-this.panelHeight?(n=Math.min(n,l-a.y),this.element.style.marginTop=-n+"px",i(this,a.y,-n)):c>n&&(n=Math.max(0,n-a.y/2),this.element.style.marginTop=-n+"px",i(this,a.y,-n))),this.currentPage=e,t.getElement(o.id+"-displayregion").focus(),r.call(this,{eventSource:this.innerTracker}))},update:function(){return l[this.id].animating?(t.console.log("image reference strip update"),!0):!1}})}(OpenSeadragon),/*
 * OpenSeadragon - DisplayRect
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.DisplayRect=function(e,n,i,r,o,a){t.Rect.apply(this,[e,n,i,r]),this.minLevel=o,this.maxLevel=a},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),/*
 * OpenSeadragon - Spring
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(t,e){return(1-Math.exp(t*-e))/(1-Math.exp(-t))}t.Spring=function(e){var n=arguments;"object"!=typeof e&&(e={initial:n.length&&"number"==typeof n[0]?n[0]:0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:0,time:t.now()},this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time}},t.Spring.prototype={resetTo:function(t){this.target.value=t,this.target.time=this.current.time,this.start.value=this.target.value,this.start.time=this.target.time},springTo:function(t){this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime},shiftBy:function(t){this.start.value+=t,this.target.value+=t},update:function(){this.current.time=t.now(),this.current.value=this.current.time>=this.target.time?this.target.value:this.start.value+(this.target.value-this.start.value)*e(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time))}}}(OpenSeadragon),/*
 * OpenSeadragon - ImageLoader
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null},e),this.image=null}function n(t,e,n){var i;t.jobsInProgress--,(!t.jobLimit||t.jobsInProgress<t.jobLimit)&&t.jobQueue.length>0&&(i=t.jobQueue.shift(),i.start()),n(e.image)}e.prototype={start:function(){var t=this;this.image=new Image,this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.finish(!1)},this.jobId=window.setTimeout(function(){t.finish(!1)},this.timeout),this.image.src=this.src},finish:function(t){this.image.onload=this.image.onerror=this.image.onabort=null,t||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,jobQueue:[],jobsInProgress:0})},t.ImageLoader.prototype={addJob:function(t){var i=this,r=function(e){n(i,e,t.callback)},o={src:t.src,crossOriginPolicy:t.crossOriginPolicy,callback:r},a=new e(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(a.start(),this.jobsInProgress++):this.jobQueue.push(a)},clear:function(){this.jobQueue=[]}}}(OpenSeadragon),/*
 * OpenSeadragon - Tile
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){var e={};t.Tile=function(t,e,n,i,r,o){this.level=t,this.x=e,this.y=n,this.bounds=i,this.exists=r,this.url=o,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},drawHTML:function(e){return this.loaded&&this.image?(this.element||(this.element=t.makeNeutralElement("div"),this.imgElement=t.makeNeutralElement("img"),this.imgElement.src=this.url,this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",void t.setElementOpacity(this.element,this.opacity)):void t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())},drawCanvas:function(n,i){var r,o,a=this.position,s=this.size;return this.loaded&&(this.image||e[this.url])?(n.globalAlpha=this.opacity,1==n.globalAlpha&&this.url.match(".png")&&n.clearRect(a.x+1,a.y+1,s.x-2,s.y-2),e[this.url]||(o=document.createElement("canvas"),o.width=this.image.width,o.height=this.image.height,r=o.getContext("2d"),r.drawImage(this.image,0,0),e[this.url]=r,this.image=null),r=e[this.url],i({context:n,tile:this,rendered:r}),void n.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,a.x,a.y,s.x,s.y)):void t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),e[this.url]&&delete e[this.url],this.element=null,this.imgElement=null,this.image=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),/*
 * OpenSeadragon - Overlay
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},t.Overlay=function(e,n,i){var r;r=t.isPlainObject(e)?e:{element:e,location:n,placement:i},this.element=r.element,this.scales=r.location instanceof t.Rect,this.bounds=new t.Rect(r.location.x,r.location.y,r.location.width,r.location.height),this.position=new t.Point(r.location.x,r.location.y),this.size=new t.Point(r.location.width,r.location.height),this.style=r.element.style,this.placement=r.location instanceof t.Point?r.placement:t.OverlayPlacement.TOP_LEFT,this.onDraw=r.onDraw,this.checkResize=void 0===r.checkResize?!0:r.checkResize},t.Overlay.prototype={adjust:function(e,n){switch(this.placement){case t.OverlayPlacement.TOP_LEFT:break;case t.OverlayPlacement.TOP:e.x-=n.x/2;break;case t.OverlayPlacement.TOP_RIGHT:e.x-=n.x;break;case t.OverlayPlacement.RIGHT:e.x-=n.x,e.y-=n.y/2;break;case t.OverlayPlacement.BOTTOM_RIGHT:e.x-=n.x,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM:e.x-=n.x/2,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM_LEFT:e.y-=n.y;break;case t.OverlayPlacement.LEFT:e.y-=n.y/2;break;default:case t.OverlayPlacement.CENTER:e.x-=n.x/2,e.y-=n.y/2}},destroy:function(){var t=this.element,e=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(e.display="none",document.body.appendChild(t))),this.onDraw=null,e.top="",e.left="",e.position="",this.scales&&(e.width="",e.height="")},drawHTML:function(e,n){var i,r,o=this.element,a=this.style,s=this.scales,l=n.degrees,u=n.pixelFromPoint(this.bounds.getTopLeft(),!0);if(o.parentNode!=e&&(o.prevElementParent=o.parentNode,o.prevNextSibling=o.nextSibling,e.appendChild(o),this.size=t.getElementSize(o)),i=s?n.deltaPixelsFromPoints(this.bounds.getSize(),!0):this.checkResize?t.getElementSize(o):this.size,this.position=u,this.size=i,this.adjust(u,i),u=u.apply(Math.floor),i=i.apply(Math.ceil),0!==l&&this.scales){r=new t.Point(i.x/2,i.y/2);var c=new t.Point(n.viewer.drawer.canvas.width/2,n.viewer.drawer.canvas.height/2);u=u.plus(r).rotate(l,c).minus(r),i=i.rotate(l,new t.Point(0,0)),i=new t.Point(Math.abs(i.x),Math.abs(i.y))}this.onDraw?this.onDraw(u,i,o):(a.left=u.x+"px",a.top=u.y+"px",a.position="absolute",a.display="block",s&&(a.width=i.x+"px",a.height=i.y+"px"))},update:function(e,n){this.scales=e instanceof t.Rect,this.bounds=new t.Rect(e.x,e.y,e.width,e.height),this.placement=e instanceof t.Point?n:t.OverlayPlacement.TOP_LEFT}}}(OpenSeadragon),/*
 * OpenSeadragon - Drawer
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(e){e.updateAgain=!1,e.viewer&&e.viewer.raiseEvent("update-viewport",{});for(var i,r,a,s,l,u,c,d,p=null,f=!1,m=t.now(),v=e.viewport.getContainerSize(),y=e.viewport.getBounds(!0),b=y.getTopLeft(),w=y.getBottomRight(),x=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(0),!0).x,_=Math.max(e.source.minLevel,Math.floor(Math.log(e.minZoomImageRatio)/Math.log(2))),k=Math.min(Math.abs(e.source.maxLevel),Math.abs(Math.floor(Math.log(x/e.minPixelRatio)/Math.log(2)))),$=e.viewport.degrees;e.lastDrawn.length>0;)i=e.lastDrawn.pop(),i.beingDrawn=!1;if(e.canvas.innerHTML="",e.useCanvas&&((e.canvas.width!=v.x||e.canvas.height!=v.y)&&(e.canvas.width=v.x,e.canvas.height=v.y),e.context.clearRect(0,0,v.x,v.y)),90===$||270===$){var S=y.rotate($);b=S.getTopLeft(),w=S.getBottomRight()}else if(0!==$){var T=y.rotate(90);y.x-=T.width/2,y.y-=T.height/2,y.width+=T.width,y.height+=T.height,b=y.getTopLeft(),w=y.getBottomRight()}if((e.wrapHorizontal||!(w.x<0||b.x>1))&&(e.wrapVertical||!(w.y<0||b.y>e.normHeight))){e.wrapHorizontal||(b.x=Math.max(b.x,0),w.x=Math.min(w.x,1)),e.wrapVertical||(b.y=Math.max(b.y,0),w.y=Math.min(w.y,e.normHeight)),_=Math.min(_,k);var E;for(r=k;r>=_;r--){if(E=!1,a=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(r),!0).x,!f&&a>=e.minPixelRatio||r==_)E=!0,f=!0;else if(!f)continue;if(s=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(r),!1).x,l=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(Math.max(e.source.getClosestLevel(e.viewport.containerSize)-1,0)),!1).x,u=e.immediateRender?1:l,c=Math.min(1,(a-.5)/.5),d=u/Math.abs(u-s),p=n(e,f,E,r,c,d,b,w,m,p),h(e.coverage,r))break}g(e,e.lastDrawn),p&&(o(e,p,m),e.updateAgain=!0)}}function n(t,e,n,r,o,a,s,l,u,c){var h,d,p,m,g,v=t.viewport.pixelFromPoint(t.viewport.getCenter());for(t.viewer&&t.viewer.raiseEvent("update-level",{havedrawn:e,level:r,opacity:o,visibility:a,topleft:s,bottomright:l,currenttime:u,best:c}),p=t.source.getTileAtPoint(r,s),m=t.source.getTileAtPoint(r,l),g=t.source.getNumTiles(r),f(t.coverage,r),t.wrapHorizontal||(m.x=Math.min(m.x,g.x-1)),t.wrapVertical||(m.y=Math.min(m.y,g.y-1)),h=p.x;h<=m.x;h++)for(d=p.y;d<=m.y;d++)c=i(t,n,e,h,d,r,o,a,v,g,u,c);return c}function i(t,e,n,i,o,a,s,c,h,f,g,v){var y=r(i,o,a,t.source,t.tilesMatrix,g,f,t.normHeight),b=e;if(t.viewer&&t.viewer.raiseEvent("update-tile",{tile:y}),p(t.coverage,a,i,o,!1),!y.exists)return v;if(n&&!b&&(d(t.coverage,a,i,o)?p(t.coverage,a,i,o,!0):b=!0),!b)return v;if(l(y,t.source.tileOverlap,t.viewport,h,c),y.loaded){var w=u(t,y,i,o,a,s,g);w&&(t.updateAgain=!0)}else y.loading||(v=m(v,y));return v}function r(e,n,i,r,o,a,s,l){var u,c,h,d,p,f;return o[i]||(o[i]={}),o[i][e]||(o[i][e]={}),o[i][e][n]||(u=(s.x+e%s.x)%s.x,c=(s.y+n%s.y)%s.y,h=r.getTileBounds(i,u,c),d=r.tileExists(i,u,c),p=r.getTileUrl(i,u,c),h.x+=1*(e-u)/s.x,h.y+=l*(n-c)/s.y,o[i][e][n]=new t.Tile(i,e,n,h,d,p)),f=o[i][e][n],f.lastTouchTime=a,f}function o(t,e,n){t.viewport.collectionMode?(t.midUpdate=!1,a(t,e,n)):(e.loading=!0,t.imageLoader.addJob({src:e.url,crossOriginPolicy:t.crossOriginPolicy,callback:function(i){a(t,e,n,i)}}))}function a(e,n,i,r){if(n.loading=!1,r||e.viewport.collectionMode){if(i<e.lastResetTime)return void t.console.log("Ignoring tile %s loaded before reset: %s",n,n.url)}else if(t.console.log("Tile %s failed to load: %s",n,n.url),!e.debugMode)return void(n.exists=!1);n.loaded=!0,n.image=r,e.tilesLoaded.length<e.maxImageCacheCount?e.tilesLoaded[e.tilesLoaded.length]=n:e.midUpdate?window.setTimeout(function(){s(n,e)},1):s(n,e),e.updateAgain=!0}function s(t,e){var n,i,r,o,a,s,l=e.tilesLoaded.length,u=(Math.ceil(Math.log(e.source.getTileSize(t.level))/Math.log(2)),null),c=-1;for(n=e.tilesLoaded.length-1;n>=0;n--)i=e.tilesLoaded[n],i.level<=e.cutoff||i.beingDrawn||(u?(r=i.lastTouchTime,o=u.lastTouchTime,a=i.level,s=u.level,(o>r||r==o&&a>s)&&(u=i,c=n)):(u=i,c=n));u&&c>=0&&(u.unload(),l=c),e.tilesLoaded[l]=t}function l(e,n,i,r,o){var a=e.bounds.getTopLeft(),s=e.bounds.getSize(),l=i.pixelFromPoint(a,!0),u=i.pixelFromPoint(a,!1),c=i.deltaPixelsFromPoints(s,!0),h=i.deltaPixelsFromPoints(s,!1),d=u.plus(h.divide(2)),p=r.distanceTo(d);n||(c=c.plus(new t.Point(1,1))),e.position=l,e.size=c,e.distance=p,e.visibility=o}function u(t,e,n,i,r,o,a){var s,l,u=1e3*t.blendTime;if(e.blendStart||(e.blendStart=a),s=a-e.blendStart,l=u?Math.min(1,s/u):1,t.alwaysBlend&&(l*=o),e.opacity=l,t.lastDrawn.push(e),1==l)p(t.coverage,r,n,i,!0);else if(u>s)return!0;return!1}function c(t){t.tilesMatrix={},t.tilesLoaded=[]}function h(t,e,n,i){var r,o,a,s;if(!t[e])return!1;if(void 0===n||void 0===i){r=t[e];for(a in r)if(r.hasOwnProperty(a)){o=r[a];for(s in o)if(o.hasOwnProperty(s)&&!o[s])return!1}return!0}return void 0===t[e][n]||void 0===t[e][n][i]||t[e][n][i]===!0}function d(t,e,n,i){return void 0===n||void 0===i?h(t,e+1):h(t,e+1,2*n,2*i)&&h(t,e+1,2*n,2*i+1)&&h(t,e+1,2*n+1,2*i)&&h(t,e+1,2*n+1,2*i+1)}function p(e,n,i,r,o){return e[n]?(e[n][i]||(e[n][i]={}),void(e[n][i][r]=o)):void t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function f(t,e){t[e]={}}function m(t,e){return t?e.visibility>t.visibility?e:e.visibility==t.visibility&&e.distance<t.distance?e:t:e}function g(e,n){var i,r,o,a,s,l,u,c,h=function(t){e.viewer&&e.viewer.raiseEvent("tile-drawing",t)};for(i=n.length-1;i>=0;i--){if(r=n[i],e.viewport.collectionMode?(o=r.x+"/"+r.y,s=e.viewport,c=s.collectionTileSource,e.collectionOverlays[o]?(a=e.collectionOverlays[o],a.viewport&&(a.viewport.resize(r.size,!0),a.viewport.goHome(!0))):(l="horizontal"==c.layout?r.y+r.x*c.rows:r.x+r.y*c.rows,u=l<c.tileSources.length?c.tileSources[l]:null,u&&(e.collectionOverlays[o]=a=new t.Viewer({hash:s.viewer.hash+"-"+o,element:t.makeNeutralElement("div"),mouseNavEnabled:!1,showNavigator:!1,showSequenceControl:!1,showNavigationControl:!1,tileSources:[u]}),_&&(a.element.style.border="1px solid rgba(255,255,255,0.38)",a.element.style["-webkit-box-reflect"]="below 0px -webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(62%,transparent),to(rgba(255,255,255,0.62)))"),e.viewer.addOverlay(a.element,r.bounds)))):(e.useCanvas?0!==e.viewport.degrees?(v(r,e.canvas,e.context,e.viewport.degrees),r.drawCanvas(e.context,h),y(r,e.canvas,e.context)):r.drawCanvas(e.context,h):r.drawHTML(e.canvas),r.beingDrawn=!0),e.debugMode)try{b(e,r,n.length,i)}catch(d){t.console.error(d)}e.viewer&&e.viewer.raiseEvent("tile-drawn",{tile:r})}}function v(t,e,n,i){var r=e.width/2,o=e.height/2,a=t.position.x-r,s=t.position.y-o;n.save(),n.translate(r,o),n.rotate(Math.PI/180*i),t.position.x=a,t.position.y=s}function y(t,e,n){var i=e.width/2,r=e.height/2,o=t.position.x+i,a=t.position.y+r;t.position.x=o,t.position.y=a,n.restore()}function b(t,e,n,i){if(t.useCanvas){t.context.save(),t.context.lineWidth=2,t.context.font="small-caps bold 13px ariel",t.context.strokeStyle=t.debugGridColor,t.context.fillStyle=t.debugGridColor,v(e,t.canvas,t.context,t.viewport.degrees),t.context.strokeRect(e.position.x,e.position.y,e.size.x,e.size.y);var r=e.position.x+e.size.x/2,o=e.position.y+e.size.y/2;t.context.translate(r,o),t.context.rotate(Math.PI/180*-t.viewport.degrees),t.context.translate(-r,-o),0===e.x&&0===e.y&&(t.context.fillText("Zoom: "+t.viewport.getZoom(),e.position.x,e.position.y-30),t.context.fillText("Pan: "+t.viewport.getBounds().toString(),e.position.x,e.position.y-20)),t.context.fillText("Level: "+e.level,e.position.x+10,e.position.y+20),t.context.fillText("Column: "+e.x,e.position.x+10,e.position.y+30),t.context.fillText("Row: "+e.y,e.position.x+10,e.position.y+40),t.context.fillText("Order: "+i+" of "+n,e.position.x+10,e.position.y+50),t.context.fillText("Size: "+e.size.toString(),e.position.x+10,e.position.y+60),t.context.fillText("Position: "+e.position.toString(),e.position.x+10,e.position.y+70),y(e,t.canvas,t.context),t.context.restore()}}var w=(t.getWindowSize(),t.Browser.vendor),x=t.Browser.version,_=w==t.BROWSERS.FIREFOX||w==t.BROWSERS.OPERA||w==t.BROWSERS.SAFARI&&x>=4||w==t.BROWSERS.CHROME&&x>=2||w==t.BROWSERS.IE&&x>=9;t.Drawer=function(e){var n=arguments;t.isPlainObject(e)||(e={source:n[0],viewport:n[1],element:n[2]}),t.extend(!0,this,{viewer:null,imageLoader:new t.ImageLoader,tilesMatrix:{},tilesLoaded:[],coverage:{},lastDrawn:[],lastResetTime:0,midUpdate:!1,updateAgain:!0,collectionOverlays:{},opacity:t.DEFAULT_SETTINGS.opacity,maxImageCacheCount:t.DEFAULT_SETTINGS.maxImageCacheCount,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,debugMode:t.DEFAULT_SETTINGS.debugMode,timeout:t.DEFAULT_SETTINGS.timeout,crossOriginPolicy:t.DEFAULT_SETTINGS.crossOriginPolicy},e),this.useCanvas=t.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=t.getElement(this.element),this.canvas=t.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.normHeight=this.source.dimensions.y/this.source.dimensions.x,this.element=this.container,this.container.dir="ltr",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",t.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},t.Drawer.prototype={addOverlay:function(e,n,i,r){return t.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(e,n,i,r),this},updateOverlay:function(e,n,i){return t.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(e,n,i),this},removeOverlay:function(e){return t.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(e),this},clearOverlays:function(){return t.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(e){return this.opacity=e,t.setElementOpacity(this.canvas,this.opacity,!0),this},getOpacity:function(){return this.opacity},needsUpdate:function(){return this.updateAgain},numTilesLoaded:function(){return this.tilesLoaded.length},reset:function(){return c(this),this.lastResetTime=t.now(),this.updateAgain=!0,this},update:function(){return this.midUpdate=!0,e(this),this.midUpdate=!1,this},canRotate:function(){return this.useCanvas},destroy:function(){for(var t=0;t<this.tilesLoaded.length;++t)this.tilesLoaded[t].unload();this.canvas.width=1,this.canvas.height=1}}}(OpenSeadragon),/*
 * OpenSeadragon - Viewport
 *
 * Copyright (C) 2009 CodePlex Foundation
 * Copyright (C) 2010-2013 OpenSeadragon contributors
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *
 * - Neither the name of CodePlex Foundation nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){t.Viewport=function(e){var n=arguments;n.length&&n[0]instanceof t.Point&&(e={containerSize:n[0],contentSize:n[1],config:n[2]}),e.config&&(t.extend(!0,e,e.config),delete e.config),t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel,degrees:t.DEFAULT_SETTINGS.degrees,homeFillsViewer:t.DEFAULT_SETTINGS.homeFillsViewer},e),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.resetContentSize(this.contentSize),this.goHome(!0),this.update()},t.Viewport.prototype={resetContentSize:function(e){return this.contentSize=e,this.contentAspectX=this.contentSize.x/this.contentSize.y,this.contentAspectY=this.contentSize.y/this.contentSize.x,this.fitWidthBounds=new t.Rect(0,0,1,this.contentAspectY),this.fitHeightBounds=new t.Rect(0,0,this.contentAspectY,this.contentAspectY),this.homeBounds=new t.Rect(0,0,1,this.contentAspectY),this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:e}),this},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var t=this.contentAspectX/this.getAspectRatio();return this.homeFillsViewer?t>=1?t:1:t>=1?1:t},getHomeBounds:function(){var e=this.homeBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new t.Rect(e.x-n/2,e.y-i/2,n,i)},goHome:function(t){return this.viewer&&this.viewer.raiseEvent("home",{immediately:t}),this.fitBounds(this.getHomeBounds(),t)},getMinZoom:function(){var t=this.getHomeZoom(),e=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*t;return Math.min(e,t)},getMaxZoom:function(){var t=this.maxZoomLevel?this.maxZoomLevel:this.contentSize.x*this.maxZoomPixelRatio/this.containerSize.x;return Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this.containerSize.x/this.containerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getBounds:function(e){var n=this.getCenter(e),i=1/this.getZoom(e),r=i/this.getAspectRatio();return new t.Rect(n.x-i/2,n.y-r/2,i,r)},getCenter:function(e){var n,i,r,o,a,s,l,u,c=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?c:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),r=1/i,o=r/this.getAspectRatio(),a=new t.Rect(c.x-r/2,c.y-o/2,r,o),s=this.zoomPoint.minus(a.getTopLeft()).times(this.containerSize.x/a.width),l=s.minus(n),u=l.divide(this.containerSize.x*i),h.plus(u)):h},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyBoundaryConstraints:function(e,n){var i,r,o,a,s,l,u=0,c=0,h=new t.Rect(e.x,e.y,e.width,e.height);return i=this.visibilityRatio*h.width,r=this.visibilityRatio*h.height,o=h.x+h.width,a=1-h.x,s=h.y+h.height,l=this.contentAspectY-h.y,this.wrapHorizontal||(i>o&&(u=i-o),i>a&&(u=u?(u+a-i)/2:a-i)),this.wrapVertical||(r>s&&(c=r-s),r>l&&(c=c?(c+l-r)/2:l-r)),(u||c||n)&&(h.x+=u,h.y+=c,h.width>1&&(h.x=.5-h.width/2),h.height>this.contentAspectY&&(h.y=this.contentAspectY/2-h.height/2)),this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n}),h},applyConstraints:function(t){var e,n,i=this.getZoom(),r=Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom());return i!=r&&this.zoomTo(r,this.zoomPoint,t),e=this.getBounds(),n=this._applyBoundaryConstraints(e,t),(e.x!==n.x||e.y!==n.y||t)&&this.fitBounds(n,t),this},ensureVisible:function(t){return this.applyConstraints(t)},_fitBounds:function(e,n){n=n||{};var i,r,o,a,s,l,u=n.immediately||!1,c=n.constraints||!1,h=this.getAspectRatio(),d=e.getCenter(),p=new t.Rect(e.x,e.y,e.width,e.height);return p.getAspectRatio()>=h?(p.height=e.width/h,p.y=d.y-p.height/2):(p.width=e.height*h,p.x=d.x-p.width/2),c&&(s=p.getAspectRatio()),this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0),i=this.getBounds(),r=this.getZoom(),o=1/p.width,c&&(l=Math.max(Math.min(o,this.getMaxZoom()),this.getMinZoom()),o!==l&&(o=l,p.width=1/o,p.x=d.x-p.width/2,p.height=p.width/s,p.y=d.y-p.height/2),p=this._applyBoundaryConstraints(p,u)),o==r||p.width==i.width?this.panTo(c?p.getCenter():d,u):(a=i.getTopLeft().times(this.containerSize.x/i.width).minus(p.getTopLeft().times(this.containerSize.x/p.width)).divide(this.containerSize.x/i.width-this.containerSize.x/p.width),this.zoomTo(o,a,u))},fitBounds:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!1})},fitBoundsWithConstraints:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!0})},fitVertically:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(1+e.x%1)%1,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(this.contentAspectY+e.y%this.contentAspectY)%this.contentAspectY,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitHeightBounds,t)},fitHorizontally:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(this.contentAspectX+e.x%this.contentAspectX)%this.contentAspectX,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(1+e.y%1)%1,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitWidthBounds,t)},panBy:function(e,n){var i=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e=e.rotate(-this.degrees,new t.Point(0,0)),this.panTo(i.plus(e),n)},panTo:function(t,e){return e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:t,immediately:e}),this},zoomBy:function(e,n,i){return n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)&&(n=n.rotate(-this.degrees,new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value))),this.zoomTo(this.zoomSpring.target.value*e,n,i)},zoomTo:function(e,n,i){return this.zoomPoint=n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this.zoomSpring.resetTo(e):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:n,immediately:i}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(t=(t+360)%360,this.degrees=t,this.viewer.forceRedraw(),null!==this.viewer&&this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,n){var i,r=this.getBounds(),o=r;return this.containerSize=new t.Point(e.x,e.y),n&&(i=e.x/this.containerSize.x,o.width=r.width*i,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:n}),this.fitBounds(o,!0)},update:function(){var t,e,n,i,r=this.centerSpringX.current.value,o=this.centerSpringY.current.value,a=this.zoomSpring.current.value;return this.zoomPoint&&(t=this.pixelFromPoint(this.zoomPoint,!0)),this.zoomSpring.update(),this.zoomPoint&&this.zoomSpring.current.value!=a?(e=this.pixelFromPoint(this.zoomPoint,!0),n=e.minus(t),i=this.deltaPointsFromPixels(n,!0),this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y)):this.zoomPoint=null,this.centerSpringX.update(),this.centerSpringY.update(),this.centerSpringX.current.value!=r||this.centerSpringY.current.value!=o||this.zoomSpring.current.value!=a},deltaPixelsFromPoints:function(t,e){return t.times(this.containerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return t.divide(this.containerSize.x*this.getZoom(e))},pixelFromPoint:function(t,e){var n=this.getBounds(e);return t.minus(n.getTopLeft()).times(this.containerSize.x/n.width)},pointFromPixel:function(t,e){var n=this.getBounds(e);return t.divide(this.containerSize.x/n.width).plus(n.getTopLeft())},viewportToImageCoordinates:function(e,n){return 1==arguments.length?this.viewportToImageCoordinates(e.x,e.y):new t.Point(e*this.contentSize.x,n*this.contentSize.y*this.contentAspectX)},imageToViewportCoordinates:function(e,n){return 1==arguments.length?this.imageToViewportCoordinates(e.x,e.y):new t.Point(e/this.contentSize.x,n/this.contentSize.y/this.contentAspectX)},imageToViewportRectangle:function(e,n,i,r){var o,a,s;return 1==arguments.length?(s=e,this.imageToViewportRectangle(s.x,s.y,s.width,s.height)):(o=this.imageToViewportCoordinates(e,n),a=this.imageToViewportCoordinates(i,r),new t.Rect(o.x,o.y,a.x,a.y))},viewportToImageRectangle:function(e,n,i,r){var o,a,s;return 1==arguments.length?(s=e,this.viewportToImageRectangle(s.x,s.y,s.width,s.height)):(o=this.viewportToImageCoordinates(e,n),a=this.viewportToImageCoordinates(i,r),new t.Rect(o.x,o.y,a.x,a.y))},viewerElementToImageCoordinates:function(t){var e=this.pointFromPixel(t,!0);return this.viewportToImageCoordinates(e)},imageToViewerElementCoordinates:function(t){var e=this.imageToViewportCoordinates(t);return this.pixelFromPoint(e,!0)},windowToImageCoordinates:function(t){var e=t.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(e)},imageToWindowCoordinates:function(t){var e=this.imageToViewerElementCoordinates(t);return e.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(t){return this.pointFromPixel(t,!0)},viewportToViewerElementCoordinates:function(t){return this.pixelFromPoint(t,!0)},windowToViewportCoordinates:function(t){var e=t.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(e)},viewportToWindowCoordinates:function(t){var e=this.viewportToViewerElementCoordinates(t);return e.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){var e=this.viewer.source.dimensions.x,n=this.getContainerSize().x,i=n/e;return t*i},imageToViewportZoom:function(t){var e=this.viewer.source.dimensions.x,n=this.getContainerSize().x,i=e/n;return t*i}}}(OpenSeadragon),function(t){t.fn.openseadragon=function(){function e(){return n++,"Openseadragon"+n}var n=0;return t(this).each(function(){var n=t(this);n.addClass("openseadragon-viewer"),"undefined"==typeof n.attr("id")&&n.attr("id",e());var i=n.data("openseadragon"),r=n.find('source[media="openseadragon"]'),o=t.map(r,function(e){return t(e).data("openseadragon")?t(e).data("openseadragon"):t(e).attr("src")});n.css("height",n.css("height")),n.data("osdViewer",OpenSeadragon(t.extend({id:n.attr("id")},i,{tileSources:o})))}),this}}(jQuery),function(t){function e(){t("picture[data-openseadragon]").openseadragon()}t(document).on("page:load",e),t(document).ready(e)}(jQuery),function(t,e,n){"use strict";function i(t,e){return e=e||Error,function(){var n,i,r=2,o=arguments,a=o[0],s="["+(t?t+":":"")+a+"] ",l=o[1];for(s+=l.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),n=e+r;return n<o.length?bt(o[n]):t}),s+="\nhttp://errors.angularjs.org/1.4.4/"+(t?t+"/":"")+a,i=r,n="?";i<o.length;i++,n="&")s+=n+"p"+(i-r)+"="+encodeURIComponent(bt(o[i]));return new e(s)}}function r(t){if(null==t||C(t))return!1;var e="length"in Object(t)&&t.length;return t.nodeType===Vi&&e?!0:k(t)||Bi(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){var i,a;if(t)if(T(t))for(i in t)"prototype"==i||"length"==i||"name"==i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(Bi(t)||r(t)){var s="object"!=typeof t;for(i=0,a=t.length;a>i;i++)(s||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else if(_(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)bi.call(t,i)&&e.call(n,t[i],i,t);return t}function a(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function s(t){return function(e,n){t(n,e)}}function l(){return++Ii}function u(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function c(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;o>r;++r){var a=e[r];if(x(a)||T(a))for(var s=Object.keys(a),l=0,h=s.length;h>l;l++){var d=s[l],p=a[d];n&&x(p)?S(p)?t[d]=new Date(p.valueOf()):E(p)?t[d]=new RegExp(p):(x(t[d])||(t[d]=Bi(p)?[]:{}),c(t[d],[p],!0)):t[d]=p}}return u(t,i),t}function h(t){return c(t,Ei.call(arguments,1),!1)}function d(t){return c(t,Ei.call(arguments,1),!0)}function p(t){return parseInt(t,10)}function f(t,e){return h(Object.create(t),e)}function m(){}function g(t){return t}function v(t){return function(){return t}}function y(t){return T(t.toString)&&t.toString!==Object.prototype.toString}function b(t){return"undefined"==typeof t}function w(t){return"undefined"!=typeof t}function x(t){return null!==t&&"object"==typeof t}function _(t){return null!==t&&"object"==typeof t&&!Di(t)}function k(t){return"string"==typeof t}function $(t){return"number"==typeof t}function S(t){return"[object Date]"===Ai.call(t)}function T(t){return"function"==typeof t}function E(t){return"[object RegExp]"===Ai.call(t)}function C(t){return t&&t.window===t}function P(t){return t&&t.$evalAsync&&t.$watch}function A(t){return"[object File]"===Ai.call(t)}function D(t){return"[object FormData]"===Ai.call(t)}function N(t){return"[object Blob]"===Ai.call(t)}function O(t){return"boolean"==typeof t}function I(t){return t&&T(t.then)}function M(t){return Ri.test(Ai.call(t))}function B(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function R(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}function j(t){return yi(t.nodeName||t[0]&&t[0].nodeName)}function L(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function F(t,e,n,i){if(C(t)||P(t))throw Ni("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(M(e))throw Ni("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e){if(t===e)throw Ni("cpi","Can't copy! Source and destination are identical.");n=n||[],i=i||[],x(t)&&(n.push(t),i.push(e));var r;if(Bi(t)){e.length=0;for(var a=0;a<t.length;a++)e.push(F(t[a],null,n,i))}else{var s=e.$$hashKey;if(Bi(e)?e.length=0:o(e,function(t,n){delete e[n]}),_(t))for(r in t)e[r]=F(t[r],null,n,i);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=F(t[r],null,n,i));else for(r in t)bi.call(t,r)&&(e[r]=F(t[r],null,n,i));u(e,s)}}else if(e=t,x(t)){var l;if(n&&-1!==(l=n.indexOf(t)))return i[l];if(Bi(t))return F(t,[],n,i);if(M(t))e=new t.constructor(t);else if(S(t))e=new Date(t.getTime());else{if(!E(t)){var c=Object.create(Di(t));return F(t,c,n,i)}e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex}i&&(n.push(t),i.push(e))}return e}function H(t,e){if(Bi(t)){e=e||[];for(var n=0,i=t.length;i>n;n++)e[n]=t[n]}else if(x(t)){e=e||{};for(var r in t)("$"!==r.charAt(0)||"$"!==r.charAt(1))&&(e[r]=t[r])}return e||t}function z(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var i,r,o,a=typeof t,s=typeof e;if(a==s&&"object"==a){if(!Bi(t)){if(S(t))return S(e)?z(t.getTime(),e.getTime()):!1;if(E(t))return E(e)?t.toString()==e.toString():!1;if(P(t)||P(e)||C(t)||C(e)||Bi(e)||S(e)||E(e))return!1;o=gt();for(r in t)if("$"!==r.charAt(0)&&!T(t[r])){if(!z(t[r],e[r]))return!1;o[r]=!0}for(r in e)if(!(r in o||"$"===r.charAt(0)||e[r]===n||T(e[r])))return!1;return!0}if(!Bi(e))return!1;if((i=t.length)==e.length){for(r=0;i>r;r++)if(!z(t[r],e[r]))return!1;return!0}}return!1}function U(t,e,n){return t.concat(Ei.call(e,n))}function q(t,e){return Ei.call(t,e||0)}function V(t,e){var n=arguments.length>2?q(arguments,2):[];return!T(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,U(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function W(t,i){var r=i;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=n:C(i)?r="$WINDOW":i&&e===i?r="$DOCUMENT":P(i)&&(r="$SCOPE"),r}function K(t,e){return"undefined"==typeof t?n:($(e)||(e=e?2:null),JSON.stringify(t,W,e))}function G(t){return k(t)?JSON.parse(t):t}function X(t,e){var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Y(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Z(t,e,n){n=n?-1:1;var i=X(e,t.getTimezoneOffset());return Y(t,n*(i-t.getTimezoneOffset()))}function Q(t){t=$i(t).clone();try{t.empty()}catch(e){}var n=$i("<div>").append(t).html();try{return t[0].nodeType===Ki?yi(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+yi(e)})}catch(e){return yi(n)}}function J(t){try{return decodeURIComponent(t)}catch(e){}}function tt(t){var e={};return o((t||"").split("&"),function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),n=t.indexOf("="),-1!==n&&(i=t.substring(0,n),r=t.substring(n+1)),i=J(i),w(i)&&(r=w(r)?J(r):!0,bi.call(e,i)?Bi(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))}),e}function et(t){var e=[];return o(t,function(t,n){Bi(t)?o(t,function(t){e.push(it(n,!0)+(t===!0?"":"="+it(t,!0)))}):e.push(it(n,!0)+(t===!0?"":"="+it(t,!0)))}),e.length?e.join("&"):""}function nt(t){return it(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function it(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function rt(t,e){var n,i,r=zi.length;for(i=0;r>i;++i)if(n=zi[i]+e,k(n=t.getAttribute(n)))return n;return null}function ot(t,e){var n,i,r={};o(zi,function(e){var r=e+"app";!n&&t.hasAttribute&&t.hasAttribute(r)&&(n=t,i=t.getAttribute(r))}),o(zi,function(e){var r,o=e+"app";!n&&(r=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n&&(r.strictDi=null!==rt(n,"strict-di"),e(n,i?[i]:[],r))}function at(n,i,r){x(r)||(r={});var a={strictDi:!1};r=h(a,r);var s=function(){if(n=$i(n),n.injector()){var t=n[0]===e?"document":Q(n);throw Ni("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}i=i||[],i.unshift(["$provide",function(t){t.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),i.unshift("ng");var o=Qt(i,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},l=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return t&&l.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(l,"")),t&&!u.test(t.name)?s():(t.name=t.name.replace(u,""),Oi.resumeBootstrap=function(t){return o(t,function(t){i.push(t)}),s()},void(T(Oi.resumeDeferredBootstrap)&&Oi.resumeDeferredBootstrap()))}function st(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function lt(t){var e=Oi.element(t).injector();if(!e)throw Ni("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ut(t,e){return e=e||"_",t.replace(Ui,function(t,n){return(n?e:"")+t.toLowerCase()})}function ct(){var e;if(!qi){var i=Hi();Si=t.jQuery,w(i)&&(Si=null===i?n:t[i]),Si&&Si.fn.on?($i=Si,h(Si.fn,{scope:hr.scope,isolateScope:hr.isolateScope,controller:hr.controller,injector:hr.injector,inheritedData:hr.inheritedData}),e=Si.cleanData,Si.cleanData=function(t){var n;if(Mi)Mi=!1;else for(var i,r=0;null!=(i=t[r]);r++)n=Si._data(i,"events"),n&&n.$destroy&&Si(i).triggerHandler("$destroy");e(t)}):$i=Ct,Oi.element=$i,qi=!0}}function ht(t,e,n){if(!t)throw Ni("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function dt(t,e,n){return n&&Bi(t)&&(t=t[t.length-1]),ht(T(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function pt(t,e){if("hasOwnProperty"===t)throw Ni("badname","hasOwnProperty is not a valid {0} name",e)}function ft(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,a=r.length,s=0;a>s;s++)i=r[s],t&&(t=(o=t)[i]);return!n&&T(t)?V(o,t):t}function mt(t){var e=t[0],n=t[t.length-1],i=[e];do{if(e=e.nextSibling,!e)break;i.push(e)}while(e!==n);return $i(i)}function gt(){return Object.create(null)}function vt(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=i("$injector"),r=i("ng"),o=e(t,"angular",Object);return o.$$minErr=o.$$minErr||i,e(o,"module",function(){var t={};return function(i,o,a){var s=function(t,e){if("hasOwnProperty"===t)throw r("badname","hasOwnProperty is not a valid {0} name",e)};return s(i,"module"),o&&t.hasOwnProperty(i)&&(t[i]=null),e(t,i,function(){function t(t,e,n,i){return i||(i=r),function(){return i[n||"push"]([t,e,arguments]),c}}function e(t,e){return function(n,o){return o&&T(o)&&(o.$$moduleName=i),r.push([t,e,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var r=[],s=[],l=[],u=t("$injector","invoke","push",s),c={_invokeQueue:r,_configBlocks:s,_runBlocks:l,requires:o,name:i,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:e("$provide","decorator"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:u,run:function(t){return l.push(t),this}};return a&&u(a),c})}})}function yt(t){var e=[];return JSON.stringify(t,function(t,n){if(n=W(t,n),x(n)){if(e.indexOf(n)>=0)return"<<already seen>>";e.push(n)}return n})}function bt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?yt(t):t}function wt(e){h(e,{bootstrap:at,copy:F,extend:h,merge:d,equals:z,element:$i,forEach:o,injector:Qt,noop:m,bind:V,toJson:K,fromJson:G,identity:g,isUndefined:b,isDefined:w,isString:k,isFunction:T,isObject:x,isNumber:$,isElement:B,isArray:Bi,version:Zi,isDate:S,lowercase:yi,uppercase:wi,callbacks:{counter:0},getTestability:lt,$$minErr:i,$$csp:Fi,reloadWithDebugInfo:st}),(Ti=vt(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:mn}),t.provider("$compile",le).directive({a:ho,input:Po,textarea:Po,form:vo,script:xa,select:$a,style:Ta,option:Sa,ngBind:No,ngBindHtml:Io,ngBindTemplate:Oo,ngClass:Bo,ngClassEven:jo,ngClassOdd:Ro,ngCloak:Lo,ngController:Fo,ngForm:yo,ngHide:ma,ngIf:Uo,ngInclude:qo,ngInit:Wo,ngNonBindable:aa,ngPluralize:ca,ngRepeat:ha,ngShow:fa,ngStyle:ga,ngSwitch:va,ngSwitchWhen:ya,ngSwitchDefault:ba,ngOptions:ua,ngTransclude:wa,ngModel:ia,ngList:Ko,ngChange:Mo,pattern:Ca,ngPattern:Ca,required:Ea,ngRequired:Ea,minlength:Aa,ngMinlength:Aa,maxlength:Pa,ngMaxlength:Pa,ngValue:Do,ngModelOptions:oa}).directive({ngInclude:Vo}).directive(po).directive(Ho),t.provider({$anchorScroll:Jt,$animate:Tr,$animateCss:Er,$$animateQueue:Sr,$$AnimateRunner:$r,$browser:oe,$cacheFactory:ae,$controller:pe,$document:fe,$exceptionHandler:me,$filter:Pn,$$forceReflow:Nr,$interpolate:Pe,$interval:Ae,$http:Se,$httpParamSerializer:ve,$httpParamSerializerJQLike:ye,$httpBackend:Ee,$location:qe,$log:Ve,$parse:un,$rootScope:fn,$q:cn,$$q:hn,$sce:bn,$sceDelegate:yn,$sniffer:wn,$templateCache:se,$templateRequest:xn,$$testability:_n,$timeout:kn,$window:Tn,$$rAF:pn,$$jqLite:Kt,$$HashMap:mr,$$cookieReader:Cn})}])}function xt(){return++Ji}function _t(t){return t.replace(nr,function(t,e,n,i){return i?n.toUpperCase():n}).replace(ir,"Moz$1")}function kt(t){return!sr.test(t)}function $t(t){var e=t.nodeType;return e===Vi||!e||e===Xi}function St(t){for(var e in Qi[t.ng339])return!0;return!1}function Tt(t,e){var n,i,r,a,s=e.createDocumentFragment(),l=[];if(kt(t))l.push(e.createTextNode(t));else{for(n=n||s.appendChild(e.createElement("div")),i=(lr.exec(t)||["",""])[1].toLowerCase(),r=cr[i]||cr._default,n.innerHTML=r[1]+t.replace(ur,"<$1></$2>")+r[2],a=r[0];a--;)n=n.lastChild;l=U(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(l,function(t){s.appendChild(t)}),s}function Et(t,n){n=n||e;var i;return(i=ar.exec(t))?[n.createElement(i[1])]:(i=Tt(t,n))?i.childNodes:[]}function Ct(t){if(t instanceof Ct)return t;var e;if(k(t)&&(t=ji(t),e=!0),!(this instanceof Ct)){if(e&&"<"!=t.charAt(0))throw or("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ct(t)}e?jt(this,Et(t)):jt(this,t)}function Pt(t){return t.cloneNode(!0)}function At(t,e){if(e||Nt(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;r>i;i++)Nt(n[i])}function Dt(t,e,n,i){if(w(i))throw or("offargs","jqLite#off() does not support the `selector` argument");var r=Ot(t),a=r&&r.events,s=r&&r.handle;if(s)if(e)o(e.split(" "),function(e){if(w(n)){var i=a[e];if(L(i||[],n),i&&i.length>0)return}er(t,e,s),delete a[e]});else for(e in a)"$destroy"!==e&&er(t,e,s),delete a[e]}function Nt(t,e){var i=t.ng339,r=i&&Qi[i];if(r){if(e)return void delete r.data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Dt(t)),delete Qi[i],t.ng339=n}}function Ot(t,e){var i=t.ng339,r=i&&Qi[i];return e&&!r&&(t.ng339=i=xt(),r=Qi[i]={events:{},data:{},handle:n}),r}function It(t,e,n){if($t(t)){var i=w(n),r=!i&&e&&!x(e),o=!e,a=Ot(t,!r),s=a&&a.data;if(i)s[e]=n;else{if(o)return s;if(r)return s&&s[e];h(s,e)}}}function Mt(t,e){return t.getAttribute?(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1:!1}function Bt(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",ji((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ji(e)+" "," ")))})}function Rt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=ji(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",ji(n))}}function jt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;n>i;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function Lt(t,e){return Ft(t,"$"+(e||"ngController")+"Controller")}function Ft(t,e,i){t.nodeType==Xi&&(t=t.documentElement);for(var r=Bi(e)?e:[e];t;){for(var o=0,a=r.length;a>o;o++)if((i=$i.data(t,r[o]))!==n)return i;t=t.parentNode||t.nodeType===Yi&&t.host}}function Ht(t){for(At(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function zt(t,e){e||At(t);var n=t.parentNode;n&&n.removeChild(t)}function Ut(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):$i(n).on("load",e)}function qt(t,e){var n=dr[e.toLowerCase()];return n&&pr[j(t)]&&n}function Vt(t,e){var n=t.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&fr[e]}function Wt(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(b(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(r=H(r));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||r[s].call(t,n)}};return n.elem=t,n}function Kt(){this.$get=function(){return h(Ct,{hasClass:function(t,e){return t.attr&&(t=t[0]),Mt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Rt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Bt(t,e)}})}}function Gt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||l)():i+":"+t}function Xt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function Yt(t){var e=t.toString().replace(br,""),n=e.match(gr);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Zt(t,e,n){var i,r,a,s;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw k(n)&&n||(n=t.name||Yt(t)),wr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=t.toString().replace(br,""),a=r.match(gr),o(a[1].split(vr),function(t){t.replace(yr,function(t,e,n){i.push(n)})})}t.$inject=i}}else Bi(t)?(s=t.length-1,dt(t[s],"fn"),i=t.slice(0,s)):dt(t,"fn",!0);return i}function Qt(t,e){function i(t){return function(e,n){return x(e)?void o(e,s(t)):t(e,n)}}function r(t,e){if(pt(t,"service"),(T(e)||Bi(e))&&(e=$.instantiate(e)),!e.$get)throw wr("pget","Provider '{0}' must define $get factory method.",t);return _[t+g]=e}function a(t,e){return function(){var n=E.invoke(e,this);if(b(n))throw wr("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function l(t,e,n){return r(t,{$get:n!==!1?a(t,e):e})}function u(t,e){return l(t,["$injector",function(t){return t.instantiate(e)}])}function c(t,e){return l(t,v(e),!1)}function h(t,e){pt(t,"constant"),_[t]=e,S[t]=e}function d(t,e){var n=$.get(t+g),i=n.$get;n.$get=function(){var t=E.invoke(i,n);return E.invoke(e,null,{$delegate:t})}}function p(t){ht(b(t)||Bi(t),"modulesToLoad","not an array");var e,n=[];return o(t,function(t){function i(t){var e,n;for(e=0,n=t.length;n>e;e++){var i=t[e],r=$.get(i[0]);r[i[1]].apply(r,i[2])}}if(!w.get(t)){w.put(t,!0);try{k(t)?(e=Ti(t),n=n.concat(p(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):T(t)?n.push($.invoke(t)):Bi(t)?n.push($.invoke(t)):dt(t,"module")}catch(r){throw Bi(t)&&(t=t[t.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),wr("modulerr","Failed to instantiate module {0} due to:\n{1}",t,r.stack||r.message||r)}}}),n}function f(t,n){function i(e,i){if(t.hasOwnProperty(e)){if(t[e]===m)throw wr("cdep","Circular dependency found: {0}",e+" <- "+y.join(" <- "));return t[e]}try{return y.unshift(e),t[e]=m,t[e]=n(e,i)}catch(r){throw t[e]===m&&delete t[e],r}finally{y.shift()}}function r(t,n,r,o){"string"==typeof r&&(o=r,r=null);var a,s,l,u=[],c=Qt.$$annotate(t,e,o);for(s=0,a=c.length;a>s;s++){if(l=c[s],"string"!=typeof l)throw wr("itkn","Incorrect injection token! Expected service name as string, got {0}",l);u.push(r&&r.hasOwnProperty(l)?r[l]:i(l,o))}return Bi(t)&&(t=t[a]),t.apply(n,u)}function o(t,e,n){var i=Object.create((Bi(t)?t[t.length-1]:t).prototype||null),o=r(t,i,e,n);return x(o)||T(o)?o:i}return{invoke:r,instantiate:o,get:i,annotate:Qt.$$annotate,has:function(e){return _.hasOwnProperty(e+g)||t.hasOwnProperty(e)}}}e=e===!0;var m={},g="Provider",y=[],w=new Xt([],!0),_={$provide:{provider:i(r),factory:i(l),service:i(u),value:i(c),constant:i(h),decorator:d}},$=_.$injector=f(_,function(t,e){throw Oi.isString(e)&&y.push(e),wr("unpr","Unknown provider: {0}",y.join(" <- "))}),S={},E=S.$injector=f(S,function(t,e){var i=$.get(t+g,e);return E.invoke(i.$get,i,n,t)});return o(p(t),function(t){t&&E.invoke(t)}),E}function Jt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,i){function r(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===j(t)?(e=t,!0):void 0}),e}function o(){var t=s.yOffset;if(T(t))t=t();else if(B(t)){var n=t[0],i=e.getComputedStyle(n);t="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else $(t)||(t=0);return t}function a(t){if(t){t.scrollIntoView();var n=o();if(n){var i=t.getBoundingClientRect().top;e.scrollBy(0,i-n)}}else e.scrollTo(0,0)}function s(t){t=k(t)?t:n.hash();var e;t?(e=l.getElementById(t))?a(e):(e=r(l.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}var l=e.document;return t&&i.$watch(function(){return n.hash()},function(t,e){(t!==e||""!==t)&&Ut(function(){i.$evalAsync(s)})}),s}]}function te(t,e){return t||e?t?e?(Bi(t)&&(t=t.join(" ")),Bi(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function ee(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===_r)return n}}function ne(t){k(t)&&(t=t.split(" "));var e=gt();return o(t,function(t){t.length&&(e[t]=!0)}),e}function ie(t){return x(t)?t:{}}function re(t,e,n,i){function r(t){try{t.apply(null,q(arguments,1))}finally{if(y--,0===y)for(;w.length;)try{w.pop()()}catch(e){n.error(e)}}}function a(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}function s(){u(),c()}function l(){try{return p.state}catch(t){}}function u(){x=l(),x=b(x)?null:x,z(x,C)&&(x=C),C=x}function c(){(k!==h.url()||_!==x)&&(k=h.url(),_=x,o(T,function(t){t(h.url(),x)}))}var h=this,d=(e[0],t.location),p=t.history,f=t.setTimeout,g=t.clearTimeout,v={};
h.isMock=!1;var y=0,w=[];h.$$completeOutstandingRequest=r,h.$$incOutstandingRequestCount=function(){y++},h.notifyWhenNoOutstandingRequests=function(t){0===y?t():w.push(t)};var x,_,k=d.href,$=e.find("base"),S=null;u(),_=x,h.url=function(e,n,r){if(b(r)&&(r=null),d!==t.location&&(d=t.location),p!==t.history&&(p=t.history),e){var o=_===r;if(k===e&&(!i.history||o))return h;var s=k&&Me(k)===Me(e);return k=e,_=r,!i.history||s&&o?((!s||S)&&(S=e),n?d.replace(e):s?d.hash=a(e):d.href=e):(p[n?"replaceState":"pushState"](r,"",e),u(),_=x),h}return S||d.href.replace(/%27/g,"'")},h.state=function(){return x};var T=[],E=!1,C=null;h.onUrlChange=function(e){return E||(i.history&&$i(t).on("popstate",s),$i(t).on("hashchange",s),E=!0),T.push(e),e},h.$$applicationDestroyed=function(){$i(t).off("hashchange popstate",s)},h.$$checkUrlChange=c,h.baseHref=function(){var t=$.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},h.defer=function(t,e){var n;return y++,n=f(function(){delete v[n],r(t)},e||0),v[n]=!0,n},h.defer.cancel=function(t){return v[t]?(delete v[t],g(t),r(m),!0):!1}}function oe(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new re(t,i,e,n)}]}function ae(){this.$get=function(){function t(t,n){function r(t){t!=d&&(p?p==t&&(p=t.n):p=t,o(t.n,t.p),o(t,d),d=t,d.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=h({},n,{id:t}),l={},u=n&&n.capacity||Number.MAX_VALUE,c={},d=null,p=null;return e[t]={put:function(t,e){if(!b(e)){if(u<Number.MAX_VALUE){var n=c[t]||(c[t]={key:t});r(n)}return t in l||a++,l[t]=e,a>u&&this.remove(p.key),e}},get:function(t){if(u<Number.MAX_VALUE){var e=c[t];if(!e)return;r(e)}return l[t]},remove:function(t){if(u<Number.MAX_VALUE){var e=c[t];if(!e)return;e==d&&(d=e.p),e==p&&(p=e.n),o(e.n,e.p),delete c[t]}delete l[t],a--},removeAll:function(){l={},a=0,c={},d=p=null},destroy:function(){l=null,s=null,c=null,delete e[t]},info:function(){return h({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function se(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function le(t,i){function r(t,e,n){var i=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return o(t,function(t,o){var a=t.match(i);if(!a)throw Cr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o}}),r}function a(t,e){var n={isolateScope:null,bindToController:null};if(x(t.scope)&&(t.bindToController===!0?(n.bindToController=r(t.scope,e,!0),n.isolateScope={}):n.isolateScope=r(t.scope,e,!1)),x(t.bindToController)&&(n.bindToController=r(t.bindToController,e,!0)),x(n.bindToController)){var i=t.controller,o=t.controllerAs;if(!i)throw Cr("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!de(i,o))throw Cr("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}function l(t){var e=t.charAt(0);if(!e||e!==yi(e))throw Cr("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Cr("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}var u={},c="Directive",d=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,p=/(([\w\-]+)(?:\:([^;]+))?;?)/,y=R("ngSrc,ngSrcset,src,srcset"),_=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,$=/^(on[a-z]+|formaction)$/;this.directive=function E(e,n){return pt(e,"directive"),k(e)?(l(e),ht(n,"directiveFactory"),u.hasOwnProperty(e)||(u[e]=[],t.factory(e+c,["$injector","$exceptionHandler",function(t,n){var i=[];return o(u[e],function(r,o){try{var s=t.invoke(r);T(s)?s={compile:v(s)}:!s.compile&&s.link&&(s.compile=v(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||e,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA";var l=s.$$bindings=a(s,s.name);x(l.isolateScope)&&(s.$$isolateBindings=l.isolateScope),s.$$moduleName=r.$$moduleName,i.push(s)}catch(u){n(u)}}),i}])),u[e].push(n)):o(e,s(E)),this},this.aHrefSanitizationWhitelist=function(t){return w(t)?(i.aHrefSanitizationWhitelist(t),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return w(t)?(i.imgSrcSanitizationWhitelist(t),this):i.imgSrcSanitizationWhitelist()};var S=!0;this.debugInfoEnabled=function(t){return w(t)?(S=t,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,i,r,a,s,l,v,w,E,C,A){function D(t,e){try{t.addClass(e)}catch(n){}}function N(t,e,n,i,r){t instanceof $i||(t=$i(t)),o(t,function(e,n){e.nodeType==Ki&&e.nodeValue.match(/\S+/)&&(t[n]=$i(e).wrap("<span></span>").parent()[0])});var a=I(t,e,t,n,i,r);N.$$addScopeClass(t);var s=null;return function(e,n,i){ht(e,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,o=i.transcludeControllers,l=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),s||(s=O(l));var u;if(u="html"!==s?$i(J(s,$i("<div>").append(t).html())):n?hr.clone.call(t):t,o)for(var c in o)u.data("$"+c+"Controller",o[c].instance);return N.$$addScopeInfo(u,e),n&&n(u,e),a&&a(e,u,u,r),u}}function O(t){var e=t&&t[0];return e&&"foreignobject"!==j(e)&&e.toString().match(/SVG/)?"svg":"html"}function I(t,e,i,r,o,a){function s(t,i,r,o){var a,s,l,u,c,h,d,p,g;if(f){var v=i.length;for(g=new Array(v),c=0;c<m.length;c+=3)d=m[c],g[d]=i[d]}else g=i;for(c=0,h=m.length;h>c;)if(l=g[m[c++]],a=m[c++],s=m[c++],a){if(a.scope){u=t.$new(),N.$$addScopeInfo($i(l),u);var y=a.$$destroyBindings;y&&(a.$$destroyBindings=null,u.$on("$destroyed",y))}else u=t;p=a.transcludeOnThisElement?M(t,a.transclude,o):!a.templateOnThisElement&&o?o:!o&&e?M(t,e):null,a(s,u,l,r,p,a)}else s&&s(t,l.childNodes,n,o)}for(var l,u,c,h,d,p,f,m=[],g=0;g<t.length;g++)l=new at,u=B(t[g],[],l,0===g?r:n,o),c=u.length?H(u,t[g],l,e,i,null,[],[],a):null,c&&c.scope&&N.$$addScopeClass(l.$$element),d=c&&c.terminal||!(h=t[g].childNodes)||!h.length?null:I(h,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||d)&&(m.push(g,c,d),p=!0,f=f||c),a=null;return p?s:null}function M(t,e,n){var i=function(i,r,o,a,s){return i||(i=t.$new(!1,s),i.$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})};return i}function B(t,e,n,i,r){var o,a,s=t.nodeType,l=n.$attr;switch(s){case Vi:V(e,ue(j(t)),"E",i,r);for(var u,c,h,f,m,g,v=t.attributes,y=0,b=v&&v.length;b>y;y++){var w=!1,_=!1;u=v[y],c=u.name,m=ji(u.value),f=ue(c),(g=dt.test(f))&&(c=c.replace(Pr,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var $=f.replace(/(Start|End)$/,"");W($)&&f===$+"Start"&&(w=c,_=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),h=ue(c.toLowerCase()),l[h]=c,(g||!n.hasOwnProperty(h))&&(n[h]=m,qt(t,h)&&(n[h]=!0)),et(t,e,m,h,g),V(e,h,"A",i,r,w,_)}if(a=t.className,x(a)&&(a=a.animVal),k(a)&&""!==a)for(;o=p.exec(a);)h=ue(o[2]),V(e,h,"C",i,r)&&(n[h]=ji(o[3])),a=a.substr(o.index+o[0].length);break;case Ki:if(11===ki)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===Ki;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);Z(e,t.nodeValue);break;case Gi:try{o=d.exec(t.nodeValue),o&&(h=ue(o[1]),V(e,h,"M",i,r)&&(n[h]=ji(o[2])))}catch(S){}}return e.sort(X),e}function R(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Cr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==Vi&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0)}else i.push(t);return $i(i)}function F(t,e,n){return function(i,r,o,a,s){return r=R(r[0],e,n),t(i,r,o,a,s)}}function H(t,i,o,a,s,u,c,h,d){function p(t,e,n,i){t&&(n&&(t=F(t,n,i)),t.require=v.require,t.directiveName=y,(A===v||v.$$isolateScope)&&(t=it(t,{isolateScope:!0})),c.push(t)),e&&(n&&(e=F(e,n,i)),e.require=v.require,e.directiveName=y,(A===v||v.$$isolateScope)&&(e=it(e,{isolateScope:!0})),h.push(e))}function f(t,e,n,i){var r;if(k(e)){var o=e.match(_),a=e.substring(o[0].length),s=o[1]||o[3],l="?"===o[2];if("^^"===s?n=n.parent():(r=i&&i[a],r=r&&r.instance),!r){var u="$"+a+"Controller";r=s?n.inheritedData(u):n.data(u)}if(!r&&!l)throw Cr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(Bi(e)){r=[];for(var c=0,h=e.length;h>c;c++)r[c]=f(t,e[c],n,i)}return r||null}function m(t,e,n,i,r,o){var a=gt();for(var s in i){var u=i[s],c={$scope:u===A||u.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=u.controller;"@"==h&&(h=e[u.name]);var d=l(h,c,!0,u.controllerAs);a[u.name]=d,j||t.data("$"+u.name+"Controller",d.instance)}return a}function g(t,e,r,a,s,l){function u(t,e,i){var r;return P(t)||(i=e,e=t,t=n),j&&(r=b),i||(i=j?x.parent():x),s(t,e,r,i,O)}var d,p,g,v,y,b,w,x,_;if(i===r?(_=o,x=o.$$element):(x=$i(r),_=new at(x,o)),A&&(y=e.$new(!0)),s&&(w=u,w.$$boundTransclude=s),C&&(b=m(x,_,w,C,y,e)),A&&(N.$$addScopeInfo(x,y,!0,!(D&&(D===A||D===A.$$originalDirective))),N.$$addScopeClass(x,!0),y.$$isolateBindings=A.$$isolateBindings,ot(e,_,y,y.$$isolateBindings,A,y)),b){var k,$,S=A||E;S&&b[S.name]&&(k=S.$$bindings.bindToController,v=b[S.name],v&&v.identifier&&k&&($=v,l.$$destroyBindings=ot(e,_,v.instance,k,S)));for(d in b){v=b[d];var T=v();T!==v.instance&&(v.instance=T,x.data("$"+d+"Controller",T),v===$&&(l.$$destroyBindings(),l.$$destroyBindings=ot(e,_,T,k,S)))}}for(d=0,p=c.length;p>d;d++)g=c[d],rt(g,g.isolateScope?y:e,x,_,g.require&&f(g.directiveName,g.require,x,b),w);var O=e;for(A&&(A.template||null===A.templateUrl)&&(O=y),t&&t(O,r.childNodes,n,s),d=h.length-1;d>=0;d--)g=h[d],rt(g,g.isolateScope?y:e,x,_,g.require&&f(g.directiveName,g.require,x,b),w)}d=d||{};for(var v,y,b,w,$,S=-Number.MAX_VALUE,E=d.newScopeDirective,C=d.controllerDirectives,A=d.newIsolateScopeDirective,D=d.templateDirective,O=d.nonTlbTranscludeDirective,I=!1,M=!1,j=d.hasElementTranscludeDirective,L=o.$$element=$i(i),H=u,z=a,V=0,W=t.length;W>V;V++){v=t[V];var X=v.$$start,Z=v.$$end;if(X&&(L=R(i,X,Z)),b=n,S>v.priority)break;if(($=v.scope)&&(v.templateUrl||(x($)?(Y("new/isolated scope",A||E,v,L),A=v):Y("new/isolated scope",A,v,L)),E=E||v),y=v.name,!v.templateUrl&&v.controller&&($=v.controller,C=C||gt(),Y("'"+y+"' controller",C[y],v,L),C[y]=v),($=v.transclude)&&(I=!0,v.$$tlb||(Y("transclusion",O,v,L),O=v),"element"==$?(j=!0,S=v.priority,b=L,L=o.$$element=$i(e.createComment(" "+y+": "+o[y]+" ")),i=L[0],nt(s,q(b),i),z=N(b,a,S,H&&H.name,{nonTlbTranscludeDirective:O})):(b=$i(Pt(i)).contents(),L.empty(),z=N(b,a))),v.template)if(M=!0,Y("template",D,v,L),D=v,$=T(v.template)?v.template(L,o):v.template,$=ct($),v.replace){if(H=v,b=kt($)?[]:he(J(v.templateNamespace,ji($))),i=b[0],1!=b.length||i.nodeType!==Vi)throw Cr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");nt(s,L,i);var tt={$attr:{}},et=B(i,[],tt),st=t.splice(V+1,t.length-(V+1));A&&U(et),t=t.concat(et).concat(st),K(o,tt),W=t.length}else L.html($);if(v.templateUrl)M=!0,Y("template",D,v,L),D=v,v.replace&&(H=v),g=G(t.splice(V,t.length-V),L,o,s,I&&z,c,h,{controllerDirectives:C,newScopeDirective:E!==v&&E,newIsolateScopeDirective:A,templateDirective:D,nonTlbTranscludeDirective:O}),W=t.length;else if(v.compile)try{w=v.compile(L,o,z),T(w)?p(null,w,X,Z):w&&p(w.pre,w.post,X,Z)}catch(lt){r(lt,Q(L))}v.terminal&&(g.terminal=!0,S=Math.max(S,v.priority))}return g.scope=E&&E.scope===!0,g.transcludeOnThisElement=I,g.templateOnThisElement=M,g.transclude=z,d.hasElementTranscludeDirective=j,g}function U(t){for(var e=0,n=t.length;n>e;e++)t[e]=f(t[e],{$$isolateScope:!0})}function V(e,i,o,a,s,l,h){if(i===s)return null;var d=null;if(u.hasOwnProperty(i))for(var p,m=t.get(i+c),g=0,v=m.length;v>g;g++)try{p=m[g],(a===n||a>p.priority)&&-1!=p.restrict.indexOf(o)&&(l&&(p=f(p,{$$start:l,$$end:h})),e.push(p),d=p)}catch(y){r(y)}return d}function W(e){if(u.hasOwnProperty(e))for(var n,i=t.get(e+c),r=0,o=i.length;o>r;r++)if(n=i[r],n.multiElement)return!0;return!1}function K(t,e){var n=e.$attr,i=t.$attr,r=t.$$element;o(t,function(i,r){"$"!=r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),o(e,function(e,o){"class"==o?(D(r,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(r.attr("style",r.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,i[o]=n[o])})}function G(t,e,n,i,r,s,l,u){var c,h,d=[],p=e[0],m=t.shift(),g=f(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=T(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,y=m.templateNamespace;return e.empty(),a(v).then(function(a){var f,b,w,_;if(a=ct(a),m.replace){if(w=kt(a)?[]:he(J(y,ji(a))),f=w[0],1!=w.length||f.nodeType!==Vi)throw Cr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);b={$attr:{}},nt(i,e,f);var k=B(f,[],b);x(m.scope)&&U(k),t=k.concat(t),K(n,b)}else f=p,e.html(a);for(t.unshift(g),c=H(t,f,n,r,e,m,s,l,u),o(i,function(t,n){t==f&&(i[n]=e[0])}),h=I(e[0].childNodes,r);d.length;){var $=d.shift(),S=d.shift(),T=d.shift(),E=d.shift(),C=e[0];if(!$.$$destroyed){if(S!==p){var P=S.className;u.hasElementTranscludeDirective&&m.replace||(C=Pt(f)),nt(T,$i(S),C),D($i(C),P)}_=c.transcludeOnThisElement?M($,c.transclude,E):E,c(h,$,C,i,_,c)}}d=null}),function(t,e,n,i,r){var o=r;e.$$destroyed||(d?d.push(e,n,i,o):(c.transcludeOnThisElement&&(o=M(e,c.transclude,r)),c(h,e,n,i,o,c)))}}function X(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Y(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw Cr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,Q(i))}function Z(t,e){var n=i(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),i=!!e.length;return i&&N.$$addBindingClass(e),function(t,e){var r=e.parent();i||N.$$addBindingClass(r),N.$$addBindingInfo(r,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}function J(t,n){switch(t=yi(t||"html")){case"svg":case"math":var i=e.createElement("div");return i.innerHTML="<"+t+">"+n+"</"+t+">",i.childNodes[0].childNodes;default:return n}}function tt(t,e){if("srcdoc"==e)return E.HTML;var n=j(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?E.RESOURCE_URL:void 0}function et(t,e,n,r,o){var a=tt(t,r);o=y[r]||o;var s=i(n,!0,a,o);if(s){if("multiple"===r&&"select"===j(t))throw Cr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Q(t));e.push({priority:100,compile:function(){return{pre:function(t,e,l){var u=l.$$observers||(l.$$observers={});if($.test(r))throw Cr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=l[r];c!==n&&(s=c&&i(c,!0,a,o),n=c),s&&(l[r]=s(t),(u[r]||(u[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||t).$watch(s,function(t,e){"class"===r&&t!=e?l.$updateClass(t,e):l.$set(r,t)}))}}}})}}function nt(t,n,i){var r,o,a=n[0],s=n.length,l=a.parentNode;if(t)for(r=0,o=t.length;o>r;r++)if(t[r]==a){t[r++]=i;for(var u=r,c=u+s-1,h=t.length;h>u;u++,c++)h>c?t[u]=t[c]:delete t[u];t.length-=s-1,t.context===a&&(t.context=i);break}l&&l.replaceChild(i,a);var d=e.createDocumentFragment();d.appendChild(a),$i.hasData(a)&&($i(i).data($i(a).data()),Si?(Mi=!0,Si.cleanData([a])):delete $i.cache[a[$i.expando]]);for(var p=1,f=n.length;f>p;p++){var m=n[p];$i(m).remove(),d.appendChild(m),delete n[p]}n[0]=i,n.length=1}function it(t,e){return h(function(){return t.apply(null,arguments)},t,e)}function rt(t,e,n,i,o,a){try{t(e,n,i,o,a)}catch(s){r(s,Q(n))}}function ot(t,e,n,r,a,l){var u;o(r,function(r,o){var l,c,h,d,p=r.attrName,f=r.optional,g=r.mode;switch(g){case"@":f||bi.call(e,p)||(n[o]=e[p]=void 0),e.$observe(p,function(t){k(t)&&(n[o]=t)}),e.$$observers[p].$$scope=t,k(e[p])&&(n[o]=i(e[p])(t));break;case"=":if(!bi.call(e,p)){if(f)break;e[p]=void 0}if(f&&!e[p])break;c=s(e[p]),d=c.literal?z:function(t,e){return t===e||t!==t&&e!==e},h=c.assign||function(){throw l=n[o]=c(t),Cr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",e[p],a.name)},l=n[o]=c(t);var v=function(e){return d(e,n[o])||(d(e,l)?h(t,e=n[o]):n[o]=e),l=e};v.$stateful=!0;var y;y=r.collection?t.$watchCollection(e[p],v):t.$watch(s(e[p],v),null,c.literal),u=u||[],u.push(y);break;case"&":if(c=e.hasOwnProperty(p)?s(e[p]):m,c===m&&f)break;n[o]=function(e){return c(t,e)}}});var c=u?function(){for(var t=0,e=u.length;e>t;++t)u[t]()}:m;return l&&c!==m?(l.$on("$destroy",c),m):c}var at=function(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;i>n;n++)r=o[n],this[r]=e[r]}else this.$attr={};this.$$element=t};at.prototype={$normalize:ue,$addClass:function(t){t&&t.length>0&&C.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&C.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=ce(t,e);n&&n.length&&C.addClass(this.$$element,n);var i=ce(e,t);i&&i.length&&C.removeClass(this.$$element,i)},$set:function(t,e,i,a){var s,l=this.$$element[0],u=qt(l,t),c=Vt(l,t),h=t;if(u?(this.$$element.prop(t,e),a=u):c&&(this[c]=e,h=c),this[t]=e,a?this.$attr[t]=a:(a=this.$attr[t],a||(this.$attr[t]=a=ut(t,"-"))),s=j(this.$$element),"a"===s&&"href"===t||"img"===s&&"src"===t)this[t]=e=A(e,"src"===t);else if("img"===s&&"srcset"===t){for(var d="",p=ji(e),f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,m=/\s/.test(p)?f:/(,)/,g=p.split(m),v=Math.floor(g.length/2),y=0;v>y;y++){var b=2*y;d+=A(ji(g[b]),!0),d+=" "+ji(g[b+1])}var w=ji(g[2*y]).split(/\s/);d+=A(ji(w[0]),!0),2===w.length&&(d+=" "+ji(w[1])),this[t]=e=d}i!==!1&&(null===e||e===n?this.$$element.removeAttr(a):this.$$element.attr(a,e));var x=this.$$observers;x&&o(x[h],function(t){try{t(e)}catch(n){r(n)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=gt()),r=i[t]||(i[t]=[]);return r.push(e),v.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||b(n[t])||e(n[t])}),function(){L(r,e)}}};var st=i.startSymbol(),lt=i.endSymbol(),ct="{{"==st||"}}"==lt?g:function(t){return t.replace(/\{\{/g,st).replace(/}}/g,lt)},dt=/^ngAttr[A-Z]/;return N.$$addBindingInfo=S?function(t,e){var n=t.data("$binding")||[];Bi(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:m,N.$$addBindingClass=S?function(t){D(t,"ng-binding")}:m,N.$$addScopeInfo=S?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:m,N.$$addScopeClass=S?function(t,e){D(t,e?"ng-isolate-scope":"ng-scope")}:m,N}]}function ue(t){return _t(t.replace(Pr,""))}function ce(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a==r[s])continue t;n+=(n.length>0?" ":"")+a}return n}function he(t){t=$i(t);var e=t.length;if(1>=e)return t;for(;e--;){var n=t[e];n.nodeType===Gi&&Ci.call(t,e,1)}return t}function de(t,e){if(e&&k(e))return e;if(k(t)){var n=Dr.exec(t);if(n)return n[3]}}function pe(){var t={},e=!1;this.register=function(e,n){pt(e,"controller"),x(e)?h(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(r,o){function a(t,e,n,r){if(!t||!x(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}return function(i,s,l,u){var c,d,p,f;if(l=l===!0,u&&k(u)&&(f=u),k(i)){if(d=i.match(Dr),!d)throw Ar("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);p=d[1],f=f||d[3],i=t.hasOwnProperty(p)?t[p]:ft(s.$scope,p,!0)||(e?ft(o,p,!0):n),dt(i,p,!0)}if(l){var m=(Bi(i)?i[i.length-1]:i).prototype;c=Object.create(m||null),f&&a(s,f,c,p||i.name);var g;return g=h(function(){var t=r.invoke(i,c,s,p);return t!==c&&(x(t)||T(t))&&(c=t,f&&a(s,f,c,p||i.name)),c},{instance:c,identifier:f})}return c=r.instantiate(i,s,p),f&&a(s,f,c,p||i.name),c}}]}function fe(){this.$get=["$window",function(t){return $i(t.document)}]}function me(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function ge(t){return x(t)?S(t)?t.toISOString():K(t):t}function ve(){this.$get=function(){return function(t){if(!t)return"";var e=[];return a(t,function(t,n){null===t||b(t)||(Bi(t)?o(t,function(t,i){e.push(it(n)+"="+it(ge(t)))}):e.push(it(n)+"="+it(ge(t))))}),e.join("&")}}}function ye(){this.$get=function(){return function(t){function e(t,i,r){null===t||b(t)||(Bi(t)?o(t,function(t,n){e(t,i+"["+(x(t)?n:"")+"]")}):x(t)&&!S(t)?a(t,function(t,n){e(t,i+(r?"":"[")+n+(r?"":"]"))}):n.push(it(i)+"="+it(ge(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function be(t,e){if(k(t)){var n=t.replace(Rr,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(Or)||we(n))&&(t=G(n))}}return t}function we(t){var e=t.match(Mr);return e&&Br[e[0]].test(t)}function xe(t){function e(t,e){t&&(i[t]=i[t]?i[t]+", "+e:e)}var n,i=gt();return k(t)?o(t.split("\n"),function(t){n=t.indexOf(":"),e(yi(ji(t.substr(0,n))),ji(t.substr(n+1)))}):x(t)&&o(t,function(t,n){e(yi(n),ji(t))}),i}function _e(t){var e;return function(n){if(e||(e=xe(t)),n){var i=e[yi(n)];return void 0===i&&(i=null),i}return e}}function ke(t,e,n,i){return T(i)?i(t,e,n):(o(i,function(i){t=i(t,e,n)}),t)}function $e(t){return t>=200&&300>t}function Se(){var t=this.defaults={transformResponse:[be],transformRequest:[function(t){return!x(t)||A(t)||N(t)||D(t)?t:K(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:H(Ir),put:H(Ir),patch:H(Ir)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},e=!1;this.useApplyAsync=function(t){return w(t)?(e=!!t,this):e};var r=!0;this.useLegacyPromiseExtensions=function(t){return w(t)?(r=!!t,this):r};var a=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,l,u,c,d,p){function f(e){function a(t){var e=h({},t);return t.data?e.data=ke(t.data,t.headers,t.status,u.transformResponse):e.data=t.data,$e(t.status)?e:d.reject(e)}function s(t,e){var n,i={};return o(t,function(t,r){T(t)?(n=t(e),null!=n&&(i[r]=n)):i[r]=t}),i}function l(e){var n,i,r,o=t.headers,a=h({},e.headers);o=h({},o.common,o[yi(e.method)]);t:for(n in o){i=yi(n);for(r in a)if(yi(r)===i)continue t;a[n]=o[n]}return s(a,H(e))}if(!Oi.isObject(e))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);var u=h({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},e);u.headers=l(e),u.method=wi(u.method),u.paramSerializer=k(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var c=function(e){var i=e.headers,r=ke(e.data,_e(i),n,e.transformRequest);return b(r)&&o(i,function(t,e){"content-type"===yi(e)&&delete i[e]}),b(e.withCredentials)&&!b(t.withCredentials)&&(e.withCredentials=t.withCredentials),v(e,r).then(a,a)},f=[c,n],m=d.when(u);for(o($,function(t){(t.request||t.requestError)&&f.unshift(t.request,t.requestError),(t.response||t.responseError)&&f.push(t.response,t.responseError)});f.length;){var g=f.shift(),y=f.shift();m=m.then(g,y)}return r?(m.success=function(t){return dt(t,"fn"),m.then(function(e){t(e.data,e.status,e.headers,u)}),m},m.error=function(t){return dt(t,"fn"),m.then(null,function(e){t(e.data,e.status,e.headers,u)}),m}):(m.success=Lr("success"),m.error=Lr("error")),m}function m(t){o(arguments,function(t){f[t]=function(e,n){return f(h({},n||{},{method:t,url:e}))}})}function g(t){o(arguments,function(t){f[t]=function(e,n,i){return f(h({},i||{},{method:t,url:e,data:n}))}})}function v(i,r){function o(t,n,i,r){function o(){a(n,t,i,r)}p&&($e(t)?p.put($,[t,n,xe(i),r]):p.remove($)),e?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function a(t,e,n,r){e=Math.max(e,0),($e(e)?g.resolve:g.reject)({data:t,status:e,headers:_e(n),config:i,statusText:r})}function u(t){a(t.data,t.status,H(t.headers()),t.statusText)}function h(){var t=f.pendingRequests.indexOf(i);-1!==t&&f.pendingRequests.splice(t,1)}var p,m,g=d.defer(),v=g.promise,k=i.headers,$=y(i.url,i.paramSerializer(i.params));if(f.pendingRequests.push(i),v.then(h,h),!i.cache&&!t.cache||i.cache===!1||"GET"!==i.method&&"JSONP"!==i.method||(p=x(i.cache)?i.cache:x(t.cache)?t.cache:_),p&&(m=p.get($),w(m)?I(m)?m.then(u,u):Bi(m)?a(m[1],m[0],H(m[2]),m[3]):a(m,200,{},"OK"):p.put($,v)),b(m)){var S=Sn(i.url)?l()[i.xsrfCookieName||t.xsrfCookieName]:n;S&&(k[i.xsrfHeaderName||t.xsrfHeaderName]=S),s(i.method,$,r,o,k,i.timeout,i.withCredentials,i.responseType)}return v}function y(t,e){return e.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+e),t}var _=u("$http");t.paramSerializer=k(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var $=[];return o(a,function(t){$.unshift(k(t)?p.get(t):p.invoke(t))}),f.pendingRequests=[],m("get","delete","head","jsonp"),g("post","put","patch"),f.defaults=t,f}]}function Te(){return new t.XMLHttpRequest}function Ee(){this.$get=["$browser","$window","$document",function(t,e,n){return Ce(t,Te,t.defer,e.angular.callbacks,n[0])}]}function Ce(t,e,i,r,a){function s(t,e,n){var i=a.createElement("script"),o=null;return i.type="text/javascript",i.src=t,i.async=!0,o=function(t){er(i,"load",o),er(i,"error",o),a.body.removeChild(i),i=null;var s=-1,l="unknown";t&&("load"!==t.type||r[e].called||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},tr(i,"load",o),tr(i,"error",o),a.body.appendChild(i),o}return function(a,l,u,c,h,d,p,f){function g(){b&&b(),x&&x.abort()}function v(e,r,o,a,s){$!==n&&i.cancel($),b=x=null,e(r,o,a,s),t.$$completeOutstandingRequest(m)}if(t.$$incOutstandingRequestCount(),l=l||t.url(),"jsonp"==yi(a)){var y="_"+(r.counter++).toString(36);r[y]=function(t){r[y].data=t,r[y].called=!0};var b=s(l.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(t,e){v(c,t,r[y].data,"",e),r[y]=m})}else{var x=e();x.open(a,l,!0),o(h,function(t,e){w(t)&&x.setRequestHeader(e,t)}),x.onload=function(){var t=x.statusText||"",e="response"in x?x.response:x.responseText,n=1223===x.status?204:x.status;0===n&&(n=e?200:"file"==$n(l).protocol?404:0),v(c,n,e,x.getAllResponseHeaders(),t)};var _=function(){v(c,-1,null,null,"")};if(x.onerror=_,x.onabort=_,p&&(x.withCredentials=!0),f)try{x.responseType=f}catch(k){if("json"!==f)throw k}x.send(u)}if(d>0)var $=i(g,d);else I(d)&&d.then(g)}}function Pe(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(t){return"\\\\\\"+t}function a(n){return n.replace(d,t).replace(p,e)}function s(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=K(t)}return t}function l(o,l,d,p){function f(t){try{return t=C(t),p&&!w(t)?t:s(t)}catch(e){i(Fr.interr(o,e))}}p=!!p;for(var m,g,v,y=0,x=[],_=[],k=o.length,$=[],S=[];k>y;){if(-1==(m=o.indexOf(t,y))||-1==(g=o.indexOf(e,m+u))){y!==k&&$.push(a(o.substring(y)));break}y!==m&&$.push(a(o.substring(y,m))),v=o.substring(m+u,g),x.push(v),_.push(n(v,f)),y=g+c,S.push($.length),$.push("")}if(d&&$.length>1&&Fr.throwNoconcat(o),!l||x.length){var E=function(t){for(var e=0,n=x.length;n>e;e++){if(p&&b(t[e]))return;$[S[e]]=t[e]}return $.join("")},C=function(t){return d?r.getTrusted(d,t):r.valueOf(t)};return h(function(t){var e=0,n=x.length,r=new Array(n);try{for(;n>e;e++)r[e]=_[e](t);return E(r)}catch(a){i(Fr.interr(o,a))}},{exp:o,expressions:x,$$watchDelegate:function(t,e){var n;return t.$watchGroup(_,function(i,r){var o=E(i);T(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}}var u=t.length,c=e.length,d=new RegExp(t.replace(/./g,o),"g"),p=new RegExp(e.replace(/./g,o),"g");return l.startSymbol=function(){return t},l.endSymbol=function(){return e},l}]}function Ae(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,i){function r(r,a,s,l){var u=arguments.length>4,c=u?q(arguments,4):[],h=e.setInterval,d=e.clearInterval,p=0,f=w(l)&&!l,m=(f?i:n).defer(),g=m.promise;return s=w(s)?s:0,g.then(null,null,u?function(){r.apply(null,c)}:r),g.$$intervalId=h(function(){m.notify(p++),s>0&&p>=s&&(m.resolve(p),d(g.$$intervalId),delete o[g.$$intervalId]),f||t.$apply()},a),o[g.$$intervalId]=m,g}var o={};return r.cancel=function(t){return t&&t.$$intervalId in o?(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0):!1},r}]}function De(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=nt(e[n]);return e.join("/")}function Ne(t,e){var n=$n(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=p(n.port)||zr[n.protocol]||null}function Oe(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var i=$n(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=tt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Ie(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function Me(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Be(t){return t.replace(/(#.+)|#$/,"$1")}function Re(t){return t.substr(0,Me(t).lastIndexOf("/")+1)}function je(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function Le(t,e,i){this.$$html5=!0,i=i||"",Ne(t,this),this.$$parse=function(t){var n=Ie(e,t);if(!k(n))throw Ur("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Oe(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=et(this.$$search),n=this.$$hash?"#"+nt(this.$$hash):"";this.$$url=De(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s,l;return(a=Ie(t,r))!==n?(s=a,l=(a=Ie(i,a))!==n?e+(Ie("/",a)||a):t+s):(a=Ie(e,r))!==n?l=e+a:e==r+"/"&&(l=e),l&&this.$$parse(l),!!l}}function Fe(t,e,n){Ne(t,this),this.$$parse=function(i){function r(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(n)&&(e=e.replace(n,"")),r.exec(e)?t:(i=r.exec(t),i?i[1]:t)}var o,a=Ie(t,i)||Ie(e,i);b(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",b(a)&&(t=i,this.replace())):(o=Ie(n,a),b(o)&&(o=a)),Oe(o,this),this.$$path=r(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var e=et(this.$$search),i=this.$$hash?"#"+nt(this.$$hash):"";this.$$url=De(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Me(t)==Me(e)?(this.$$parse(e),!0):!1}}function He(t,e,n){this.$$html5=!0,Fe.apply(this,arguments),this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,a;return t==Me(i)?o=i:(a=Ie(e,i))?o=t+n+a:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o},this.$$compose=function(){var e=et(this.$$search),i=this.$$hash?"#"+nt(this.$$hash):"";this.$$url=De(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url}}function ze(t){return function(){return this[t]}}function Ue(t,e){return function(n){return b(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function qe(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return w(e)?(t=e,this):t},this.html5Mode=function(t){return O(t)?(e.enabled=t,this):x(t)?(O(t.enabled)&&(e.enabled=t.enabled),O(t.requireBase)&&(e.requireBase=t.requireBase),O(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){function s(t,e,n){var r=u.url(),o=u.$$state;try{i.url(t,e,n),u.$$state=i.state()}catch(a){throw u.url(r),u.$$state=o,a}}function l(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}var u,c,h,d=i.baseHref(),p=i.url();if(e.enabled){if(!d&&e.requireBase)throw Ur("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=je(p)+(d||"/"),c=r.history?Le:He}else h=Me(p),c=Fe;var f=Re(h);u=new c(h,f,"#"+t),u.$$parseLinkUrl(p,p),u.$$state=i.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var r=$i(t.target);"a"!==j(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var s=r.prop("href"),l=r.attr("href")||r.attr("xlink:href");x(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=$n(s.animVal).href),m.test(s)||!s||r.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(s,l)&&(t.preventDefault(),u.absUrl()!=i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Be(u.absUrl())!=Be(p)&&i.url(u.absUrl(),!0);var g=!0;return i.onUrlChange(function(t,e){return b(Ie(f,t))?void(a.location.href=t):(n.$evalAsync(function(){var i,r=u.absUrl(),o=u.$$state;u.$$parse(t),u.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,u.absUrl()===t&&(i?(u.$$parse(r),u.$$state=o,
s(r,!1,o)):(g=!1,l(r,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var t=Be(i.url()),e=Be(u.absUrl()),o=i.state(),a=u.$$replace,c=t!==e||u.$$html5&&r.history&&o!==u.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var e=u.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;u.absUrl()===e&&(i?(u.$$parse(t),u.$$state=o):(c&&s(e,a,o===u.$$state?null:u.$$state),l(t,o)))})),u.$$replace=!1}),u}]}function Ve(){var t=!0,e=this;this.debugEnabled=function(e){return w(e)?(t=e,this):t},this.$get=["$window",function(n){function i(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function r(t){var e=n.console||{},r=e[t]||e.log||m,a=!1;try{a=!!r.apply}catch(s){}return a?function(){var t=[];return o(arguments,function(e){t.push(i(e))}),r.apply(e,t)}:function(t,e){r(t,null==e?"":e)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function We(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw Vr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Ke(t,e){if(t){if(t.constructor===t)throw Vr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw Vr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw Vr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw Vr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Ge(t,e){if(t){if(t.constructor===t)throw Vr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===Wr||t===Kr||t===Gr)throw Vr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Xe(t,e){return"undefined"!=typeof t?t:e}function Ye(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function Ze(t,e){var n=t(e);return!n.$stateful}function Qe(t,e){var n,i;switch(t.type){case Qr.Program:n=!0,o(t.body,function(t){Qe(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case Qr.Literal:t.constant=!0,t.toWatch=[];break;case Qr.UnaryExpression:Qe(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Qr.BinaryExpression:Qe(t.left,e),Qe(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Qr.LogicalExpression:Qe(t.left,e),Qe(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Qr.ConditionalExpression:Qe(t.test,e),Qe(t.alternate,e),Qe(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Qr.Identifier:t.constant=!1,t.toWatch=[t];break;case Qr.MemberExpression:Qe(t.object,e),t.computed&&Qe(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Qr.CallExpression:n=t.filter?Ze(e,t.callee.name):!1,i=[],o(t.arguments,function(t){Qe(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&Ze(e,t.callee.name)?i:[t];break;case Qr.AssignmentExpression:Qe(t.left,e),Qe(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Qr.ArrayExpression:n=!0,i=[],o(t.elements,function(t){Qe(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=i;break;case Qr.ObjectExpression:n=!0,i=[],o(t.properties,function(t){Qe(t.value,e),n=n&&t.value.constant,t.value.constant||i.push.apply(i,t.value.toWatch)}),t.constant=n,t.toWatch=i;break;case Qr.ThisExpression:t.constant=!1,t.toWatch=[]}}function Je(t){if(1==t.length){var e=t[0].expression,i=e.toWatch;return 1!==i.length?i:i[0]!==e?i:n}}function tn(t){return t.type===Qr.Identifier||t.type===Qr.MemberExpression}function en(t){return 1===t.body.length&&tn(t.body[0].expression)?{type:Qr.AssignmentExpression,left:t.body[0].expression,right:{type:Qr.NGValueParameter},operator:"="}:void 0}function nn(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Qr.Literal||t.body[0].expression.type===Qr.ArrayExpression||t.body[0].expression.type===Qr.ObjectExpression)}function rn(t){return t.constant}function on(t,e){this.astBuilder=t,this.$filter=e}function an(t,e){this.astBuilder=t,this.$filter=e}function sn(t){return"constructor"==t}function ln(t){return T(t.valueOf)?t.valueOf():to.call(t)}function un(){var t=gt(),e=gt();this.$get=["$filter",function(i){function r(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=ln(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function a(t,e,i,o,a){var s,l=o.inputs;if(1===l.length){var u=r;return l=l[0],t.$watch(function(t){var e=l(t);return r(e,u)||(s=o(t,n,n,[e]),u=e&&ln(e)),s},e,i,a)}for(var c=[],h=[],d=0,p=l.length;p>d;d++)c[d]=r,h[d]=null;return t.$watch(function(t){for(var e=!1,i=0,a=l.length;a>i;i++){var u=l[i](t);(e||(e=!r(u,c[i])))&&(h[i]=u,c[i]=u&&ln(u))}return e&&(s=o(t,n,n,h)),s},e,i,a)}function s(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,T(e)&&e.apply(this,arguments),w(t)&&i.$$postDigest(function(){w(o)&&r()})},n)}function l(t,e,n,i){function r(t){var e=!0;return o(t,function(t){w(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return i(t)},function(t,n,i){s=t,T(e)&&e.call(this,t,n,i),r(t)&&i.$$postDigest(function(){r(s)&&a()})},n)}function u(t,e,n,i){var r;return r=t.$watch(function(t){return i(t)},function(t,n,i){T(e)&&e.apply(this,arguments),r()},n)}function c(t,e){if(!e)return t;var n=t.$$watchDelegate,i=n!==l&&n!==s,r=i?function(n,i,r,o){var a=t(n,i,r,o);return e(a,n,i)}:function(n,i,r,o){var a=t(n,i,r,o),s=e(a,n,i);return w(a)?s:a};return t.$$watchDelegate&&t.$$watchDelegate!==a?r.$$watchDelegate=t.$$watchDelegate:e.$stateful||(r.$$watchDelegate=a,r.inputs=t.inputs?t.inputs:[t]),r}var h=Fi().noUnsafeEval,d={csp:h,expensiveChecks:!1},p={csp:h,expensiveChecks:!0};return function(n,r,o){var h,f,g;switch(typeof n){case"string":n=n.trim(),g=n;var v=o?e:t;if(h=v[g],!h){":"===n.charAt(0)&&":"===n.charAt(1)&&(f=!0,n=n.substring(2));var y=o?p:d,b=new Zr(y),w=new Jr(b,i,y);h=w.parse(n),h.constant?h.$$watchDelegate=u:f?h.$$watchDelegate=h.literal?l:s:h.inputs&&(h.$$watchDelegate=a),v[g]=h}return c(h,r);case"function":return c(n,r);default:return m}}}]}function cn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return dn(function(e){t.$evalAsync(e)},e)}]}function hn(){this.$get=["$browser","$exceptionHandler",function(t,e){return dn(function(e){t.defer(e)},e)}]}function dn(t,e){function r(t,e,n){function i(e){return function(n){r||(r=!0,e.call(t,n))}}var r=!1;return[i(e),i(n)]}function a(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function l(t){var i,r,o;o=t.pending,t.processScheduled=!1,t.pending=n;for(var a=0,s=o.length;s>a;++a){r=o[a][0],i=o[a][t.status];try{T(i)?r.resolve(i(t.value)):1===t.status?r.resolve(t.value):r.reject(t.value)}catch(l){r.reject(l),e(l)}}}function u(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){l(e)}))}function c(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function d(t){var e=new c,n=0,i=Bi(t)?[]:{};return o(t,function(t,r){n++,y(t).then(function(t){i.hasOwnProperty(r)||(i[r]=t,--n||e.resolve(i))},function(t){i.hasOwnProperty(r)||e.reject(t)})}),0===n&&e.resolve(i),e.promise}var p=i("$q",TypeError),f=function(){return new c};h(a.prototype,{then:function(t,e,n){if(b(t)&&b(e)&&b(n))return this;var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&u(this.$$state),i.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return v(e,!0,t)},function(e){return v(e,!1,t)},e)}}),h(c.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(p("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var n,i;i=r(this,this.$$resolve,this.$$reject);try{(x(t)||T(t))&&(n=t&&t.then),T(n)?(this.promise.$$state.status=-1,n.call(t,i[0],i[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,u(this.promise.$$state))}catch(o){i[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,a=i.length;a>o;o++){r=i[o][0],t=i[o][3];try{r.notify(T(t)?t(n):n)}catch(s){e(s)}}})}});var m=function(t){var e=new c;return e.reject(t),e.promise},g=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},v=function(t,e,n){var i=null;try{T(n)&&(i=n())}catch(r){return g(r,!1)}return I(i)?i.then(function(){return g(t,e)},function(t){return g(t,!1)}):g(t,e)},y=function(t,e,n,i){var r=new c;return r.resolve(t),r.promise.then(e,n,i)},w=y,_=function k(t){function e(t){i.resolve(t)}function n(t){i.reject(t)}if(!T(t))throw p("norslvr","Expected resolverFn, got '{0}'",t);if(!(this instanceof k))return new k(t);var i=new c;return t(e,n),i.promise};return _.defer=f,_.reject=m,_.when=y,_.resolve=w,_.all=d,_}function pn(){this.$get=["$window","$timeout",function(t,e){function n(){for(var t=0;t<c.length;t++){var e=c[t];e&&(c[t]=null,e())}u=c.length=0}function i(t){var e=c.length;return u++,c.push(t),0===e&&(l=s(n)),function(){e>=0&&(c[e]=null,e=null,0===--u&&l&&(l(),l=null,c.length=0))}}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame,o=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,a=!!r,s=a?function(t){var e=r(t);return function(){o(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};i.supported=a;var l,u=0,c=[];return i}]}function fn(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=l(),this.$$ChildScope=null}return e.prototype=t,e}var e=10,n=i("$rootScope"),a=null,s=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,u,c,h){function d(t){t.currentScope.$$destroyed=!0}function p(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function f(t){if($.$$phase)throw n("inprog","{0} already in progress",$.$$phase);$.$$phase=t}function g(){$.$$phase=null}function v(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function y(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function w(){}function _(){for(;C.length;)try{C.shift()()}catch(t){u(t)}s=null}function k(){null===s&&(s=h.defer(function(){$.$apply(_)}))}p.prototype={constructor:p,$new:function(e,n){var i;return n=n||this,e?(i=new p,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),i=new this.$$ChildScope),i.$parent=n,i.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=i,n.$$childTail=i):n.$$childHead=n.$$childTail=i,(e||n!=this)&&i.$on("$destroy",d),i},$watch:function(t,e,n,i){var r=c(t);if(r.$$watchDelegate)return r.$$watchDelegate(this,e,n,r,t);var o=this,s=o.$$watchers,l={fn:e,last:w,get:r,exp:i||t,eq:!!n};return a=null,T(e)||(l.fn=m),s||(s=o.$$watchers=[]),s.unshift(l),v(this,1),function(){L(s,l)>=0&&v(o,-1),a=null}},$watchGroup:function(t,e){function n(){l=!1,u?(u=!1,e(r,r,s)):e(r,i,s)}var i=new Array(t.length),r=new Array(t.length),a=[],s=this,l=!1,u=!0;if(!t.length){var c=!0;return s.$evalAsync(function(){c&&e(r,r,s)}),function(){c=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){r[0]=t,i[0]=n,e(r,t===n?r:i,o)}):(o(t,function(t,e){var o=s.$watch(t,function(t,o){r[e]=t,i[e]=o,l||(l=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){o=t;var e,n,i,s,l;if(!b(o)){if(x(o))if(r(o)){a!==p&&(a=p,g=a.length=0,h++),e=o.length,g!==e&&(h++,a.length=g=e);for(var u=0;e>u;u++)l=a[u],s=o[u],i=l!==l&&s!==s,i||l===s||(h++,a[u]=s)}else{a!==f&&(a=f={},g=0,h++),e=0;for(n in o)o.hasOwnProperty(n)&&(e++,s=o[n],l=a[n],n in a?(i=l!==l&&s!==s,i||l===s||(h++,a[n]=s)):(g++,a[n]=s,h++));if(g>e){h++;for(n in a)o.hasOwnProperty(n)||(g--,delete a[n])}}else a!==o&&(a=o,h++);return h}}function i(){if(m?(m=!1,e(o,o,l)):e(o,s,l),u)if(x(o))if(r(o)){s=new Array(o.length);for(var t=0;t<o.length;t++)s[t]=o[t]}else{s={};for(var n in o)bi.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,l=this,u=e.length>1,h=0,d=c(t,n),p=[],f={},m=!0,g=0;return this.$watch(d,i)},$digest:function(){var t,i,r,o,l,c,d,p,m,v,y=e,b=this,x=[];f("$digest"),h.$$checkUrlChange(),this===$&&null!==s&&(h.defer.cancel(s),_()),a=null;do{for(c=!1,p=b;S.length;){try{v=S.shift(),v.scope.$eval(v.expression,v.locals)}catch(k){u(k)}a=null}t:do{if(o=p.$$watchers)for(l=o.length;l--;)try{if(t=o[l])if((i=t.get(p))===(r=t.last)||(t.eq?z(i,r):"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))){if(t===a){c=!1;break t}}else c=!0,a=t,t.last=t.eq?F(i,null):i,t.fn(i,r===w?i:r,p),5>y&&(m=4-y,x[m]||(x[m]=[]),x[m].push({msg:T(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:i,oldVal:r}))}catch(k){u(k)}if(!(d=p.$$watchersCount&&p.$$childHead||p!==b&&p.$$nextSibling))for(;p!==b&&!(d=p.$$nextSibling);)p=p.$parent}while(p=d);if((c||S.length)&&!y--)throw g(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,x)}while(c||S.length);for(g();E.length;)try{E.shift()()}catch(k){u(k)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$&&h.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var e in this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(t,e){return c(t)(this,e)},$evalAsync:function(t,e){$.$$phase||S.length||h.defer(function(){S.length&&$.$digest()}),S.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){E.push(t)},$apply:function(t){try{f("$apply");try{return this.$eval(t)}finally{g()}}catch(e){u(e)}finally{try{$.$digest()}catch(e){throw u(e),e}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&C.push(e),k()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(n[i]=null,y(r,1,t))}},$emit:function(t,e){var n,i,r,o=[],a=this,s=!1,l={name:t,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=U([l],arguments,1);do{for(n=a.$$listeners[t]||o,l.currentScope=a,i=0,r=n.length;r>i;i++)if(n[i])try{n[i].apply(null,c)}catch(h){u(h)}else n.splice(i,1),i--,r--;if(s)return l.currentScope=null,l;a=a.$parent}while(a);return l.currentScope=null,l},$broadcast:function(t,e){var n=this,i=n,r=n,o={name:t,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return o;for(var a,s,l,c=U([o],arguments,1);i=r;){for(o.currentScope=i,a=i.$$listeners[t]||[],s=0,l=a.length;l>s;s++)if(a[s])try{a[s].apply(null,c)}catch(h){u(h)}else a.splice(s,1),s--,l--;if(!(r=i.$$listenerCount[t]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(r=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var $=new p,S=$.$$asyncQueue=[],E=$.$$postDigestQueue=[],C=$.$$applyAsyncQueue=[];return $}]}function mn(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return w(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return w(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return r=$n(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function gn(t){if("self"===t)return t;if(k(t)){if(t.indexOf("***")>-1)throw eo("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Li(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(E(t))return new RegExp("^"+t.source+"$");throw eo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function vn(t){var e=[];return w(t)&&o(t,function(t){e.push(gn(t))}),e}function yn(){this.SCE_CONTEXTS=no;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=vn(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=vn(t)),e},this.$get=["$injector",function(i){function r(t,e){return"self"===t?Sn(e):!!t.exec(e.href)}function o(n){var i,o,a=$n(n.toString()),s=!1;for(i=0,o=t.length;o>i;i++)if(r(t[i],a)){s=!0;break}if(s)for(i=0,o=e.length;o>i;i++)if(r(e[i],a)){s=!1;break}return s}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var i=d.hasOwnProperty(t)?d[t]:null;if(!i)throw eo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||e===n||""===e)return e;if("string"!=typeof e)throw eo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new i(e)}function l(t){return t instanceof h?t.$$unwrapTrustedValue():t}function u(t,e){if(null===e||e===n||""===e)return e;var i=d.hasOwnProperty(t)?d[t]:null;if(i&&e instanceof i)return e.$$unwrapTrustedValue();if(t===no.RESOURCE_URL){if(o(e))return e;throw eo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===no.HTML)return c(e);throw eo("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(t){throw eo("unsafe","Attempting to use an unsafe value in a safe context.")};i.has("$sanitize")&&(c=i.get("$sanitize"));var h=a(),d={};return d[no.HTML]=a(h),d[no.CSS]=a(h),d[no.URL]=a(h),d[no.JS]=a(h),d[no.RESOURCE_URL]=a(d[no.URL]),{trustAs:s,getTrusted:u,valueOf:l}}]}function bn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>ki)throw eo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=H(no);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=g),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,a=i.getTrusted,s=i.trustAs;return o(no,function(t,e){var n=yi(e);i[_t("parse_as_"+n)]=function(e){return r(t,e)},i[_t("get_trusted_"+n)]=function(e){return a(t,e)},i[_t("trust_as_"+n)]=function(e){return s(t,e)}}),i}]}function wn(){this.$get=["$window","$document",function(t,e){var n,i,r={},o=p((/android (\d+)/.exec(yi((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,u=s.body&&s.body.style,c=!1,h=!1;if(u){for(var d in u)if(i=l.exec(d)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),c=!!("transition"in u||n+"Transition"in u),h=!!("animation"in u||n+"Animation"in u),!o||c&&h||(c=k(u.webkitTransition),h=k(u.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>o||a),hasEvent:function(t){if("input"===t&&11>=ki)return!1;if(b(r[t])){var e=s.createElement("div");r[t]="on"+t in e}return r[t]},csp:Fi(),vendorPrefix:n,transitions:c,animations:h,android:o}}]}function xn(){this.$get=["$templateCache","$http","$q","$sce",function(t,e,n,i){function r(o,a){function s(t){if(!a)throw Cr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",o,t.status,t.statusText);return n.reject(t)}r.totalPendingRequests++,k(o)&&t.get(o)||(o=i.getTrustedResourceUrl(o));var l=e.defaults&&e.defaults.transformResponse;Bi(l)?l=l.filter(function(t){return t!==be}):l===be&&(l=null);var u={cache:t,transformResponse:l};return e.get(o,u)["finally"](function(){r.totalPendingRequests--}).then(function(e){return t.put(o,e.data),e.data},s)}return r.totalPendingRequests=0,r}]}function _n(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={};return i.findBindings=function(t,e,n){var i=t.getElementsByClassName("ng-binding"),r=[];return o(i,function(t){var i=Oi.element(t).data("$binding");i&&o(i,function(i){if(n){var o=new RegExp("(^|\\s)"+Li(e)+"(\\s|\\||$)");o.test(i)&&r.push(t)}else-1!=i.indexOf(e)&&r.push(t)})}),r},i.findModels=function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=n?"=":"*=",a="["+i[r]+"model"+o+'"'+e+'"]',s=t.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},i.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},i}]}function kn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){function o(o,s,l){T(o)||(l=s,s=o,o=m);var u,c=q(arguments,3),h=w(l)&&!l,d=(h?i:n).defer(),p=d.promise;return u=e.defer(function(){try{d.resolve(o.apply(null,c))}catch(e){d.reject(e),r(e)}finally{delete a[p.$$timeoutId]}h||t.$apply()},s),p.$$timeoutId=u,a[u]=d,p}var a={};return o.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function $n(t){var e=t;return ki&&(io.setAttribute("href",e),e=io.href),io.setAttribute("href",e),{href:io.href,protocol:io.protocol?io.protocol.replace(/:$/,""):"",host:io.host,search:io.search?io.search.replace(/^\?/,""):"",hash:io.hash?io.hash.replace(/^#/,""):"",hostname:io.hostname,port:io.port,pathname:"/"===io.pathname.charAt(0)?io.pathname:"/"+io.pathname}}function Sn(t){var e=k(t)?$n(t):t;return e.protocol===ro.protocol&&e.host===ro.host}function Tn(){this.$get=v(t)}function En(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var i=t[0]||{},r={},o="";return function(){var t,a,s,l,u,c=i.cookie||"";if(c!==o)for(o=c,t=o.split("; "),r={},s=0;s<t.length;s++)a=t[s],l=a.indexOf("="),l>0&&(u=e(a.substring(0,l)),r[u]===n&&(r[u]=e(a.substring(l+1))));return r}}function Cn(){this.$get=En}function Pn(t){function e(i,r){if(x(i)){var a={};return o(i,function(t,n){a[n]=e(n,t)}),a}return t.factory(i+n,r)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",In),e("date",Kn),e("filter",An),e("json",Gn),e("limitTo",Xn),e("lowercase",uo),e("number",Mn),e("orderBy",Yn),e("uppercase",co)}function An(){return function(t,e,n){if(!r(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a,s=On(e);switch(s){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=Dn(e,n,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function Dn(t,e,n){var i,r=x(t)&&"$"in t;return e===!0?e=z:T(e)||(e=function(t,e){return b(t)?!1:null===t||null===e?t===e:x(e)||x(t)&&!y(t)?!1:(t=yi(""+t),e=yi(""+e),-1!==t.indexOf(e))}),i=function(i){return r&&!x(i)?Nn(i,t.$,e,!1):Nn(i,t,e,n)}}function Nn(t,e,n,i,r){var o=On(t),a=On(e);if("string"===a&&"!"===e.charAt(0))return!Nn(t,e.substring(1),n,i);if(Bi(t))return t.some(function(t){return Nn(t,e,n,i)});switch(o){case"object":var s;if(i){for(s in t)if("$"!==s.charAt(0)&&Nn(t[s],e,n,!0))return!0;return r?!1:Nn(t,e,n,!1)}if("object"===a){for(s in e){var l=e[s];if(!T(l)&&!b(l)){var u="$"===s,c=u?t:t[s];if(!Nn(c,l,n,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function On(t){return null===t?"null":typeof t}function In(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return b(n)&&(n=e.CURRENCY_SYM),b(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:Bn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Mn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Bn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Bn(t,e,n,i,r){if(x(t))return"";var o=0>t;t=Math.abs(t);var a=t===1/0;if(!a&&!isFinite(t))return"";var s=t+"",l="",u=!1,c=[];if(a&&(l="\u221e"),!a&&-1!==s.indexOf("e")){var h=s.match(/([\d\.]+)e(-?)(\d+)/);h&&"-"==h[2]&&h[3]>r+1?t=0:(l=s,u=!0)}if(a||u)r>0&&1>t&&(l=t.toFixed(r),t=parseFloat(l));else{var d=(s.split(oo)[1]||"").length;b(r)&&(r=Math.min(Math.max(e.minFrac,d),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+r)).toString()+"e"+-r);var p=(""+t).split(oo),f=p[0];p=p[1]||"";var m,g=0,v=e.lgSize,y=e.gSize;if(f.length>=v+y)for(g=f.length-v,m=0;g>m;m++)(g-m)%y===0&&0!==m&&(l+=n),l+=f.charAt(m);for(m=g;m<f.length;m++)(f.length-m)%v===0&&0!==m&&(l+=n),l+=f.charAt(m);for(;p.length<r;)p+="0";r&&"0"!==r&&(l+=i+p.substr(0,r))}return 0===t&&(o=!1),c.push(o?e.negPre:e.posPre,l,o?e.negSuf:e.posSuf),c.join("")}function Rn(t,e,n){var i="";for(0>t&&(i="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function jn(t,e,n,i){return n=n||0,function(r){var o=r["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Rn(o,e,i)}}function Ln(t,e){return function(n,i){var r=n["get"+t](),o=wi(e?"SHORT"+t:t);return i[o][r]}}function Fn(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=Rn(Math[i>0?"floor":"ceil"](i/60),2)+Rn(Math.abs(i%60),2)}function Hn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function zn(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Un(t){return function(e){var n=Hn(e.getFullYear()),i=zn(e),r=+i-+n,o=1+Math.round(r/6048e5);return Rn(o,t)}}function qn(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function Vn(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function Wn(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function Kn(t){function e(t){var e;if(e=t.match(n)){var i=new Date(0),r=0,o=0,a=e[8]?i.setUTCFullYear:i.setFullYear,s=e[8]?i.setUTCHours:i.setHours;e[9]&&(r=p(e[9]+e[10]),o=p(e[9]+e[11])),a.call(i,p(e[1]),p(e[2])-1,p(e[3]));var l=p(e[4]||0)-r,u=p(e[5]||0)-o,c=p(e[6]||0),h=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(i,l,u,c,h),i}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var a,s,l="",u=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,k(n)&&(n=lo.test(n)?p(n):e(n)),$(n)&&(n=new Date(n)),!S(n)||!isFinite(n.getTime()))return n;for(;i;)s=so.exec(i),s?(u=U(u,s,1),i=u.pop()):(u.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=X(r,n.getTimezoneOffset()),n=Z(n,r,!0)),o(u,function(e){a=ao[e],l+=a?a(n,t.DATETIME_FORMATS,c):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function Gn(){return function(t,e){return b(e)&&(e=2),K(t,e)}}function Xn(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):p(e),isNaN(e)?t:($(t)&&(t=t.toString()),Bi(t)||k(t)?(n=!n||isNaN(n)?0:p(n),n=0>n&&n>=-t.length?t.length+n:n,e>=0?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function Yn(t){function e(e,n){return n=n?-1:1,e.map(function(e){var i=1,r=g;if(T(e))r=e;else if(k(e)&&(("+"==e.charAt(0)||"-"==e.charAt(0))&&(i="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e),r.constant))){var o=r();r=function(t){return t[o]}}return{get:r,descending:i*n}})}function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){return"function"==typeof t.valueOf&&(t=t.valueOf(),n(t))?t:y(t)&&(t=t.toString(),n(t))?t:e}function o(t,e){var n=typeof t;return null===t?(n="string",t="null"):"string"===n?t=t.toLowerCase():"object"===n&&(t=i(t,e)),{value:t,type:n}}function a(t,e){var n=0;return t.type===e.type?t.value!==e.value&&(n=t.value<e.value?-1:1):n=t.type<e.type?-1:1,n}return function(t,n,i){function s(t,e){return{value:t,predicateValues:u.map(function(n){return o(n.get(t),e)})}}function l(t,e){for(var n=0,i=0,r=u.length;r>i&&!(n=a(t.predicateValues[i],e.predicateValues[i])*u[i].descending);++i);return n}if(!r(t))return t;Bi(n)||(n=[n]),0===n.length&&(n=["+"]);var u=e(n,i);u.push({get:function(){return{}},descending:i?-1:1});var c=Array.prototype.map.call(t,s);return c.sort(l),t=c.map(function(t){return t.value})}}function Zn(t){return T(t)&&(t={link:t}),t.restrict=t.restrict||"AC",v(t)}function Qn(t,e){t.$name=e}function Jn(t,e,i,r,a){var s=this,l=[],u=s.$$parentForm=t.parent().controller("form")||fo;s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(i),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,u.$addControl(s),s.$rollbackViewValue=function(){o(l,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){o(l,function(t){t.$commitViewValue()})},s.$addControl=function(t){pt(t.$name,"input"),l.push(t),t.$name&&(s[t.$name]=t)},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],o(s.$pending,function(e,n){s.$setValidity(n,null,t)}),o(s.$error,function(e,n){s.$setValidity(n,null,t)}),o(s.$$success,function(e,n){s.$setValidity(n,null,t)}),L(l,t)},fi({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];if(i){var r=i.indexOf(n);-1===r&&i.push(n)}else t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(L(i,n),0===i.length&&delete t[e])},parentForm:u,$animate:r}),s.$setDirty=function(){r.removeClass(t,Yo),r.addClass(t,Zo),s.$dirty=!0,s.$pristine=!1,u.$setDirty()},s.$setPristine=function(){r.setClass(t,Yo,Zo+" "+mo),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(l,function(t){t.$setPristine()})},s.$setUntouched=function(){o(l,function(t){t.$setUntouched()})},s.$setSubmitted=function(){r.addClass(t,mo),s.$submitted=!0,u.$setSubmitted()}}function ti(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function ei(t,e,n,i,r,o){ni(t,e,n,i,r,o),ti(i)}function ni(t,e,n,i,r,o){var a=yi(e[0].type);if(!r.android){var s=!1;e.on("compositionstart",function(t){s=!0}),e.on("compositionend",function(){s=!1,l()})}var l=function(t){if(u&&(o.defer.cancel(u),u=null),!s){var r=e.val(),l=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(r=ji(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))e.on("input",l);else{var u,c=function(t,e,n){u||(u=o.defer(function(){u=null,e&&e.value===n||l(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||c(t,this,this.value)}),r.hasEvent("paste")&&e.on("paste cut",c)}e.on("change",l),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function ii(t,e){if(S(t))return t;if(k(t)){So.lastIndex=0;var n=So.exec(t);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,l=0,u=Hn(i),c=7*(r-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()),new Date(i,0,u.getDate()+c,o,a,s,l)}}return NaN}function ri(t,e){return function(n,i){var r,a;if(S(n))return n;if(k(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),bo.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n))return r.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(r,function(t,n){n<e.length&&(a[e[n]]=+t);
}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function oi(t,e,i,r){return function(o,a,s,l,u,c,h){function d(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function p(t){return w(t)?S(t)?t:i(t):n}ai(o,a,s,l),ni(o,a,s,l,u,c);var f,m=l&&l.$options&&l.$options.timezone;if(l.$$parserName=t,l.$parsers.push(function(t){if(l.$isEmpty(t))return null;if(e.test(t)){var r=i(t,f);return m&&(r=Z(r,m)),r}return n}),l.$formatters.push(function(t){if(t&&!S(t))throw ea("datefmt","Expected `{0}` to be a date",t);return d(t)?(f=t,f&&m&&(f=Z(f,m,!0)),h("date")(t,r,m)):(f=null,"")}),w(s.min)||s.ngMin){var g;l.$validators.min=function(t){return!d(t)||b(g)||i(t)>=g},s.$observe("min",function(t){g=p(t),l.$validate()})}if(w(s.max)||s.ngMax){var v;l.$validators.max=function(t){return!d(t)||b(v)||i(t)<=v},s.$observe("max",function(t){v=p(t),l.$validate()})}}}function ai(t,e,i,r){var o=e[0],a=r.$$hasNativeValidators=x(o.validity);a&&r.$parsers.push(function(t){var i=e.prop(vi)||{};return i.badInput&&!i.typeMismatch?n:t})}function si(t,e,i,r,o,a){if(ai(t,e,i,r),ni(t,e,i,r,o,a),r.$$parserName="number",r.$parsers.push(function(t){return r.$isEmpty(t)?null:_o.test(t)?parseFloat(t):n}),r.$formatters.push(function(t){if(!r.$isEmpty(t)){if(!$(t))throw ea("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),w(i.min)||i.ngMin){var s;r.$validators.min=function(t){return r.$isEmpty(t)||b(s)||t>=s},i.$observe("min",function(t){w(t)&&!$(t)&&(t=parseFloat(t,10)),s=$(t)&&!isNaN(t)?t:n,r.$validate()})}if(w(i.max)||i.ngMax){var l;r.$validators.max=function(t){return r.$isEmpty(t)||b(l)||l>=t},i.$observe("max",function(t){w(t)&&!$(t)&&(t=parseFloat(t,10)),l=$(t)&&!isNaN(t)?t:n,r.$validate()})}}function li(t,e,n,i,r,o){ni(t,e,n,i,r,o),ti(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||wo.test(n)}}function ui(t,e,n,i,r,o){ni(t,e,n,i,r,o),ti(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||xo.test(n)}}function ci(t,e,n,i){b(n.name)&&e.attr("name",l());var r=function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)};e.on("click",r),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)}function hi(t,e,n,i,r){var o;if(w(i)){if(o=t(i),!o.constant)throw ea("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}function di(t,e,n,i,r,o,a,s){var l=hi(s,t,"ngTrueValue",n.ngTrueValue,!0),u=hi(s,t,"ngFalseValue",n.ngFalseValue,!1),c=function(t){i.$setViewValue(e[0].checked,t&&t.type)};e.on("click",c),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return t===!1},i.$formatters.push(function(t){return z(t,l)}),i.$parsers.push(function(t){return t?l:u})}function pi(t,e){return t="ngClass"+t,["$animate",function(n){function i(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r==e[o])continue t;n.push(r)}return n}function r(t){var e=[];return Bi(t)?(o(t,function(t){e=e.concat(r(t))}),e):k(t)?t.split(" "):x(t)?(o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(a,s,l){function u(t){var e=h(t,1);l.$addClass(e)}function c(t){var e=h(t,-1);l.$removeClass(e)}function h(t,e){var n=s.data("$classCounts")||gt(),i=[];return o(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&i.push(t))}),s.data("$classCounts",n),i.join(" ")}function d(t,e){var r=i(e,t),o=i(t,e);r=h(r,1),o=h(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}function p(t){if(e===!0||a.$index%2===e){var n=r(t||[]);if(f){if(!z(t,f)){var i=r(f);d(i,n)}}else u(n)}f=H(t)}var f;a.$watch(l[t],p,!0),l.$observe("class",function(e){p(a.$eval(l[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,i){var o=1&n;if(o!==(1&i)){var s=r(a.$eval(l[t]));o===e?u(s):c(s)}})}}}]}function fi(t){function e(t,e,l){e===n?i("$pending",t,l):r("$pending",t,l),O(e)?e?(h(s.$error,t,l),c(s.$$success,t,l)):(c(s.$error,t,l),h(s.$$success,t,l)):(h(s.$error,t,l),h(s.$$success,t,l)),s.$pending?(o(ta,!0),s.$valid=s.$invalid=n,a("",null)):(o(ta,!1),s.$valid=mi(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var u;u=s.$pending&&s.$pending[t]?n:s.$error[t]?!1:s.$$success[t]?!0:null,a(t,u),d.$setValidity(t,u,s)}function i(t,e,n){s[t]||(s[t]={}),c(s[t],e,n)}function r(t,e,i){s[t]&&h(s[t],e,i),mi(s[t])&&(s[t]=n)}function o(t,e){e&&!u[t]?(p.addClass(l,t),u[t]=!0):!e&&u[t]&&(p.removeClass(l,t),u[t]=!1)}function a(t,e){t=t?"-"+ut(t,"-"):"",o(Go+t,e===!0),o(Xo+t,e===!1)}var s=t.ctrl,l=t.$element,u={},c=t.set,h=t.unset,d=t.parentForm,p=t.$animate;u[Xo]=!(u[Go]=l.hasClass(Go)),s.$setValidity=e}function mi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var gi=/^\/(.+)\/([a-z]*)$/,vi="validity",yi=function(t){return k(t)?t.toLowerCase():t},bi=Object.prototype.hasOwnProperty,wi=function(t){return k(t)?t.toUpperCase():t},xi=function(t){return k(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},_i=function(t){return k(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(yi=xi,wi=_i);var ki,$i,Si,Ti,Ei=[].slice,Ci=[].splice,Pi=[].push,Ai=Object.prototype.toString,Di=Object.getPrototypeOf,Ni=i("ng"),Oi=t.angular||(t.angular={}),Ii=0;ki=e.documentMode,m.$inject=[],g.$inject=[];var Mi,Bi=Array.isArray,Ri=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,ji=function(t){return k(t)?t.trim():t},Li=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Fi=function(){function t(){try{return new Function(""),!1}catch(t){return!0}}if(!w(Fi.rules)){var n=e.querySelector("[ng-csp]")||e.querySelector("[data-ng-csp]");if(n){var i=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Fi.rules={noUnsafeEval:!i||-1!==i.indexOf("no-unsafe-eval"),noInlineStyle:!i||-1!==i.indexOf("no-inline-style")}}else Fi.rules={noUnsafeEval:t(),noInlineStyle:!1}}return Fi.rules},Hi=function(){if(w(Hi.name_))return Hi.name_;var t,n,i,r,o=zi.length;for(n=0;o>n;++n)if(i=zi[n],t=e.querySelector("["+i.replace(":","\\:")+"jq]")){r=t.getAttribute(i+"jq");break}return Hi.name_=r},zi=["ng-","data-ng-","ng:","x-ng-"],Ui=/[A-Z]/g,qi=!1,Vi=1,Wi=2,Ki=3,Gi=8,Xi=9,Yi=11,Zi={full:"1.4.4",major:1,minor:4,dot:4,codeName:"pylon-requirement"};Ct.expando="ng339";var Qi=Ct.cache={},Ji=1,tr=function(t,e,n){t.addEventListener(e,n,!1)},er=function(t,e,n){t.removeEventListener(e,n,!1)};Ct._data=function(t){return this.cache[t[this.expando]]||{}};var nr=/([\:\-\_]+(.))/g,ir=/^moz([A-Z])/,rr={mouseleave:"mouseout",mouseenter:"mouseover"},or=i("jqLite"),ar=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,sr=/<|&#?\w+;/,lr=/<([\w:]+)/,ur=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,cr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};cr.optgroup=cr.option,cr.tbody=cr.tfoot=cr.colgroup=cr.caption=cr.thead,cr.th=cr.td;var hr=Ct.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===e.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),Ct(t).on("load",i))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return $i(t>=0?this[t]:this[this.length+t])},length:0,push:Pi,sort:[].sort,splice:[].splice},dr={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){dr[yi(t)]=t});var pr={};o("input,select,option,textarea,button,form,details".split(","),function(t){pr[t]=!0});var fr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:It,removeData:Nt,hasData:St},function(t,e){Ct[e]=t}),o({data:It,inheritedData:Ft,scope:function(t){return $i.data(t,"$scope")||Ft(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return $i.data(t,"$isolateScope")||$i.data(t,"$isolateScopeNoTemplate")},controller:Lt,injector:function(t){return Ft(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Mt,css:function(t,e,n){return e=_t(e),w(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,i){var r=t.nodeType;if(r!==Ki&&r!==Wi&&r!==Gi){var o=yi(e);if(dr[o]){if(!w(i))return t[e]||(t.attributes.getNamedItem(e)||m).specified?o:n;i?(t[e]=!0,t.setAttribute(e,o)):(t[e]=!1,t.removeAttribute(o))}else if(w(i))t.setAttribute(e,i);else if(t.getAttribute){var a=t.getAttribute(e,2);return null===a?n:a}}},prop:function(t,e,n){return w(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(b(e)){var n=t.nodeType;return n===Vi||n===Ki?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(b(e)){if(t.multiple&&"select"===j(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return b(e)?t.innerHTML:(At(t,!0),void(t.innerHTML=e))},empty:Ht},function(t,e){Ct.prototype[e]=function(e,i){var r,o,a=this.length;if(t!==Ht&&(2==t.length&&t!==Mt&&t!==Lt?e:i)===n){if(x(e)){for(r=0;a>r;r++)if(t===It)t(this[r],e);else for(o in e)t(this[r],o,e[o]);return this}for(var s=t.$dv,l=s===n?Math.min(a,1):a,u=0;l>u;u++){var c=t(this[u],e,i);s=s?s+c:c}return s}for(r=0;a>r;r++)t(this[r],e,i);return this}}),o({removeData:Nt,on:function Da(t,e,n,i){if(w(i))throw or("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if($t(t)){var r=Ot(t,!0),o=r.events,a=r.handle;a||(a=r.handle=Wt(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],l=s.length;l--;){e=s[l];var u=o[e];u||(o[e]=[],"mouseenter"===e||"mouseleave"===e?Da(t,rr[e],function(t){var n=this,i=t.relatedTarget;(!i||i!==n&&!n.contains(i))&&a(t,e)}):"$destroy"!==e&&tr(t,e,a),u=o[e]),u.push(n)}}},off:Dt,one:function(t,e,n){t=$i(t),t.on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;At(t),o(new Ct(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===Vi&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Vi||n===Yi){e=new Ct(e);for(var i=0,r=e.length;r>i;i++){var o=e[i];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===Vi){var n=t.firstChild;o(new Ct(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=$i(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:zt,detach:function(t){zt(t,!0)},after:function(t,e){var n=t,i=t.parentNode;e=new Ct(e);for(var r=0,o=e.length;o>r;r++){var a=e[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:Rt,removeClass:Bt,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var i=n;b(i)&&(i=!Mt(t,e)),(i?Rt:Bt)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Yi?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:Pt,triggerHandler:function(t,e,n){var i,r,a,s=e.type||e,l=Ot(t),u=l&&l.events,c=u&&u[s];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:m,type:s,target:t},e.type&&(i=h(i,e)),r=H(c),a=n?[i].concat(n):[i],o(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(t,e){Ct.prototype[e]=function(e,n,i){for(var r,o=0,a=this.length;a>o;o++)b(r)?(r=t(this[o],e,n,i),w(r)&&(r=$i(r))):jt(r,t(this[o],e,n,i));return w(r)?r:this},Ct.prototype.bind=Ct.prototype.on,Ct.prototype.unbind=Ct.prototype.off}),Xt.prototype={put:function(t,e){this[Gt(t,this.nextUid)]=e},get:function(t){return this[Gt(t,this.nextUid)]},remove:function(t){var e=this[t=Gt(t,this.nextUid)];return delete this[t],e}};var mr=[function(){this.$get=[function(){return Xt}]}],gr=/^[^\(]*\(\s*([^\)]*)\)/m,vr=/,/,yr=/^\s*(_?)(\S+?)\1\s*$/,br=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,wr=i("$injector");Qt.$$annotate=Zt;var xr=i("$animate"),_r=1,kr="ng-animate",$r=function(){this.$get=["$q","$$rAF",function(t,e){function n(){}return n.all=m,n.chain=m,n.prototype={end:m,cancel:m,resume:m,pause:m,complete:m,then:function(n,i){return t(function(t){e(function(){t()})}).then(n,i)}},n}]},Sr=function(){var t=new Xt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function r(n,r,a){var s=t.get(n);s||(t.put(n,s={}),e.push(n));var l=function(t,e){var n=!1;return t&&(t=k(t)?t.split(" "):Bi(t)?t:[],o(t,function(t){t&&(n=!0,s[t]=e)})),n},u=l(r,!0),c=l(a,!1);!u&&!c||e.length>1||i.$$postDigest(function(){o(e,function(e){var n=t.get(e);if(n){var i=ne(e.attr("class")),r="",a="";o(n,function(t,e){var n=!!i[e];t!==n&&(t?r+=(r.length?" ":"")+e:a+=(a.length?" ":"")+e)}),o(e,function(t){r&&Rt(t,r),a&&Bt(t,a)}),t.remove(e)}}),e.length=0})}return{enabled:m,on:m,off:m,pin:m,push:function(t,e,i,o){return o&&o(),i=i||{},i.from&&t.css(i.from),i.to&&t.css(i.to),(i.addClass||i.removeClass)&&r(t,i.addClass,i.removeClass),new n}}}]},Tr=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw xr("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+kr+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw xr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',kr)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=ee(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&$i(i),r=r&&$i(r),i=i||r.parent(),e(n,i,r),t.push(n,"enter",ie(o))},move:function(n,i,r,o){return i=i&&$i(i),r=r&&$i(r),i=i||r.parent(),e(n,i,r),t.push(n,"move",ie(o))},leave:function(e,n){return t.push(e,"leave",ie(n),function(){e.remove()})},addClass:function(e,n,i){return i=ie(i),i.addClass=te(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return i=ie(i),i.removeClass=te(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return r=ie(r),r.addClass=te(r.addClass,n),r.removeClass=te(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return o=ie(o),o.from=o.from?h(o.from,n):n,o.to=o.to?h(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=te(o.tempClasses,r),t.push(e,"animate",o)}}}]}],Er=function(){this.$get=["$$rAF","$q",function(t,e){var n=function(){};return n.prototype={done:function(t){this.defer&&this.defer[t===!0?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=e.defer()),this.defer.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)}},function(e,i){function r(){return t(function(){o(),a||s.done(),a=!0}),s}function o(){i.addClass&&(e.addClass(i.addClass),i.addClass=null),i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null),i.to&&(e.css(i.to),i.to=null)}i.from&&(e.css(i.from),i.from=null);var a,s=new n;return{start:r,end:r}}}]},Cr=i("$compile");le.$inject=["$provide","$$sanitizeUriProvider"];var Pr=/^((?:x|data)[\:\-_])/i,Ar=i("$controller"),Dr=/^(\S+)(\s+as\s+(\w+))?$/,Nr=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof $i&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Or="application/json",Ir={"Content-Type":Or+";charset=utf-8"},Mr=/^\[|^\{(?!\{)/,Br={"[":/]$/,"{":/}$/},Rr=/^\)\]\}',?\n/,jr=i("$http"),Lr=function(t){return function(){throw jr("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}},Fr=Oi.$interpolateMinErr=i("$interpolate");Fr.throwNoconcat=function(t){throw Fr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Fr.interr=function(t,e){return Fr("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Hr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,zr={http:80,https:443,ftp:21},Ur=i("$location"),qr={$$html5:!1,$$replace:!1,absUrl:ze("$$absUrl"),url:function(t){if(b(t))return this.$$url;var e=Hr.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:ze("$$protocol"),host:ze("$$host"),port:ze("$$port"),path:Ue("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(k(t)||$(t))t=t.toString(),this.$$search=tt(t);else{if(!x(t))throw Ur("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=F(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:b(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Ue("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([He,Fe,Le],function(t){t.prototype=Object.create(qr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Le||!this.$$html5)throw Ur("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(e)?null:e,this}});var Vr=i("$parse"),Wr=Function.prototype.call,Kr=Function.prototype.apply,Gr=Function.prototype.bind,Xr=gt();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Xr[t]=!0});var Yr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Zr=function(t){this.options=t};Zr.prototype={constructor:Zr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=Xr[e],o=Xr[n],a=Xr[i];if(r||o||a){var s=a?i:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||""===t||"\xa0"===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=w(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Vr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=yi(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Yr[o];n+=s||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Qr=function(t,e){this.lexer=t,this.options=e};Qr.Program="Program",Qr.ExpressionStatement="ExpressionStatement",Qr.AssignmentExpression="AssignmentExpression",Qr.ConditionalExpression="ConditionalExpression",Qr.LogicalExpression="LogicalExpression",Qr.BinaryExpression="BinaryExpression",Qr.UnaryExpression="UnaryExpression",Qr.CallExpression="CallExpression",Qr.MemberExpression="MemberExpression",Qr.Identifier="Identifier",Qr.Literal="Literal",Qr.ArrayExpression="ArrayExpression",Qr.Property="Property",Qr.ObjectExpression="ObjectExpression",Qr.ThisExpression="ThisExpression",Qr.NGValueParameter="NGValueParameter",Qr.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Qr.Program,body:t}},expressionStatement:function(){return{type:Qr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:Qr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Qr.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Qr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Qr.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Qr.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Qr.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Qr.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Qr.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Qr.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.constants.hasOwnProperty(this.peek().text)?t=F(this.constants[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:Qr.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Qr.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Qr.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Qr.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Qr.Identifier,name:t.text}},constant:function(){return{type:Qr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Qr.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Qr.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Qr.ObjectExpression,properties:e}},throwError:function(t,e){throw Vr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw Vr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw Vr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===i||a===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return r?(this.tokens.shift(),r):!1},constants:{"true":{type:Qr.Literal,value:!0},"false":{type:Qr.Literal,value:!1},"null":{type:Qr.Literal,value:null},undefined:{type:Qr.Literal,value:n},"this":{type:Qr.ThisExpression}}},on.prototype={compile:function(t,e){var i=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Qe(r,i.$filter);var a,s="";if(this.stage="assign",a=en(r)){this.state.computing="assign";var l=this.nextId();this.recurse(a,l),s="fn.assign="+this.generateFunction("assign","s,v,l")}var u=Je(r.body);i.stage="inputs",o(u,function(t,e){var n="fn"+e;i.state[n]={vars:[],body:[],own:{}},i.state.computing=n;var r=i.nextId();i.recurse(t,r),i.return_(r),i.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(r);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",h=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",c)(this.$filter,We,Ke,Ge,Xe,Ye,t);return this.state=this.stage=n,h.literal=nn(r),h.constant=rn(r),h},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return o(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return o(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,i,r,a,s){var l,u,c,h,d=this;if(r=r||m,!s&&w(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,i,r,a,!0));switch(t.type){case Qr.Program:o(t.body,function(e,i){d.recurse(e.expression,n,n,function(t){u=t}),i!==t.body.length-1?d.current().body.push(u,";"):d.return_(u)});break;case Qr.Literal:h=this.escape(t.value),this.assign(e,h),r(h);break;case Qr.UnaryExpression:this.recurse(t.argument,n,n,function(t){u=t}),h=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,h),r(h);break;case Qr.BinaryExpression:this.recurse(t.left,n,n,function(t){l=t}),this.recurse(t.right,n,n,function(t){u=t}),h="+"===t.operator?this.plus(l,u):"-"===t.operator?this.ifDefined(l,0)+t.operator+this.ifDefined(u,0):"("+l+")"+t.operator+"("+u+")",this.assign(e,h),r(h);break;case Qr.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case Qr.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case Qr.Identifier:e=e||this.nextId(),i&&(i.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),i.computed=!1,i.name=t.name),We(t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){a&&1!==a&&d.if_(d.not(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),(d.state.expensiveChecks||sn(t.name))&&d.addEnsureSafeObject(e),r(e);break;case Qr.MemberExpression:l=i&&(i.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,l,n,function(){d.if_(d.notNull(l),function(){t.computed?(u=d.nextId(),d.recurse(t.property,u),d.addEnsureSafeMemberName(u),a&&1!==a&&d.if_(d.not(d.computedMember(l,u)),d.lazyAssign(d.computedMember(l,u),"{}")),h=d.ensureSafeObject(d.computedMember(l,u)),d.assign(e,h),i&&(i.computed=!0,i.name=u)):(We(t.property.name),a&&1!==a&&d.if_(d.not(d.nonComputedMember(l,t.property.name)),d.lazyAssign(d.nonComputedMember(l,t.property.name),"{}")),h=d.nonComputedMember(l,t.property.name),(d.state.expensiveChecks||sn(t.property.name))&&(h=d.ensureSafeObject(h)),d.assign(e,h),i&&(i.computed=!1,i.name=t.property.name))},function(){d.assign(e,"undefined")}),r(e)},!!a);break;case Qr.CallExpression:e=e||this.nextId(),t.filter?(u=d.filter(t.callee.name),c=[],o(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),c.push(e)}),h=u+"("+c.join(",")+")",d.assign(e,h),r(e)):(u=d.nextId(),l={},c=[],d.recurse(t.callee,u,l,function(){d.if_(d.notNull(u),function(){d.addEnsureSafeFunction(u),o(t.arguments,function(t){d.recurse(t,d.nextId(),n,function(t){c.push(d.ensureSafeObject(t))})}),l.name?(d.state.expensiveChecks||d.addEnsureSafeObject(l.context),h=d.member(l.context,l.name,l.computed)+"("+c.join(",")+")"):h=u+"("+c.join(",")+")",h=d.ensureSafeObject(h),d.assign(e,h)},function(){d.assign(e,"undefined")}),r(e)}));break;case Qr.AssignmentExpression:if(u=this.nextId(),l={},!tn(t.left))throw Vr("lval","Trying to assing a value to a non l-value");this.recurse(t.left,n,l,function(){d.if_(d.notNull(l.context),function(){d.recurse(t.right,u),d.addEnsureSafeObject(d.member(l.context,l.name,l.computed)),h=d.member(l.context,l.name,l.computed)+t.operator+u,d.assign(e,h),r(e||h)})},1);break;case Qr.ArrayExpression:c=[],o(t.elements,function(t){d.recurse(t,d.nextId(),n,function(t){c.push(t)})}),h="["+c.join(",")+"]",this.assign(e,h),r(h);break;case Qr.ObjectExpression:c=[],o(t.properties,function(t){d.recurse(t.value,d.nextId(),n,function(e){c.push(d.escape(t.key.type===Qr.Identifier?t.key.name:""+t.key.value)+":"+e)})}),h="{"+c.join(",")+"}",this.assign(e,h),r(h);break;case Qr.ThisExpression:this.assign(e,"s"),r("s");break;case Qr.NGValueParameter:this.assign(e,"v"),r("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){return t?(this.current().body.push(t,"=",e,";"),t):void 0},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";");
},if_:function(t,e,n){if(t===!0)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return t+"."+e},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},lazyRecurse:function(t,e,n,i,r,o){var a=this;return function(){a.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(k(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if($(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw Vr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},an.prototype={compile:function(t,e){var n=this,i=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,Qe(i,n.$filter);var r,a;(r=en(i))&&(a=this.recurse(r));var s,l=Je(i.body);l&&(s=[],o(l,function(t,e){var i=n.recurse(t);t.input=i,s.push(i),t.watchId=e}));var u=[];o(i.body,function(t){u.push(n.recurse(t.expression))});var c=0===i.body.length?function(){}:1===i.body.length?u[0]:function(t,e){var n;return o(u,function(i){n=i(t,e)}),n};return a&&(c.assign=function(t,e,n){return a(t,n,e)}),s&&(c.inputs=s),c.literal=nn(i),c.constant=rn(i),c},recurse:function(t,e,i){var r,a,s,l=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Qr.Literal:return this.value(t.value,e);case Qr.UnaryExpression:return a=this.recurse(t.argument),this["unary"+t.operator](a,e);case Qr.BinaryExpression:return r=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](r,a,e);case Qr.LogicalExpression:return r=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](r,a,e);case Qr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Qr.Identifier:return We(t.name,l.expression),l.identifier(t.name,l.expensiveChecks||sn(t.name),e,i,l.expression);case Qr.MemberExpression:return r=this.recurse(t.object,!1,!!i),t.computed||(We(t.property.name,l.expression),a=t.property.name),t.computed&&(a=this.recurse(t.property)),t.computed?this.computedMember(r,a,e,i,l.expression):this.nonComputedMember(r,a,l.expensiveChecks,e,i,l.expression);case Qr.CallExpression:return s=[],o(t.arguments,function(t){s.push(l.recurse(t))}),t.filter&&(a=this.$filter(t.callee.name)),t.filter||(a=this.recurse(t.callee,!0)),t.filter?function(t,i,r,o){for(var l=[],u=0;u<s.length;++u)l.push(s[u](t,i,r,o));var c=a.apply(n,l,o);return e?{context:n,name:n,value:c}:c}:function(t,n,i,r){var o,u=a(t,n,i,r);if(null!=u.value){Ke(u.context,l.expression),Ge(u.value,l.expression);for(var c=[],h=0;h<s.length;++h)c.push(Ke(s[h](t,n,i,r),l.expression));o=Ke(u.value.apply(u.context,c),l.expression)}return e?{value:o}:o};case Qr.AssignmentExpression:return r=this.recurse(t.left,!0,1),a=this.recurse(t.right),function(t,n,i,o){var s=r(t,n,i,o),u=a(t,n,i,o);return Ke(s.value,l.expression),s.context[s.name]=u,e?{value:u}:u};case Qr.ArrayExpression:return s=[],o(t.elements,function(t){s.push(l.recurse(t))}),function(t,n,i,r){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,n,i,r));return e?{value:o}:o};case Qr.ObjectExpression:return s=[],o(t.properties,function(t){s.push({key:t.key.type===Qr.Identifier?t.key.name:""+t.key.value,value:l.recurse(t.value)})}),function(t,n,i,r){for(var o={},a=0;a<s.length;++a)o[s[a].key]=s[a].value(t,n,i,r);return e?{value:o}:o};case Qr.ThisExpression:return function(t){return e?{value:t}:t};case Qr.NGValueParameter:return function(t,n,i,r){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=w(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=w(a)?-a:0,e?{value:a}:a}},"unary!":function(t,e){return function(n,i,r,o){var a=!t(n,i,r,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a),l=e(i,r,o,a),u=Ye(s,l);return n?{value:u}:u}},"binary-":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a),l=e(i,r,o,a),u=(w(s)?s:0)-(w(l)?l:0);return n?{value:u}:u}},"binary*":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)*e(i,r,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)/e(i,r,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)%e(i,r,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)===e(i,r,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!==e(i,r,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)==e(i,r,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!=e(i,r,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<e(i,r,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>e(i,r,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<=e(i,r,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>=e(i,r,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)&&e(i,r,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)||e(i,r,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,i){return function(r,o,a,s){var l=t(r,o,a,s)?e(r,o,a,s):n(r,o,a,s);return i?{value:l}:l}},value:function(t,e){return function(){return e?{context:n,name:n,value:t}:t}},identifier:function(t,e,i,r,o){return function(a,s,l,u){var c=s&&t in s?s:a;r&&1!==r&&c&&!c[t]&&(c[t]={});var h=c?c[t]:n;return e&&Ke(h,o),i?{context:c,name:t,value:h}:h}},computedMember:function(t,e,n,i,r){return function(o,a,s,l){var u,c,h=t(o,a,s,l);return null!=h&&(u=e(o,a,s,l),We(u,r),i&&1!==i&&h&&!h[u]&&(h[u]={}),c=h[u],Ke(c,r)),n?{context:h,name:u,value:c}:c}},nonComputedMember:function(t,e,i,r,o,a){return function(s,l,u,c){var h=t(s,l,u,c);o&&1!==o&&h&&!h[e]&&(h[e]={});var d=null!=h?h[e]:n;return(i||sn(e))&&Ke(d,a),r?{context:h,name:e,value:d}:d}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}};var Jr=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new Qr(this.lexer),this.astCompiler=n.csp?new an(this.ast,e):new on(this.ast,e)};Jr.prototype={constructor:Jr,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var to=(gt(),gt(),Object.prototype.valueOf),eo=i("$sce"),no={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Cr=i("$compile"),io=e.createElement("a"),ro=$n(t.location.href);En.$inject=["$document"],Pn.$inject=["$provide"],In.$inject=["$locale"],Mn.$inject=["$locale"];var oo=".",ao={yyyy:jn("FullYear",4),yy:jn("FullYear",2,0,!0),y:jn("FullYear",1),MMMM:Ln("Month"),MMM:Ln("Month",!0),MM:jn("Month",2,1),M:jn("Month",1,1),dd:jn("Date",2),d:jn("Date",1),HH:jn("Hours",2),H:jn("Hours",1),hh:jn("Hours",2,-12),h:jn("Hours",1,-12),mm:jn("Minutes",2),m:jn("Minutes",1),ss:jn("Seconds",2),s:jn("Seconds",1),sss:jn("Milliseconds",3),EEEE:Ln("Day"),EEE:Ln("Day",!0),a:qn,Z:Fn,ww:Un(2),w:Un(1),G:Vn,GG:Vn,GGG:Vn,GGGG:Wn},so=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,lo=/^\-?\d+$/;Kn.$inject=["$locale"];var uo=v(yi),co=v(wi);Yn.$inject=["$parse"];var ho=v({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Ai.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),po={};o(dr,function(t,e){function n(t,n,r){t.$watch(r[i],function(t){r.$set(e,!!t)})}if("multiple"!=t){var i=ue("ng-"+e),r=n;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[i]&&n(t,e,r)}),po[i]=function(){return{restrict:"A",priority:100,link:r}}}}),o(fr,function(t,e){po[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(gi);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],function(t){i.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=ue("ng-"+t);po[e]=function(){return{priority:99,link:function(n,i,r){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===Ai.call(i.prop("href"))&&(a="xlinkHref",r.$attr[a]="xlink:href",o=null),r.$observe(e,function(e){return e?(r.$set(a,e),void(ki&&o&&i.prop(o,r[a]))):void("href"===t&&r.$set(a,null))})}}}});var fo={$addControl:m,$$renameControl:Qn,$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m},mo="ng-submitted";Jn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var go=function(t){return["$timeout","$parse",function(e,i){function r(t){return""===t?i('this[""]').assign:i(t).assign||m}var o={name:"form",restrict:t?"EAC":"E",controller:Jn,compile:function(i,o){i.addClass(Yo).addClass(Go);var a=o.name?"name":t&&o.ngForm?"ngForm":!1;return{pre:function(t,i,o,s){if(!("action"in o)){var l=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};tr(i[0],"submit",l),i.on("$destroy",function(){e(function(){er(i[0],"submit",l)},0,!1)})}var u=s.$$parentForm,c=a?r(s.$name):m;a&&(c(t,s),o.$observe(a,function(e){s.$name!==e&&(c(t,n),u.$$renameControl(s,e),(c=r(s.$name))(t,s))})),i.on("$destroy",function(){u.$removeControl(s),c(t,n),h(s,fo)})}}}};return o}]},vo=go(),yo=go(!0),bo=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,wo=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,xo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,_o=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ko=/^(\d{4})-(\d{2})-(\d{2})$/,$o=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,So=/^(\d{4})-W(\d\d)$/,To=/^(\d{4})-(\d\d)$/,Eo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Co={text:ei,date:oi("date",ko,ri(ko,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":oi("datetimelocal",$o,ri($o,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:oi("time",Eo,ri(Eo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:oi("week",So,ii,"yyyy-Www"),month:oi("month",To,ri(To,["yyyy","MM"]),"yyyy-MM"),number:si,url:li,email:ui,radio:ci,checkbox:di,hidden:m,button:m,submit:m,reset:m,file:m},Po=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,a,s){s[0]&&(Co[yi(a.type)]||Co.text)(r,o,a,s[0],e,t,n,i)}}}}],Ao=/^(true|false|\d+)$/,Do=function(){return{restrict:"A",priority:100,compile:function(t,e){return Ao.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},No=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,i,r){t.$$addBindingInfo(i,r.ngBind),i=i[0],e.$watch(r.ngBind,function(t){i.textContent=t===n?"":t})}}}}],Oo=["$interpolate","$compile",function(t,e){return{compile:function(i){return e.$$addBindingClass(i),function(i,r,o){var a=t(r.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(r,a.expressions),r=r[0],o.$observe("ngBindTemplate",function(t){r.textContent=t===n?"":t})}}}}],Io=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),a=e(r.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(a,function(){i.html(t.getTrustedHtml(o(e))||"")})}}}}],Mo=v({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),Bo=pi("",!0),Ro=pi("Odd",0),jo=pi("Even",1),Lo=Zn({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),Fo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ho={},zo={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=ue("ng-"+t);Ho[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){a(e,{$event:n})};zo[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var Uo=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,l,u;n.$watch(r.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=e.createComment(" end ngIf: "+r.ngIf+" "),s={clone:n},t.enter(n,i.parent(),i)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=mt(s.clone),t.leave(u).then(function(){u=null}),s=null))})}}}],qo=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Oi.noop,compile:function(i,r){var o=r.ngInclude||r.src,a=r.onload||"",s=r.autoscroll;return function(i,r,l,u,c){var h,d,p,f=0,m=function(){d&&(d.remove(),d=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};i.$watch(o,function(o){var l=function(){!w(s)||s&&!i.$eval(s)||e()},d=++f;o?(t(o,!0).then(function(t){if(d===f){var e=i.$new();u.template=t;var s=c(e,function(t){m(),n.enter(t,null,r).then(l)});h=e,p=s,h.$emit("$includeContentLoaded",o),i.$eval(a)}},function(){d===f&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),u.template=null)})}}}}],Vo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){return/SVG/.test(i[0].toString())?(i.empty(),void t(Tt(o.template,e).childNodes)(n,function(t){i.append(t)},{futureParentElement:i})):(i.html(o.template),void t(i.contents())(n))}}}],Wo=Zn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Ko=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,i,r){var a=e.attr(i.$attr.ngList)||", ",s="false"!==i.ngTrim,l=s?ji(a):a,u=function(t){if(!b(t)){var e=[];return t&&o(t.split(l),function(t){t&&e.push(s?ji(t):t)}),e}};r.$parsers.push(u),r.$formatters.push(function(t){return Bi(t)?t.join(a):n}),r.$isEmpty=function(t){return!t||!t.length}}}},Go="ng-valid",Xo="ng-invalid",Yo="ng-pristine",Zo="ng-dirty",Qo="ng-untouched",Jo="ng-touched",ta="ng-pending",ea=i("ngModel"),na=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,i,r,a,s,l,u,c,h){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=h(i.name||"",!1)(t);var d,p=a(i.ngModel),f=p.assign,g=p,v=f,y=null,x=this;this.$$setOptions=function(t){if(x.$options=t,t&&t.getterSetter){var e=a(i.ngModel+"()"),n=a(i.ngModel+"($$$p)");g=function(t){var n=p(t);return T(n)&&(n=e(t)),n},v=function(t,e){T(p(t))?n(t,{$$$p:x.$modelValue}):f(t,x.$modelValue)}}else if(!p.assign)throw ea("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,Q(r))},this.$render=m,this.$isEmpty=function(t){return b(t)||""===t||null===t||t!==t};var _=r.inheritedData("$formController")||fo,k=0;fi({ctrl:this,$element:r,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:_,$animate:s}),this.$setPristine=function(){x.$dirty=!1,x.$pristine=!0,s.removeClass(r,Zo),s.addClass(r,Yo)},this.$setDirty=function(){x.$dirty=!0,x.$pristine=!1,s.removeClass(r,Yo),s.addClass(r,Zo),_.$setDirty()},this.$setUntouched=function(){x.$touched=!1,x.$untouched=!0,s.setClass(r,Qo,Jo)},this.$setTouched=function(){x.$touched=!0,x.$untouched=!1,s.setClass(r,Jo,Qo)},this.$rollbackViewValue=function(){l.cancel(y),x.$viewValue=x.$$lastCommittedViewValue,x.$render()},this.$validate=function(){if(!$(x.$modelValue)||!isNaN(x.$modelValue)){var t=x.$$lastCommittedViewValue,e=x.$$rawModelValue,i=x.$valid,r=x.$modelValue,o=x.$options&&x.$options.allowInvalid;x.$$runValidators(e,t,function(t){o||i===t||(x.$modelValue=t?e:n,x.$modelValue!==r&&x.$$writeModelToScope())})}},this.$$runValidators=function(t,e,i){function r(){var t=x.$$parserName||"parse";return d!==n?(d||(o(x.$validators,function(t,e){l(e,null)}),o(x.$asyncValidators,function(t,e){l(e,null)})),l(t,d),d):(l(t,null),!0)}function a(){var n=!0;return o(x.$validators,function(i,r){var o=i(t,e);n=n&&o,l(r,o)}),n?!0:(o(x.$asyncValidators,function(t,e){l(e,null)}),!1)}function s(){var i=[],r=!0;o(x.$asyncValidators,function(o,a){var s=o(t,e);if(!I(s))throw ea("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(a,n),i.push(s.then(function(){l(a,!0)},function(t){r=!1,l(a,!1)}))}),i.length?c.all(i).then(function(){u(r)},m):u(!0)}function l(t,e){h===k&&x.$setValidity(t,e)}function u(t){h===k&&i(t)}k++;var h=k;return r()&&a()?void s():void u(!1)},this.$commitViewValue=function(){var t=x.$viewValue;l.cancel(y),(x.$$lastCommittedViewValue!==t||""===t&&x.$$hasNativeValidators)&&(x.$$lastCommittedViewValue=t,x.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){x.$modelValue!==a&&x.$$writeModelToScope()}var i=x.$$lastCommittedViewValue,r=i;if(d=b(r)?n:!0)for(var o=0;o<x.$parsers.length;o++)if(r=x.$parsers[o](r),b(r)){d=!1;break}$(x.$modelValue)&&isNaN(x.$modelValue)&&(x.$modelValue=g(t));var a=x.$modelValue,s=x.$options&&x.$options.allowInvalid;x.$$rawModelValue=r,s&&(x.$modelValue=r,e()),x.$$runValidators(r,x.$$lastCommittedViewValue,function(t){s||(x.$modelValue=t?r:n,e())})},this.$$writeModelToScope=function(){v(t,x.$modelValue),o(x.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){x.$viewValue=t,(!x.$options||x.$options.updateOnDefault)&&x.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,i=0,r=x.$options;r&&w(r.debounce)&&(n=r.debounce,$(n)?i=n:$(n[e])?i=n[e]:$(n["default"])&&(i=n["default"])),l.cancel(y),i?y=l(function(){x.$commitViewValue()},i):u.$$phase?x.$commitViewValue():t.$apply(function(){x.$commitViewValue()})},t.$watch(function(){var e=g(t);if(e!==x.$modelValue&&(x.$modelValue===x.$modelValue||e===e)){x.$modelValue=x.$$rawModelValue=e,d=n;for(var i=x.$formatters,r=i.length,o=e;r--;)o=i[r](o);x.$viewValue!==o&&(x.$viewValue=x.$$lastCommittedViewValue=o,x.$render(),x.$$runValidators(e,o,m))}return e})}],ia=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:na,priority:1,compile:function(e){return e.addClass(Yo).addClass(Qo).addClass(Go),{pre:function(t,e,n,i){var r=i[0],o=i[1]||fo;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&o.$$renameControl(r,t)}),t.$on("$destroy",function(){o.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],ra=/(\s+|^)default(\s+|$)/,oa=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var i=this;this.$options=F(t.$eval(e.ngModelOptions)),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=ji(this.$options.updateOn.replace(ra,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},aa=Zn({terminal:!0,priority:1e3}),sa=i("ngOptions"),la=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ua=["$compile","$parse",function(t,n){function i(t,e,i){function o(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function a(t){var e;if(!u&&r(t))e=t;else{e=[];for(var n in t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n)}return e}var s=t.match(la);if(!s)throw sa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Q(e));var l=s[5]||s[7],u=s[6],c=/ as /.test(s[0])&&s[1],h=s[9],d=n(s[2]?s[1]:l),p=c&&n(c),f=p||d,m=h&&n(h),g=h?function(t,e){return m(i,e)}:function(t){return Gt(t)},v=function(t,e){return g(t,k(t,e))},y=n(s[2]||s[1]),b=n(s[3]||""),w=n(s[4]||""),x=n(s[8]),_={},k=u?function(t,e){return _[u]=e,_[l]=t,_}:function(t){return _[l]=t,_};return{trackBy:h,getTrackByValue:v,getWatchables:n(x,function(t){var e=[];t=t||[];for(var n=a(t),r=n.length,o=0;r>o;o++){var l=t===n?o:n[o],u=(t[l],k(t[l],l)),c=g(t[l],u);if(e.push(c),s[2]||s[1]){var h=y(i,u);e.push(h)}if(s[4]){var d=w(i,u);e.push(d)}}return e}),getOptions:function(){for(var t=[],e={},n=x(i)||[],r=a(n),s=r.length,l=0;s>l;l++){var u=n===r?l:r[l],c=n[u],d=k(c,u),p=f(i,d),m=g(p,d),_=y(i,d),$=b(i,d),S=w(i,d),T=new o(m,p,_,$,S);t.push(T),e[m]=T}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[v(t)]},getViewValueFromOption:function(t){return h?Oi.copy(t.viewValue):t.viewValue}}}}}var a=e.createElement("option"),s=e.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(e,n,r,l){function u(t,e){t.element=e,e.disabled=t.disabled,t.value!==e.value&&(e.value=t.selectValue),t.label!==e.label&&(e.label=t.label,e.textContent=t.label)}function c(t,e,n,i){var r;return e&&yi(e.nodeName)===n?r=e:(r=i.cloneNode(!1),e?t.insertBefore(r,e):t.appendChild(r)),r}function h(t){for(var e;t;)e=t.nextSibling,zt(t),t=e}function d(t){var e=m&&m[0],n=_&&_[0];if(e||n)for(;t&&(t===e||t===n);)t=t.nextSibling;return t}function p(){var t=k&&g.readValue();k=$.getOptions();var e={},i=n[0].firstChild;if(x&&n.prepend(m),i=d(i),k.items.forEach(function(t){var r,o,l;t.group?(r=e[t.group],r||(o=c(n[0],i,"optgroup",s),i=o.nextSibling,o.label=t.group,r=e[t.group]={groupElement:o,currentOptionElement:o.firstChild}),l=c(r.groupElement,r.currentOptionElement,"option",a),u(t,l),r.currentOptionElement=l.nextSibling):(l=c(n[0],i,"option",a),u(t,l),i=l.nextSibling)}),Object.keys(e).forEach(function(t){h(e[t].currentOptionElement)}),h(i),f.$render(),!f.$isEmpty(t)){var r=g.readValue();($.trackBy?z(t,r):t===r)||(f.$setViewValue(r),f.$render())}}var f=l[1];if(f){for(var m,g=l[0],v=r.multiple,y=0,b=n.children(),w=b.length;w>y;y++)if(""===b[y].value){m=b.eq(y);break}var x=!!m,_=$i(a.cloneNode(!1));_.val("?");var k,$=i(r.ngOptions,n,e),S=function(){x||n.prepend(m),n.val(""),m.prop("selected",!0),m.attr("selected",!0)},T=function(){x||m.remove()},E=function(){n.prepend(_),n.val("?"),_.prop("selected",!0),_.attr("selected",!0)},C=function(){_.remove()};v?(f.$isEmpty=function(t){return!t||0===t.length},g.writeValue=function(t){k.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=k.getOptionFromViewValue(t);e&&!e.disabled&&(e.element.selected=!0)})},g.readValue=function(){var t=n.val()||[],e=[];return o(t,function(t){var n=k.selectValueMap[t];n&&!n.disabled&&e.push(k.getViewValueFromOption(n))}),e},$.trackBy&&e.$watchCollection(function(){return Bi(f.$viewValue)?f.$viewValue.map(function(t){return $.getTrackByValue(t)}):void 0},function(){f.$render()})):(g.writeValue=function(t){var e=k.getOptionFromViewValue(t);e&&!e.disabled?n[0].value!==e.selectValue&&(C(),T(),n[0].value=e.selectValue,e.element.selected=!0,e.element.setAttribute("selected","selected")):null===t||x?(C(),S()):(T(),E())},g.readValue=function(){var t=k.selectValueMap[n.val()];return t&&!t.disabled?(T(),C(),k.getViewValueFromOption(t)):null},$.trackBy&&e.$watch(function(){return $.getTrackByValue(f.$viewValue)},function(){f.$render()})),x?(m.remove(),t(m)(e),m.removeClass("ng-scope")):m=$i(a.cloneNode(!1)),p(),e.$watchCollection($.getWatchables,p)}}}}],ca=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function u(t){s.text(t||"")}var c,h=l.count,d=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,f=a.$eval(d)||{},g={},v=e.startSymbol(),y=e.endSymbol(),w=v+h+"-"+p+y,x=Oi.noop;o(l,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+yi(n[2]);f[i]=s.attr(l.$attr[e])}}),o(f,function(t,n){g[n]=e(t.replace(i,w))}),a.$watch(h,function(e){var i=parseFloat(e),r=isNaN(i);if(r||i in f||(i=t.pluralCat(i-p)),i!==c&&!(r&&$(c)&&isNaN(c))){x();var o=g[i];b(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+d),x=m,u()):x=a.$watch(o,u),c=i}})}}}],ha=["$parse","$animate",function(t,a){var s="$$NG_REMOVED",l=i("ngRepeat"),u=function(t,e,n,i,r,o,a){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},c=function(t){return t.clone[0]},h=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,d){var p=d.ngRepeat,f=e.createComment(" end ngRepeat: "+p+" "),m=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var g=m[1],v=m[2],y=m[3],b=m[4];if(m=g.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!m)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var w=m[3]||m[1],x=m[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var _,k,$,S,T={$id:Gt};return b?_=t(b):($=function(t,e){return Gt(e)},S=function(t){return t}),function(t,e,i,d,m){_&&(k=function(e,n,i){return x&&(T[x]=e),T[w]=n,T.$index=i,_(t,T)});var g=gt();t.$watchCollection(v,function(i){var d,v,b,_,T,E,C,P,A,D,N,O,I=e[0],M=gt();if(y&&(t[y]=i),r(i))A=i,P=k||$;else{P=k||S,A=[];for(var B in i)i.hasOwnProperty(B)&&"$"!==B.charAt(0)&&A.push(B)}for(_=A.length,N=new Array(_),d=0;_>d;d++)if(T=i===A?d:A[d],E=i[T],C=P(T,E,d),g[C])D=g[C],delete g[C],M[C]=D,N[d]=D;else{if(M[C])throw o(N,function(t){t&&t.scope&&(g[t.id]=t)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,C,E);N[d]={id:C,scope:n,clone:n},M[C]=!0}for(var R in g){if(D=g[R],O=mt(D.clone),a.leave(O),O[0].parentNode)for(d=0,v=O.length;v>d;d++)O[d][s]=!0;D.scope.$destroy()}for(d=0;_>d;d++)if(T=i===A?d:A[d],E=i[T],D=N[d],D.scope){b=I;do b=b.nextSibling;while(b&&b[s]);c(D)!=b&&a.move(mt(D.clone),null,$i(I)),I=h(D),u(D.scope,d,w,E,x,T,_)}else m(function(t,e){D.scope=e;var n=f.cloneNode(!1);t[t.length++]=n,a.enter(t,null,$i(I)),I=n,D.clone=t,M[D.id]=D,u(D.scope,d,w,E,x,T,_)});g=M})}}}}],da="ng-hide",pa="ng-hide-animate",fa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,da,{tempClasses:pa})})}}}],ma=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,da,{tempClasses:pa})})}}}],ga=Zn(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),va=["$animate",function(t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,a){var s=r.ngSwitch||r.on,l=[],u=[],c=[],h=[],d=function(t,e){return function(){t.splice(e,1)}};n.$watch(s,function(n){var i,r;for(i=0,r=c.length;r>i;++i)t.cancel(c[i]);for(c.length=0,i=0,r=h.length;r>i;++i){var s=mt(u[i].clone);h[i].$destroy();var p=c[i]=t.leave(s);p.then(d(c,i))}u.length=0,h.length=0,(l=a.cases["!"+n]||a.cases["?"])&&o(l,function(n){n.transclude(function(i,r){h.push(r);var o=n.element;i[i.length++]=e.createComment(" end ngSwitchWhen: ");var a={clone:i};u.push(a),t.enter(i,o.parent(),o)})})})}}}],ya=Zn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:e})}}),ba=Zn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),wa=Zn({restrict:"EAC",link:function(t,e,n,r,o){if(!o)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Q(e));o(function(t){e.empty(),e.append(t)})}}),xa=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],_a={$setViewValue:m,$render:m},ka=["$element","$scope","$attrs",function(t,i,r){var o=this,a=new Xt;o.ngModelCtrl=_a,o.unknownOption=$i(e.createElement("option")),o.renderUnknownOption=function(e){var n="? "+Gt(e)+" ?";o.unknownOption.val(n),t.prepend(o.unknownOption),t.val(n)},i.$on("$destroy",function(){o.renderUnknownOption=m}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),t.val()},o.writeValue=function(e){o.hasOption(e)?(o.removeUnknownOption(),t.val(e),""===e&&o.emptyOption.prop("selected",!0)):null==e&&o.emptyOption?(o.removeUnknownOption(),t.val("")):o.renderUnknownOption(e)},o.addOption=function(t,e){pt(t,'"option value"'),""===t&&(o.emptyOption=e);var n=a.get(t)||0;a.put(t,n+1)},o.removeOption=function(t){var e=a.get(t);e&&(1===e?(a.remove(t),""===t&&(o.emptyOption=n)):a.put(t,e-1))},o.hasOption=function(t){return!!a.get(t)}}],$a=function(){return{restrict:"E",require:["select","?ngModel"],controller:ka,link:function(t,e,n,i){var r=i[1];if(r){var a=i[0];if(a.ngModelCtrl=r,r.$render=function(){a.writeValue(r.$viewValue)},e.on("change",function(){t.$apply(function(){r.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var t=[];return o(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},a.writeValue=function(t){var n=new Xt(t);o(e.find("option"),function(t){t.selected=w(n.get(t.value))})};var s,l=NaN;t.$watch(function(){l!==r.$viewValue||z(s,r.$viewValue)||(s=H(r.$viewValue),r.$render()),l=r.$viewValue}),r.$isEmpty=function(t){return!t||0===t.length}}}}}},Sa=["$interpolate",function(t){function e(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,i){if(b(i.value)){var r=t(n.text(),!0);r||i.$set("value",n.text())}return function(t,n,i){var o="$selectController",a=n.parent(),s=a.data(o)||a.parent().data(o);s&&s.ngModelCtrl&&(r?t.$watch(r,function(t,r){i.$set("value",t),r!==t&&s.removeOption(r),s.addOption(t,n),s.ngModelCtrl.$render(),e(n)}):(s.addOption(i.value,n),s.ngModelCtrl.$render(),e(n)),n.on("$destroy",function(){s.removeOption(i.value),s.ngModelCtrl.$render()}))}}}}],Ta=v({restrict:"E",terminal:!1}),Ea=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},Ca=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,o){if(o){var a,s=r.ngPattern||r.pattern;r.$observe("pattern",function(t){if(k(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),
t&&!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,Q(e));a=t||n,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||b(a)||a.test(t)}}}}},Pa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=p(t);r=isNaN(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return 0>r||i.$isEmpty(e)||e.length<=r}}}}},Aa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=p(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};return t.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ct(),wt(Oi),Oi.module("ngLocale",[],["$provide",function(t){function e(t){t+="";var e=t.indexOf(".");return-1==e?0:t.length-e-1}function i(t,i){var r=i;n===r&&(r=Math.min(e(t),3));var o=Math.pow(10,r),a=(t*o|0)%o;return{v:r,f:a}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\xa4",negSuf:"",posPre:"\xa4",posSuf:""}]},id:"en-us",pluralCat:function(t,e){var n=0|t,o=i(t,e);return 1==n&&0==o.v?r.ONE:r.OTHER}})}]),void $i(e).ready(function(){ot(e,at)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),Blacklight.onLoad(function(){angular.module("myApp",[]).controller("TeiViewer",["$scope","$sce",TeiViewer]).directive("teiViewer",TeiViewerDirective);angular.bootstrap("body",["myApp"])}),function(){function t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function e(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function n(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function i(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function r(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function o(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function a(t,e){var n=null==t?0:t.length;return!!n&&v(t,e,0)>-1}function s(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function l(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function u(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function c(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function h(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function d(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function p(t){return t.split("")}function f(t){return t.match(Be)||[]}function m(t,e,n){var i;return n(t,function(t,n,r){return e(t,n,r)?(i=n,!1):void 0}),i}function g(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function v(t,e,n){return e===e?V(t,e,n):g(t,b,n)}function y(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function b(t){return t!==t}function w(t,e){var n=null==t?0:t.length;return n?S(t,e)/n:Dt}function x(t){return function(e){return null==e?Q:e[t]}}function _(t){return function(e){return null==t?Q:t[e]}}function k(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function $(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function S(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==Q&&(n=n===Q?o:n+o)}return n}function T(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function E(t,e){return l(e,function(e){return[e,t[e]]})}function C(t){return function(e){return t(e)}}function P(t,e){return l(e,function(e){return t[e]})}function A(t,e){return t.has(e)}function D(t,e){for(var n=-1,i=t.length;++n<i&&v(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length;n--&&v(e,t[n],0)>-1;);return n}function O(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function I(t){return"\\"+Xn[t]}function M(t,e){return null==t?Q:t[e]}function B(t){return Fn.test(t)}function R(t){return Hn.test(t)}function j(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function L(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function F(t,e){return function(n){return t(e(n))}}function H(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];(a===e||a===ot)&&(t[n]=ot,o[r++]=n)}return o}function z(t,e){return"__proto__"==e?Q:t[e]}function U(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function V(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function W(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function K(t){return B(t)?X(t):di(t)}function G(t){return B(t)?Y(t):p(t)}function X(t){for(var e=jn.lastIndex=0;jn.test(t);)++e;return e}function Y(t){return t.match(jn)||[]}function Z(t){return t.match(Ln)||[]}var Q,J="4.17.5",tt=200,et="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",nt="Expected a function",it="__lodash_hash_undefined__",rt=500,ot="__lodash_placeholder__",at=1,st=2,lt=4,ut=1,ct=2,ht=1,dt=2,pt=4,ft=8,mt=16,gt=32,vt=64,yt=128,bt=256,wt=512,xt=30,_t="...",kt=800,$t=16,St=1,Tt=2,Et=3,Ct=1/0,Pt=9007199254740991,At=1.7976931348623157e308,Dt=NaN,Nt=4294967295,Ot=Nt-1,It=Nt>>>1,Mt=[["ary",yt],["bind",ht],["bindKey",dt],["curry",ft],["curryRight",mt],["flip",wt],["partial",gt],["partialRight",vt],["rearg",bt]],Bt="[object Arguments]",Rt="[object Array]",jt="[object AsyncFunction]",Lt="[object Boolean]",Ft="[object Date]",Ht="[object DOMException]",zt="[object Error]",Ut="[object Function]",qt="[object GeneratorFunction]",Vt="[object Map]",Wt="[object Number]",Kt="[object Null]",Gt="[object Object]",Xt="[object Promise]",Yt="[object Proxy]",Zt="[object RegExp]",Qt="[object Set]",Jt="[object String]",te="[object Symbol]",ee="[object Undefined]",ne="[object WeakMap]",ie="[object WeakSet]",re="[object ArrayBuffer]",oe="[object DataView]",ae="[object Float32Array]",se="[object Float64Array]",le="[object Int8Array]",ue="[object Int16Array]",ce="[object Int32Array]",he="[object Uint8Array]",de="[object Uint8ClampedArray]",pe="[object Uint16Array]",fe="[object Uint32Array]",me=/\b__p \+= '';/g,ge=/\b(__p \+=) '' \+/g,ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ye=/&(?:amp|lt|gt|quot|#39);/g,be=/[&<>"']/g,we=RegExp(ye.source),xe=RegExp(be.source),_e=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,$e=/<%=([\s\S]+?)%>/g,Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ce=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(Ce.source),Ae=/^\s+|\s+$/g,De=/^\s+/,Ne=/\s+$/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ie=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Re=/\\(\\)?/g,je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Le=/\w*$/,Fe=/^[-+]0x[0-9a-f]+$/i,He=/^0b[01]+$/i,ze=/^\[object .+?Constructor\]$/,Ue=/^0o[0-7]+$/i,qe=/^(?:0|[1-9]\d*)$/,Ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,We=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Ge="\\ud800-\\udfff",Xe="\\u0300-\\u036f",Ye="\\ufe20-\\ufe2f",Ze="\\u20d0-\\u20ff",Qe=Xe+Ye+Ze,Je="\\u2700-\\u27bf",tn="a-z\\xdf-\\xf6\\xf8-\\xff",en="\\xac\\xb1\\xd7\\xf7",nn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rn="\\u2000-\\u206f",on=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",an="A-Z\\xc0-\\xd6\\xd8-\\xde",sn="\\ufe0e\\ufe0f",ln=en+nn+rn+on,un="['\u2019]",cn="["+Ge+"]",hn="["+ln+"]",dn="["+Qe+"]",pn="\\d+",fn="["+Je+"]",mn="["+tn+"]",gn="[^"+Ge+ln+pn+Je+tn+an+"]",vn="\\ud83c[\\udffb-\\udfff]",yn="(?:"+dn+"|"+vn+")",bn="[^"+Ge+"]",wn="(?:\\ud83c[\\udde6-\\uddff]){2}",xn="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="["+an+"]",kn="\\u200d",$n="(?:"+mn+"|"+gn+")",Sn="(?:"+_n+"|"+gn+")",Tn="(?:"+un+"(?:d|ll|m|re|s|t|ve))?",En="(?:"+un+"(?:D|LL|M|RE|S|T|VE))?",Cn=yn+"?",Pn="["+sn+"]?",An="(?:"+kn+"(?:"+[bn,wn,xn].join("|")+")"+Pn+Cn+")*",Dn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",On=Pn+Cn+An,In="(?:"+[fn,wn,xn].join("|")+")"+On,Mn="(?:"+[bn+dn+"?",dn,wn,xn,cn].join("|")+")",Bn=RegExp(un,"g"),Rn=RegExp(dn,"g"),jn=RegExp(vn+"(?="+vn+")|"+Mn+On,"g"),Ln=RegExp([_n+"?"+mn+"+"+Tn+"(?="+[hn,_n,"$"].join("|")+")",Sn+"+"+En+"(?="+[hn,_n+$n,"$"].join("|")+")",_n+"?"+$n+"+"+Tn,_n+"+"+En,Nn,Dn,pn,In].join("|"),"g"),Fn=RegExp("["+kn+Ge+Qe+sn+"]"),Hn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Un=-1,qn={};qn[ae]=qn[se]=qn[le]=qn[ue]=qn[ce]=qn[he]=qn[de]=qn[pe]=qn[fe]=!0,qn[Bt]=qn[Rt]=qn[re]=qn[Lt]=qn[oe]=qn[Ft]=qn[zt]=qn[Ut]=qn[Vt]=qn[Wt]=qn[Gt]=qn[Zt]=qn[Qt]=qn[Jt]=qn[ne]=!1;var Vn={};Vn[Bt]=Vn[Rt]=Vn[re]=Vn[oe]=Vn[Lt]=Vn[Ft]=Vn[ae]=Vn[se]=Vn[le]=Vn[ue]=Vn[ce]=Vn[Vt]=Vn[Wt]=Vn[Gt]=Vn[Zt]=Vn[Qt]=Vn[Jt]=Vn[te]=Vn[he]=Vn[de]=Vn[pe]=Vn[fe]=!0,Vn[zt]=Vn[Ut]=Vn[ne]=!1;var Wn={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yn=parseFloat,Zn=parseInt,Qn="object"==typeof global&&global&&global.Object===Object&&global,Jn="object"==typeof self&&self&&self.Object===Object&&self,ti=Qn||Jn||Function("return this")(),ei="object"==typeof exports&&exports&&!exports.nodeType&&exports,ni=ei&&"object"==typeof module&&module&&!module.nodeType&&module,ii=ni&&ni.exports===ei,ri=ii&&Qn.process,oi=function(){try{return ri&&ri.binding&&ri.binding("util")}catch(t){}}(),ai=oi&&oi.isArrayBuffer,si=oi&&oi.isDate,li=oi&&oi.isMap,ui=oi&&oi.isRegExp,ci=oi&&oi.isSet,hi=oi&&oi.isTypedArray,di=x("length"),pi=_(Wn),fi=_(Kn),mi=_(Gn),gi=function yi(p){function _(t){if(ol(t)&&!gd(t)&&!(t instanceof Y)){if(t instanceof X)return t;if(gc.call(t,"__wrapped__"))return na(t)}return new X(t)}function V(){}function X(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Q}function Y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function Be(){var t=new Y(this.__wrapped__);return t.__actions__=Br(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Br(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Br(this.__views__),t}function Ge(){if(this.__filtered__){var t=new Y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Xe(){var t=this.__wrapped__.value(),e=this.__dir__,n=gd(t),i=0>e,r=n?t.length:0,o=To(0,r,this.__views__),a=o.start,s=o.end,l=s-a,u=i?s:a-1,c=this.__iteratees__,h=c.length,d=0,p=Wc(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return br(t,this.__actions__);var f=[];t:for(;l--&&p>d;){u+=e;for(var m=-1,g=t[u];++m<h;){var v=c[m],y=v.iteratee,b=v.type,w=y(g);if(b==Tt)g=w;else if(!w){if(b==St)continue t;break t}}f[d++]=g}return f}function Ye(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ze(){this.__data__=nh?nh(null):{},this.size=0}function Qe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Je(t){var e=this.__data__;if(nh){var n=e[t];return n===it?Q:n}return gc.call(e,t)?e[t]:Q}function tn(t){var e=this.__data__;return nh?e[t]!==Q:gc.call(e,t)}function en(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nh&&e===Q?it:e,this}function nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function rn(){this.__data__=[],this.size=0}function on(t){var e=this.__data__,n=An(e,t);if(0>n)return!1;var i=e.length-1;return n==i?e.pop():Ac.call(e,n,1),--this.size,!0}function an(t){var e=this.__data__,n=An(e,t);return 0>n?Q:e[n][1]}function sn(t){return An(this.__data__,t)>-1}function ln(t,e){var n=this.__data__,i=An(n,t);return 0>i?(++this.size,n.push([t,e])):n[i][1]=e,this}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function cn(){this.size=0,this.__data__={hash:new Ye,map:new(Qc||nn),string:new Ye}}function hn(t){var e=_o(this,t)["delete"](t);return this.size-=e?1:0,e}function dn(t){return _o(this,t).get(t)}function pn(t){return _o(this,t).has(t)}function fn(t,e){var n=_o(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function mn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new un;++e<n;)this.add(t[e])}function gn(t){return this.__data__.set(t,it),this}function vn(t){return this.__data__.has(t)}function yn(t){var e=this.__data__=new nn(t);this.size=e.size}function bn(){this.__data__=new nn,this.size=0}function wn(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function xn(t){return this.__data__.get(t)}function _n(t){return this.__data__.has(t)}function kn(t,e){var n=this.__data__;if(n instanceof nn){var i=n.__data__;if(!Qc||i.length<tt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new un(i)}return n.set(t,e),this.size=n.size,this}function $n(t,e){var n=gd(t),i=!n&&md(t),r=!n&&!i&&yd(t),o=!n&&!i&&!r&&kd(t),a=n||i||r||o,s=a?T(t.length,uc):[],l=s.length;for(var u in t)!e&&!gc.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Io(u,l))||s.push(u);return s}function Sn(t){var e=t.length;return e?t[tr(0,e-1)]:Q}function Tn(t,e){return Qo(Br(t),jn(e,0,t.length))}function En(t){return Qo(Br(t))}function Cn(t,e,n){(n!==Q&&!Vs(t[e],n)||n===Q&&!(e in t))&&In(t,e,n)}function Pn(t,e,n){var i=t[e];gc.call(t,e)&&Vs(i,n)&&(n!==Q||e in t)||In(t,e,n)}function An(t,e){for(var n=t.length;n--;)if(Vs(t[n][0],e))return n;return-1}function Dn(t,e,n,i){return fh(t,function(t,r,o){e(i,t,n(t),o)}),i}function Nn(t,e){return t&&Rr(e,Fl(e),t)}function On(t,e){return t&&Rr(e,Hl(e),t)}function In(t,e,n){"__proto__"==e&&Ic?Ic(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Mn(t,e){for(var n=-1,i=e.length,r=nc(i),o=null==t;++n<i;)r[n]=o?Q:Rl(t,e[n]);return r}function jn(t,e,n){return t===t&&(n!==Q&&(t=n>=t?t:n),e!==Q&&(t=t>=e?t:e)),t}function Ln(t,e,i,r,o,a){var s,l=e&at,u=e&st,c=e&lt;if(i&&(s=o?i(t,r,o,a):i(t)),s!==Q)return s;if(!rl(t))return t;var h=gd(t);if(h){if(s=Po(t),!l)return Br(t,s)}else{var d=Th(t),p=d==Ut||d==qt;if(yd(t))return Tr(t,l);if(d==Gt||d==Bt||p&&!o){if(s=u||p?{}:Ao(t),!l)return u?Lr(t,On(s,t)):jr(t,Nn(s,t))}else{if(!Vn[d])return o?t:{};s=Do(t,d,l)}}a||(a=new yn);var f=a.get(t);if(f)return f;if(a.set(t,s),_d(t))return t.forEach(function(n){s.add(Ln(n,e,i,n,t,a))}),s;if(wd(t))return t.forEach(function(n,r){s.set(r,Ln(n,e,i,r,t,a))}),s;var m=c?u?yo:vo:u?Hl:Fl,g=h?Q:m(t);return n(g||t,function(n,r){g&&(r=n,n=t[r]),Pn(s,r,Ln(n,e,i,r,t,a))}),s}function Fn(t){var e=Fl(t);return function(n){return Hn(n,t,e)}}function Hn(t,e,n){var i=n.length;if(null==t)return!i;for(t=sc(t);i--;){var r=n[i],o=e[r],a=t[r];if(a===Q&&!(r in t)||!o(a))return!1}return!0}function Wn(t,e,n){if("function"!=typeof t)throw new cc(nt);return Ph(function(){t.apply(Q,n)},e)}function Kn(t,e,n,i){var r=-1,o=a,u=!0,c=t.length,h=[],d=e.length;if(!c)return h;n&&(e=l(e,C(n))),i?(o=s,u=!1):e.length>=tt&&(o=A,u=!1,e=new mn(e));t:for(;++r<c;){var p=t[r],f=null==n?p:n(p);if(p=i||0!==p?p:0,u&&f===f){for(var m=d;m--;)if(e[m]===f)continue t;h.push(p)}else o(e,f,i)||h.push(p)}return h}function Gn(t,e){var n=!0;return fh(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Xn(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],a=e(o);if(null!=a&&(s===Q?a===a&&!gl(a):n(a,s)))var s=a,l=o}return l}function Qn(t,e,n,i){var r=t.length;for(n=_l(n),0>n&&(n=-n>r?0:r+n),i=i===Q||i>r?r:_l(i),0>i&&(i+=r),i=n>i?0:kl(i);i>n;)t[n++]=e;return t}function Jn(t,e){var n=[];return fh(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function ei(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=Oo),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ei(s,e-1,n,i,r):u(r,s):i||(r[r.length]=s)}return r}function ni(t,e){return t&&gh(t,e,Fl)}function ri(t,e){return t&&vh(t,e,Fl)}function oi(t,e){return o(e,function(e){return el(t[e])})}function di(t,e){e=$r(e,t);for(var n=0,i=e.length;null!=t&&i>n;)t=t[Jo(e[n++])];return n&&n==i?t:Q}function gi(t,e,n){var i=e(t);return gd(t)?i:u(i,n(t))}function bi(t){return null==t?t===Q?ee:Kt:Oc&&Oc in sc(t)?So(t):Wo(t)}function wi(t,e){return t>e}function xi(t,e){return null!=t&&gc.call(t,e)}function _i(t,e){return null!=t&&e in sc(t)}function ki(t,e,n){return t>=Wc(e,n)&&t<Vc(e,n)}function $i(t,e,n){for(var i=n?s:a,r=t[0].length,o=t.length,u=o,c=nc(o),h=1/0,d=[];u--;){var p=t[u];u&&e&&(p=l(p,C(e))),h=Wc(p.length,h),c[u]=!n&&(e||r>=120&&p.length>=120)?new mn(u&&p):Q}p=t[0];var f=-1,m=c[0];t:for(;++f<r&&d.length<h;){var g=p[f],v=e?e(g):g;if(g=n||0!==g?g:0,!(m?A(m,v):i(d,v,n))){for(u=o;--u;){var y=c[u];if(!(y?A(y,v):i(t[u],v,n)))continue t}m&&m.push(v),d.push(g)}}return d}function Si(t,e,n,i){return ni(t,function(t,r,o){e(i,n(t),r,o)}),i}function Ti(e,n,i){n=$r(n,e),e=Go(e,n);var r=null==e?e:e[Jo(xa(n))];return null==r?Q:t(r,e,i)}function Ei(t){return ol(t)&&bi(t)==Bt}function Ci(t){return ol(t)&&bi(t)==re}function Pi(t){return ol(t)&&bi(t)==Ft}function Ai(t,e,n,i,r){return t===e?!0:null==t||null==e||!ol(t)&&!ol(e)?t!==t&&e!==e:Di(t,e,n,i,Ai,r)}function Di(t,e,n,i,r,o){var a=gd(t),s=gd(e),l=a?Rt:Th(t),u=s?Rt:Th(e);l=l==Bt?Gt:l,u=u==Bt?Gt:u;var c=l==Gt,h=u==Gt,d=l==u;if(d&&yd(t)){if(!yd(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new yn),a||kd(t)?po(t,e,n,i,r,o):fo(t,e,l,n,i,r,o);if(!(n&ut)){var p=c&&gc.call(t,"__wrapped__"),f=h&&gc.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return o||(o=new yn),r(m,g,n,i,o)}}return d?(o||(o=new yn),mo(t,e,n,i,r,o)):!1}function Ni(t){return ol(t)&&Th(t)==Vt}function Oi(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=sc(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(u===Q&&!(l in t))return!1}else{var h=new yn;if(i)var d=i(u,c,l,t,e,h);if(!(d===Q?Ai(c,u,ut|ct,i,h):d))return!1}}return!0}function Ii(t){if(!rl(t)||Lo(t))return!1;var e=el(t)?_c:ze;return e.test(ta(t))}function Mi(t){return ol(t)&&bi(t)==Zt}function Bi(t){return ol(t)&&Th(t)==Qt}function Ri(t){return ol(t)&&il(t.length)&&!!qn[bi(t)]}function ji(t){return"function"==typeof t?t:null==t?Au:"object"==typeof t?gd(t)?qi(t[0],t[1]):Ui(t):ju(t)}function Li(t){if(!Fo(t))return qc(t);var e=[];for(var n in sc(t))gc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fi(t){if(!rl(t))return Vo(t);var e=Fo(t),n=[];for(var i in t)("constructor"!=i||!e&&gc.call(t,i))&&n.push(i);return n}function Hi(t,e){return e>t}function zi(t,e){var n=-1,i=Ws(t)?nc(t.length):[];return fh(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Ui(t){var e=ko(t);return 1==e.length&&e[0][2]?zo(e[0][0],e[0][1]):function(n){return n===t||Oi(n,t,e)}}function qi(t,e){return Bo(t)&&Ho(e)?zo(Jo(t),e):function(n){var i=Rl(n,t);return i===Q&&i===e?Ll(n,t):Ai(e,i,ut|ct)}}function Vi(t,e,n,i,r){t!==e&&gh(e,function(o,a){if(rl(o))r||(r=new yn),Wi(t,e,a,n,Vi,i,r);else{var s=i?i(z(t,a),o,a+"",t,e,r):Q;s===Q&&(s=o),Cn(t,a,s)}},Hl)}function Wi(t,e,n,i,r,o,a){var s=z(t,n),l=z(e,n),u=a.get(l);if(u)return void Cn(t,n,u);var c=o?o(s,l,n+"",t,e,a):Q,h=c===Q;if(h){var d=gd(l),p=!d&&yd(l),f=!d&&!p&&kd(l);c=l,d||p||f?gd(s)?c=s:Ks(s)?c=Br(s):p?(h=!1,c=Tr(l,!0)):f?(h=!1,c=Dr(l,!0)):c=[]:pl(l)||md(l)?(c=s,md(s)?c=Sl(s):(!rl(s)||i&&el(s))&&(c=Ao(l))):h=!1}h&&(a.set(l,c),r(c,l,i,o,a),a["delete"](l)),Cn(t,n,c)}function Ki(t,e){var n=t.length;if(n)return e+=0>e?n:0,Io(e,n)?t[e]:Q}function Gi(t,e,n){var i=-1;e=l(e.length?e:[Au],C(xo()));var r=zi(t,function(t,n,r){var o=l(e,function(e){return e(t)});return{criteria:o,index:++i,value:t}});return $(r,function(t,e){return Or(t,e,n)})}function Xi(t,e){return Yi(t,e,function(e,n){return Ll(t,n)})}function Yi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=di(t,a);n(s,a)&&ar(o,$r(a,t),s)}return o}function Zi(t){return function(e){return di(e,t)}}function Qi(t,e,n,i){var r=i?y:v,o=-1,a=e.length,s=t;for(t===e&&(e=Br(e)),n&&(s=l(t,C(n)));++o<a;)for(var u=0,c=e[o],h=n?n(c):c;(u=r(s,h,u,i))>-1;)s!==t&&Ac.call(s,u,1),Ac.call(t,u,1);return t}function Ji(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Io(r)?Ac.call(t,r,1):gr(t,r)}}return t}function tr(t,e){return t+Lc(Xc()*(e-t+1))}function er(t,e,n,i){for(var r=-1,o=Vc(jc((e-t)/(n||1)),0),a=nc(o);o--;)a[i?o:++r]=t,t+=n;return a}function nr(t,e){var n="";if(!t||1>e||e>Pt)return n;do e%2&&(n+=t),e=Lc(e/2),e&&(t+=t);while(e);return n}function ir(t,e){return Ah(Ko(t,e,Au),t+"")}function rr(t){return Sn(Jl(t))}function or(t,e){var n=Jl(t);return Qo(n,jn(e,0,n.length))}function ar(t,e,n,i){if(!rl(t))return t;e=$r(e,t);for(var r=-1,o=e.length,a=o-1,s=t;null!=s&&++r<o;){var l=Jo(e[r]),u=n;if(r!=a){var c=s[l];u=i?i(c,l,s):Q,u===Q&&(u=rl(c)?c:Io(e[r+1])?[]:{})}Pn(s,l,u),s=s[l]}return t}function sr(t){return Qo(Jl(t))}function lr(t,e,n){var i=-1,r=t.length;0>e&&(e=-e>r?0:r+e),n=n>r?r:n,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=nc(r);++i<r;)o[i]=t[i+e];return o}function ur(t,e){var n;return fh(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function cr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&It>=r){for(;r>i;){var o=i+r>>>1,a=t[o];null!==a&&!gl(a)&&(n?e>=a:e>a)?i=o+1:r=o}return r}return hr(t,e,Au,n)}function hr(t,e,n,i){e=n(e);for(var r=0,o=null==t?0:t.length,a=e!==e,s=null===e,l=gl(e),u=e===Q;o>r;){var c=Lc((r+o)/2),h=n(t[c]),d=h!==Q,p=null===h,f=h===h,m=gl(h);if(a)var g=i||f;else g=u?f&&(i||d):s?f&&d&&(i||!p):l?f&&d&&!p&&(i||!m):p||m?!1:i?e>=h:e>h;g?r=c+1:o=c}return Wc(o,Ot)}function dr(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Vs(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function pr(t){return"number"==typeof t?t:gl(t)?Dt:+t}function fr(t){if("string"==typeof t)return t;if(gd(t))return l(t,fr)+"";if(gl(t))return dh?dh.call(t):"";var e=t+"";return"0"==e&&1/t==-Ct?"-0":e}function mr(t,e,n){var i=-1,r=a,o=t.length,l=!0,u=[],c=u;if(n)l=!1,r=s;else if(o>=tt){var h=e?null:_h(t);if(h)return U(h);l=!1,r=A,c=new mn}else c=e?[]:u;t:for(;++i<o;){var d=t[i],p=e?e(d):d;if(d=n||0!==d?d:0,l&&p===p){for(var f=c.length;f--;)if(c[f]===p)continue t;e&&c.push(p),u.push(d)}else r(c,p,n)||(c!==u&&c.push(p),u.push(d))}return u}function gr(t,e){return e=$r(e,t),t=Go(t,e),null==t||delete t[Jo(xa(e))]}function vr(t,e,n,i){return ar(t,e,n(di(t,e)),i)}function yr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?lr(t,i?0:o,i?o+1:r):lr(t,i?o+1:0,i?r:o)}function br(t,e){var n=t;return n instanceof Y&&(n=n.value()),c(e,function(t,e){return e.func.apply(e.thisArg,u([t],e.args))},n)}function wr(t,e,n){var i=t.length;if(2>i)return i?mr(t[0]):[];for(var r=-1,o=nc(i);++r<i;)for(var a=t[r],s=-1;++s<i;)s!=r&&(o[r]=Kn(o[r]||a,t[s],e,n));return mr(ei(o,1),e,n)}function xr(t,e,n){for(var i=-1,r=t.length,o=e.length,a={};++i<r;){var s=o>i?e[i]:Q;n(a,t[i],s)}return a}function _r(t){return Ks(t)?t:[]}function kr(t){return"function"==typeof t?t:Au}function $r(t,e){return gd(t)?t:Bo(t,e)?[t]:Dh(El(t))}function Sr(t,e,n){var i=t.length;return n=n===Q?i:n,!e&&n>=i?t:lr(t,e,n)}function Tr(t,e){if(e)return t.slice();var n=t.length,i=Tc?Tc(n):new t.constructor(n);return t.copy(i),i}function Er(t){var e=new t.constructor(t.byteLength);return new Sc(e).set(new Sc(t)),e}function Cr(t,e){var n=e?Er(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Pr(t){var e=new t.constructor(t.source,Le.exec(t));return e.lastIndex=t.lastIndex,e}function Ar(t){return hh?sc(hh.call(t)):{}}function Dr(t,e){var n=e?Er(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Nr(t,e){if(t!==e){var n=t!==Q,i=null===t,r=t===t,o=gl(t),a=e!==Q,s=null===e,l=e===e,u=gl(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||i&&a&&l||!n&&l||!r)return 1;if(!i&&!o&&!u&&e>t||u&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!l)return-1}return 0}function Or(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=Nr(r[i],o[i]);if(l){if(i>=s)return l;var u=n[i];return l*("desc"==u?-1:1)}}return t.index-e.index}function Ir(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,l=e.length,u=Vc(o-a,0),c=nc(l+u),h=!i;++s<l;)c[s]=e[s];for(;++r<a;)(h||o>r)&&(c[n[r]]=t[r]);for(;u--;)c[s++]=t[r++];return c}function Mr(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=Vc(o-s,0),h=nc(c+u),d=!i;++r<c;)h[r]=t[r];for(var p=r;++l<u;)h[p+l]=e[l];for(;++a<s;)(d||o>r)&&(h[p+n[a]]=t[r++]);return h}function Br(t,e){var n=-1,i=t.length;for(e||(e=nc(i));++n<i;)e[n]=t[n];return e}function Rr(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=i?i(n[s],t[s],s,n,t):Q;l===Q&&(l=t[s]),r?In(n,s,l):Pn(n,s,l)}return n}function jr(t,e){return Rr(t,$h(t),e)}function Lr(t,e){return Rr(t,Sh(t),e)}function Fr(t,n){return function(i,r){var o=gd(i)?e:Dn,a=n?n():{};return o(i,t,xo(r,2),a)}}function Hr(t){return ir(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:Q,a=r>2?n[2]:Q;for(o=t.length>3&&"function"==typeof o?(r--,o):Q,a&&Mo(n[0],n[1],a)&&(o=3>r?Q:o,r=1),e=sc(e);++i<r;){var s=n[i];s&&t(e,s,i,o)}return e})}function zr(t,e){return function(n,i){if(null==n)return n;if(!Ws(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=sc(n);(e?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function Ur(t){return function(e,n,i){for(var r=-1,o=sc(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(n(o[l],l,o)===!1)break}return e}}function qr(t,e,n){function i(){var e=this&&this!==ti&&this instanceof i?o:t;return e.apply(r?n:this,arguments)}var r=e&ht,o=Kr(t);return i}function Vr(t){return function(e){e=El(e);var n=B(e)?G(e):Q,i=n?n[0]:e.charAt(0),r=n?Sr(n,1).join(""):e.slice(1);return i[t]()+r}}function Wr(t){return function(e){return c(Su(ou(e).replace(Bn,"")),t,"")}}function Kr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ph(t.prototype),i=t.apply(n,e);return rl(i)?i:n}}function Gr(e,n,i){function r(){for(var a=arguments.length,s=nc(a),l=a,u=wo(r);l--;)s[l]=arguments[l];var c=3>a&&s[0]!==u&&s[a-1]!==u?[]:H(s,u);if(a-=c.length,i>a)return oo(e,n,Zr,r.placeholder,Q,s,c,Q,Q,i-a);var h=this&&this!==ti&&this instanceof r?o:e;return t(h,this,s)}var o=Kr(e);return r}function Xr(t){return function(e,n,i){var r=sc(e);if(!Ws(e)){var o=xo(n,3);e=Fl(e),n=function(t){return o(r[t],t,r)}}var a=t(e,n,i);return a>-1?r[o?e[a]:a]:Q}}function Yr(t){return go(function(e){var n=e.length,i=n,r=X.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new cc(nt);if(r&&!a&&"wrapper"==bo(o))var a=new X([],!0)}for(i=a?i:n;++i<n;){o=e[i];var s=bo(o),l="wrapper"==s?kh(o):Q;a=l&&jo(l[0])&&l[1]==(yt|ft|gt|bt)&&!l[4].length&&1==l[9]?a[bo(l[0])].apply(a,l[3]):1==o.length&&jo(o)?a[s]():a.thru(o)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&gd(i))return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function Zr(t,e,n,i,r,o,a,s,l,u){function c(){for(var v=arguments.length,y=nc(v),b=v;b--;)y[b]=arguments[b];if(f)var w=wo(c),x=O(y,w);if(i&&(y=Ir(y,i,r,f)),o&&(y=Mr(y,o,a,f)),v-=x,f&&u>v){var _=H(y,w);return oo(t,e,Zr,c.placeholder,n,y,_,s,l,u-v)}var k=d?n:this,$=p?k[t]:t;return v=y.length,s?y=Xo(y,s):m&&v>1&&y.reverse(),h&&v>l&&(y.length=l),this&&this!==ti&&this instanceof c&&($=g||Kr($)),$.apply(k,y)}var h=e&yt,d=e&ht,p=e&dt,f=e&(ft|mt),m=e&wt,g=p?Q:Kr(t);return c}function Qr(t,e){return function(n,i){return Si(n,t,e(i),{})}}function Jr(t,e){return function(n,i){var r;if(n===Q&&i===Q)return e;if(n!==Q&&(r=n),i!==Q){if(r===Q)return i;"string"==typeof n||"string"==typeof i?(n=fr(n),i=fr(i)):(n=pr(n),i=pr(i)),r=t(n,i)}return r}}function to(e){return go(function(n){return n=l(n,C(xo())),ir(function(i){var r=this;return e(n,function(e){return t(e,r,i)})})})}function eo(t,e){e=e===Q?" ":fr(e);var n=e.length;if(2>n)return n?nr(e,t):e;var i=nr(e,jc(t/K(e)));return B(e)?Sr(G(i),0,t).join(""):i.slice(0,t)}function no(e,n,i,r){function o(){for(var n=-1,l=arguments.length,u=-1,c=r.length,h=nc(c+l),d=this&&this!==ti&&this instanceof o?s:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++n];return t(d,a?i:this,h)}var a=n&ht,s=Kr(e);return o}function io(t){return function(e,n,i){return i&&"number"!=typeof i&&Mo(e,n,i)&&(n=i=Q),e=xl(e),n===Q?(n=e,e=0):n=xl(n),i=i===Q?n>e?1:-1:xl(i),er(e,n,i,t)}}function ro(t){
return function(e,n){return("string"!=typeof e||"string"!=typeof n)&&(e=$l(e),n=$l(n)),t(e,n)}}function oo(t,e,n,i,r,o,a,s,l,u){var c=e&ft,h=c?a:Q,d=c?Q:a,p=c?o:Q,f=c?Q:o;e|=c?gt:vt,e&=~(c?vt:gt),e&pt||(e&=~(ht|dt));var m=[t,e,r,p,h,f,d,s,l,u],g=n.apply(Q,m);return jo(t)&&Ch(g,m),g.placeholder=i,Yo(g,t,e)}function ao(t){var e=ac[t];return function(t,n){if(t=$l(t),n=null==n?0:Wc(_l(n),292)){var i=(El(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(El(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function so(t){return function(e){var n=Th(e);return n==Vt?L(e):n==Qt?q(e):E(e,t(e))}}function lo(t,e,n,i,r,o,a,s){var l=e&dt;if(!l&&"function"!=typeof t)throw new cc(nt);var u=i?i.length:0;if(u||(e&=~(gt|vt),i=r=Q),a=a===Q?a:Vc(_l(a),0),s=s===Q?s:_l(s),u-=r?r.length:0,e&vt){var c=i,h=r;i=r=Q}var d=l?Q:kh(t),p=[t,e,n,i,r,c,h,o,a,s];if(d&&qo(p,d),t=p[0],e=p[1],n=p[2],i=p[3],r=p[4],s=p[9]=p[9]===Q?l?0:t.length:Vc(p[9]-u,0),!s&&e&(ft|mt)&&(e&=~(ft|mt)),e&&e!=ht)f=e==ft||e==mt?Gr(t,e,s):e!=gt&&e!=(ht|gt)||r.length?Zr.apply(Q,p):no(t,e,n,i);else var f=qr(t,e,n);var m=d?yh:Ch;return Yo(m(f,p),t,e)}function uo(t,e,n,i){return t===Q||Vs(t,pc[n])&&!gc.call(i,n)?e:t}function co(t,e,n,i,r,o){return rl(t)&&rl(e)&&(o.set(e,t),Vi(t,e,Q,co,o),o["delete"](e)),t}function ho(t){return pl(t)?Q:t}function po(t,e,n,i,r,o){var a=n&ut,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,h=!0,p=n&ct?new mn:Q;for(o.set(t,e),o.set(e,t);++c<s;){var f=t[c],m=e[c];if(i)var g=a?i(m,f,c,e,t,o):i(f,m,c,t,e,o);if(g!==Q){if(g)continue;h=!1;break}if(p){if(!d(e,function(t,e){return A(p,e)||f!==t&&!r(f,t,n,i,o)?void 0:p.push(e)})){h=!1;break}}else if(f!==m&&!r(f,m,n,i,o)){h=!1;break}}return o["delete"](t),o["delete"](e),h}function fo(t,e,n,i,r,o,a){switch(n){case oe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case re:return t.byteLength==e.byteLength&&o(new Sc(t),new Sc(e))?!0:!1;case Lt:case Ft:case Wt:return Vs(+t,+e);case zt:return t.name==e.name&&t.message==e.message;case Zt:case Jt:return t==e+"";case Vt:var s=L;case Qt:var l=i&ut;if(s||(s=U),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;i|=ct,a.set(t,e);var c=po(s(t),s(e),i,r,o,a);return a["delete"](t),c;case te:if(hh)return hh.call(t)==hh.call(e)}return!1}function mo(t,e,n,i,r,o){var a=n&ut,s=vo(t),l=s.length,u=vo(e),c=u.length;if(l!=c&&!a)return!1;for(var h=l;h--;){var d=s[h];if(!(a?d in e:gc.call(e,d)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var f=!0;o.set(t,e),o.set(e,t);for(var m=a;++h<l;){d=s[h];var g=t[d],v=e[d];if(i)var y=a?i(v,g,d,e,t,o):i(g,v,d,t,e,o);if(!(y===Q?g===v||r(g,v,n,i,o):y)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(f=!1)}return o["delete"](t),o["delete"](e),f}function go(t){return Ah(Ko(t,Q,pa),t+"")}function vo(t){return gi(t,Fl,$h)}function yo(t){return gi(t,Hl,Sh)}function bo(t){for(var e=t.name+"",n=rh[e],i=gc.call(rh,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function wo(t){var e=gc.call(_,"placeholder")?_:t;return e.placeholder}function xo(){var t=_.iteratee||Du;return t=t===Du?ji:t,arguments.length?t(arguments[0],arguments[1]):t}function _o(t,e){var n=t.__data__;return Ro(e)?n["string"==typeof e?"string":"hash"]:n.map}function ko(t){for(var e=Fl(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ho(r)]}return e}function $o(t,e){var n=M(t,e);return Ii(n)?n:Q}function So(t){var e=gc.call(t,Oc),n=t[Oc];try{t[Oc]=Q;var i=!0}catch(r){}var o=bc.call(t);return i&&(e?t[Oc]=n:delete t[Oc]),o}function To(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Wc(e,t+a);break;case"takeRight":t=Vc(t,e-a)}}return{start:t,end:e}}function Eo(t){var e=t.match(Ie);return e?e[1].split(Me):[]}function Co(t,e,n){e=$r(e,t);for(var i=-1,r=e.length,o=!1;++i<r;){var a=Jo(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:(r=null==t?0:t.length,!!r&&il(r)&&Io(a,r)&&(gd(t)||md(t)))}function Po(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&gc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ao(t){return"function"!=typeof t.constructor||Fo(t)?{}:ph(Ec(t))}function Do(t,e,n){var i=t.constructor;switch(e){case re:return Er(t);case Lt:case Ft:return new i(+t);case oe:return Cr(t,n);case ae:case se:case le:case ue:case ce:case he:case de:case pe:case fe:return Dr(t,n);case Vt:return new i;case Wt:case Jt:return new i(t);case Zt:return Pr(t);case Qt:return new i;case te:return Ar(t)}}function No(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Oe,"{\n/* [wrapped with "+e+"] */\n")}function Oo(t){return gd(t)||md(t)||!!(Dc&&t&&t[Dc])}function Io(t,e){var n=typeof t;return e=null==e?Pt:e,!!e&&("number"==n||"symbol"!=n&&qe.test(t))&&t>-1&&t%1==0&&e>t}function Mo(t,e,n){if(!rl(n))return!1;var i=typeof e;return("number"==i?Ws(n)&&Io(e,n.length):"string"==i&&e in n)?Vs(n[e],t):!1}function Bo(t,e){if(gd(t))return!1;var n=typeof t;return"number"==n||"symbol"==n||"boolean"==n||null==t||gl(t)?!0:Te.test(t)||!Se.test(t)||null!=e&&t in sc(e)}function Ro(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function jo(t){var e=bo(t),n=_[e];if("function"!=typeof n||!(e in Y.prototype))return!1;if(t===n)return!0;var i=kh(n);return!!i&&t===i[0]}function Lo(t){return!!yc&&yc in t}function Fo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||pc;return t===n}function Ho(t){return t===t&&!rl(t)}function zo(t,e){return function(n){return null==n?!1:n[t]===e&&(e!==Q||t in sc(n))}}function Uo(t){var e=Ds(t,function(t){return n.size===rt&&n.clear(),t}),n=e.cache;return e}function qo(t,e){var n=t[1],i=e[1],r=n|i,o=(ht|dt|yt)>r,a=i==yt&&n==ft||i==yt&&n==bt&&t[7].length<=e[8]||i==(yt|bt)&&e[7].length<=e[8]&&n==ft;if(!o&&!a)return t;i&ht&&(t[2]=e[2],r|=n&ht?0:pt);var s=e[3];if(s){var l=t[3];t[3]=l?Ir(l,s,e[4]):s,t[4]=l?H(t[3],ot):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?Mr(l,s,e[6]):s,t[6]=l?H(t[5],ot):e[6]),s=e[7],s&&(t[7]=s),i&yt&&(t[8]=null==t[8]?e[8]:Wc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Vo(t){var e=[];if(null!=t)for(var n in sc(t))e.push(n);return e}function Wo(t){return bc.call(t)}function Ko(e,n,i){return n=Vc(n===Q?e.length-1:n,0),function(){for(var r=arguments,o=-1,a=Vc(r.length-n,0),s=nc(a);++o<a;)s[o]=r[n+o];o=-1;for(var l=nc(n+1);++o<n;)l[o]=r[o];return l[n]=i(s),t(e,this,l)}}function Go(t,e){return e.length<2?t:di(t,lr(e,0,-1))}function Xo(t,e){for(var n=t.length,i=Wc(e.length,n),r=Br(t);i--;){var o=e[i];t[i]=Io(o,n)?r[o]:Q}return t}function Yo(t,e,n){var i=e+"";return Ah(t,No(i,ea(Eo(i),n)))}function Zo(t){var e=0,n=0;return function(){var i=Kc(),r=$t-(i-n);if(n=i,r>0){if(++e>=kt)return arguments[0]}else e=0;return t.apply(Q,arguments)}}function Qo(t,e){var n=-1,i=t.length,r=i-1;for(e=e===Q?i:e;++n<e;){var o=tr(n,r),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Jo(t){if("string"==typeof t||gl(t))return t;var e=t+"";return"0"==e&&1/t==-Ct?"-0":e}function ta(t){if(null!=t){try{return mc.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ea(t,e){return n(Mt,function(n){var i="_."+n[0];e&n[1]&&!a(t,i)&&t.push(i)}),t.sort()}function na(t){if(t instanceof Y)return t.clone();var e=new X(t.__wrapped__,t.__chain__);return e.__actions__=Br(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ia(t,e,n){e=(n?Mo(t,e,n):e===Q)?1:Vc(_l(e),0);var i=null==t?0:t.length;if(!i||1>e)return[];for(var r=0,o=0,a=nc(jc(i/e));i>r;)a[o++]=lr(t,r,r+=e);return a}function ra(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r}function oa(){var t=arguments.length;if(!t)return[];for(var e=nc(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return u(gd(n)?Br(n):[n],ei(e,1))}function aa(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===Q?1:_l(e),lr(t,0>e?0:e,i)):[]}function sa(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===Q?1:_l(e),e=i-e,lr(t,0,0>e?0:e)):[]}function la(t,e){return t&&t.length?yr(t,xo(e,3),!0,!0):[]}function ua(t,e){return t&&t.length?yr(t,xo(e,3),!0):[]}function ca(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Mo(t,e,n)&&(n=0,i=r),Qn(t,e,n,i)):[]}function ha(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:_l(n);return 0>r&&(r=Vc(i+r,0)),g(t,xo(e,3),r)}function da(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==Q&&(r=_l(n),r=0>n?Vc(i+r,0):Wc(r,i-1)),g(t,xo(e,3),r,!0)}function pa(t){var e=null==t?0:t.length;return e?ei(t,1):[]}function fa(t){var e=null==t?0:t.length;return e?ei(t,Ct):[]}function ma(t,e){var n=null==t?0:t.length;return n?(e=e===Q?1:_l(e),ei(t,e)):[]}function ga(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function va(t){return t&&t.length?t[0]:Q}function ya(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:_l(n);return 0>r&&(r=Vc(i+r,0)),v(t,e,r)}function ba(t){var e=null==t?0:t.length;return e?lr(t,0,-1):[]}function wa(t,e){return null==t?"":Uc.call(t,e)}function xa(t){var e=null==t?0:t.length;return e?t[e-1]:Q}function _a(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==Q&&(r=_l(n),r=0>r?Vc(i+r,0):Wc(r,i-1)),e===e?W(t,e,r):g(t,b,r,!0)}function ka(t,e){return t&&t.length?Ki(t,_l(e)):Q}function $a(t,e){return t&&t.length&&e&&e.length?Qi(t,e):t}function Sa(t,e,n){return t&&t.length&&e&&e.length?Qi(t,e,xo(n,2)):t}function Ta(t,e,n){return t&&t.length&&e&&e.length?Qi(t,e,Q,n):t}function Ea(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=xo(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return Ji(t,r),n}function Ca(t){return null==t?t:Yc.call(t)}function Pa(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Mo(t,e,n)?(e=0,n=i):(e=null==e?0:_l(e),n=n===Q?i:_l(n)),lr(t,e,n)):[]}function Aa(t,e){return cr(t,e)}function Da(t,e,n){return hr(t,e,xo(n,2))}function Na(t,e){var n=null==t?0:t.length;if(n){var i=cr(t,e);if(n>i&&Vs(t[i],e))return i}return-1}function Oa(t,e){return cr(t,e,!0)}function Ia(t,e,n){return hr(t,e,xo(n,2),!0)}function Ma(t,e){var n=null==t?0:t.length;if(n){var i=cr(t,e,!0)-1;if(Vs(t[i],e))return i}return-1}function Ba(t){return t&&t.length?dr(t):[]}function Ra(t,e){return t&&t.length?dr(t,xo(e,2)):[]}function ja(t){var e=null==t?0:t.length;return e?lr(t,1,e):[]}function La(t,e,n){return t&&t.length?(e=n||e===Q?1:_l(e),lr(t,0,0>e?0:e)):[]}function Fa(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===Q?1:_l(e),e=i-e,lr(t,0>e?0:e,i)):[]}function Ha(t,e){return t&&t.length?yr(t,xo(e,3),!1,!0):[]}function za(t,e){return t&&t.length?yr(t,xo(e,3)):[]}function Ua(t){return t&&t.length?mr(t):[]}function qa(t,e){return t&&t.length?mr(t,xo(e,2)):[]}function Va(t,e){return e="function"==typeof e?e:Q,t&&t.length?mr(t,Q,e):[]}function Wa(t){if(!t||!t.length)return[];var e=0;return t=o(t,function(t){return Ks(t)?(e=Vc(t.length,e),!0):void 0}),T(e,function(e){return l(t,x(e))})}function Ka(e,n){if(!e||!e.length)return[];var i=Wa(e);return null==n?i:l(i,function(e){return t(n,Q,e)})}function Ga(t,e){return xr(t||[],e||[],Pn)}function Xa(t,e){return xr(t||[],e||[],ar)}function Ya(t){var e=_(t);return e.__chain__=!0,e}function Za(t,e){return e(t),t}function Qa(t,e){return e(t)}function Ja(){return Ya(this)}function ts(){return new X(this.value(),this.__chain__)}function es(){this.__values__===Q&&(this.__values__=wl(this.value()));var t=this.__index__>=this.__values__.length,e=t?Q:this.__values__[this.__index__++];return{done:t,value:e}}function ns(){return this}function is(t){for(var e,n=this;n instanceof V;){var i=na(n);i.__index__=0,i.__values__=Q,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e}function rs(){var t=this.__wrapped__;if(t instanceof Y){var e=t;return this.__actions__.length&&(e=new Y(this)),e=e.reverse(),e.__actions__.push({func:Qa,args:[Ca],thisArg:Q}),new X(e,this.__chain__)}return this.thru(Ca)}function os(){return br(this.__wrapped__,this.__actions__)}function as(t,e,n){var i=gd(t)?r:Gn;return n&&Mo(t,e,n)&&(e=Q),i(t,xo(e,3))}function ss(t,e){var n=gd(t)?o:Jn;return n(t,xo(e,3))}function ls(t,e){return ei(fs(t,e),1)}function us(t,e){return ei(fs(t,e),Ct)}function cs(t,e,n){return n=n===Q?1:_l(n),ei(fs(t,e),n)}function hs(t,e){var i=gd(t)?n:fh;return i(t,xo(e,3))}function ds(t,e){var n=gd(t)?i:mh;return n(t,xo(e,3))}function ps(t,e,n,i){t=Ws(t)?t:Jl(t),n=n&&!i?_l(n):0;var r=t.length;return 0>n&&(n=Vc(r+n,0)),ml(t)?r>=n&&t.indexOf(e,n)>-1:!!r&&v(t,e,n)>-1}function fs(t,e){var n=gd(t)?l:zi;return n(t,xo(e,3))}function ms(t,e,n,i){return null==t?[]:(gd(e)||(e=null==e?[]:[e]),n=i?Q:n,gd(n)||(n=null==n?[]:[n]),Gi(t,e,n))}function gs(t,e,n){var i=gd(t)?c:k,r=arguments.length<3;return i(t,xo(e,4),n,r,fh)}function vs(t,e,n){var i=gd(t)?h:k,r=arguments.length<3;return i(t,xo(e,4),n,r,mh)}function ys(t,e){var n=gd(t)?o:Jn;return n(t,Ns(xo(e,3)))}function bs(t){var e=gd(t)?Sn:rr;return e(t)}function ws(t,e,n){e=(n?Mo(t,e,n):e===Q)?1:_l(e);var i=gd(t)?Tn:or;return i(t,e)}function xs(t){var e=gd(t)?En:sr;return e(t)}function _s(t){if(null==t)return 0;if(Ws(t))return ml(t)?K(t):t.length;var e=Th(t);return e==Vt||e==Qt?t.size:Li(t).length}function ks(t,e,n){var i=gd(t)?d:ur;return n&&Mo(t,e,n)&&(e=Q),i(t,xo(e,3))}function $s(t,e){if("function"!=typeof e)throw new cc(nt);return t=_l(t),function(){return--t<1?e.apply(this,arguments):void 0}}function Ss(t,e,n){return e=n?Q:e,e=t&&null==e?t.length:e,lo(t,yt,Q,Q,Q,Q,e)}function Ts(t,e){var n;if("function"!=typeof e)throw new cc(nt);return t=_l(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=Q),n}}function Es(t,e,n){e=n?Q:e;var i=lo(t,ft,Q,Q,Q,Q,Q,e);return i.placeholder=Es.placeholder,i}function Cs(t,e,n){e=n?Q:e;var i=lo(t,mt,Q,Q,Q,Q,Q,e);return i.placeholder=Cs.placeholder,i}function Ps(t,e,n){function i(e){var n=d,i=p;return d=p=Q,y=e,m=t.apply(i,n)}function r(t){return y=t,g=Ph(s,e),b?i(t):m}function o(t){var n=t-v,i=t-y,r=e-n;return w?Wc(r,f-i):r}function a(t){var n=t-v,i=t-y;return v===Q||n>=e||0>n||w&&i>=f}function s(){var t=rd();return a(t)?l(t):void(g=Ph(s,o(t)))}function l(t){return g=Q,x&&d?i(t):(d=p=Q,m)}function u(){g!==Q&&xh(g),y=0,d=v=p=g=Q}function c(){return g===Q?m:l(rd())}function h(){var t=rd(),n=a(t);if(d=arguments,p=this,v=t,n){if(g===Q)return r(v);if(w)return g=Ph(s,e),i(v)}return g===Q&&(g=Ph(s,e)),m}var d,p,f,m,g,v,y=0,b=!1,w=!1,x=!0;if("function"!=typeof t)throw new cc(nt);return e=$l(e)||0,rl(n)&&(b=!!n.leading,w="maxWait"in n,f=w?Vc($l(n.maxWait)||0,e):f,x="trailing"in n?!!n.trailing:x),h.cancel=u,h.flush=c,h}function As(t){return lo(t,wt)}function Ds(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new cc(nt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Ds.Cache||un),n}function Ns(t){if("function"!=typeof t)throw new cc(nt);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Os(t){return Ts(2,t)}function Is(t,e){if("function"!=typeof t)throw new cc(nt);return e=e===Q?e:_l(e),ir(t,e)}function Ms(e,n){if("function"!=typeof e)throw new cc(nt);return n=null==n?0:Vc(_l(n),0),ir(function(i){var r=i[n],o=Sr(i,0,n);return r&&u(o,r),t(e,this,o)})}function Bs(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new cc(nt);return rl(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ps(t,e,{leading:i,maxWait:e,trailing:r})}function Rs(t){return Ss(t,1)}function js(t,e){return cd(kr(e),t)}function Ls(){if(!arguments.length)return[];var t=arguments[0];return gd(t)?t:[t]}function Fs(t){return Ln(t,lt)}function Hs(t,e){return e="function"==typeof e?e:Q,Ln(t,lt,e)}function zs(t){return Ln(t,at|lt)}function Us(t,e){return e="function"==typeof e?e:Q,Ln(t,at|lt,e)}function qs(t,e){return null==e||Hn(t,e,Fl(e))}function Vs(t,e){return t===e||t!==t&&e!==e}function Ws(t){return null!=t&&il(t.length)&&!el(t)}function Ks(t){return ol(t)&&Ws(t)}function Gs(t){return t===!0||t===!1||ol(t)&&bi(t)==Lt}function Xs(t){return ol(t)&&1===t.nodeType&&!pl(t)}function Ys(t){if(null==t)return!0;if(Ws(t)&&(gd(t)||"string"==typeof t||"function"==typeof t.splice||yd(t)||kd(t)||md(t)))return!t.length;var e=Th(t);if(e==Vt||e==Qt)return!t.size;if(Fo(t))return!Li(t).length;for(var n in t)if(gc.call(t,n))return!1;return!0}function Zs(t,e){return Ai(t,e)}function Qs(t,e,n){n="function"==typeof n?n:Q;var i=n?n(t,e):Q;return i===Q?Ai(t,e,Q,n):!!i}function Js(t){if(!ol(t))return!1;var e=bi(t);return e==zt||e==Ht||"string"==typeof t.message&&"string"==typeof t.name&&!pl(t)}function tl(t){return"number"==typeof t&&zc(t)}function el(t){if(!rl(t))return!1;var e=bi(t);return e==Ut||e==qt||e==jt||e==Yt}function nl(t){return"number"==typeof t&&t==_l(t)}function il(t){return"number"==typeof t&&t>-1&&t%1==0&&Pt>=t}function rl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ol(t){return null!=t&&"object"==typeof t}function al(t,e){return t===e||Oi(t,e,ko(e))}function sl(t,e,n){return n="function"==typeof n?n:Q,Oi(t,e,ko(e),n)}function ll(t){return dl(t)&&t!=+t}function ul(t){if(Eh(t))throw new rc(et);return Ii(t)}function cl(t){return null===t}function hl(t){return null==t}function dl(t){return"number"==typeof t||ol(t)&&bi(t)==Wt}function pl(t){if(!ol(t)||bi(t)!=Gt)return!1;var e=Ec(t);if(null===e)return!0;var n=gc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&mc.call(n)==wc}function fl(t){return nl(t)&&t>=-Pt&&Pt>=t}function ml(t){return"string"==typeof t||!gd(t)&&ol(t)&&bi(t)==Jt}function gl(t){return"symbol"==typeof t||ol(t)&&bi(t)==te}function vl(t){return t===Q}function yl(t){return ol(t)&&Th(t)==ne}function bl(t){return ol(t)&&bi(t)==ie}function wl(t){if(!t)return[];if(Ws(t))return ml(t)?G(t):Br(t);if(Nc&&t[Nc])return j(t[Nc]());var e=Th(t),n=e==Vt?L:e==Qt?U:Jl;return n(t)}function xl(t){if(!t)return 0===t?t:0;if(t=$l(t),t===Ct||t===-Ct){var e=0>t?-1:1;return e*At}return t===t?t:0}function _l(t){var e=xl(t),n=e%1;return e===e?n?e-n:e:0}function kl(t){return t?jn(_l(t),0,Nt):0}function $l(t){if("number"==typeof t)return t;if(gl(t))return Dt;if(rl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=rl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ae,"");var n=He.test(t);return n||Ue.test(t)?Zn(t.slice(2),n?2:8):Fe.test(t)?Dt:+t}function Sl(t){return Rr(t,Hl(t))}function Tl(t){return t?jn(_l(t),-Pt,Pt):0===t?t:0}function El(t){return null==t?"":fr(t)}function Cl(t,e){var n=ph(t);return null==e?n:Nn(n,e)}function Pl(t,e){return m(t,xo(e,3),ni)}function Al(t,e){return m(t,xo(e,3),ri)}function Dl(t,e){return null==t?t:gh(t,xo(e,3),Hl)}function Nl(t,e){return null==t?t:vh(t,xo(e,3),Hl)}function Ol(t,e){return t&&ni(t,xo(e,3))}function Il(t,e){return t&&ri(t,xo(e,3))}function Ml(t){return null==t?[]:oi(t,Fl(t))}function Bl(t){return null==t?[]:oi(t,Hl(t))}function Rl(t,e,n){var i=null==t?Q:di(t,e);return i===Q?n:i}function jl(t,e){return null!=t&&Co(t,e,xi)}function Ll(t,e){return null!=t&&Co(t,e,_i)}function Fl(t){return Ws(t)?$n(t):Li(t)}function Hl(t){return Ws(t)?$n(t,!0):Fi(t)}function zl(t,e){var n={};return e=xo(e,3),ni(t,function(t,i,r){In(n,e(t,i,r),t)}),n}function Ul(t,e){var n={};return e=xo(e,3),ni(t,function(t,i,r){In(n,i,e(t,i,r))}),n}function ql(t,e){return Vl(t,Ns(xo(e)))}function Vl(t,e){if(null==t)return{};var n=l(yo(t),function(t){return[t]});return e=xo(e),Yi(t,n,function(t,n){return e(t,n[0])})}function Wl(t,e,n){e=$r(e,t);var i=-1,r=e.length;for(r||(r=1,t=Q);++i<r;){var o=null==t?Q:t[Jo(e[i])];o===Q&&(i=r,o=n),t=el(o)?o.call(t):o}return t}function Kl(t,e,n){return null==t?t:ar(t,e,n)}function Gl(t,e,n,i){return i="function"==typeof i?i:Q,null==t?t:ar(t,e,n,i)}function Xl(t,e,i){var r=gd(t),o=r||yd(t)||kd(t);if(e=xo(e,4),null==i){var a=t&&t.constructor;i=o?r?new a:[]:rl(t)&&el(a)?ph(Ec(t)):{}}return(o?n:ni)(t,function(t,n,r){return e(i,t,n,r)}),i}function Yl(t,e){return null==t?!0:gr(t,e)}function Zl(t,e,n){return null==t?t:vr(t,e,kr(n))}function Ql(t,e,n,i){return i="function"==typeof i?i:Q,null==t?t:vr(t,e,kr(n),i)}function Jl(t){return null==t?[]:P(t,Fl(t))}function tu(t){return null==t?[]:P(t,Hl(t))}function eu(t,e,n){return n===Q&&(n=e,e=Q),n!==Q&&(n=$l(n),n=n===n?n:0),e!==Q&&(e=$l(e),e=e===e?e:0),jn($l(t),e,n)}function nu(t,e,n){return e=xl(e),n===Q?(n=e,e=0):n=xl(n),t=$l(t),ki(t,e,n)}function iu(t,e,n){if(n&&"boolean"!=typeof n&&Mo(t,e,n)&&(e=n=Q),n===Q&&("boolean"==typeof e?(n=e,e=Q):"boolean"==typeof t&&(n=t,t=Q)),t===Q&&e===Q?(t=0,e=1):(t=xl(t),e===Q?(e=t,t=0):e=xl(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Xc();return Wc(t+r*(e-t+Yn("1e-"+((r+"").length-1))),e)}return tr(t,e)}function ru(t){return Xd(El(t).toLowerCase())}function ou(t){return t=El(t),t&&t.replace(Ve,pi).replace(Rn,"")}function au(t,e,n){t=El(t),e=fr(e);var i=t.length;n=n===Q?i:jn(_l(n),0,i);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function su(t){return t=El(t),t&&xe.test(t)?t.replace(be,fi):t}function lu(t){return t=El(t),t&&Pe.test(t)?t.replace(Ce,"\\$&"):t}function uu(t,e,n){t=El(t),e=_l(e);var i=e?K(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return eo(Lc(r),n)+t+eo(jc(r),n)}function cu(t,e,n){t=El(t),e=_l(e);var i=e?K(t):0;return e&&e>i?t+eo(e-i,n):t}function hu(t,e,n){t=El(t),e=_l(e);var i=e?K(t):0;return e&&e>i?eo(e-i,n)+t:t}function du(t,e,n){return n||null==e?e=0:e&&(e=+e),Gc(El(t).replace(De,""),e||0)}function pu(t,e,n){return e=(n?Mo(t,e,n):e===Q)?1:_l(e),nr(El(t),e)}function fu(){var t=arguments,e=El(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function mu(t,e,n){return n&&"number"!=typeof n&&Mo(t,e,n)&&(e=n=Q),(n=n===Q?Nt:n>>>0)?(t=El(t),t&&("string"==typeof e||null!=e&&!xd(e))&&(e=fr(e),!e&&B(t))?Sr(G(t),0,n):t.split(e,n)):[]}function gu(t,e,n){return t=El(t),n=null==n?0:jn(_l(n),0,t.length),e=fr(e),t.slice(n,n+e.length)==e}function vu(t,e,n){var i=_.templateSettings;n&&Mo(t,e,n)&&(e=Q),t=El(t),e=Cd({},e,i,uo);var r,o,a=Cd({},e.imports,i.imports,uo),s=Fl(a),l=P(a,s),u=0,c=e.interpolate||We,h="__p += '",d=lc((e.escape||We).source+"|"+c.source+"|"+(c===$e?je:We).source+"|"+(e.evaluate||We).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Un+"]")+"\n";t.replace(d,function(e,n,i,a,s,l){return i||(i=a),h+=t.slice(u,l).replace(Ke,I),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),h+="';\n";var f=e.variable;f||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(me,""):h).replace(ge,"$1").replace(ve,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Yd(function(){return oc(s,p+"return "+h).apply(Q,l)});if(m.source=h,Js(m))throw m;return m}function yu(t){return El(t).toLowerCase()}function bu(t){return El(t).toUpperCase()}function wu(t,e,n){if(t=El(t),t&&(n||e===Q))return t.replace(Ae,"");if(!t||!(e=fr(e)))return t;var i=G(t),r=G(e),o=D(i,r),a=N(i,r)+1;return Sr(i,o,a).join("")}function xu(t,e,n){if(t=El(t),t&&(n||e===Q))return t.replace(Ne,"");if(!t||!(e=fr(e)))return t;var i=G(t),r=N(i,G(e))+1;return Sr(i,0,r).join("")}function _u(t,e,n){if(t=El(t),t&&(n||e===Q))return t.replace(De,"");if(!t||!(e=fr(e)))return t;var i=G(t),r=D(i,G(e));return Sr(i,r).join("")}function ku(t,e){var n=xt,i=_t;if(rl(e)){var r="separator"in e?e.separator:r;n="length"in e?_l(e.length):n,i="omission"in e?fr(e.omission):i}t=El(t);var o=t.length;if(B(t)){var a=G(t);o=a.length}if(n>=o)return t;var s=n-K(i);if(1>s)return i;var l=a?Sr(a,0,s).join(""):t.slice(0,s);if(r===Q)return l+i;if(a&&(s+=l.length-s),xd(r)){if(t.slice(s).search(r)){var u,c=l;for(r.global||(r=lc(r.source,El(Le.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var h=u.index;l=l.slice(0,h===Q?s:h)}}else if(t.indexOf(fr(r),s)!=s){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i}function $u(t){return t=El(t),t&&we.test(t)?t.replace(ye,mi):t}function Su(t,e,n){return t=El(t),e=n?Q:e,e===Q?R(t)?Z(t):f(t):t.match(e)||[]}function Tu(e){var n=null==e?0:e.length,i=xo();return e=n?l(e,function(t){if("function"!=typeof t[1])throw new cc(nt);return[i(t[0]),t[1]]}):[],ir(function(i){for(var r=-1;++r<n;){var o=e[r];if(t(o[0],this,i))return t(o[1],this,i)}})}function Eu(t){return Fn(Ln(t,at))}function Cu(t){return function(){return t}}function Pu(t,e){return null==t||t!==t?e:t}function Au(t){return t}function Du(t){return ji("function"==typeof t?t:Ln(t,at))}function Nu(t){return Ui(Ln(t,at))}function Ou(t,e){return qi(t,Ln(e,at))}function Iu(t,e,i){var r=Fl(e),o=oi(e,r);null!=i||rl(e)&&(o.length||!r.length)||(i=e,e=t,t=this,o=oi(e,Fl(e)));var a=!(rl(i)&&"chain"in i&&!i.chain),s=el(t);return n(o,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=Br(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,u([this.value()],arguments))})}),t}function Mu(){return ti._===this&&(ti._=xc),this}function Bu(){}function Ru(t){return t=_l(t),ir(function(e){return Ki(e,t)})}function ju(t){return Bo(t)?x(Jo(t)):Zi(t)}function Lu(t){return function(e){return null==t?Q:di(t,e)}}function Fu(){return[]}function Hu(){return!1}function zu(){return{}}function Uu(){return""}function qu(){return!0}function Vu(t,e){if(t=_l(t),1>t||t>Pt)return[];var n=Nt,i=Wc(t,Nt);e=xo(e),t-=Nt;for(var r=T(i,e);++n<t;)e(n);return r}function Wu(t){return gd(t)?l(t,Jo):gl(t)?[t]:Br(Dh(El(t)))}function Ku(t){var e=++vc;return El(t)+e}function Gu(t){return t&&t.length?Xn(t,Au,wi):Q}function Xu(t,e){return t&&t.length?Xn(t,xo(e,2),wi):Q}function Yu(t){return w(t,Au)}function Zu(t,e){return w(t,xo(e,2))}function Qu(t){return t&&t.length?Xn(t,Au,Hi):Q}function Ju(t,e){return t&&t.length?Xn(t,xo(e,2),Hi):Q}function tc(t){return t&&t.length?S(t,Au):0}function ec(t,e){return t&&t.length?S(t,xo(e,2)):0}p=null==p?ti:vi.defaults(ti.Object(),p,vi.pick(ti,zn));var nc=p.Array,ic=p.Date,rc=p.Error,oc=p.Function,ac=p.Math,sc=p.Object,lc=p.RegExp,uc=p.String,cc=p.TypeError,hc=nc.prototype,dc=oc.prototype,pc=sc.prototype,fc=p["__core-js_shared__"],mc=dc.toString,gc=pc.hasOwnProperty,vc=0,yc=function(){var t=/[^.]+$/.exec(fc&&fc.keys&&fc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),bc=pc.toString,wc=mc.call(sc),xc=ti._,_c=lc("^"+mc.call(gc).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kc=ii?p.Buffer:Q,$c=p.Symbol,Sc=p.Uint8Array,Tc=kc?kc.allocUnsafe:Q,Ec=F(sc.getPrototypeOf,sc),Cc=sc.create,Pc=pc.propertyIsEnumerable,Ac=hc.splice,Dc=$c?$c.isConcatSpreadable:Q,Nc=$c?$c.iterator:Q,Oc=$c?$c.toStringTag:Q,Ic=function(){try{var t=$o(sc,"defineProperty");return t({},"",{}),t}catch(e){}}(),Mc=p.clearTimeout!==ti.clearTimeout&&p.clearTimeout,Bc=ic&&ic.now!==ti.Date.now&&ic.now,Rc=p.setTimeout!==ti.setTimeout&&p.setTimeout,jc=ac.ceil,Lc=ac.floor,Fc=sc.getOwnPropertySymbols,Hc=kc?kc.isBuffer:Q,zc=p.isFinite,Uc=hc.join,qc=F(sc.keys,sc),Vc=ac.max,Wc=ac.min,Kc=ic.now,Gc=p.parseInt,Xc=ac.random,Yc=hc.reverse,Zc=$o(p,"DataView"),Qc=$o(p,"Map"),Jc=$o(p,"Promise"),th=$o(p,"Set"),eh=$o(p,"WeakMap"),nh=$o(sc,"create"),ih=eh&&new eh,rh={},oh=ta(Zc),ah=ta(Qc),sh=ta(Jc),lh=ta(th),uh=ta(eh),ch=$c?$c.prototype:Q,hh=ch?ch.valueOf:Q,dh=ch?ch.toString:Q,ph=function(){function t(){}return function(e){if(!rl(e))return{};if(Cc)return Cc(e);t.prototype=e;var n=new t;return t.prototype=Q,n}}();_.templateSettings={escape:_e,evaluate:ke,interpolate:$e,variable:"",imports:{_:_}},_.prototype=V.prototype,_.prototype.constructor=_,X.prototype=ph(V.prototype),X.prototype.constructor=X,Y.prototype=ph(V.prototype),Y.prototype.constructor=Y,Ye.prototype.clear=Ze,Ye.prototype["delete"]=Qe,Ye.prototype.get=Je,Ye.prototype.has=tn,Ye.prototype.set=en,nn.prototype.clear=rn,nn.prototype["delete"]=on,nn.prototype.get=an,nn.prototype.has=sn,nn.prototype.set=ln,un.prototype.clear=cn,un.prototype["delete"]=hn,un.prototype.get=dn,un.prototype.has=pn,un.prototype.set=fn,mn.prototype.add=mn.prototype.push=gn,mn.prototype.has=vn,yn.prototype.clear=bn,yn.prototype["delete"]=wn,yn.prototype.get=xn,yn.prototype.has=_n,yn.prototype.set=kn;var fh=zr(ni),mh=zr(ri,!0),gh=Ur(),vh=Ur(!0),yh=ih?function(t,e){return ih.set(t,e),t}:Au,bh=Ic?function(t,e){return Ic(t,"toString",{configurable:!0,enumerable:!1,value:Cu(e),writable:!0})}:Au,wh=ir,xh=Mc||function(t){return ti.clearTimeout(t)},_h=th&&1/U(new th([,-0]))[1]==Ct?function(t){return new th(t)}:Bu,kh=ih?function(t){return ih.get(t)}:Bu,$h=Fc?function(t){return null==t?[]:(t=sc(t),o(Fc(t),function(e){return Pc.call(t,e)}))}:Fu,Sh=Fc?function(t){for(var e=[];t;)u(e,$h(t)),t=Ec(t);return e}:Fu,Th=bi;(Zc&&Th(new Zc(new ArrayBuffer(1)))!=oe||Qc&&Th(new Qc)!=Vt||Jc&&Th(Jc.resolve())!=Xt||th&&Th(new th)!=Qt||eh&&Th(new eh)!=ne)&&(Th=function(t){var e=bi(t),n=e==Gt?t.constructor:Q,i=n?ta(n):"";if(i)switch(i){case oh:return oe;case ah:return Vt;case sh:return Xt;case lh:return Qt;case uh:return ne}return e});var Eh=fc?el:Hu,Ch=Zo(yh),Ph=Rc||function(t,e){return ti.setTimeout(t,e)},Ah=Zo(bh),Dh=Uo(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ee,function(t,n,i,r){e.push(i?r.replace(Re,"$1"):n||t)}),e}),Nh=ir(function(t,e){return Ks(t)?Kn(t,ei(e,1,Ks,!0)):[]}),Oh=ir(function(t,e){var n=xa(e);return Ks(n)&&(n=Q),Ks(t)?Kn(t,ei(e,1,Ks,!0),xo(n,2)):[]}),Ih=ir(function(t,e){var n=xa(e);return Ks(n)&&(n=Q),Ks(t)?Kn(t,ei(e,1,Ks,!0),Q,n):[]}),Mh=ir(function(t){var e=l(t,_r);return e.length&&e[0]===t[0]?$i(e):[]}),Bh=ir(function(t){var e=xa(t),n=l(t,_r);return e===xa(n)?e=Q:n.pop(),n.length&&n[0]===t[0]?$i(n,xo(e,2)):[]}),Rh=ir(function(t){var e=xa(t),n=l(t,_r);return e="function"==typeof e?e:Q,e&&n.pop(),n.length&&n[0]===t[0]?$i(n,Q,e):[]}),jh=ir($a),Lh=go(function(t,e){var n=null==t?0:t.length,i=Mn(t,e);return Ji(t,l(e,function(t){return Io(t,n)?+t:t}).sort(Nr)),i}),Fh=ir(function(t){return mr(ei(t,1,Ks,!0))}),Hh=ir(function(t){var e=xa(t);return Ks(e)&&(e=Q),mr(ei(t,1,Ks,!0),xo(e,2))}),zh=ir(function(t){var e=xa(t);return e="function"==typeof e?e:Q,mr(ei(t,1,Ks,!0),Q,e)}),Uh=ir(function(t,e){return Ks(t)?Kn(t,e):[]}),qh=ir(function(t){return wr(o(t,Ks))}),Vh=ir(function(t){var e=xa(t);return Ks(e)&&(e=Q),wr(o(t,Ks),xo(e,2))}),Wh=ir(function(t){var e=xa(t);return e="function"==typeof e?e:Q,wr(o(t,Ks),Q,e)}),Kh=ir(Wa),Gh=ir(function(t){var e=t.length,n=e>1?t[e-1]:Q;return n="function"==typeof n?(t.pop(),n):Q,Ka(t,n)}),Xh=go(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Mn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Y&&Io(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Qa,args:[r],thisArg:Q}),new X(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Q),t})):this.thru(r)}),Yh=Fr(function(t,e,n){gc.call(t,n)?++t[n]:In(t,n,1)}),Zh=Xr(ha),Qh=Xr(da),Jh=Fr(function(t,e,n){gc.call(t,n)?t[n].push(e):In(t,n,[e])}),td=ir(function(e,n,i){var r=-1,o="function"==typeof n,a=Ws(e)?nc(e.length):[];return fh(e,function(e){a[++r]=o?t(n,e,i):Ti(e,n,i)}),a}),ed=Fr(function(t,e,n){In(t,n,e)}),nd=Fr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),id=ir(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Mo(t,e[0],e[1])?e=[]:n>2&&Mo(e[0],e[1],e[2])&&(e=[e[0]]),Gi(t,ei(e,1),[])}),rd=Bc||function(){return ti.Date.now()},od=ir(function(t,e,n){var i=ht;if(n.length){var r=H(n,wo(od));i|=gt}return lo(t,i,e,n,r)}),ad=ir(function(t,e,n){var i=ht|dt;if(n.length){var r=H(n,wo(ad));i|=gt}return lo(e,i,t,n,r)}),sd=ir(function(t,e){return Wn(t,1,e)}),ld=ir(function(t,e,n){return Wn(t,$l(e)||0,n)});Ds.Cache=un;var ud=wh(function(e,n){n=1==n.length&&gd(n[0])?l(n[0],C(xo())):l(ei(n,1),C(xo()));var i=n.length;return ir(function(r){for(var o=-1,a=Wc(r.length,i);++o<a;)r[o]=n[o].call(this,r[o]);return t(e,this,r)})}),cd=ir(function(t,e){var n=H(e,wo(cd));return lo(t,gt,Q,e,n)}),hd=ir(function(t,e){var n=H(e,wo(hd));return lo(t,vt,Q,e,n)}),dd=go(function(t,e){return lo(t,bt,Q,Q,Q,e)}),pd=ro(wi),fd=ro(function(t,e){return t>=e}),md=Ei(function(){return arguments}())?Ei:function(t){return ol(t)&&gc.call(t,"callee")&&!Pc.call(t,"callee")},gd=nc.isArray,vd=ai?C(ai):Ci,yd=Hc||Hu,bd=si?C(si):Pi,wd=li?C(li):Ni,xd=ui?C(ui):Mi,_d=ci?C(ci):Bi,kd=hi?C(hi):Ri,$d=ro(Hi),Sd=ro(function(t,e){
return e>=t}),Td=Hr(function(t,e){if(Fo(e)||Ws(e))return void Rr(e,Fl(e),t);for(var n in e)gc.call(e,n)&&Pn(t,n,e[n])}),Ed=Hr(function(t,e){Rr(e,Hl(e),t)}),Cd=Hr(function(t,e,n,i){Rr(e,Hl(e),t,i)}),Pd=Hr(function(t,e,n,i){Rr(e,Fl(e),t,i)}),Ad=go(Mn),Dd=ir(function(t,e){t=sc(t);var n=-1,i=e.length,r=i>2?e[2]:Q;for(r&&Mo(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],a=Hl(o),s=-1,l=a.length;++s<l;){var u=a[s],c=t[u];(c===Q||Vs(c,pc[u])&&!gc.call(t,u))&&(t[u]=o[u])}return t}),Nd=ir(function(e){return e.push(Q,co),t(Rd,Q,e)}),Od=Qr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=bc.call(e)),t[e]=n},Cu(Au)),Id=Qr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=bc.call(e)),gc.call(t,e)?t[e].push(n):t[e]=[n]},xo),Md=ir(Ti),Bd=Hr(function(t,e,n){Vi(t,e,n)}),Rd=Hr(function(t,e,n,i){Vi(t,e,n,i)}),jd=go(function(t,e){var n={};if(null==t)return n;var i=!1;e=l(e,function(e){return e=$r(e,t),i||(i=e.length>1),e}),Rr(t,yo(t),n),i&&(n=Ln(n,at|st|lt,ho));for(var r=e.length;r--;)gr(n,e[r]);return n}),Ld=go(function(t,e){return null==t?{}:Xi(t,e)}),Fd=so(Fl),Hd=so(Hl),zd=Wr(function(t,e,n){return e=e.toLowerCase(),t+(n?ru(e):e)}),Ud=Wr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),qd=Wr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Vd=Vr("toLowerCase"),Wd=Wr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kd=Wr(function(t,e,n){return t+(n?" ":"")+Xd(e)}),Gd=Wr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xd=Vr("toUpperCase"),Yd=ir(function(e,n){try{return t(e,Q,n)}catch(i){return Js(i)?i:new rc(i)}}),Zd=go(function(t,e){return n(e,function(e){e=Jo(e),In(t,e,od(t[e],t))}),t}),Qd=Yr(),Jd=Yr(!0),tp=ir(function(t,e){return function(n){return Ti(n,t,e)}}),ep=ir(function(t,e){return function(n){return Ti(t,n,e)}}),np=to(l),ip=to(r),rp=to(d),op=io(),ap=io(!0),sp=Jr(function(t,e){return t+e},0),lp=ao("ceil"),up=Jr(function(t,e){return t/e},1),cp=ao("floor"),hp=Jr(function(t,e){return t*e},1),dp=ao("round"),pp=Jr(function(t,e){return t-e},0);return _.after=$s,_.ary=Ss,_.assign=Td,_.assignIn=Ed,_.assignInWith=Cd,_.assignWith=Pd,_.at=Ad,_.before=Ts,_.bind=od,_.bindAll=Zd,_.bindKey=ad,_.castArray=Ls,_.chain=Ya,_.chunk=ia,_.compact=ra,_.concat=oa,_.cond=Tu,_.conforms=Eu,_.constant=Cu,_.countBy=Yh,_.create=Cl,_.curry=Es,_.curryRight=Cs,_.debounce=Ps,_.defaults=Dd,_.defaultsDeep=Nd,_.defer=sd,_.delay=ld,_.difference=Nh,_.differenceBy=Oh,_.differenceWith=Ih,_.drop=aa,_.dropRight=sa,_.dropRightWhile=la,_.dropWhile=ua,_.fill=ca,_.filter=ss,_.flatMap=ls,_.flatMapDeep=us,_.flatMapDepth=cs,_.flatten=pa,_.flattenDeep=fa,_.flattenDepth=ma,_.flip=As,_.flow=Qd,_.flowRight=Jd,_.fromPairs=ga,_.functions=Ml,_.functionsIn=Bl,_.groupBy=Jh,_.initial=ba,_.intersection=Mh,_.intersectionBy=Bh,_.intersectionWith=Rh,_.invert=Od,_.invertBy=Id,_.invokeMap=td,_.iteratee=Du,_.keyBy=ed,_.keys=Fl,_.keysIn=Hl,_.map=fs,_.mapKeys=zl,_.mapValues=Ul,_.matches=Nu,_.matchesProperty=Ou,_.memoize=Ds,_.merge=Bd,_.mergeWith=Rd,_.method=tp,_.methodOf=ep,_.mixin=Iu,_.negate=Ns,_.nthArg=Ru,_.omit=jd,_.omitBy=ql,_.once=Os,_.orderBy=ms,_.over=np,_.overArgs=ud,_.overEvery=ip,_.overSome=rp,_.partial=cd,_.partialRight=hd,_.partition=nd,_.pick=Ld,_.pickBy=Vl,_.property=ju,_.propertyOf=Lu,_.pull=jh,_.pullAll=$a,_.pullAllBy=Sa,_.pullAllWith=Ta,_.pullAt=Lh,_.range=op,_.rangeRight=ap,_.rearg=dd,_.reject=ys,_.remove=Ea,_.rest=Is,_.reverse=Ca,_.sampleSize=ws,_.set=Kl,_.setWith=Gl,_.shuffle=xs,_.slice=Pa,_.sortBy=id,_.sortedUniq=Ba,_.sortedUniqBy=Ra,_.split=mu,_.spread=Ms,_.tail=ja,_.take=La,_.takeRight=Fa,_.takeRightWhile=Ha,_.takeWhile=za,_.tap=Za,_.throttle=Bs,_.thru=Qa,_.toArray=wl,_.toPairs=Fd,_.toPairsIn=Hd,_.toPath=Wu,_.toPlainObject=Sl,_.transform=Xl,_.unary=Rs,_.union=Fh,_.unionBy=Hh,_.unionWith=zh,_.uniq=Ua,_.uniqBy=qa,_.uniqWith=Va,_.unset=Yl,_.unzip=Wa,_.unzipWith=Ka,_.update=Zl,_.updateWith=Ql,_.values=Jl,_.valuesIn=tu,_.without=Uh,_.words=Su,_.wrap=js,_.xor=qh,_.xorBy=Vh,_.xorWith=Wh,_.zip=Kh,_.zipObject=Ga,_.zipObjectDeep=Xa,_.zipWith=Gh,_.entries=Fd,_.entriesIn=Hd,_.extend=Ed,_.extendWith=Cd,Iu(_,_),_.add=sp,_.attempt=Yd,_.camelCase=zd,_.capitalize=ru,_.ceil=lp,_.clamp=eu,_.clone=Fs,_.cloneDeep=zs,_.cloneDeepWith=Us,_.cloneWith=Hs,_.conformsTo=qs,_.deburr=ou,_.defaultTo=Pu,_.divide=up,_.endsWith=au,_.eq=Vs,_.escape=su,_.escapeRegExp=lu,_.every=as,_.find=Zh,_.findIndex=ha,_.findKey=Pl,_.findLast=Qh,_.findLastIndex=da,_.findLastKey=Al,_.floor=cp,_.forEach=hs,_.forEachRight=ds,_.forIn=Dl,_.forInRight=Nl,_.forOwn=Ol,_.forOwnRight=Il,_.get=Rl,_.gt=pd,_.gte=fd,_.has=jl,_.hasIn=Ll,_.head=va,_.identity=Au,_.includes=ps,_.indexOf=ya,_.inRange=nu,_.invoke=Md,_.isArguments=md,_.isArray=gd,_.isArrayBuffer=vd,_.isArrayLike=Ws,_.isArrayLikeObject=Ks,_.isBoolean=Gs,_.isBuffer=yd,_.isDate=bd,_.isElement=Xs,_.isEmpty=Ys,_.isEqual=Zs,_.isEqualWith=Qs,_.isError=Js,_.isFinite=tl,_.isFunction=el,_.isInteger=nl,_.isLength=il,_.isMap=wd,_.isMatch=al,_.isMatchWith=sl,_.isNaN=ll,_.isNative=ul,_.isNil=hl,_.isNull=cl,_.isNumber=dl,_.isObject=rl,_.isObjectLike=ol,_.isPlainObject=pl,_.isRegExp=xd,_.isSafeInteger=fl,_.isSet=_d,_.isString=ml,_.isSymbol=gl,_.isTypedArray=kd,_.isUndefined=vl,_.isWeakMap=yl,_.isWeakSet=bl,_.join=wa,_.kebabCase=Ud,_.last=xa,_.lastIndexOf=_a,_.lowerCase=qd,_.lowerFirst=Vd,_.lt=$d,_.lte=Sd,_.max=Gu,_.maxBy=Xu,_.mean=Yu,_.meanBy=Zu,_.min=Qu,_.minBy=Ju,_.stubArray=Fu,_.stubFalse=Hu,_.stubObject=zu,_.stubString=Uu,_.stubTrue=qu,_.multiply=hp,_.nth=ka,_.noConflict=Mu,_.noop=Bu,_.now=rd,_.pad=uu,_.padEnd=cu,_.padStart=hu,_.parseInt=du,_.random=iu,_.reduce=gs,_.reduceRight=vs,_.repeat=pu,_.replace=fu,_.result=Wl,_.round=dp,_.runInContext=yi,_.sample=bs,_.size=_s,_.snakeCase=Wd,_.some=ks,_.sortedIndex=Aa,_.sortedIndexBy=Da,_.sortedIndexOf=Na,_.sortedLastIndex=Oa,_.sortedLastIndexBy=Ia,_.sortedLastIndexOf=Ma,_.startCase=Kd,_.startsWith=gu,_.subtract=pp,_.sum=tc,_.sumBy=ec,_.template=vu,_.times=Vu,_.toFinite=xl,_.toInteger=_l,_.toLength=kl,_.toLower=yu,_.toNumber=$l,_.toSafeInteger=Tl,_.toString=El,_.toUpper=bu,_.trim=wu,_.trimEnd=xu,_.trimStart=_u,_.truncate=ku,_.unescape=$u,_.uniqueId=Ku,_.upperCase=Gd,_.upperFirst=Xd,_.each=hs,_.eachRight=ds,_.first=va,Iu(_,function(){var t={};return ni(_,function(e,n){gc.call(_.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),_.VERSION=J,n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){_[t].placeholder=_}),n(["drop","take"],function(t,e){Y.prototype[t]=function(n){n=n===Q?1:Vc(_l(n),0);var i=this.__filtered__&&!e?new Y(this):this.clone();return i.__filtered__?i.__takeCount__=Wc(n,i.__takeCount__):i.__views__.push({size:Wc(n,Nt),type:t+(i.__dir__<0?"Right":"")}),i},Y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),n(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==St||n==Et;Y.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:xo(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),n(["head","last"],function(t,e){var n="take"+(e?"Right":"");Y.prototype[t]=function(){return this[n](1).value()[0]}}),n(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Y.prototype[t]=function(){return this.__filtered__?new Y(this):this[n](1)}}),Y.prototype.compact=function(){return this.filter(Au)},Y.prototype.find=function(t){return this.filter(t).head()},Y.prototype.findLast=function(t){return this.reverse().find(t)},Y.prototype.invokeMap=ir(function(t,e){return"function"==typeof t?new Y(this):this.map(function(n){return Ti(n,t,e)})}),Y.prototype.reject=function(t){return this.filter(Ns(xo(t)))},Y.prototype.slice=function(t,e){t=_l(t);var n=this;return n.__filtered__&&(t>0||0>e)?new Y(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==Q&&(e=_l(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},Y.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Y.prototype.toArray=function(){return this.take(Nt)},ni(Y.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=_[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(_.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,s=e instanceof Y,l=a[0],c=s||gd(e),h=function(t){var e=r.apply(_,u([t],a));return i&&d?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,p=!!this.__actions__.length,f=o&&!d,m=s&&!p;if(!o&&c){e=m?e:new Y(this);var g=t.apply(e,a);return g.__actions__.push({func:Qa,args:[h],thisArg:Q}),new X(g,d)}return f&&m?t.apply(this,a):(g=this.thru(h),f?i?g.value()[0]:g.value():g)})}),n(["pop","push","shift","sort","splice","unshift"],function(t){var e=hc[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);_.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(gd(r)?r:[],t)}return this[n](function(n){return e.apply(gd(n)?n:[],t)})}}),ni(Y.prototype,function(t,e){var n=_[e];if(n){var i=n.name+"",r=rh[i]||(rh[i]=[]);r.push({name:e,func:n})}}),rh[Zr(Q,dt).name]=[{name:"wrapper",func:Q}],Y.prototype.clone=Be,Y.prototype.reverse=Ge,Y.prototype.value=Xe,_.prototype.at=Xh,_.prototype.chain=Ja,_.prototype.commit=ts,_.prototype.next=es,_.prototype.plant=is,_.prototype.reverse=rs,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=os,_.prototype.first=_.prototype.head,Nc&&(_.prototype[Nc]=ns),_},vi=gi();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ti._=vi,define(function(){return vi})):ni?((ni.exports=vi)._=vi,ei._=vi):ti._=vi}.call(this),/*!
 * Sir Trevor JS v0.5.0-beta3
 *
 * Released under the MIT license
 * www.opensource.org/licenses/MIT
 *
 * 2015-03-04
 */
function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SirTrevor=t()}}(function(){var t;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){e.exports=t("./src/")},{"./src/":176}],2:[function(t,e,n){!function(t){if(!Array.prototype.find){var e=function(t){var e=Object(this),n=e.length<0?0:e.length>>>0;if(0===n)return void 0;if("function"!=typeof t||"[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Array#find: predicate must be a function");for(var i,r=arguments[1],o=0;n>o;o++)if(i=e[o],t.call(r,i,o,e))return i;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:e,configurable:!0,enumerable:!1,writable:!0})}catch(n){}Array.prototype.find||(Array.prototype.find=e)}}(this)},{}],3:[function(e,n,i){!function(e,r){"function"==typeof t&&t.amd?t("eventable",function(){return e.Eventable=r()}):"undefined"!=typeof i?n.exports=r():e.Eventable=r()}(this,function(){function t(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}function e(t,e){r[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=(new Date).getTime());return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}var n=[],i=n.slice,r={on:function(t,e,n){if(!a(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(e,n,i){if(!a(this,"once",e,[n,i])||!n)return this;var r=this,o=t(function(){r.off(e,o),n.apply(this,arguments)});return o._callback=n,this.on(e,o,i)},off:function(t,e,n){var i,r,o,s,l,u,c,h;if(!this._events||!a(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:Object.keys(this._events),l=0,u=s.length;u>l;l++)if(t=s[l],o=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,h=o.length;h>c;c++)r=o[c],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=i.call(arguments,1);if(!a(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&s(n,e),r&&s(r,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},o=/\s+/,a=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(o.test(n)){for(var a=n.split(o),s=0,l=a.length;l>s;s++)t[e].apply(t,[a[s]].concat(i));return!1}return!0},s=function(t,e){var n,i=-1,r=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};return e("listenTo","on"),e("listenToOnce","once"),r.bind=r.on,r.unbind=r.off,r})},{}],4:[function(t,e,n){function i(t){var e=!0;if(!t)return e;var n=h.call(t),i=t.length;return n==s||n==u||n==a||n==l&&"number"==typeof i&&o(t.splice)?!i:(r(t,function(){return e=!1}),e)}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash.forown"),o=t("lodash.isfunction"),a="[object Arguments]",s="[object Array]",l="[object Object]",u="[object String]",c=Object.prototype,h=c.toString;e.exports=i},{"lodash.forown":5,"lodash.isfunction":28}],5:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash._basecreatecallback"),r=t("lodash.keys"),o=t("lodash._objecttypes"),a=function(t,e,n){var a,s=t,l=s;if(!s)return l;if(!o[typeof s])return l;e=e&&"undefined"==typeof n?e:i(e,n,3);for(var u=-1,c=o[typeof s]&&r(s),h=c?c.length:0;++u<h;)if(a=c[u],e(s[a],a,t)===!1)return l;return l};e.exports=a},{"lodash._basecreatecallback":6,"lodash._objecttypes":24,"lodash.keys":25}],6:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)return o;if("undefined"==typeof e||!("prototype"in t))return t;var i=t.__bindData__;if("undefined"==typeof i&&(s.funcNames&&(i=!t.name),i=i||!s.funcDecomp,!i)){var h=c.call(t);s.funcNames||(i=!l.test(h)),i||(i=u.test(h),a(t,i))}if(i===!1||i!==!0&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return r(t,e)}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash.bind"),o=t("lodash.identity"),a=t("lodash._setbinddata"),s=t("lodash.support"),l=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;e.exports=i},{"lodash._setbinddata":7,"lodash.bind":10,"lodash.identity":21,"lodash.support":22}],7:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash._isnative"),r=t("lodash.noop"),o={configurable:!1,enumerable:!1,value:null,writable:!1},a=function(){try{var t={},e=i(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),s=a?function(t,e){o.value=e,a(t,"__bindData__",o)}:r;e.exports=s},{"lodash._isnative":8,"lodash.noop":9}],8:[function(t,e,n){function i(t){return"function"==typeof t&&a.test(t)}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=Object.prototype,o=r.toString,a=RegExp("^"+String(o).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=i},{}],9:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
function i(){}e.exports=i},{}],10:[function(t,e,n){function i(t,e){return arguments.length>2?r(t,17,o(arguments,2),null,e):r(t,1,null,null,e)}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._createwrapper"),o=t("lodash._slice");e.exports=i},{"lodash._createwrapper":11,"lodash._slice":20}],11:[function(t,e,n){function i(t,e,n,l,h,d){var p=1&e,f=2&e,m=4&e,g=16&e,v=32&e;if(!f&&!a(t))throw new TypeError;g&&!n.length&&(e&=-17,g=n=!1),v&&!l.length&&(e&=-33,v=l=!1);var y=t&&t.__bindData__;if(y&&y!==!0)return y=s(y),y[2]&&(y[2]=s(y[2])),y[3]&&(y[3]=s(y[3])),!p||1&y[1]||(y[4]=h),!p&&1&y[1]&&(e|=8),!m||4&y[1]||(y[5]=d),g&&u.apply(y[2]||(y[2]=[]),n),v&&c.apply(y[3]||(y[3]=[]),l),y[1]|=e,i.apply(null,y);var b=1==e||17===e?r:o;return b([t,e,n,l,h,d])}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._basebind"),o=t("lodash._basecreatewrapper"),a=t("lodash.isfunction"),s=t("lodash._slice"),l=[],u=l.push,c=l.unshift;e.exports=i},{"lodash._basebind":12,"lodash._basecreatewrapper":16,"lodash._slice":20,"lodash.isfunction":28}],12:[function(t,e,n){function i(t){function e(){if(i){var t=s(i);u.apply(t,arguments)}if(this instanceof e){var a=r(n.prototype),c=n.apply(a,t||arguments);return o(c)?c:a}return n.apply(l,t||arguments)}var n=t[0],i=t[2],l=t[4];return a(e,t),e}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._basecreate"),o=t("lodash.isobject"),a=t("lodash._setbinddata"),s=t("lodash._slice"),l=[],u=l.push;e.exports=i},{"lodash._basecreate":13,"lodash._setbinddata":7,"lodash._slice":20,"lodash.isobject":29}],13:[function(t,e,n){(function(n){function i(t,e){return o(t)?a(t):{}}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._isnative"),o=t("lodash.isobject"),a=(t("lodash.noop"),r(a=Object.create)&&a);a||(i=function(){function t(){}return function(e){if(o(e)){t.prototype=e;var i=new t;t.prototype=null}return i||n.Object()}}()),e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._isnative":14,"lodash.isobject":29,"lodash.noop":15}],14:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],15:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],16:[function(t,e,n){function i(t){function e(){var t=f?d:this;if(c){var a=s(c);u.apply(a,arguments)}if((h||g)&&(a||(a=s(arguments)),h&&u.apply(a,h),g&&a.length<p))return l|=16,i([n,v?l:-4&l,a,null,d,p]);if(a||(a=arguments),m&&(n=t[y]),this instanceof e){t=r(n.prototype);var b=n.apply(t,a);return o(b)?b:t}return n.apply(t,a)}var n=t[0],l=t[1],c=t[2],h=t[3],d=t[4],p=t[5],f=1&l,m=2&l,g=4&l,v=8&l,y=n;return a(e,t),e}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._basecreate"),o=t("lodash.isobject"),a=t("lodash._setbinddata"),s=t("lodash._slice"),l=[],u=l.push;e.exports=i},{"lodash._basecreate":17,"lodash._setbinddata":7,"lodash._slice":20,"lodash.isobject":29}],17:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{dup:13,"lodash._isnative":18,"lodash.isobject":29,"lodash.noop":19}],18:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],19:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],20:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
function i(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var i=-1,r=n-e||0,o=Array(0>r?0:r);++i<r;)o[i]=t[e+i];return o}e.exports=i},{}],21:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
function i(t){return t}e.exports=i},{}],22:[function(t,e,n){(function(n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash._isnative"),r=/\bthis\b/,o={};o.funcDecomp=!i(n.WinRTError)&&r.test(function(){return this}),o.funcNames="string"==typeof Function.name,e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._isnative":23}],23:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],24:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=i},{}],25:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash._isnative"),r=t("lodash.isobject"),o=t("lodash._shimkeys"),a=i(a=Object.keys)&&a,s=a?function(t){return r(t)?a(t):[]}:o;e.exports=s},{"lodash._isnative":26,"lodash._shimkeys":27,"lodash.isobject":29}],26:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],27:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash._objecttypes"),r=Object.prototype,o=r.hasOwnProperty,a=function(t){var e,n=t,r=[];if(!n)return r;if(!i[typeof t])return r;for(e in n)o.call(n,e)&&r.push(e);return r};e.exports=a},{"lodash._objecttypes":24}],28:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
function i(t){return"function"==typeof t}e.exports=i},{}],29:[function(t,e,n){function i(t){return!(!t||!r[typeof t])}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._objecttypes");e.exports=i},{"lodash._objecttypes":30}],30:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],31:[function(t,e,n){function i(t){return"string"==typeof t||t&&"object"==typeof t&&a.call(t)==r||!1}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r="[object String]",o=Object.prototype,a=o.toString;e.exports=i},{}],32:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
function i(t){return"undefined"==typeof t}e.exports=i},{}],33:[function(t,e,n){function i(t,e){if(t){var n=t[e];return r(n)?t[e]():n}}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash.isfunction");e.exports=i},{"lodash.isfunction":28}],34:[function(t,e,n){function i(t,e,n){var i=l.imports._.templateSettings||l;t=String(t||""),n=r({},n,i);var g,v=r({},n.imports,i.imports),y=a(v),b=u(v),w=0,x=n.interpolate||f,_="__p += '",k=RegExp((n.escape||f).source+"|"+x.source+"|"+(x===s?p:f).source+"|"+(n.evaluate||f).source+"|$","g");t.replace(k,function(e,n,i,r,a,s){return i||(i=r),_+=t.slice(w,s).replace(m,o),n&&(_+="' +\n__e("+n+") +\n'"),a&&(g=!0,_+="';\n"+a+";\n__p += '"),i&&(_+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),w=s+e.length,e}),_+="';\n";var $=n.variable,S=$;S||($="obj",_="with ("+$+") {\n"+_+"\n}\n"),_=(g?_.replace(c,""):_).replace(h,"$1").replace(d,"$1;"),_="function("+$+") {\n"+(S?"":$+" || ("+$+" = {});\n")+"var __t, __p = '', __e = _.escape"+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+_+"return __p\n}";try{var T=Function(y,"return "+_).apply(void 0,b)}catch(E){throw E.source=_,E}return e?T(e):(T.source=_,T)}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash.defaults"),o=(t("lodash.escape"),t("lodash._escapestringchar")),a=t("lodash.keys"),s=t("lodash._reinterpolate"),l=t("lodash.templatesettings"),u=t("lodash.values"),c=/\b__p \+= '';/g,h=/\b(__p \+=) '' \+/g,d=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,f=/($^)/,m=/['\n\r\t\u2028\u2029\\]/g;e.exports=i},{"lodash._escapestringchar":35,"lodash._reinterpolate":36,"lodash.defaults":37,"lodash.escape":39,"lodash.keys":44,"lodash.templatesettings":48,"lodash.values":49}],35:[function(t,e,n){function i(t){return"\\"+r[t]}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};e.exports=i},{}],36:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=/<%=([\s\S]+?)%>/g;e.exports=i},{}],37:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash.keys"),r=t("lodash._objecttypes"),o=function(t,e,n){var o,a=t,s=a;if(!a)return s;for(var l=arguments,u=0,c="number"==typeof n?2:l.length;++u<c;)if(a=l[u],a&&r[typeof a])for(var h=-1,d=r[typeof a]&&i(a),p=d?d.length:0;++h<p;)o=d[h],"undefined"==typeof s[o]&&(s[o]=a[o]);return s};e.exports=o},{"lodash._objecttypes":38,"lodash.keys":44}],38:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],39:[function(t,e,n){function i(t){return null==t?"":String(t).replace(o,r)}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._escapehtmlchar"),o=(t("lodash.keys"),t("lodash._reunescapedhtml"));e.exports=i},{"lodash._escapehtmlchar":40,"lodash._reunescapedhtml":42,"lodash.keys":44}],40:[function(t,e,n){function i(t){return r[t]}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash._htmlescapes");e.exports=i},{"lodash._htmlescapes":41}],41:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};e.exports=i},{}],42:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash._htmlescapes"),r=t("lodash.keys"),o=RegExp("["+r(i).join("")+"]","g");e.exports=o},{"lodash._htmlescapes":43,"lodash.keys":44}],43:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{dup:41}],44:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25,"lodash._isnative":45,"lodash._shimkeys":46,"lodash.isobject":29}],45:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],46:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27,"lodash._objecttypes":47}],47:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],48:[function(t,e,n){/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var i=t("lodash.escape"),r=t("lodash._reinterpolate"),o={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:r,variable:"",imports:{_:{escape:i}}};e.exports=o},{"lodash._reinterpolate":36,"lodash.escape":39}],49:[function(t,e,n){function i(t){for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;)o[e]=t[n[e]];return o}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=t("lodash.keys");e.exports=i},{"lodash.keys":44}],50:[function(t,e,n){function i(t){var e=++r;return String(null==t?"":t)+e}/**
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modularize modern exports="npm" -o ./npm/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var r=0;e.exports=i},{}],51:[function(t,e,n){"use strict";var i=t("object-keys"),r=function(t){return"undefined"!=typeof t&&null!==t},o=function(t,e){if(!r(t))throw new TypeError("target must be an object");var n,o,a,s,l=Object(t);for(n=1;n<arguments.length;++n)for(o=Object(arguments[n]),s=i(o),a=0;a<s.length;++a)l[s[a]]=o[s[a]];return l};o.shim=function(){return Object.assign||(Object.assign=o),Object.assign||o},e.exports=o},{"object-keys":52}],52:[function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=t("./isArguments"),a=!{toString:null}.propertyIsEnumerable("toString"),s=function(){}.propertyIsEnumerable("prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===r.call(t),u=o(t),c=e&&"[object String]"===r.call(t),h=[];if(!e&&!n&&!u)throw new TypeError("Object.keys called on a non-object");var d=s&&n;if(c&&t.length>0&&!i.call(t,0))for(var p=0;p<t.length;++p)h.push(String(p));if(u&&t.length>0)for(var f=0;f<t.length;++f)h.push(String(f));else for(var m in t)d&&"prototype"===m||!i.call(t,m)||h.push(String(m));if(a)for(var g=t.constructor,v=g&&g.prototype===t,y=0;y<l.length;++y)v&&"constructor"===l[y]||!i.call(t,l[y])||h.push(l[y]);return h};u.shim=function(){return Object.keys||(Object.keys=u),Object.keys||u},e.exports=u},{"./isArguments":53}],53:[function(t,e,n){"use strict";var i=Object.prototype.toString;e.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},{}],54:[function(e,n,i){/**
 *  Copyright (c) 2014, Facebook, Inc.
 *  All rights reserved.
 *
 *  This source code is licensed under the BSD-style license found in the
 *  LICENSE file in the root directory of this source tree. An additional grant
 *  of patent rights can be found in the PATENTS file in the same directory.
 */
!function(e,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof t&&t.amd?t(r):e.Immutable=r()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return t.value=!1,t}function n(t){t&&(t.value=!0)}function i(){}function r(t,e){e=e||0;for(var n=Math.max(0,t.length-e),i=new Array(n),r=0;n>r;r++)i[r]=t[r+e];return i}function o(t){return void 0===t.size&&(t.size=t.__iterate(s)),t.size}function a(t,e){return e>=0?+e:o(t)+ +e}function s(){return!0}function l(t,e,n){return(0===t||void 0!==n&&-n>=t)&&(void 0===e||void 0!==n&&e>=n)}function u(t,e){return h(t,e,0)}function c(t,e){return h(t,e,e)}function h(t,e,n){return void 0===t?n:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function d(t){return g(t)?t:P(t)}function p(t){return v(t)?t:A(t)}function f(t){return y(t)?t:D(t)}function m(t){return g(t)&&!b(t)?t:N(t)}function g(t){return!(!t||!t[pn])}function v(t){return!(!t||!t[fn])}function y(t){return!(!t||!t[mn])}function b(t){return v(t)||y(t)}function w(t){return!(!t||!t[gn])}function x(t){this.next=t}function _(t,e,n,i){var r=0===t?e:1===t?n:[e,n];return i?i.value=r:i={value:r,done:!1},i}function k(){return{value:void 0,done:!0}}function $(t){return!!E(t)}function S(t){return t&&"function"==typeof t.next}function T(t){var e=E(t);return e&&e.call(t)}function E(t){var e=t&&(wn&&t[wn]||t[xn]);return"function"==typeof e?e:void 0}function C(t){return t&&"number"==typeof t.length}function P(t){return null===t||void 0===t?j():g(t)?t.toSeq():H(t)}function A(t){return null===t||void 0===t?j().toKeyedSeq():g(t)?v(t)?t.toSeq():t.fromEntrySeq():L(t)}function D(t){return null===t||void 0===t?j():g(t)?v(t)?t.entrySeq():t.toIndexedSeq():F(t)}function N(t){return(null===t||void 0===t?j():g(t)?v(t)?t.entrySeq():t:F(t)).toSetSeq()}function O(t){this._array=t,this.size=t.length}function I(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function M(t){this._iterable=t,this.size=t.length||t.size}function B(t){this._iterator=t,this._iteratorCache=[]}function R(t){return!(!t||!t[kn])}function j(){return $n||($n=new O([]))}function L(t){var e=Array.isArray(t)?new O(t).fromEntrySeq():S(t)?new B(t).fromEntrySeq():$(t)?new M(t).fromEntrySeq():"object"==typeof t?new I(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function F(t){var e=z(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function H(t){var e=z(t)||"object"==typeof t&&new I(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function z(t){return C(t)?new O(t):S(t)?new B(t):$(t)?new M(t):void 0}function U(t,e,n,i){var r=t._cache;if(r){for(var o=r.length-1,a=0;o>=a;a++){var s=r[n?o-a:a];if(e(s[1],i?s[0]:a,t)===!1)return a+1}return a}return t.__iterateUncached(e,n)}function q(t,e,n,i){var r=t._cache;if(r){var o=r.length-1,a=0;return new x(function(){var t=r[n?o-a:a];return a++>o?k():_(e,i?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,n)}function V(){throw TypeError("Abstract")}function W(){}function K(){}function G(){}function X(t,e){return t===e||t!==t&&e!==e?!0:t&&e?("function"==typeof t.valueOf&&"function"==typeof e.valueOf&&(t=t.valueOf(),e=e.valueOf()),"function"==typeof t.equals&&"function"==typeof e.equals?t.equals(e):t===e||t!==t&&e!==e):!1}function Y(t,e){return e?Z(e,t,"",{"":t}):Q(t)}function Z(t,e,n,i){return Array.isArray(e)?t.call(i,n,D(e).map(function(n,i){return Z(t,n,i,e)})):J(e)?t.call(i,n,A(e).map(function(n,i){return Z(t,n,i,e)})):e}function Q(t){return Array.isArray(t)?D(t).map(Q).toList():J(t)?A(t).map(Q).toMap():t}function J(t){return t&&t.constructor===Object}function tt(t){return t>>>1&1073741824|3221225471&t}function et(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return tt(n)}return"string"===e?t.length>An?nt(t):it(t):"function"==typeof t.hashCode?t.hashCode():rt(t)}function nt(t){var e=On[t];return void 0===e&&(e=it(t),Nn===Dn&&(Nn=0,On={}),Nn++,On[t]=e),e}function it(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return tt(e)}function rt(t){var e=En&&En.get(t);if(e)return e;if(e=t[Pn])return e;if(!Tn){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Pn])return e;if(e=ot(t))return e}if(Object.isExtensible&&!Object.isExtensible(t))throw new Error("Non-extensible objects are not allowed as keys.");if(e=++Cn,1073741824&Cn&&(Cn=0),En)En.set(t,e);else if(Tn)Object.defineProperty(t,Pn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Pn]=e;else{if(!t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Pn]=e}return e}function ot(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function at(t,e){if(!t)throw new Error(e)}function st(t){at(t!==1/0,"Cannot perform this action with an infinite size.")}function lt(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ut(t){this._iter=t,this.size=t.size}function ct(t){this._iter=t,this.size=t.size}function ht(t){this._iter=t,this.size=t.size}function dt(t){var e=Ot(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.contains(e)},e.contains=function(e){return t.has(e)},e.cacheResult=It,e.__iterateUncached=function(e,n){var i=this;return t.__iterate(function(t,n){return e(n,t,i)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===bn){var i=t.__iterator(e,n);return new x(function(){var t=i.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===yn?vn:yn,n)},e}function pt(t,e,n){var i=Ot(t);return i.size=t.size,i.has=function(e){return t.has(e)},i.get=function(i,r){var o=t.get(i,cn);return o===cn?r:e.call(n,o,i,t)},i.__iterateUncached=function(i,r){var o=this;return t.__iterate(function(t,r,a){return i(e.call(n,t,r,a),r,o)!==!1},r)},i.__iteratorUncached=function(i,r){var o=t.__iterator(bn,r);return new x(function(){var r=o.next();if(r.done)return r;var a=r.value,s=a[0];return _(i,s,e.call(n,a[1],s,t),r)})},i}function ft(t,e){var n=Ot(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=dt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,i){return t.get(e?n:-1-n,i)},n.has=function(n){return t.has(e?n:-1-n)},n.contains=function(e){return t.contains(e)},n.cacheResult=It,n.__iterate=function(e,n){var i=this;return t.__iterate(function(t,n){return e(t,n,i)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function mt(t,e,n,i){var r=Ot(t);return i&&(r.has=function(i){var r=t.get(i,cn);return r!==cn&&!!e.call(n,r,i,t)},r.get=function(i,r){var o=t.get(i,cn);return o!==cn&&e.call(n,o,i,t)?o:r}),r.__iterateUncached=function(r,o){var a=this,s=0;return t.__iterate(function(t,o,l){return e.call(n,t,o,l)?(s++,r(t,i?o:s-1,a)):void 0},o),s},r.__iteratorUncached=function(r,o){var a=t.__iterator(bn,o),s=0;return new x(function(){for(;;){var o=a.next();if(o.done)return o;var l=o.value,u=l[0],c=l[1];if(e.call(n,c,u,t))return _(r,i?u:s++,c,o)}})},r}function gt(t,e,n){var i=Rt().asMutable();return t.__iterate(function(r,o){i.update(e.call(n,r,o,t),0,function(t){return t+1})}),i.asImmutable()}function vt(t,e,n){var i=v(t),r=(w(t)?ke():Rt()).asMutable();t.__iterate(function(o,a){r.update(e.call(n,o,a,t),function(t){return t=t||[],t.push(i?[a,o]:o),t})});var o=Nt(t);return r.map(function(e){return Pt(t,o(e))})}function yt(t,e,n,i){var r=t.size;if(l(e,n,r))return t;var o=u(e,r),s=c(n,r);if(o!==o||s!==s)return yt(t.toSeq().cacheResult(),e,n,i);var h=s-o;0>h&&(h=0);var d=Ot(t);return d.size=0===h?h:t.size&&h||void 0,!i&&R(t)&&h>=0&&(d.get=function(e,n){return e=a(this,e),e>=0&&h>e?t.get(e+o,n):n}),d.__iterateUncached=function(e,n){var r=this;if(0===h)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,s=!0,l=0;return t.__iterate(function(t,n){return s&&(s=a++<o)?void 0:(l++,e(t,i?n:l-1,r)!==!1&&l!==h)}),l},d.__iteratorUncached=function(e,n){if(h&&n)return this.cacheResult().__iterator(e,n);var r=h&&t.__iterator(e,n),a=0,s=0;return new x(function(){for(;a++!==o;)r.next();if(++s>h)return k();var t=r.next();return i||e===yn?t:e===vn?_(e,s-1,void 0,t):_(e,s-1,t.value[1],t)})},d}function bt(t,e,n){var i=Ot(t);return i.__iterateUncached=function(i,r){var o=this;if(r)return this.cacheResult().__iterate(i,r);var a=0;return t.__iterate(function(t,r,s){return e.call(n,t,r,s)&&++a&&i(t,r,o)}),a},i.__iteratorUncached=function(i,r){var o=this;if(r)return this.cacheResult().__iterator(i,r);var a=t.__iterator(bn,r),s=!0;return new x(function(){if(!s)return k();var t=a.next();if(t.done)return t;var r=t.value,l=r[0],u=r[1];return e.call(n,u,l,o)?i===bn?t:_(i,l,u,t):(s=!1,k())})},i}function wt(t,e,n,i){var r=Ot(t);return r.__iterateUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterate(r,o);var s=!0,l=0;return t.__iterate(function(t,o,u){return s&&(s=e.call(n,t,o,u))?void 0:(l++,r(t,i?o:l-1,a))}),l},r.__iteratorUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterator(r,o);var s=t.__iterator(bn,o),l=!0,u=0;return new x(function(){var t,o,c;do{if(t=s.next(),t.done)return i||r===yn?t:r===vn?_(r,u++,void 0,t):_(r,u++,t.value[1],t);var h=t.value;o=h[0],c=h[1],l&&(l=e.call(n,c,o,a))}while(l);return r===bn?t:_(r,o,c,t)})},r}function xt(t,e){var n=v(t),i=[t].concat(e).map(function(t){return g(t)?n&&(t=p(t)):t=n?L(t):F(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var r=i[0];if(r===t||n&&v(r)||y(t)&&y(r))return r}var o=new O(i);return n?o=o.toKeyedSeq():y(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function _t(t,e,n){var i=Ot(t);return i.__iterateUncached=function(i,r){function o(t,l){var u=this;t.__iterate(function(t,r){return(!e||e>l)&&g(t)?o(t,l+1):i(t,n?r:a++,u)===!1&&(s=!0),!s},r)}var a=0,s=!1;return o(t,0),a},i.__iteratorUncached=function(i,r){var o=t.__iterator(i,r),a=[],s=0;return new x(function(){for(;o;){var t=o.next();if(t.done===!1){var l=t.value;if(i===bn&&(l=l[1]),e&&!(a.length<e)||!g(l))return n?t:_(i,s++,l,t);a.push(o),o=l.__iterator(i,r)}else o=a.pop()}return k()})},i}function kt(t,e,n){var i=Nt(t);return t.toSeq().map(function(r,o){return i(e.call(n,r,o,t))}).flatten(!0)}function $t(t,e){var n=Ot(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,i){var r=this,o=0;return t.__iterate(function(t,i){return(!o||n(e,o++,r)!==!1)&&n(t,o++,r)!==!1},i),o},n.__iteratorUncached=function(n,i){var r,o=t.__iterator(yn,i),a=0;return new x(function(){return(!r||a%2)&&(r=o.next(),r.done)?r:a%2?_(n,a++,e):_(n,a++,r.value,r)})},n}function St(t,e,n){e||(e=Mt);var i=v(t),r=0,o=t.toSeq().map(function(e,i){return[i,e,r++,n?n(e,i,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(i?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),i?A(o):y(t)?D(o):N(o)}function Tt(t,e,n){if(e||(e=Mt),n){var i=t.toSeq().map(function(e,i){return[e,n(e,i,t)]}).reduce(function(t,n){return Et(e,t[1],n[1])?n:t});return i&&i[0]}return t.reduce(function(t,n){return Et(e,t,n)?n:t})}function Et(t,e,n){var i=t(n,e);return 0===i&&n!==e&&(void 0===n||null===n||n!==n)||i>0}function Ct(t,e,n){var i=Ot(t);return i.size=new O(n).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,i=this.__iterator(yn,e),r=0;!(n=i.next()).done&&t(n.value,r++,this)!==!1;);return r},i.__iteratorUncached=function(t,i){var r=n.map(function(t){return t=d(t),T(i?t.reverse():t)}),o=0,a=!1;return new x(function(){var n;return a||(n=r.map(function(t){return t.next()}),a=n.some(function(t){return t.done})),a?k():_(t,o++,e.apply(null,n.map(function(t){return t.value})))})},i}function Pt(t,e){return R(t)?e:t.constructor(e)}function At(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Dt(t){return st(t.size),o(t)}function Nt(t){return v(t)?p:y(t)?f:m}function Ot(t){return Object.create((v(t)?A:y(t)?D:N).prototype)}function It(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):P.prototype.cacheResult.call(this)}function Mt(t,e){return t>e?1:e>t?-1:0}function Bt(t){var e=T(t);if(!e){if(!C(t))throw new TypeError("Expected iterable or array-like: "+t);e=T(d(t))}return e}function Rt(t){return null===t||void 0===t?Gt():jt(t)?t:Gt().withMutations(function(e){var n=p(t);st(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function jt(t){return!(!t||!t[In])}function Lt(t,e){this.ownerID=t,this.entries=e}function Ft(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Ht(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function zt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Ut(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function qt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Wt(t._root)}function Vt(t,e){return _(t,e[0],e[1])}function Wt(t,e){return{node:t,index:0,__prev:e}}function Kt(t,e,n,i){var r=Object.create(Mn);return r.size=t,r._root=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function Gt(){return Bn||(Bn=Kt(0))}function Xt(t,n,i){var r,o;if(t._root){var a=e(hn),s=e(dn);if(r=Yt(t._root,t.__ownerID,0,void 0,n,i,a,s),!s.value)return t;o=t.size+(a.value?i===cn?-1:1:0)}else{if(i===cn)return t;o=1,r=new Lt(t.__ownerID,[[n,i]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Kt(o,r):Gt()}function Yt(t,e,i,r,o,a,s,l){return t?t.update(e,i,r,o,a,s,l):a===cn?t:(n(l),n(s),new Ut(e,r,[o,a]))}function Zt(t){return t.constructor===Ut||t.constructor===zt}function Qt(t,e,n,i,r){if(t.keyHash===i)return new zt(e,i,[t.entry,r]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&un,s=(0===n?i:i>>>n)&un,l=a===s?[Qt(t,e,n+sn,i,r)]:(o=new Ut(e,i,r),s>a?[t,o]:[o,t]);return new Ft(e,1<<a|1<<s,l)}function Jt(t,e,n,r){t||(t=new i);for(var o=new Ut(t,et(n),[n,r]),a=0;a<e.length;a++){var s=e[a];o=o.update(t,0,void 0,s[0],s[1])}return o}function te(t,e,n,i){for(var r=0,o=0,a=new Array(n),s=0,l=1,u=e.length;u>s;s++,l<<=1){var c=e[s];void 0!==c&&s!==i&&(r|=l,a[o++]=c)}return new Ft(t,r,a)}function ee(t,e,n,i,r){for(var o=0,a=new Array(ln),s=0;0!==n;s++,n>>>=1)a[s]=1&n?e[o++]:void 0;return a[i]=r,new Ht(t,o+1,a)}function ne(t,e,n){for(var i=[],r=0;r<n.length;r++){var o=n[r],a=p(o);g(o)||(a=a.map(function(t){return Y(t)})),i.push(a)}return re(t,e,i)}function ie(t){return function(e,n){return e&&e.mergeDeepWith&&g(n)?e.mergeDeepWith(t,n):t?t(e,n):n}}function re(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0===t.size&&1===n.length?t.constructor(n[0]):t.withMutations(function(t){for(var i=e?function(n,i){t.update(i,cn,function(t){return t===cn?n:e(t,n)})}:function(e,n){t.set(n,e)},r=0;r<n.length;r++)n[r].forEach(i)})}function oe(t,e,n,i){var r=t===cn,o=e.next();if(o.done){var a=r?n:t,s=i(a);return s===a?t:s}at(r||t&&t.set,"invalid keyPath");var l=o.value,u=r?cn:t.get(l,cn),c=oe(u,e,n,i);return c===u?t:c===cn?t.remove(l):(r?Gt():t).set(l,c)}function ae(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function se(t,e,n,i){var o=i?t:r(t);return o[e]=n,o}function le(t,e,n,i){var r=t.length+1;if(i&&e+1===r)return t[e]=n,t;for(var o=new Array(r),a=0,s=0;r>s;s++)s===e?(o[s]=n,a=-1):o[s]=t[s+a];return o}function ue(t,e,n){var i=t.length-1;if(n&&e===i)return t.pop(),t;for(var r=new Array(i),o=0,a=0;i>a;a++)a===e&&(o=1),r[a]=t[a+o];return r}function ce(t){var e=me();if(null===t||void 0===t)return e;if(he(t))return t;var n=f(t),i=n.size;return 0===i?e:(st(i),i>0&&ln>i?fe(0,i,sn,null,new de(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function he(t){return!(!t||!t[Fn])}function de(t,e){this.array=t,this.ownerID=e}function pe(t,e){function n(t,e,n){return 0===e?i(t,n):r(t,e,n)}function i(t,n){var i=n===s?l&&l.array:t&&t.array,r=n>o?0:o-n,u=a-n;return u>ln&&(u=ln),function(){if(r===u)return Un;var t=e?--u:r++;return i&&i[t]}}function r(t,i,r){var s,l=t&&t.array,u=r>o?0:o-r>>i,c=(a-r>>i)+1;return c>ln&&(c=ln),function(){for(;;){if(s){var t=s();if(t!==Un)return t;s=null}if(u===c)return Un;var o=e?--c:u++;s=n(l&&l[o],i-sn,r+(o<<i))}}}var o=t._origin,a=t._capacity,s=_e(a),l=t._tail;return n(t._root,t._level,0)}function fe(t,e,n,i,r,o,a){var s=Object.create(Hn);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=i,s._tail=r,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function me(){return zn||(zn=fe(0,0,sn))}function ge(t,n,i){if(n=a(t,n),n>=t.size||0>n)return t.withMutations(function(t){0>n?we(t,n).set(0,i):we(t,0,n+1).set(n,i)});n+=t._origin;var r=t._tail,o=t._root,s=e(dn);return n>=_e(t._capacity)?r=ve(r,t.__ownerID,0,n,i,s):o=ve(o,t.__ownerID,t._level,n,i,s),s.value?t.__ownerID?(t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t):fe(t._origin,t._capacity,t._level,o,r):t}function ve(t,e,i,r,o,a){var s=r>>>i&un,l=t&&s<t.array.length;if(!l&&void 0===o)return t;var u;if(i>0){var c=t&&t.array[s],h=ve(c,e,i-sn,r,o,a);return h===c?t:(u=ye(t,e),u.array[s]=h,u)}return l&&t.array[s]===o?t:(n(a),u=ye(t,e),void 0===o&&s===u.array.length-1?u.array.pop():u.array[s]=o,u)}function ye(t,e){return e&&t&&e===t.ownerID?t:new de(t?t.array.slice():[],e)}function be(t,e){if(e>=_e(t._capacity))return t._tail;if(e<1<<t._level+sn){for(var n=t._root,i=t._level;n&&i>0;)n=n.array[e>>>i&un],i-=sn;return n}}function we(t,e,n){var r=t.__ownerID||new i,o=t._origin,a=t._capacity,s=o+e,l=void 0===n?a:0>n?a+n:o+n;if(s===o&&l===a)return t;if(s>=l)return t.clear();for(var u=t._level,c=t._root,h=0;0>s+h;)c=new de(c&&c.array.length?[void 0,c]:[],r),u+=sn,h+=1<<u;h&&(s+=h,o+=h,l+=h,a+=h);for(var d=_e(a),p=_e(l);p>=1<<u+sn;)c=new de(c&&c.array.length?[c]:[],r),u+=sn;var f=t._tail,m=d>p?be(t,l-1):p>d?new de([],r):f;if(f&&p>d&&a>s&&f.array.length){c=ye(c,r);for(var g=c,v=u;v>sn;v-=sn){var y=d>>>v&un;g=g.array[y]=ye(g.array[y],r)}g.array[d>>>sn&un]=f}if(a>l&&(m=m&&m.removeAfter(r,0,l)),s>=p)s-=p,l-=p,u=sn,c=null,m=m&&m.removeBefore(r,0,s);else if(s>o||d>p){for(h=0;c;){var b=s>>>u&un;if(b!==p>>>u&un)break;b&&(h+=(1<<u)*b),u-=sn,c=c.array[b]}c&&s>o&&(c=c.removeBefore(r,u,s-h)),c&&d>p&&(c=c.removeAfter(r,u,p-h)),h&&(s-=h,l-=h)}return t.__ownerID?(t.size=l-s,t._origin=s,t._capacity=l,t._level=u,t._root=c,t._tail=m,t.__hash=void 0,t.__altered=!0,t):fe(s,l,u,c,m)}function xe(t,e,n){for(var i=[],r=0,o=0;o<n.length;o++){var a=n[o],s=f(a);s.size>r&&(r=s.size),g(a)||(s=s.map(function(t){return Y(t)})),i.push(s)}return r>t.size&&(t=t.setSize(r)),re(t,e,i)}function _e(t){return ln>t?0:t-1>>>sn<<sn}function ke(t){return null===t||void 0===t?Te():$e(t)?t:Te().withMutations(function(e){var n=p(t);st(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function $e(t){return jt(t)&&w(t)}function Se(t,e,n,i){var r=Object.create(ke.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=n,r.__hash=i,r}function Te(){return qn||(qn=Se(Gt(),me()))}function Ee(t,e,n){var i,r,o=t._map,a=t._list,s=o.get(e),l=void 0!==s;if(n===cn){if(!l)return t;a.size>=ln&&a.size>=2*o.size?(r=a.filter(function(t,e){return void 0!==t&&s!==e}),i=r.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(i.__ownerID=r.__ownerID=t.__ownerID)):(i=o.remove(e),r=s===a.size-1?a.pop():a.set(s,void 0))}else if(l){if(n===a.get(s)[1])return t;i=o,r=a.set(s,[e,n])}else i=o.set(e,a.size),r=a.set(a.size,[e,n]);return t.__ownerID?(t.size=i.size,t._map=i,t._list=r,t.__hash=void 0,t):Se(i,r)}function Ce(t){return null===t||void 0===t?De():Pe(t)?t:De().unshiftAll(t)}function Pe(t){return!(!t||!t[Vn])}function Ae(t,e,n,i){var r=Object.create(Wn);return r.size=t,r._head=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function De(){return Kn||(Kn=Ae(0))}function Ne(t){return null===t||void 0===t?Be():Oe(t)?t:Be().withMutations(function(e){var n=m(t);st(n.size),n.forEach(function(t){return e.add(t)})})}function Oe(t){return!(!t||!t[Gn])}function Ie(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Me(t,e){var n=Object.create(Xn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Be(){return Yn||(Yn=Me(Gt()))}function Re(t){return null===t||void 0===t?Fe():je(t)?t:Fe().withMutations(function(e){var n=m(t);st(n.size),n.forEach(function(t){return e.add(t)})})}function je(t){return Oe(t)&&w(t)}function Le(t,e){var n=Object.create(Zn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Fe(){return Qn||(Qn=Le(Te()))}function He(t,e){var n=function(t){return this instanceof n?void(this._map=Rt(t)):new n(t)},i=Object.keys(t),r=n.prototype=Object.create(Jn);r.constructor=n,e&&(r._name=e),r._defaultValues=t,r._keys=i,r.size=i.length;try{i.forEach(function(t){Object.defineProperty(n.prototype,t,{get:function(){return this.get(t)},set:function(e){at(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})})}catch(o){}return n}function ze(t,e,n){var i=Object.create(Object.getPrototypeOf(t));return i._map=e,i.__ownerID=n,i}function Ue(t){return t._name||t.constructor.name}function qe(t,e){if(t===e)return!0;if(!g(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||v(t)!==v(e)||y(t)!==y(e)||w(t)!==w(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!b(t);if(w(t)){var i=t.entries();return e.every(function(t,e){var r=i.next().value;return r&&X(r[1],t)&&(n||X(r[0],e))})&&i.next().done}var r=!1;if(void 0===t.size)if(void 0===e.size)t.cacheResult();else{r=!0;var o=t;t=e,e=o}var a=!0,s=e.__iterate(function(e,i){return(n?t.has(e):r?X(e,t.get(i,cn)):X(t.get(i,cn),e))?void 0:(a=!1,!1)});return a&&t.size===s}function Ve(t,e,n){if(!(this instanceof Ve))return new Ve(t,e,n);if(at(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),t>e&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(ti)return ti;ti=this}}function We(t,e){if(!(this instanceof We))return new We(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(ei)return ei;ei=this}}function Ke(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Ge(t,e){return e}function Xe(t,e){return[e,t]}function Ye(t){return function(){return!t.apply(this,arguments)}}function Ze(t){return function(){return-t.apply(this,arguments)}}function Qe(t){return"string"==typeof t?JSON.stringify(t):t}function Je(){return r(arguments)}function tn(t,e){return e>t?1:t>e?-1:0}function en(t){if(t.size===1/0)return 0;var e=w(t),n=v(t),i=e?1:0,r=t.__iterate(n?e?function(t,e){i=31*i+rn(et(t),et(e))|0}:function(t,e){i=i+rn(et(t),et(e))|0}:e?function(t){i=31*i+et(t)|0}:function(t){i=i+et(t)|0});return nn(r,i)}function nn(t,e){return e=Sn(e,3432918353),e=Sn(e<<15|e>>>-15,461845907),e=Sn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Sn(e^e>>>16,2246822507),e=Sn(e^e>>>13,3266489909),e=tt(e^e>>>16)}function rn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var on=Array.prototype.slice,an="delete",sn=5,ln=1<<sn,un=ln-1,cn={},hn={value:!1},dn={value:!1};t(p,d),t(f,d),t(m,d),d.isIterable=g,d.isKeyed=v,d.isIndexed=y,d.isAssociative=b,d.isOrdered=w,d.Keyed=p,d.Indexed=f,d.Set=m;var pn="@@__IMMUTABLE_ITERABLE__@@",fn="@@__IMMUTABLE_KEYED__@@",mn="@@__IMMUTABLE_INDEXED__@@",gn="@@__IMMUTABLE_ORDERED__@@",vn=0,yn=1,bn=2,wn="function"==typeof Symbol&&Symbol.iterator,xn="@@iterator",_n=wn||xn;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=vn,x.VALUES=yn,x.ENTRIES=bn,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[_n]=function(){return this},t(P,d),P.of=function(){return P(arguments)},P.prototype.toSeq=function(){return this},P.prototype.toString=function(){return this.__toString("Seq {","}")},P.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},P.prototype.__iterate=function(t,e){return U(this,t,e,!0)},P.prototype.__iterator=function(t,e){return q(this,t,e,!0)},t(A,P),A.of=function(){return A(arguments)},A.prototype.toKeyedSeq=function(){return this},A.prototype.toSeq=function(){return this},t(D,P),D.of=function(){return D(arguments)},D.prototype.toIndexedSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq [","]")},D.prototype.__iterate=function(t,e){return U(this,t,e,!1)},D.prototype.__iterator=function(t,e){return q(this,t,e,!1)},t(N,P),N.of=function(){return N(arguments)},N.prototype.toSetSeq=function(){return this},P.isSeq=R,P.Keyed=A,P.Set=N,P.Indexed=D;var kn="@@__IMMUTABLE_SEQ__@@";P.prototype[kn]=!0,t(O,D),O.prototype.get=function(t,e){return this.has(t)?this._array[a(this,t)]:e},O.prototype.__iterate=function(t,e){for(var n=this._array,i=n.length-1,r=0;i>=r;r++)if(t(n[e?i-r:r],r,this)===!1)return r+1;return r},O.prototype.__iterator=function(t,e){var n=this._array,i=n.length-1,r=0;return new x(function(){return r>i?k():_(t,r,n[e?i-r++:r++])})},t(I,A),I.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},I.prototype.has=function(t){return this._object.hasOwnProperty(t)},I.prototype.__iterate=function(t,e){for(var n=this._object,i=this._keys,r=i.length-1,o=0;r>=o;o++){var a=i[e?r-o:o];if(t(n[a],a,this)===!1)return o+1}return o},I.prototype.__iterator=function(t,e){var n=this._object,i=this._keys,r=i.length-1,o=0;return new x(function(){var a=i[e?r-o:o];return o++>r?k():_(t,a,n[a])})},I.prototype[gn]=!0,t(M,D),M.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,i=T(n),r=0;if(S(i))for(var o;!(o=i.next()).done&&t(o.value,r++,this)!==!1;);return r},M.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,i=T(n);if(!S(i))return new x(k);var r=0;return new x(function(){var e=i.next();return e.done?e:_(t,r++,e.value)})},t(B,D),B.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,i=this._iteratorCache,r=0;r<i.length;)if(t(i[r],r++,this)===!1)return r;for(var o;!(o=n.next()).done;){var a=o.value;if(i[r]=a,t(a,r++,this)===!1)break}return r},B.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,i=this._iteratorCache,r=0;return new x(function(){if(r>=i.length){var e=n.next();if(e.done)return e;i[r]=e.value}return _(t,r,i[r++])})};var $n;t(V,d),t(W,V),t(K,V),t(G,V),V.Keyed=W,V.Indexed=K,V.Set=G;var Sn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var n=65535&t,i=65535&e;return n*i+((t>>>16)*i+n*(e>>>16)<<16>>>0)|0},Tn=function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}(),En="function"==typeof WeakMap&&new WeakMap,Cn=0,Pn="__immutablehash__";"function"==typeof Symbol&&(Pn=Symbol(Pn));var An=16,Dn=255,Nn=0,On={};t(lt,A),lt.prototype.get=function(t,e){return this._iter.get(t,e)},lt.prototype.has=function(t){return this._iter.has(t)},lt.prototype.valueSeq=function(){return this._iter.valueSeq()},lt.prototype.reverse=function(){var t=this,e=ft(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},lt.prototype.map=function(t,e){var n=this,i=pt(this,t,e);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().map(t,e)}),i},lt.prototype.__iterate=function(t,e){var n,i=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,i)}:(n=e?Dt(this):0,function(r){return t(r,e?--n:n++,i)}),e)},lt.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(yn,e),i=e?Dt(this):0;return new x(function(){var r=n.next();return r.done?r:_(t,e?--i:i++,r.value,r)})},lt.prototype[gn]=!0,t(ut,D),ut.prototype.contains=function(t){return this._iter.contains(t)},ut.prototype.__iterate=function(t,e){var n=this,i=0;return this._iter.__iterate(function(e){return t(e,i++,n)},e)},ut.prototype.__iterator=function(t,e){var n=this._iter.__iterator(yn,e),i=0;return new x(function(){var e=n.next();return e.done?e:_(t,i++,e.value,e)})},t(ct,N),ct.prototype.has=function(t){return this._iter.contains(t)},ct.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},ct.prototype.__iterator=function(t,e){var n=this._iter.__iterator(yn,e);return new x(function(){var e=n.next();return e.done?e:_(t,e.value,e.value,e)})},t(ht,A),ht.prototype.entrySeq=function(){return this._iter.toSeq()},ht.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return e?(At(e),t(e[1],e[0],n)):void 0},e)},ht.prototype.__iterator=function(t,e){var n=this._iter.__iterator(yn,e);return new x(function(){for(;;){var e=n.next();if(e.done)return e;var i=e.value;if(i)return At(i),t===bn?e:_(t,i[0],i[1],e)}})},ut.prototype.cacheResult=lt.prototype.cacheResult=ct.prototype.cacheResult=ht.prototype.cacheResult=It,t(Rt,W),Rt.prototype.toString=function(){return this.__toString("Map {","}")},Rt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Rt.prototype.set=function(t,e){return Xt(this,t,e)},Rt.prototype.setIn=function(t,e){return this.updateIn(t,cn,function(){return e})},Rt.prototype.remove=function(t){return Xt(this,t,cn)},Rt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return cn})},Rt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Rt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var i=oe(this,Bt(t),e,n);return i===cn?void 0:i},Rt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Gt()},Rt.prototype.merge=function(){return ne(this,void 0,arguments)},Rt.prototype.mergeWith=function(t){var e=on.call(arguments,1);return ne(this,t,e)},Rt.prototype.mergeIn=function(t){var e=on.call(arguments,1);return this.updateIn(t,Gt(),function(t){return t.merge.apply(t,e)})},Rt.prototype.mergeDeep=function(){return ne(this,ie(void 0),arguments)},Rt.prototype.mergeDeepWith=function(t){var e=on.call(arguments,1);return ne(this,ie(t),e)},Rt.prototype.mergeDeepIn=function(t){var e=on.call(arguments,1);return this.updateIn(t,Gt(),function(t){return t.mergeDeep.apply(t,e)})},Rt.prototype.sort=function(t){return ke(St(this,t))},Rt.prototype.sortBy=function(t,e){return ke(St(this,e,t))},Rt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Rt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new i)},Rt.prototype.asImmutable=function(){return this.__ensureOwner()},Rt.prototype.wasAltered=function(){return this.__altered},Rt.prototype.__iterator=function(t,e){return new qt(this,t,e)},Rt.prototype.__iterate=function(t,e){var n=this,i=0;return this._root&&this._root.iterate(function(e){return i++,t(e[1],e[0],n)},e),i},Rt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Kt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Rt.isMap=jt;var In="@@__IMMUTABLE_MAP__@@",Mn=Rt.prototype;Mn[In]=!0,Mn[an]=Mn.remove,Mn.removeIn=Mn.deleteIn,Lt.prototype.get=function(t,e,n,i){for(var r=this.entries,o=0,a=r.length;a>o;o++)if(X(n,r[o][0]))return r[o][1];return i},Lt.prototype.update=function(t,e,i,o,a,s,l){for(var u=a===cn,c=this.entries,h=0,d=c.length;d>h&&!X(o,c[h][0]);h++);var p=d>h;if(p?c[h][1]===a:u)return this;if(n(l),(u||!p)&&n(s),!u||1!==c.length){if(!p&&!u&&c.length>=Rn)return Jt(t,c,o,a);var f=t&&t===this.ownerID,m=f?c:r(c);return p?u?h===d-1?m.pop():m[h]=m.pop():m[h]=[o,a]:m.push([o,a]),f?(this.entries=m,this):new Lt(t,m)}},Ft.prototype.get=function(t,e,n,i){void 0===e&&(e=et(n));var r=1<<((0===t?e:e>>>t)&un),o=this.bitmap;return 0===(o&r)?i:this.nodes[ae(o&r-1)].get(t+sn,e,n,i)},Ft.prototype.update=function(t,e,n,i,r,o,a){void 0===n&&(n=et(i));var s=(0===e?n:n>>>e)&un,l=1<<s,u=this.bitmap,c=0!==(u&l);if(!c&&r===cn)return this;var h=ae(u&l-1),d=this.nodes,p=c?d[h]:void 0,f=Yt(p,t,e+sn,n,i,r,o,a);
if(f===p)return this;if(!c&&f&&d.length>=jn)return ee(t,d,u,s,f);if(c&&!f&&2===d.length&&Zt(d[1^h]))return d[1^h];if(c&&f&&1===d.length&&Zt(f))return f;var m=t&&t===this.ownerID,g=c?f?u:u^l:u|l,v=c?f?se(d,h,f,m):ue(d,h,m):le(d,h,f,m);return m?(this.bitmap=g,this.nodes=v,this):new Ft(t,g,v)},Ht.prototype.get=function(t,e,n,i){void 0===e&&(e=et(n));var r=(0===t?e:e>>>t)&un,o=this.nodes[r];return o?o.get(t+sn,e,n,i):i},Ht.prototype.update=function(t,e,n,i,r,o,a){void 0===n&&(n=et(i));var s=(0===e?n:n>>>e)&un,l=r===cn,u=this.nodes,c=u[s];if(l&&!c)return this;var h=Yt(c,t,e+sn,n,i,r,o,a);if(h===c)return this;var d=this.count;if(c){if(!h&&(d--,Ln>d))return te(t,u,d,s)}else d++;var p=t&&t===this.ownerID,f=se(u,s,h,p);return p?(this.count=d,this.nodes=f,this):new Ht(t,d,f)},zt.prototype.get=function(t,e,n,i){for(var r=this.entries,o=0,a=r.length;a>o;o++)if(X(n,r[o][0]))return r[o][1];return i},zt.prototype.update=function(t,e,i,o,a,s,l){void 0===i&&(i=et(o));var u=a===cn;if(i!==this.keyHash)return u?this:(n(l),n(s),Qt(this,t,e,i,[o,a]));for(var c=this.entries,h=0,d=c.length;d>h&&!X(o,c[h][0]);h++);var p=d>h;if(p?c[h][1]===a:u)return this;if(n(l),(u||!p)&&n(s),u&&2===d)return new Ut(t,this.keyHash,c[1^h]);var f=t&&t===this.ownerID,m=f?c:r(c);return p?u?h===d-1?m.pop():m[h]=m.pop():m[h]=[o,a]:m.push([o,a]),f?(this.entries=m,this):new zt(t,this.keyHash,m)},Ut.prototype.get=function(t,e,n,i){return X(n,this.entry[0])?this.entry[1]:i},Ut.prototype.update=function(t,e,i,r,o,a,s){var l=o===cn,u=X(r,this.entry[0]);return(u?o===this.entry[1]:l)?this:(n(s),l?void n(a):u?t&&t===this.ownerID?(this.entry[1]=o,this):new Ut(t,this.keyHash,[r,o]):(n(a),Qt(this,t,e,et(r),[r,o])))},Lt.prototype.iterate=zt.prototype.iterate=function(t,e){for(var n=this.entries,i=0,r=n.length-1;r>=i;i++)if(t(n[e?r-i:i])===!1)return!1},Ft.prototype.iterate=Ht.prototype.iterate=function(t,e){for(var n=this.nodes,i=0,r=n.length-1;r>=i;i++){var o=n[e?r-i:i];if(o&&o.iterate(t,e)===!1)return!1}},Ut.prototype.iterate=function(t,e){return t(this.entry)},t(qt,x),qt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,i=e.node,r=e.index++;if(i.entry){if(0===r)return Vt(t,i.entry)}else if(i.entries){if(n=i.entries.length-1,n>=r)return Vt(t,i.entries[this._reverse?n-r:r])}else if(n=i.nodes.length-1,n>=r){var o=i.nodes[this._reverse?n-r:r];if(o){if(o.entry)return Vt(t,o.entry);e=this._stack=Wt(o,e)}continue}e=this._stack=this._stack.__prev}return k()};var Bn,Rn=ln/4,jn=ln/2,Ln=ln/4;t(ce,K),ce.of=function(){return this(arguments)},ce.prototype.toString=function(){return this.__toString("List [","]")},ce.prototype.get=function(t,e){if(t=a(this,t),0>t||t>=this.size)return e;t+=this._origin;var n=be(this,t);return n&&n.array[t&un]},ce.prototype.set=function(t,e){return ge(this,t,e)},ce.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},ce.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=sn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):me()},ce.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){we(n,0,e+t.length);for(var i=0;i<t.length;i++)n.set(e+i,t[i])})},ce.prototype.pop=function(){return we(this,0,-1)},ce.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){we(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},ce.prototype.shift=function(){return we(this,1)},ce.prototype.merge=function(){return xe(this,void 0,arguments)},ce.prototype.mergeWith=function(t){var e=on.call(arguments,1);return xe(this,t,e)},ce.prototype.mergeDeep=function(){return xe(this,ie(void 0),arguments)},ce.prototype.mergeDeepWith=function(t){var e=on.call(arguments,1);return xe(this,ie(t),e)},ce.prototype.setSize=function(t){return we(this,0,t)},ce.prototype.slice=function(t,e){var n=this.size;return l(t,e,n)?this:we(this,u(t,n),c(e,n))},ce.prototype.__iterator=function(t,e){var n=0,i=pe(this,e);return new x(function(){var e=i();return e===Un?k():_(t,n++,e)})},ce.prototype.__iterate=function(t,e){for(var n,i=0,r=pe(this,e);(n=r())!==Un&&t(n,i++,this)!==!1;);return i},ce.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?fe(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},ce.isList=he;var Fn="@@__IMMUTABLE_LIST__@@",Hn=ce.prototype;Hn[Fn]=!0,Hn[an]=Hn.remove,Hn.setIn=Mn.setIn,Hn.deleteIn=Hn.removeIn=Mn.removeIn,Hn.update=Mn.update,Hn.updateIn=Mn.updateIn,Hn.mergeIn=Mn.mergeIn,Hn.mergeDeepIn=Mn.mergeDeepIn,Hn.withMutations=Mn.withMutations,Hn.asMutable=Mn.asMutable,Hn.asImmutable=Mn.asImmutable,Hn.wasAltered=Mn.wasAltered,de.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var i=n>>>e&un;if(i>=this.array.length)return new de([],t);var r,o=0===i;if(e>0){var a=this.array[i];if(r=a&&a.removeBefore(t,e-sn,n),r===a&&o)return this}if(o&&!r)return this;var s=ye(this,t);if(!o)for(var l=0;i>l;l++)s.array[l]=void 0;return r&&(s.array[i]=r),s},de.prototype.removeAfter=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var i=n-1>>>e&un;if(i>=this.array.length)return this;var r,o=i===this.array.length-1;if(e>0){var a=this.array[i];if(r=a&&a.removeAfter(t,e-sn,n),r===a&&o)return this}if(o&&!r)return this;var s=ye(this,t);return o||s.array.pop(),r&&(s.array[i]=r),s};var zn,Un={};t(ke,Rt),ke.of=function(){return this(arguments)},ke.prototype.toString=function(){return this.__toString("OrderedMap {","}")},ke.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},ke.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Te()},ke.prototype.set=function(t,e){return Ee(this,t,e)},ke.prototype.remove=function(t){return Ee(this,t,cn)},ke.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},ke.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},ke.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},ke.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Se(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},ke.isOrderedMap=$e,ke.prototype[gn]=!0,ke.prototype[an]=ke.prototype.remove;var qn;t(Ce,K),Ce.of=function(){return this(arguments)},Ce.prototype.toString=function(){return this.__toString("Stack [","]")},Ce.prototype.get=function(t,e){for(var n=this._head;n&&t--;)n=n.next;return n?n.value:e},Ce.prototype.peek=function(){return this._head&&this._head.value},Ce.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ae(t,e)},Ce.prototype.pushAll=function(t){if(t=f(t),0===t.size)return this;st(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ae(e,n)},Ce.prototype.pop=function(){return this.slice(1)},Ce.prototype.unshift=function(){return this.push.apply(this,arguments)},Ce.prototype.unshiftAll=function(t){return this.pushAll(t)},Ce.prototype.shift=function(){return this.pop.apply(this,arguments)},Ce.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):De()},Ce.prototype.slice=function(t,e){if(l(t,e,this.size))return this;var n=u(t,this.size),i=c(e,this.size);if(i!==this.size)return K.prototype.slice.call(this,t,e);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ae(r,o)},Ce.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ae(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ce.prototype.__iterate=function(t,e){if(e)return this.toSeq().cacheResult.__iterate(t,e);for(var n=0,i=this._head;i&&t(i.value,n++,this)!==!1;)i=i.next;return n},Ce.prototype.__iterator=function(t,e){if(e)return this.toSeq().cacheResult().__iterator(t,e);var n=0,i=this._head;return new x(function(){if(i){var e=i.value;return i=i.next,_(t,n++,e)}return k()})},Ce.isStack=Pe;var Vn="@@__IMMUTABLE_STACK__@@",Wn=Ce.prototype;Wn[Vn]=!0,Wn.withMutations=Mn.withMutations,Wn.asMutable=Mn.asMutable,Wn.asImmutable=Mn.asImmutable,Wn.wasAltered=Mn.wasAltered;var Kn;t(Ne,G),Ne.of=function(){return this(arguments)},Ne.fromKeys=function(t){return this(p(t).keySeq())},Ne.prototype.toString=function(){return this.__toString("Set {","}")},Ne.prototype.has=function(t){return this._map.has(t)},Ne.prototype.add=function(t){return Ie(this,this._map.set(t,!0))},Ne.prototype.remove=function(t){return Ie(this,this._map.remove(t))},Ne.prototype.clear=function(){return Ie(this,this._map.clear())},Ne.prototype.union=function(){var t=on.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0===this.size&&1===t.length?this.constructor(t[0]):this.withMutations(function(e){for(var n=0;n<t.length;n++)m(t[n]).forEach(function(t){return e.add(t)})})},Ne.prototype.intersect=function(){var t=on.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return m(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.contains(e)})||n.remove(e)})})},Ne.prototype.subtract=function(){var t=on.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return m(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.contains(e)})&&n.remove(e)})})},Ne.prototype.merge=function(){return this.union.apply(this,arguments)},Ne.prototype.mergeWith=function(t){var e=on.call(arguments,1);return this.union.apply(this,e)},Ne.prototype.sort=function(t){return Re(St(this,t))},Ne.prototype.sortBy=function(t,e){return Re(St(this,e,t))},Ne.prototype.wasAltered=function(){return this._map.wasAltered()},Ne.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,i){return t(i,i,n)},e)},Ne.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Ne.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Ne.isSet=Oe;var Gn="@@__IMMUTABLE_SET__@@",Xn=Ne.prototype;Xn[Gn]=!0,Xn[an]=Xn.remove,Xn.mergeDeep=Xn.merge,Xn.mergeDeepWith=Xn.mergeWith,Xn.withMutations=Mn.withMutations,Xn.asMutable=Mn.asMutable,Xn.asImmutable=Mn.asImmutable,Xn.__empty=Be,Xn.__make=Me;var Yn;t(Re,Ne),Re.of=function(){return this(arguments)},Re.fromKeys=function(t){return this(p(t).keySeq())},Re.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Re.isOrderedSet=je;var Zn=Re.prototype;Zn[gn]=!0,Zn.__empty=Fe,Zn.__make=Le;var Qn;t(He,W),He.prototype.toString=function(){return this.__toString(Ue(this)+" {","}")},He.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},He.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},He.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=Object.getPrototypeOf(this).constructor;return t._empty||(t._empty=ze(this,Gt()))},He.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Ue(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:ze(this,n)},He.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:ze(this,e)},He.prototype.wasAltered=function(){return this._map.wasAltered()},He.prototype.__iterator=function(t,e){var n=this;return p(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},He.prototype.__iterate=function(t,e){var n=this;return p(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},He.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?ze(this,e,t):(this.__ownerID=t,this._map=e,this)};var Jn=He.prototype;Jn[an]=Jn.remove,Jn.deleteIn=Jn.removeIn=Mn.removeIn,Jn.merge=Mn.merge,Jn.mergeWith=Mn.mergeWith,Jn.mergeIn=Mn.mergeIn,Jn.mergeDeep=Mn.mergeDeep,Jn.mergeDeepWith=Mn.mergeDeepWith,Jn.mergeDeepIn=Mn.mergeDeepIn,Jn.setIn=Mn.setIn,Jn.update=Mn.update,Jn.updateIn=Mn.updateIn,Jn.withMutations=Mn.withMutations,Jn.asMutable=Mn.asMutable,Jn.asImmutable=Mn.asImmutable,t(Ve,D),Ve.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Ve.prototype.get=function(t,e){return this.has(t)?this._start+a(this,t)*this._step:e},Ve.prototype.contains=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Ve.prototype.slice=function(t,e){return l(t,e,this.size)?this:(t=u(t,this.size),e=c(e,this.size),t>=e?new Ve(0,0):new Ve(this.get(t,this._end),this.get(e,this._end),this._step))},Ve.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Ve.prototype.lastIndexOf=function(t){return this.indexOf(t)},Ve.prototype.__iterate=function(t,e){for(var n=this.size-1,i=this._step,r=e?this._start+n*i:this._start,o=0;n>=o;o++){if(t(r,o,this)===!1)return o+1;r+=e?-i:i}return o},Ve.prototype.__iterator=function(t,e){var n=this.size-1,i=this._step,r=e?this._start+n*i:this._start,o=0;return new x(function(){var a=r;return r+=e?-i:i,o>n?k():_(t,o++,a)})},Ve.prototype.equals=function(t){return t instanceof Ve?this._start===t._start&&this._end===t._end&&this._step===t._step:qe(this,t)};var ti;t(We,D),We.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},We.prototype.get=function(t,e){return this.has(t)?this._value:e},We.prototype.contains=function(t){return X(this._value,t)},We.prototype.slice=function(t,e){var n=this.size;return l(t,e,n)?this:new We(this._value,c(e,n)-u(t,n))},We.prototype.reverse=function(){return this},We.prototype.indexOf=function(t){return X(this._value,t)?0:-1},We.prototype.lastIndexOf=function(t){return X(this._value,t)?this.size:-1},We.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},We.prototype.__iterator=function(t,e){var n=this,i=0;return new x(function(){return i<n.size?_(t,i++,n._value):k()})},We.prototype.equals=function(t){return t instanceof We?X(this._value,t._value):qe(t)};var ei;d.Iterator=x,Ke(d,{toArray:function(){st(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ut(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new lt(this,!0)},toMap:function(){return Rt(this.toKeyedSeq())},toObject:function(){st(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return ke(this.toKeyedSeq())},toOrderedSet:function(){return Re(v(this)?this.valueSeq():this)},toSet:function(){return Ne(v(this)?this.valueSeq():this)},toSetSeq:function(){return new ct(this)},toSeq:function(){return y(this)?this.toIndexedSeq():v(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ce(v(this)?this.valueSeq():this)},toList:function(){return ce(v(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=on.call(arguments,0);return Pt(this,xt(this,t))},contains:function(t){return this.some(function(e){return X(e,t)})},entries:function(){return this.__iterator(bn)},every:function(t,e){st(this.size);var n=!0;return this.__iterate(function(i,r,o){return t.call(e,i,r,o)?void 0:(n=!1,!1)}),n},filter:function(t,e){return Pt(this,mt(this,t,e,!0))},find:function(t,e,n){var i=this.findEntry(t,e);return i?i[1]:n},findEntry:function(t,e){var n;return this.__iterate(function(i,r,o){return t.call(e,i,r,o)?(n=[r,i],!1):void 0}),n},findLastEntry:function(t,e){return this.toSeq().reverse().findEntry(t,e)},forEach:function(t,e){return st(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){st(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(i){n?n=!1:e+=t,e+=null!==i&&void 0!==i?i:""}),e},keys:function(){return this.__iterator(vn)},map:function(t,e){return Pt(this,pt(this,t,e))},reduce:function(t,e,n){st(this.size);var i,r;return arguments.length<2?r=!0:i=e,this.__iterate(function(e,o,a){r?(r=!1,i=e):i=t.call(n,i,e,o,a)}),i},reduceRight:function(t,e,n){var i=this.toKeyedSeq().reverse();return i.reduce.apply(i,arguments)},reverse:function(){return Pt(this,ft(this,!0))},slice:function(t,e){return Pt(this,yt(this,t,e,!0))},some:function(t,e){return!this.every(Ye(t),e)},sort:function(t){return Pt(this,St(this,t))},values:function(){return this.__iterator(yn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return o(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return gt(this,t,e)},equals:function(t){return qe(this,t)},entrySeq:function(){var t=this;if(t._cache)return new O(t._cache);var e=t.toSeq().map(Xe).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ye(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(s)},flatMap:function(t,e){return Pt(this,kt(this,t,e))},flatten:function(t){return Pt(this,_t(this,t,!0))},fromEntrySeq:function(){return new ht(this)},get:function(t,e){return this.find(function(e,n){return X(n,t)},void 0,e)},getIn:function(t,e){for(var n,i=this,r=Bt(t);!(n=r.next()).done;){var o=n.value;if(i=i&&i.get?i.get(o,cn):cn,i===cn)return e}return i},groupBy:function(t,e){return vt(this,t,e)},has:function(t){return this.get(t,cn)!==cn},hasIn:function(t){return this.getIn(t,cn)!==cn},isSubset:function(t){return t="function"==typeof t.contains?t:d(t),this.every(function(e){return t.contains(e)})},isSuperset:function(t){return t.isSubset(this)},keySeq:function(){return this.toSeq().map(Ge).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return Tt(this,t)},maxBy:function(t,e){return Tt(this,e,t)},min:function(t){return Tt(this,t?Ze(t):tn)},minBy:function(t,e){return Tt(this,e?Ze(e):tn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Pt(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Pt(this,wt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ye(t),e)},sortBy:function(t,e){return Pt(this,St(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Pt(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Pt(this,bt(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ye(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=en(this))}});var ni=d.prototype;ni[pn]=!0,ni[_n]=ni.values,ni.__toJS=ni.toArray,ni.__toStringMapper=Qe,ni.inspect=ni.toSource=function(){return this.toString()},ni.chain=ni.flatMap,function(){try{Object.defineProperty(ni,"length",{get:function(){if(!d.noLengthWarning){var t;try{throw new Error}catch(e){t=e.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}(),Ke(p,{flip:function(){return Pt(this,dt(this))},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return X(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return X(e,t)})},mapEntries:function(t,e){var n=this,i=0;return Pt(this,this.toSeq().map(function(r,o){return t.call(e,[o,r],i++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Pt(this,this.toSeq().flip().map(function(i,r){return t.call(e,i,r,n)}).flip())}});var ii=p.prototype;ii[fn]=!0,ii[_n]=ni.entries,ii.__toJS=ni.toObject,ii.__toStringMapper=function(t,e){return e+": "+Qe(t)},Ke(f,{toKeyedSeq:function(){return new lt(this,!1)},filter:function(t,e){return Pt(this,mt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){return this.toSeq().reverse().indexOf(t)},reverse:function(){return Pt(this,ft(this,!1))},slice:function(t,e){return Pt(this,yt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=u(t,this.size);var i=this.slice(0,t);return Pt(this,1===n?i:i.concat(r(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(t){return Pt(this,_t(this,t,!1))},get:function(t,e){return t=a(this,t),0>t||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=a(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Pt(this,$t(this,t))},interleave:function(){var t=[this].concat(r(arguments)),e=Ct(this.toSeq(),D.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Pt(this,n)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Pt(this,wt(this,t,e,!1))},zip:function(){var t=[this].concat(r(arguments));return Pt(this,Ct(this,Je,t))},zipWith:function(t){var e=r(arguments);return e[0]=this,Pt(this,Ct(this,t,e))}}),f.prototype[mn]=!0,f.prototype[gn]=!0,Ke(m,{get:function(t,e){return this.has(t)?t:e},contains:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),m.prototype.has=ni.contains,Ke(A,p.prototype),Ke(D,f.prototype),Ke(N,m.prototype),Ke(W,p.prototype),Ke(K,f.prototype),Ke(G,m.prototype);var ri={Iterable:d,Seq:P,Collection:V,Map:Rt,OrderedMap:ke,List:ce,Stack:Ce,Set:Ne,OrderedSet:Re,Record:He,Range:Ve,Repeat:We,is:X,fromJS:Y};return ri})},{}],55:[function(t,e,n){function i(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=n&&(t=o(t,n,i)),r(t,e)}var r=t("../internals/baseFlatten"),o=t("../collections/map");e.exports=i},{"../collections/map":59,"../internals/baseFlatten":68}],56:[function(t,e,n){function i(t,e,n){var i=0,l=t?t.length:0;if("number"!=typeof e&&null!=e){var u=l;for(e=o(e,n,3);u--&&e(t[u],u,t);)i++}else if(i=e,null==i||n)return t?t[l-1]:r;return a(t,s(0,l-i))}var r,o=t("../functions/createCallback"),a=t("../internals/slice"),s=Math.max;e.exports=i},{"../functions/createCallback":62,"../internals/slice":82}],57:[function(t,e,n){function i(t){for(var e=arguments,n=0,i=e.length,r=t?t.length:0;++n<i;)for(var a=-1,s=e[n];++a<r;)t[a]===s&&(o.call(t,a--,1),r--);return t}var r=[],o=r.splice;e.exports=i},{}],58:[function(t,e,n){function i(t,e,n){var i=-1,u=r,c=t?t.length:0,h=!1;return n=(0>n?l(0,c+n):n)||0,a(t)?h=u(t,e,n)>-1:"number"==typeof c?h=(s(t)?t.indexOf(e,n):u(t,e,n))>-1:o(t,function(t){return++i>=n?!(h=t===e):void 0}),h}var r=t("../internals/baseIndexOf"),o=t("../objects/forOwn"),a=t("../objects/isArray"),s=t("../objects/isString"),l=Math.max;e.exports=i},{"../internals/baseIndexOf":69,"../objects/forOwn":86,"../objects/isArray":88,"../objects/isString":91}],59:[function(t,e,n){function i(t,e,n){var i=-1,a=t?t.length:0;if(e=r(e,n,3),"number"==typeof a)for(var s=Array(a);++i<a;)s[i]=e(t[i],i,t);else s=[],o(t,function(t,n,r){s[++i]=e(t,n,r)});return s}var r=t("../functions/createCallback"),o=t("../objects/forOwn");e.exports=i},{"../functions/createCallback":62,"../objects/forOwn":86}],60:[function(t,e,n){function i(t){return t&&"number"==typeof t.length?r(t):o(t)}var r=(t("../objects/isString"),t("../internals/slice")),o=t("../objects/values");e.exports=i},{"../internals/slice":82,"../objects/isString":91,"../objects/values":93}],61:[function(t,e,n){function i(t,e){return arguments.length>2?r(t,17,o(arguments,2),null,e):r(t,1,null,null,e)}var r=t("../internals/createWrapper"),o=t("../internals/slice");e.exports=i},{"../internals/createWrapper":71,"../internals/slice":82}],62:[function(t,e,n){function i(t,e,n){var i=typeof t;if(null==t||"function"==i)return r(t,e,n);if("object"!=i)return l(t);var u=s(t),c=u[0],h=t[c];return 1!=u.length||h!==h||a(h)?function(e){for(var n=u.length,i=!1;n--&&(i=o(e[u[n]],t[u[n]],null,!0)););return i}:function(t){var e=t[c];return h===e&&(0!==h||1/h==1/e)}}var r=t("../internals/baseCreateCallback"),o=t("../internals/baseIsEqual"),a=t("../objects/isObject"),s=t("../objects/keys"),l=t("../utilities/property");e.exports=i},{"../internals/baseCreateCallback":66,"../internals/baseIsEqual":70,"../objects/isObject":90,"../objects/keys":92,"../utilities/property":98}],63:[function(t,e,n){var i=[];e.exports=i},{}],64:[function(t,e,n){function i(t){function e(){if(i){var t=s(i);u.apply(t,arguments)}if(this instanceof e){var a=r(n.prototype),c=n.apply(a,t||arguments);return o(c)?c:a}return n.apply(l,t||arguments)}var n=t[0],i=t[2],l=t[4];return a(e,t),e}var r=t("./baseCreate"),o=t("../objects/isObject"),a=t("./setBindData"),s=t("./slice"),l=[],u=l.push;e.exports=i},{"../objects/isObject":90,"./baseCreate":65,"./setBindData":80,"./slice":82}],65:[function(t,e,n){function i(t,e){return o(t)?a(t):{}}var r=t("./isNative"),o=t("../objects/isObject"),a=(t("../utilities/noop"),r(a=Object.create)&&a);a||(i=function(){function t(){}return function(e){if(o(e)){t.prototype=e;var n=new t;t.prototype=null}return n||window.Object()}}()),e.exports=i},{"../objects/isObject":90,"../utilities/noop":97,"./isNative":75}],66:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)return o;if("undefined"==typeof e||!("prototype"in t))return t;var i=t.__bindData__;if("undefined"==typeof i&&(s.funcNames&&(i=!t.name),i=i||!s.funcDecomp,!i)){var h=c.call(t);s.funcNames||(i=!l.test(h)),i||(i=u.test(h),a(t,i))}if(i===!1||i!==!0&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return r(t,e)}var r=t("../functions/bind"),o=t("../utilities/identity"),a=t("./setBindData"),s=t("../support"),l=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;e.exports=i},{"../functions/bind":61,"../support":94,"../utilities/identity":96,"./setBindData":80}],67:[function(t,e,n){function i(t){function e(){var t=f?d:this;if(c){var a=s(c);u.apply(a,arguments)}if((h||g)&&(a||(a=s(arguments)),h&&u.apply(a,h),g&&a.length<p))return l|=16,i([n,v?l:-4&l,a,null,d,p]);if(a||(a=arguments),m&&(n=t[y]),this instanceof e){t=r(n.prototype);var b=n.apply(t,a);return o(b)?b:t}return n.apply(t,a)}var n=t[0],l=t[1],c=t[2],h=t[3],d=t[4],p=t[5],f=1&l,m=2&l,g=4&l,v=8&l,y=n;return a(e,t),e}var r=t("./baseCreate"),o=t("../objects/isObject"),a=t("./setBindData"),s=t("./slice"),l=[],u=l.push;e.exports=i},{"../objects/isObject":90,"./baseCreate":65,"./setBindData":80,"./slice":82}],68:[function(t,e,n){function i(t,e,n,a){for(var s=(a||0)-1,l=t?t.length:0,u=[];++s<l;){var c=t[s];if(c&&"object"==typeof c&&"number"==typeof c.length&&(o(c)||r(c))){e||(c=i(c,e,n));var h=-1,d=c.length,p=u.length;for(u.length+=d;++h<d;)u[p++]=c[h]}else n||u.push(c)}return u}var r=t("../objects/isArguments"),o=t("../objects/isArray");e.exports=i},{"../objects/isArguments":87,"../objects/isArray":88}],69:[function(t,e,n){function i(t,e,n){for(var i=(n||0)-1,r=t?t.length:0;++i<r;)if(t[i]===e)return i;return-1}e.exports=i},{}],70:[function(t,e,n){function i(t,e,n,v,w,x){if(n){var _=n(t,e);if("undefined"!=typeof _)return!!_}if(t===e)return 0!==t||1/t==1/e;var k=typeof t,$=typeof e;if(!(t!==t||t&&s[k]||e&&s[$]))return!1;if(null==t||null==e)return t===e;var S=y.call(t),T=y.call(e);if(S==u&&(S=f),T==u&&(T=f),S!=T)return!1;switch(S){case h:case d:return+t==+e;case p:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case m:case g:return t==String(e)}var E=S==c;if(!E){var C=b.call(t,"__wrapped__"),P=b.call(e,"__wrapped__");if(C||P)return i(C?t.__wrapped__:t,P?e.__wrapped__:e,n,v,w,x);if(S!=f)return!1;var A=t.constructor,D=e.constructor;if(A!=D&&!(a(A)&&A instanceof A&&a(D)&&D instanceof D)&&"constructor"in t&&"constructor"in e)return!1}var N=!w;w||(w=o()),x||(x=o());for(var O=w.length;O--;)if(w[O]==t)return x[O]==e;var I=0;if(_=!0,w.push(t),x.push(e),E){if(O=t.length,I=e.length,_=I==O,_||v)for(;I--;){var M=O,B=e[I];if(v)for(;M--&&!(_=i(t[M],B,n,v,w,x)););else if(!(_=i(t[I],B,n,v,w,x)))break}}else r(e,function(e,r,o){return b.call(o,r)?(I++,_=b.call(t,r)&&i(t[r],e,n,v,w,x)):void 0}),_&&!v&&r(t,function(t,e,n){return b.call(n,e)?_=--I>-1:void 0});return w.pop(),x.pop(),N&&(l(w),l(x)),_}var r=t("../objects/forIn"),o=t("./getArray"),a=t("../objects/isFunction"),s=t("./objectTypes"),l=t("./releaseArray"),u="[object Arguments]",c="[object Array]",h="[object Boolean]",d="[object Date]",p="[object Number]",f="[object Object]",m="[object RegExp]",g="[object String]",v=Object.prototype,y=v.toString,b=v.hasOwnProperty;e.exports=i},{"../objects/forIn":85,"../objects/isFunction":89,"./getArray":73,"./objectTypes":77,"./releaseArray":79}],71:[function(t,e,n){function i(t,e,n,l,h,d){var p=1&e,f=2&e,m=4&e,g=16&e,v=32&e;if(!f&&!a(t))throw new TypeError;g&&!n.length&&(e&=-17,g=n=!1),v&&!l.length&&(e&=-33,v=l=!1);var y=t&&t.__bindData__;if(y&&y!==!0)return y=s(y),y[2]&&(y[2]=s(y[2])),y[3]&&(y[3]=s(y[3])),!p||1&y[1]||(y[4]=h),!p&&1&y[1]&&(e|=8),!m||4&y[1]||(y[5]=d),g&&u.apply(y[2]||(y[2]=[]),n),v&&c.apply(y[3]||(y[3]=[]),l),y[1]|=e,i.apply(null,y);var b=1==e||17===e?r:o;return b([t,e,n,l,h,d])}var r=t("./baseBind"),o=t("./baseCreateWrapper"),a=t("../objects/isFunction"),s=t("./slice"),l=[],u=l.push,c=l.unshift;e.exports=i},{"../objects/isFunction":89,"./baseBind":64,"./baseCreateWrapper":67,"./slice":82}],72:[function(t,e,n){function i(t){return r[t]}var r=t("./htmlEscapes");e.exports=i},{"./htmlEscapes":74}],73:[function(t,e,n){function i(){return r.pop()||[]}var r=t("./arrayPool");e.exports=i},{"./arrayPool":63}],74:[function(t,e,n){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};e.exports=i},{}],75:[function(t,e,n){function i(t){return"function"==typeof t&&a.test(t)}var r=Object.prototype,o=r.toString,a=RegExp("^"+String(o).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=i},{}],76:[function(t,e,n){var i=40;e.exports=i},{}],77:[function(t,e,n){var i={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=i},{}],78:[function(t,e,n){var i=t("./htmlEscapes"),r=t("../objects/keys"),o=RegExp("["+r(i).join("")+"]","g");e.exports=o},{"../objects/keys":92,"./htmlEscapes":74}],79:[function(t,e,n){function i(t){t.length=0,r.length<o&&r.push(t)}var r=t("./arrayPool"),o=t("./maxPoolSize");e.exports=i},{"./arrayPool":63,"./maxPoolSize":76}],80:[function(t,e,n){var i=t("./isNative"),r=t("../utilities/noop"),o={configurable:!1,enumerable:!1,value:null,writable:!1},a=function(){try{var t={},e=i(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),s=a?function(t,e){o.value=e,a(t,"__bindData__",o)}:r;e.exports=s},{"../utilities/noop":97,"./isNative":75}],81:[function(t,e,n){var i=t("./objectTypes"),r=Object.prototype,o=r.hasOwnProperty,a=function(t){var e,n=t,r=[];if(!n)return r;if(!i[typeof t])return r;for(e in n)o.call(n,e)&&r.push(e);return r};e.exports=a},{"./objectTypes":77}],82:[function(t,e,n){function i(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var i=-1,r=n-e||0,o=Array(0>r?0:r);++i<r;)o[i]=t[e+i];return o}e.exports=i},{}],83:[function(t,e,n){var i=t("../internals/baseCreateCallback"),r=t("./keys"),o=t("../internals/objectTypes"),a=function(t,e,n){
var a,s=t,l=s;if(!s)return l;var u=arguments,c=0,h="number"==typeof n?2:u.length;if(h>3&&"function"==typeof u[h-2])var d=i(u[--h-1],u[h--],2);else h>2&&"function"==typeof u[h-1]&&(d=u[--h]);for(;++c<h;)if(s=u[c],s&&o[typeof s])for(var p=-1,f=o[typeof s]&&r(s),m=f?f.length:0;++p<m;)a=f[p],l[a]=d?d(l[a],s[a]):s[a];return l};e.exports=a},{"../internals/baseCreateCallback":66,"../internals/objectTypes":77,"./keys":92}],84:[function(t,e,n){var i=t("./keys"),r=t("../internals/objectTypes"),o=function(t,e,n){var o,a=t,s=a;if(!a)return s;for(var l=arguments,u=0,c="number"==typeof n?2:l.length;++u<c;)if(a=l[u],a&&r[typeof a])for(var h=-1,d=r[typeof a]&&i(a),p=d?d.length:0;++h<p;)o=d[h],"undefined"==typeof s[o]&&(s[o]=a[o]);return s};e.exports=o},{"../internals/objectTypes":77,"./keys":92}],85:[function(t,e,n){var i=t("../internals/baseCreateCallback"),r=t("../internals/objectTypes"),o=function(t,e,n){var o,a=t,s=a;if(!a)return s;if(!r[typeof a])return s;e=e&&"undefined"==typeof n?e:i(e,n,3);for(o in a)if(e(a[o],o,t)===!1)return s;return s};e.exports=o},{"../internals/baseCreateCallback":66,"../internals/objectTypes":77}],86:[function(t,e,n){var i=t("../internals/baseCreateCallback"),r=t("./keys"),o=t("../internals/objectTypes"),a=function(t,e,n){var a,s=t,l=s;if(!s)return l;if(!o[typeof s])return l;e=e&&"undefined"==typeof n?e:i(e,n,3);for(var u=-1,c=o[typeof s]&&r(s),h=c?c.length:0;++u<h;)if(a=c[u],e(s[a],a,t)===!1)return l;return l};e.exports=a},{"../internals/baseCreateCallback":66,"../internals/objectTypes":77,"./keys":92}],87:[function(t,e,n){function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&a.call(t)==r||!1}var r="[object Arguments]",o=Object.prototype,a=o.toString;e.exports=i},{}],88:[function(t,e,n){var i=t("../internals/isNative"),r="[object Array]",o=Object.prototype,a=o.toString,s=i(s=Array.isArray)&&s,l=s||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&a.call(t)==r||!1};e.exports=l},{"../internals/isNative":75}],89:[function(t,e,n){function i(t){return"function"==typeof t}e.exports=i},{}],90:[function(t,e,n){function i(t){return!(!t||!r[typeof t])}var r=t("../internals/objectTypes");e.exports=i},{"../internals/objectTypes":77}],91:[function(t,e,n){function i(t){return"string"==typeof t||t&&"object"==typeof t&&a.call(t)==r||!1}var r="[object String]",o=Object.prototype,a=o.toString;e.exports=i},{}],92:[function(t,e,n){var i=t("../internals/isNative"),r=t("./isObject"),o=t("../internals/shimKeys"),a=i(a=Object.keys)&&a,s=a?function(t){return r(t)?a(t):[]}:o;e.exports=s},{"../internals/isNative":75,"../internals/shimKeys":81,"./isObject":90}],93:[function(t,e,n){function i(t){for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;)o[e]=t[n[e]];return o}var r=t("./keys");e.exports=i},{"./keys":92}],94:[function(t,e,n){var i=t("./internals/isNative"),r=/\bthis\b/,o={};o.funcDecomp=!i(window.WinRTError)&&r.test(function(){return this}),o.funcNames="string"==typeof Function.name,e.exports=o},{"./internals/isNative":75}],95:[function(t,e,n){function i(t){return null==t?"":String(t).replace(o,r)}var r=t("../internals/escapeHtmlChar"),o=(t("../objects/keys"),t("../internals/reUnescapedHtml"));e.exports=i},{"../internals/escapeHtmlChar":72,"../internals/reUnescapedHtml":78,"../objects/keys":92}],96:[function(t,e,n){function i(t){return t}e.exports=i},{}],97:[function(t,e,n){function i(){}e.exports=i},{}],98:[function(t,e,n){function i(t){return function(e){return e[t]}}e.exports=i},{}],99:[function(t,e,n){var i=t("./api/command-patch"),r=t("./api/command"),o=t("./api/node"),a=t("./api/selection"),s=t("./api/simple-command");e.exports=function(t){this.CommandPatch=i(t),this.Command=r(t),this.Node=o,this.Selection=a(t),this.SimpleCommand=s(this,t)}},{"./api/command":101,"./api/command-patch":100,"./api/node":102,"./api/selection":103,"./api/simple-command":104}],100:[function(t,e,n){"use strict";e.exports=function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}},{}],101:[function(t,e,n){"use strict";e.exports=function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}},{}],102:[function(t,e,n){"use strict";function i(t){this.node=t}i.prototype.getAncestor=function(t,e){var n=function(e){return t===e};if(!n(this.node))for(var i=this.node.parentNode;i&&!n(i);){if(e(i))return i;i=i.parentNode}},i.prototype.nextAll=function(){for(var t=[],e=this.node.nextSibling;e;)t.push(e),e=e.nextSibling;return t},e.exports=i},{}],103:[function(t,e,n){t("../element");e.exports=function(t){function e(){for(var e=document,n=t.el.parentNode;n&&n.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&n.nodeType!==Node.DOCUMENT_NODE;)n=n.parentNode;if(n&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.getSelection&&(e=n),this.selection=e.getSelection(),this.selection.rangeCount){this.range=document.createRange();var i=document.createRange();this.range.setStart(this.selection.anchorNode,this.selection.anchorOffset),i.setStart(this.selection.focusNode,this.selection.focusOffset),this.range.compareBoundaryPoints(Range.START_TO_START,i)<=0?this.range.setEnd(this.selection.focusNode,this.selection.focusOffset):(this.range=i,this.range.setEnd(this.selection.anchorNode,this.selection.anchorOffset))}}return e.prototype.getContaining=function(e){var n=this.range;if(n){var i=new t.api.Node(this.range.commonAncestorContainer),r=i.node&&t.el===i.node;return!r&&e(i.node)?i.node:i.getAncestor(t.el,e)}},e.prototype.placeMarkers=function(){var e=this.range;if(e&&t.el.offsetParent){var n=document.createRange();n.selectNodeContents(t.el);var i=this.range.compareBoundaryPoints(Range.START_TO_START,n)>=0,r=this.range.compareBoundaryPoints(Range.END_TO_END,n)<=0;if(i&&r){var o=document.createElement("em");o.classList.add("scribe-marker");var a=document.createElement("em");a.classList.add("scribe-marker");var s=this.range.cloneRange();if(s.collapse(!1),s.insertNode(a),a.nextSibling&&a.nextSibling.nodeType===Node.TEXT_NODE&&""===a.nextSibling.data&&a.parentNode.removeChild(a.nextSibling),a.previousSibling&&a.previousSibling.nodeType===Node.TEXT_NODE&&""===a.previousSibling.data&&a.parentNode.removeChild(a.previousSibling),!this.range.collapsed){var l=this.range.cloneRange();l.collapse(!0),l.insertNode(o),o.nextSibling&&o.nextSibling.nodeType===Node.TEXT_NODE&&""===o.nextSibling.data&&o.parentNode.removeChild(o.nextSibling),o.previousSibling&&o.previousSibling.nodeType===Node.TEXT_NODE&&""===o.previousSibling.data&&o.parentNode.removeChild(o.previousSibling)}this.selection.removeAllRanges(),this.selection.addRange(this.range)}}},e.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},e.prototype.removeMarkers=function(){var t=this.getMarkers();Array.prototype.forEach.call(t,function(t){t.parentNode.removeChild(t)})},e.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var n=document.createRange();n.setStartBefore(e[0]),e.length>=2?n.setEndAfter(e[1]):n.setEndAfter(e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(n)}},e.prototype.isCaretOnNewLine=function(){function t(t){for(var e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null,!1),n=e.root;n;){var i=n.childNodes.length;if(i>1||1===i&&""!==n.textContent.trim())return!1;if(0===i)return""===n.textContent.trim();n=e.nextNode()}}var e=this.getContaining(function(t){return"P"===t.nodeName});return e?t(e):!1},e}},{"../element":106}],104:[function(t,e,n){"use strict";e.exports=function(t,e){function n(t,n){e.api.Command.call(this,t),this._nodeName=n}return n.prototype=Object.create(t.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},n}},{}],105:[function(t,e,n){function i(t,e){function n(t){var e=r(t.map(function(t){var e=o(t.addedNodes),n=o(t.removedNodes);return e.concat(n)})),n=e.filter(function(t){return!s.isEmptyTextNode(t)}).filter(function(t){return!a.isSelectionMarkerNode(t)});return n.length>0}var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,l=!1,u=new i(function(t){if(!l&&n(t)){l=!0;try{e()}catch(i){throw i}finally{setTimeout(function(){l=!1},0)}}});return u.observe(t,{attributes:!0,childList:!0,subtree:!0}),u}var r=t("lodash-amd/modern/arrays/flatten"),o=t("lodash-amd/modern/collections/toArray"),a=t("./element"),s=t("./node");e.exports=i},{"./element":106,"./node":108,"lodash-amd/modern/arrays/flatten":55,"lodash-amd/modern/collections/toArray":60}],106:[function(t,e,n){function i(t){return s(l,t.nodeName)}function r(t){return t.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===t.className}function o(t){return t.nodeType===Node.ELEMENT_NODE&&"caret-position"===t.className}function a(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}var s=t("lodash-amd/modern/collections/contains"),l=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO"];e.exports={isBlockElement:i,isSelectionMarkerNode:r,isCaretPositionNode:o,unwrap:a}},{"lodash-amd/modern/collections/contains":58}],107:[function(t,e,n){function i(){this._listeners={}}var r=(t("lodash-amd/modern/arrays/pull"),t("immutable/dist/immutable"));i.prototype.on=function(t,e){var n=this._listeners[t]||r.Set();this._listeners[t]=n.add(e)},i.prototype.off=function(t,e){var n=this._listeners[t]||r.Set();n=e?n["delete"](e):n.clear()},i.prototype.trigger=function(t,e){for(var n=t.split(":");n.length;){var i=n.join(":"),o=this._listeners[i]||r.Set();o.forEach(function(t){t.apply(null,e)}),n.splice(n.length-1,1)}},e.exports=i},{"immutable/dist/immutable":54,"lodash-amd/modern/arrays/pull":57}],108:[function(t,e,n){"use strict";function i(t){return t.nodeType===Node.TEXT_NODE&&""===t.textContent}function r(t,e){return e.parentNode.insertBefore(t,e.nextSibling)}function o(t){return t.parentNode.removeChild(t)}e.exports={isEmptyTextNode:i,insertAfter:r,removeNode:o}},{}],109:[function(t,e,n){var i=t("./commands/indent"),r=t("./commands/insert-list"),o=t("./commands/outdent"),a=t("./commands/redo"),s=t("./commands/subscript"),l=t("./commands/superscript"),u=t("./commands/undo");e.exports={indent:i,insertList:r,outdent:o,redo:a,subscript:s,superscript:l,undo:u}},{"./commands/indent":110,"./commands/insert-list":111,"./commands/outdent":112,"./commands/redo":113,"./commands/subscript":114,"./commands/superscript":115,"./commands/undo":116}],110:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!n},t.commands.indent=e}}},{}],111:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=function(e){t.api.Command.call(this,e)};e.prototype=Object.create(t.api.Command.prototype),e.prototype.constructor=e,e.prototype.execute=function(e){function n(t){if(t.length>0){var e=document.createElement(o.nodeName);t.forEach(function(t){e.appendChild(t)}),o.parentNode.insertBefore(e,o.nextElementSibling)}}if(this.queryState()){var i=new t.api.Selection,r=i.range,o=i.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName}),a=i.getContaining(function(t){return"LI"===t.nodeName});t.transactionManager.run(function(){if(a){var e=new t.api.Node(a).nextAll();n(e),i.placeMarkers();var s=document.createElement("p");s.innerHTML=a.innerHTML,o.parentNode.insertBefore(s,o.nextElementSibling),a.parentNode.removeChild(a)}else{var l=Array.prototype.map.call(o.querySelectorAll("li"),function(t){return r.intersectsNode(t)&&t}).filter(function(t){return t}),u=l.slice(-1)[0],c=new t.api.Node(u).nextAll();n(c),i.placeMarkers();var h=document.createDocumentFragment();l.forEach(function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,h.appendChild(e)}),o.parentNode.insertBefore(h,o.nextElementSibling),l.forEach(function(t){t.parentNode.removeChild(t)})}0===o.childNodes.length&&o.parentNode.removeChild(o),i.selectMarkers()}.bind(this))}else t.api.Command.prototype.execute.call(this,e)},e.prototype.queryEnabled=function(){return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()},t.commands.insertOrderedList=new e("insertOrderedList"),t.commands.insertUnorderedList=new e("insertUnorderedList")}}},{}],112:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!n},t.commands.outdent=e}}},{}],113:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("redo");e.execute=function(){var e=t.undoManager.redo();"undefined"!=typeof e&&t.restoreFromHistory(e)},e.queryEnabled=function(){return t.undoManager.position<t.undoManager.stack.length-1},t.commands.redo=e,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){t.shiftKey&&(t.metaKey||t.ctrlKey)&&90===t.keyCode&&(t.preventDefault(),e.execute())})}}},{}],114:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}},{}],115:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}},{}],116:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("undo");e.execute=function(){var e=t.undoManager.undo();"undefined"!=typeof e&&t.restoreFromHistory(e)},e.queryEnabled=function(){return t.undoManager.position>1},t.commands.undo=e,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){t.shiftKey||!t.metaKey&&!t.ctrlKey||90!==t.keyCode||(t.preventDefault(),e.execute())})}}},{}],117:[function(t,e,n){var i=t("lodash-amd/modern/collections/contains"),r=t("../../dom-observer");e.exports=function(){return function(t){var e=function(){setTimeout(function(){t.pushHistory()}.bind(t),0),t.el.removeEventListener("focus",e)}.bind(t);t.el.addEventListener("focus",e),t.el.addEventListener("focus",function(){function e(t){var n=document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),i=n.currentNode;return n.firstChild()?"BR"===n.currentNode.nodeName?i:e(n.currentNode):n.currentNode}var n=new t.api.Selection;if(n.range){var i=t.allowsBlockElements()&&n.range.startContainer===t.el;if(i){var r=e(t.el.firstChild),o=n.range;o.setStart(r,0),o.setEnd(r,0),n.selection.removeAllRanges(),n.selection.addRange(o)}}}.bind(t));var n=function(){if(!t._skipFormatters){var e=new t.api.Selection,n=e.range,i=function(){n&&e.placeMarkers(),t.setHTML(t._htmlFormatterFactory.format(t.getHTML())),e.selectMarkers()}.bind(t);n?(t.undoManager&&t.undoManager.undo(),t.transactionManager.run(i)):i()}delete t._skipFormatters}.bind(t);r(t.el,n),t.allowsBlockElements()&&t.el.addEventListener("keydown",function(e){if(13===e.keyCode){var n=new t.api.Selection,i=n.range,r=n.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});if(r&&i.collapsed){var o=i.cloneRange();o.setEndAfter(r,0);var a=o.cloneContents();""===a.firstChild.textContent&&(e.preventDefault(),t.transactionManager.run(function(){var t=document.createElement("p"),e=document.createElement("br");t.appendChild(e),r.parentNode.insertBefore(t,r.nextElementSibling),i.setStart(t,0),i.setEnd(t,0),n.selection.removeAllRanges(),n.selection.addRange(i)}))}}}),t.allowsBlockElements()&&t.el.addEventListener("keydown",function(e){if(13===e.keyCode||8===e.keyCode){var n=new t.api.Selection,i=n.range;if(i.collapsed){var r=n.getContaining(function(t){return"LI"===t.nodeName});if(r&&""===r.textContent.trim()){e.preventDefault();var o=n.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName}),a=t.getCommand("OL"===o.nodeName?"insertOrderedList":"insertUnorderedList");a.execute()}}}}),t.el.addEventListener("paste",function(e){if(e.clipboardData)e.preventDefault(),i(e.clipboardData.types,"text/html")?t.insertHTML(e.clipboardData.getData("text/html")):t.insertPlainText(e.clipboardData.getData("text/plain"));else{var n=new t.api.Selection;n.placeMarkers();var r=document.createElement("div");document.body.appendChild(r),r.setAttribute("contenteditable",!0),r.focus(),setTimeout(function(){var e=r.innerHTML;r.parentNode.removeChild(r),n.selectMarkers(),t.el.focus(),t.insertHTML(e)},1)}})}}},{"../../dom-observer":105,"lodash-amd/modern/collections/contains":58}],118:[function(t,e,n){function i(t,e){var n=Array.prototype.reduce.call(e.childNodes,function(e,n){function i(){var t=[n];e.push(t)}var r=o(e);if(r){var a=t.element.isBlockElement(r[0]);a===t.element.isBlockElement(n)?r.push(n):i()}else i();return e},[]),i=n.filter(function(e){var n=t.element.isBlockElement(e[0]);return!n});i.forEach(function(t){var e=document.createElement("p");t[0].parentNode.insertBefore(e,t[0]),t.forEach(function(t){e.appendChild(t)})}),e._isWrapped=!0}function r(t,e){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),o=n.firstChild();o;){if("BLOCKQUOTE"===o.nodeName&&!o._isWrapped){i(t,o),r(t,e);break}o=n.nextSibling()}}var o=t("lodash-amd/modern/arrays/last");e.exports=function(){return function(t){t.registerHTMLFormatter("normalize",function(e){var n=document.createElement("div");return n.innerHTML=e,i(t,n),r(t,n),n.innerHTML})}}},{"lodash-amd/modern/arrays/last":56}],119:[function(t,e,n){function i(t,e){return t.isCaretPositionNode(e)?!0:""===e.parentNode.textContent.trim()}function r(t,e){function n(e){return 0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0])?!0:t.isBlockElement(e)||0!==e.children.length?!1:i(t,e)}for(var s=e.firstElementChild;s;)t.isSelectionMarkerNode(s)||(n(s)&&""===s.textContent.trim()&&!o(a,s.nodeName)?s.appendChild(document.createElement("br")):s.children.length>0&&r(t,s)),s=s.nextElementSibling}var o=(t("../../../../element"),t("lodash-amd/modern/collections/contains")),a=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];e.exports=function(){return function(t){t.registerHTMLFormatter("normalize",function(e){var n=document.createElement("div");return n.innerHTML=e,r(t.element,n),n.innerHTML})}}},{"../../../../element":106,"lodash-amd/modern/collections/contains":58}],120:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",function(t){return t.replace(e," ")})}}},{}],121:[function(t,e,n){var i=t("lodash-amd/modern/utilities/escape");e.exports=function(){return function(t){t.registerPlainTextFormatter(i)}}},{"lodash-amd/modern/utilities/escape":95}],122:[function(t,e,n){"use strict";function i(t){for(var e=document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1);e.nextNode();)if(e.currentNode&&(~["br"].indexOf(e.currentNode.nodeName.toLowerCase())||e.currentNode.length>0))return!0;return!1}e.exports=function(){return function(t){t.el.addEventListener("keydown",function(e){if(13===e.keyCode){var n=new t.api.Selection,r=n.range,o=n.getContaining(function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)});o||(e.preventDefault(),t.transactionManager.run(function(){"BR"===t.el.lastChild.nodeName&&t.el.removeChild(t.el.lastChild);var e=document.createElement("br");r.insertNode(e),r.collapse(!1);var o=r.cloneRange();o.setEndAfter(t.el.lastChild,0);var a=o.cloneContents();if(!i(a)){var s=document.createElement("br");r.insertNode(s)}var l=r.cloneRange();l.setStartAfter(e,0),l.setEndAfter(e,0),n.selection.removeAllRanges(),n.selection.addRange(l)}))}}.bind(this)),""===t.getHTML().trim()&&t.setContent("")}}},{}],123:[function(t,e,n){var i=t("./patches/commands/bold"),r=t("./patches/commands/indent"),o=t("./patches/commands/insert-html"),a=t("./patches/commands/insert-list"),s=t("./patches/commands/outdent"),l=t("./patches/commands/create-link"),u=t("./patches/events");e.exports={commands:{bold:i,indent:r,insertHTML:o,insertList:a,outdent:s,createLink:l},events:u}},{"./patches/commands/bold":124,"./patches/commands/create-link":125,"./patches/commands/indent":126,"./patches/commands/insert-html":127,"./patches/commands/insert-list":128,"./patches/commands/outdent":129,"./patches/events":130}],124:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!n},t.commandPatches.bold=e}}},{}],125:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var n=new t.api.Selection;if(n.range.collapsed){var i=document.createElement("a");i.setAttribute("href",e),i.textContent=e,n.range.insertNode(i);var r=document.createRange();r.setStartBefore(i),r.setEndAfter(i),n.selection.removeAllRanges(),n.selection.addRange(r)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}},{}],126:[function(t,e,n){"use strict";var i="\ufeff";e.exports=function(){return function(t){var e=new t.api.CommandPatch("indent");e.execute=function(e){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range,o="P"===r.commonAncestorContainer.nodeName&&"<br>"===r.commonAncestorContainer.innerHTML;if(o){var a=document.createTextNode(i);r.insertNode(a),r.setStart(a,0),r.setEnd(a,0),n.selection.removeAllRanges(),n.selection.addRange(r)}t.api.CommandPatch.prototype.execute.call(this,e),n=new t.api.Selection;var s=n.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});s&&s.removeAttribute("style")}.bind(this))},t.commandPatches.indent=e}}},{}],127:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),n=t.element;e.execute=function(e){t.transactionManager.run(function(){function i(t){var e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null,!1),r=e.firstChild();if(r)do"SPAN"===r.nodeName?n.unwrap(t,r):(r.style.lineHeight=null,""===r.getAttribute("style")&&r.removeAttribute("style")),i(r);while(r=e.nextSibling())}t.api.CommandPatch.prototype.execute.call(this,e),i(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}},{}],128:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=t.element,n=t.node,i=function(e){t.api.CommandPatch.call(this,e)};i.prototype=Object.create(t.api.CommandPatch.prototype),i.prototype.constructor=i,i.prototype.execute=function(i){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,i),this.queryState()){var r=new t.api.Selection,o=r.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName});if(o.nextElementSibling&&0===o.nextElementSibling.childNodes.length&&n.removeNode(o.nextElementSibling),o){var a=o.parentNode;a&&/^(H[1-6]|P)$/.test(a.nodeName)&&(r.placeMarkers(),n.insertAfter(o,a),r.selectMarkers(),2===a.childNodes.length&&n.isEmptyTextNode(a.firstChild)&&n.removeNode(a),0===a.childNodes.length&&n.removeNode(a))}var s=Array.prototype.slice.call(o.childNodes);s.forEach(function(t){var n=Array.prototype.slice.call(t.childNodes);n.forEach(function(n){if("SPAN"===n.nodeName){var i=n;e.unwrap(t,i)}else n.nodeType===Node.ELEMENT_NODE&&(n.style.lineHeight=null,""===n.getAttribute("style")&&n.removeAttribute("style"))})})}}.bind(this))},t.commandPatches.insertOrderedList=new i("insertOrderedList"),t.commandPatches.insertUnorderedList=new i("insertUnorderedList")}}},{}],129:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.CommandPatch("outdent");e.execute=function(){t.transactionManager.run(function(){var e=new t.api.Selection,n=e.range,i=e.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});if("BLOCKQUOTE"===n.commonAncestorContainer.nodeName){e.placeMarkers(),e.selectMarkers(!0);var r=n.cloneContents();i.parentNode.insertBefore(r,i),n.deleteContents(),e.selectMarkers(),""===i.textContent&&i.parentNode.removeChild(i)}else{var o=e.getContaining(function(t){return"P"===t.nodeName});if(o){var a=new t.api.Node(o).nextAll();if(a.length){var s=document.createElement(i.nodeName);a.forEach(function(t){s.appendChild(t)}),i.parentNode.insertBefore(s,i.nextElementSibling)}e.placeMarkers(),i.parentNode.insertBefore(o,i.nextElementSibling),e.selectMarkers(),""===i.innerHTML&&i.parentNode.removeChild(i)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=e}}},{}],130:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=t.element;t.allowsBlockElements()&&t.el.addEventListener("keyup",function(n){if(8===n.keyCode||46===n.keyCode){var i=new t.api.Selection,r=i.getContaining(function(t){return"P"===t.nodeName});r&&(t.undoManager&&t.undoManager.undo(),t.transactionManager.run(function(){i.placeMarkers();var t=Array.prototype.slice.call(r.childNodes);t.forEach(function(t){if("SPAN"===t.nodeName){var n=t;e.unwrap(r,n)}else t.nodeType===Node.ELEMENT_NODE&&(t.style.lineHeight=null,""===t.getAttribute("style")&&t.removeAttribute("style"))}),i.selectMarkers()}))}})}}},{}],131:[function(t,e,n){"use strict";e.exports=function(){return function(t){""===t.getHTML().trim()&&t.setContent("<p><br></p>")}}},{}],132:[function(t,e,n){function i(t,e){b.call(this),this.el=t,this.commands={},this.options=a(e||{},{allowBlockElements:!0,debug:!1,undo:{enabled:!0},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"]}),this.commandPatches={},this._plainTextFormatterFactory=new r,this._htmlFormatterFactory=new o,this.api=new g(this),this.node=x,this.element=w,this.Immutable=_;var n=v(this);if(this.transactionManager=new n,this.undoManager=!1,this.options.undo.enabled){var i=y(this);this.undoManager=new i}this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1),this.allowsBlockElements()?(this.use(m()),this.use(c()),this.use(h())):this.use(p());var k=_.List.of(d,u),$=_.List.of(f.events),S=_.List(this.options.defaultCommandPatches).map(function(t){return f.commands[t]}),T=_.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return s[t]}),E=_.List().concat(k,$,S,T);E.forEach(function(t){this.use(t())}.bind(this)),this.use(l())}function r(){this.formatters=_.List()}function o(){this.formatters={sanitize:_.List(),normalize:_.List(),"export":_.List()}}var a=t("lodash-amd/modern/objects/defaults"),s=t("./plugins/core/commands"),l=t("./plugins/core/events"),u=t("./plugins/core/formatters/html/replace-nbsp-chars"),c=t("./plugins/core/formatters/html/enforce-p-elements"),h=t("./plugins/core/formatters/html/ensure-selectable-containers"),d=t("./plugins/core/formatters/plain-text/escape-html-characters"),p=t("./plugins/core/inline-elements-mode"),f=t("./plugins/core/patches"),m=t("./plugins/core/set-root-p-element"),g=t("./api"),v=t("./transaction-manager"),y=t("./undo-manager"),b=t("./event-emitter"),w=t("./element"),x=t("./node"),_=t("immutable/dist/immutable");i.prototype=Object.create(b.prototype),i.prototype.use=function(t){return t(this),this},i.prototype.setHTML=function(t,e){e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},i.prototype.getHTML=function(){return this.el.innerHTML},i.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},i.prototype.getTextContent=function(){return this.el.textContent},i.prototype.pushHistory=function(){if(this.options.undo.enabled){var t=this.undoManager.stack[this.undoManager.position],e=t&&t.replace(/<em class="scribe-marker">/g,"").replace(/<\/em>/g,"");if(!t||t&&this.getHTML()!==e){var n=new this.api.Selection;n.placeMarkers();var i=this.getHTML();return n.removeMarkers(),this.undoManager.push(i),!0}return!1}return!1},i.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},i.prototype.restoreFromHistory=function(t){this.setHTML(t,!0);var e=new this.api.Selection;e.selectMarkers(),this.trigger("content-changed")},i.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},i.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger("content-changed")},i.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},i.prototype.insertHTML=function(t){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(t))},i.prototype.isDebugModeEnabled=function(){return this.options.debug},i.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},i.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},r.prototype.format=function(t){var e=this.formatters.reduce(function(t,e){return e(t)},t);return e},o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.format=function(t){var e=this.formatters.sanitize.concat(this.formatters.normalize),n=e.reduce(function(t,e){return e(t)},t);return n},o.prototype.formatForExport=function(t){return this.formatters["export"].reduce(function(t,e){return e(t)},t)},e.exports=i},{"./api":99,"./element":106,"./event-emitter":107,"./node":108,"./plugins/core/commands":109,"./plugins/core/events":117,"./plugins/core/formatters/html/enforce-p-elements":118,"./plugins/core/formatters/html/ensure-selectable-containers":119,"./plugins/core/formatters/html/replace-nbsp-chars":120,"./plugins/core/formatters/plain-text/escape-html-characters":121,"./plugins/core/inline-elements-mode":122,"./plugins/core/patches":123,"./plugins/core/set-root-p-element":131,"./transaction-manager":133,"./undo-manager":134,"immutable/dist/immutable":54,"lodash-amd/modern/objects/defaults":84}],133:[function(t,e,n){var i=t("lodash-amd/modern/objects/assign");e.exports=function(t){function e(){this.history=[]}return i(e.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(t.pushHistory(),t.trigger("content-changed"))},run:function(t){this.start();try{t&&t()}finally{this.end()}}}),e}},{"lodash-amd/modern/objects/assign":83}],134:[function(t,e,n){"use strict";e.exports=function(t){function e(){this.position=-1,this.stack=[],this.debug=t.isDebugModeEnabled()}return e.prototype.maxStackSize=100,e.prototype.push=function(t){for(this.debug&&console.log("UndoManager.push: %s",t),this.stack.length=++this.position,this.stack.push(t);this.stack.length>this.maxStackSize;)this.stack.shift(),--this.position},e.prototype.undo=function(){return this.position>0?this.stack[--this.position]:void 0},e.prototype.redo=function(){return this.position<this.stack.length-1?this.stack[++this.position]:void 0},e}},{}],135:[function(t,e,n){"use strict";e.exports=function(){return function(t){t.registerPlainTextFormatter(function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}},{}],136:[function(t,e,n){"use strict";e.exports=function(){return function(t){var e=new t.api.Command("createLink");e.nodeName="A",e.execute=function(){var e=new t.api.Selection,n=e.range,i=e.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this)),r=i?i.href:"http://",o=window.prompt("Enter a link.",r);if(i&&(n.selectNode(i),e.selection.removeAllRanges(),e.selection.addRange(n)),o){var a=/^https?\:\/\//;if(!a.test(o))if(!/^mailto\:/.test(o)&&/@/.test(o)){
var s=window.confirm("The URL you entered appears to be an email address. Do you want to add the required \u201cmailto:\u201d prefix?");s&&(o="mailto:"+o)}else{var l=window.confirm("The URL you entered appears to be a link. Do you want to add the required \u201chttp://\u201d prefix?");l&&(o="http://"+o)}t.api.SimpleCommand.prototype.execute.call(this,o)}},e.queryState=function(){var e=new t.api.Selection;return!!e.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this))},t.commands.linkPrompt=e}}},{}],137:[function(e,n,i){/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */
!function(e,r){"object"==typeof i?n.exports=r():"function"==typeof t&&t.amd?t(r):e.Spinner=r()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var r=["opacity",e,~~(100*t),n,i].join("-"),o=.01+n/i*100,a=Math.max(1-(1-t)/e*(100-o),t),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return h[r]||(d.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+a+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+a+"}}",d.cssRules.length),h[r]=1),r}function i(t,e){var n,i,r=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<c.length;i++)if(n=c[i]+e,void 0!==r[n])return n;return void 0!==r[e]?e:void 0}function r(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function s(t){this.opts=o(t||{},s.defaults,p)}function l(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}d.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(t,i){function o(){return r(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function s(t,s,l){e(d,e(r(o(),{rotation:360/i.lines*t+"deg",left:~~s}),e(r(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:a(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.length+i.width,c=2*u,h=2*-(i.width+i.length)+"px",d=r(o(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)s(l);return e(t,d)},s.prototype.opacity=function(t,e,n,i){var r=t.firstChild;i=i.shadow&&i.lines||0,r&&e+i<r.childNodes.length&&(r=r.childNodes[e+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var u,c=["webkit","Moz","ms","O"],h={},d=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},o(s.prototype,{spin:function(e){this.stop();var n=this,i=n.opts,o=n.el=r(t(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});if(r(o,{left:i.left,top:i.top}),e&&e.insertBefore(o,e.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!u){var a,s=0,l=(i.lines-1)*(1-i.direction)/2,c=i.fps,h=c/i.speed,d=(1-i.opacity)/(h*i.trail/100),p=h/i.lines;!function f(){s++;for(var t=0;t<i.lines;t++)a=Math.max(1-(s+(i.lines-t)*p)%h*d,i.opacity),n.opacity(o,t*i.direction+l,a,i);n.timeout=n.el&&setTimeout(f,~~(1e3/c))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,o){function s(e,n){return r(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var l,c=0,h=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)l=r(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:u&&n(o.opacity,o.trail,h+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(l,r(s("#000","0 0 4px #000"),{top:"2px"})),e(i,e(l,s(a(o.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var f=r(t("group"),{behavior:"url(#default#VML)"});return!i(f,"transform")&&f.adj?l():u=i(f,"animation"),s})},{}],138:[function(t,e,n){"use strict";var i=t("./lodash"),r=t("./blocks"),o=function(t){this.type=t,this.block_type=r[this.type].prototype,this.can_be_rendered=this.block_type.toolbarEnabled,this._ensureElement()};Object.assign(o.prototype,t("./function-bind"),t("./renderable"),t("./events"),{tagName:"a",className:"st-block-control",attributes:function(){return{"data-type":this.block_type.type}},render:function(){return this.$el.html('<span class="st-icon">'+i.result(this.block_type,"icon_name")+"</span>"+i.result(this.block_type,"title")),this}}),e.exports=o},{"./blocks":156,"./events":166,"./function-bind":173,"./lodash":178,"./renderable":180}],139:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("./blocks"),a=t("./block-control"),s=t("./event-bus"),l=function(t,e){this.available_types=t||[],this.mediator=e,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(l.prototype,t("./function-bind"),t("./mediated-events"),t("./renderable"),t("./events"),{bound:["handleControlButtonClick"],block_controls:null,className:"st-block-controls",eventNamespace:"block-controls",mediatedEvents:{render:"renderInContainer",show:"show",hide:"hide"},initialize:function(){for(var t in this.available_types)if(o.hasOwnProperty(t)){var e=new a(t);e.can_be_rendered&&this.$el.append(e.render().$el)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick),this.mediator.on("block-controls:show",this.renderInContainer)},show:function(){this.$el.addClass("st-block-controls--active"),s.trigger("block:controls:shown")},hide:function(){this.removeCurrentContainer(),this.$el.removeClass("st-block-controls--active"),s.trigger("block:controls:hidden")},handleControlButtonClick:function(t){t.stopPropagation(),this.mediator.trigger("block:create",r(t.currentTarget).attr("data-type"))},renderInContainer:function(t){this.removeCurrentContainer(),t.append(this.$el.detach()),t.addClass("with-st-controls"),this.currentContainer=t,this.show()},removeCurrentContainer:function(){i.isUndefined(this.currentContainer)||(this.currentContainer.removeClass("with-st-controls"),this.currentContainer=void 0)}}),e.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./block-control":138,"./blocks":156,"./event-bus":165,"./events":166,"./function-bind":173,"./lodash":178,"./mediated-events":179,"./renderable":180}],140:[function(t,e,n){"use strict";var i=function(){this._ensureElement(),this._bindFunctions()};Object.assign(i.prototype,t("./function-bind"),t("./renderable"),{tagName:"a",className:"st-block-ui-btn st-block-ui-btn--delete st-icon",attributes:{html:"delete","data-icon":"bin"}}),e.exports=i},{"./function-bind":173,"./renderable":180}],141:[function(t,e,n){"use strict";var i=t("./lodash"),r=t("./utils"),o=t("./config"),a=t("./event-bus"),s=t("./blocks"),l=["convertToMarkdown","convertFromMarkdown","formatBar"],u=function(t,e,n){this.options=t,this.blockOptions=l.reduce(function(e,n){return e[n]=t[n],e},{}),this.instance_scope=e,this.mediator=n,this.blocks=[],this.blockCounts={},this.blockTypes={},this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(u.prototype,t("./function-bind"),t("./mediated-events"),t("./events"),{eventNamespace:"block",mediatedEvents:{create:"createBlock",remove:"removeBlock",rerender:"rerenderBlock"},initialize:function(){},createBlock:function(t,e){if(t=r.classify(t),this.canCreateBlock(t)){var n=new s[t](e,this.instance_scope,this.mediator,this.blockOptions);this.blocks.push(n),this._incrementBlockTypeCount(t),this.mediator.trigger("block:render",n),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),a.trigger(e?"block:create:existing":"block:create:new",n),r.log("Block created of type "+t)}},removeBlock:function(t){var e=this.findBlockById(t),n=r.classify(e.type);this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(t){return t.blockID!==e.blockID}),this._decrementBlockTypeCount(n),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),a.trigger("block:remove")},rerenderBlock:function(t){var e=this.findBlockById(t);i.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(r.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?this.canAddBlockType(t)?!0:(r.log("Block Limit reached for type "+t),!1):(r.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){return o.skipValidation||!t?!1:void(this.required||[]).forEach(function(t,e){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))r.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{var n=this.getBlocksByType(t).filter(function(t){return!t.isEmpty()});if(n.length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),r.log("A required block type "+t+" is empty")}},this)},findBlockById:function(t){return this.blocks.find(function(e){return e.blockID===t})},getBlocksByType:function(t){return this.blocks.filter(function(e){return r.classify(e.type)===t})},getBlocksByIDs:function(t){return this.blocks.filter(function(e){return t.includes(e.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return!i.isUndefined(this.blockTypes[t])},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=r.flatten(i.isUndefined(this.options.blockTypes)?s:this.options.blockTypes)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!i.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return i.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(i.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),e.exports=u},{"./blocks":156,"./config":162,"./event-bus":165,"./events":166,"./function-bind":173,"./lodash":178,"./mediated-events":179,"./utils":184}],142:[function(t,e,n){"use strict";var i=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n"),r=function(t,e){this.mediator=e,this.$block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(r.prototype,t("./function-bind"),t("./renderable"),{total_blocks:0,bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"st-block-positioner--is-visible",initialize:function(){this.$el.append(i),this.$select=this.$(".st-block-positioner__select"),this.$select.on("change",this.onSelectChange),this.mediator.on("block:countUpdate",this.onBlockCountChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.$select.val();0!==t&&(this.mediator.trigger("block:changePosition",this.$block,t,1===t?"before":"after"),this.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.$select.html(t)},toggle:function(){this.$select.val(0),this.$el.toggleClass(this.visibleClass)},show:function(){this.$el.addClass(this.visibleClass)},hide:function(){this.$el.removeClass(this.visibleClass)}}),e.exports=r},{"./function-bind":173,"./renderable":180}],143:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("./event-bus"),a=function(t,e){this.$block=t,this.blockID=this.$block.attr("id"),this.mediator=e,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(a.prototype,t("./function-bind"),t("./renderable"),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn st-block-ui-btn--reorder st-icon",tagName:"a",attributes:function(){return{html:"reorder",draggable:"true","data-icon":"move"}},initialize:function(){this.$el.bind("mousedown touchstart",this.onMouseDown).bind("dragstart",this.onDragStart).bind("dragend touchend",this.onDragEnd),this.$block.dropArea().bind("drop",this.onDrop)},blockId:function(){return this.$block.attr("id")},onMouseDown:function(){this.mediator.trigger("block-controls:hide"),o.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.$block,n=t.originalEvent.dataTransfer.getData("text/plain"),a=r("#"+n);i.isUndefined(n)||i.isEmpty(a)||e.attr("id")===n||e.attr("data-instance")!==a.attr("data-instance")||e.after(a),this.mediator.trigger("block:rerender",n),o.trigger("block:reorder:dropped",n)},onDragStart:function(t){var e=r(t.currentTarget).parent();t.originalEvent.dataTransfer.setDragImage(this.$block[0],e.position().left,e.position().top),t.originalEvent.dataTransfer.setData("Text",this.blockId()),o.trigger("block:reorder:dragstart"),this.$block.addClass("st-block--dragging")},onDragEnd:function(t){o.trigger("block:reorder:dragend"),this.$block.removeClass("st-block--dragging")},render:function(){return this}}),e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event-bus":165,"./function-bind":173,"./lodash":178,"./renderable":180}],144:[function(t,e,n){"use strict";var i=t("./lodash"),r=t("./utils"),o=t("./event-bus");e.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:r.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();i.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){r.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){r.log("loadData for "+this.blockID),o.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){r.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){i.isEmpty(this._getData())||this.beforeLoadingData()}}},{"./event-bus":165,"./lodash":178,"./utils":184}],145:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("./utils"),a=function(t){var e=t.attr("data-st-name")||t.attr("name");return e||(e="Field"),o.capitalize(e)};e.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");t.each(function(t,e){this.validateField(e)}.bind(this)),this.validations.forEach(this.runValidator,this),this.$el.toggleClass("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){t=r(t);var e=t.attr("contenteditable")?t.text():t.val();0===e.length&&this.setError(t,i18n.t("errors:block_empty",{name:a(t)}))},runValidator:function(t){i.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.addClass("st-error"),this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){this.errors.forEach(function(t){t.field.removeClass("st-error"),t.msg.remove()}),this.$messages.removeClass("st-block__messages--is-visible"),this.errors=[]}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lodash":178,"./utils":184}],146:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("scribe-editor"),a=t("scribe-plugin-formatter-plain-text-convert-new-lines-to-html"),s=t("scribe-plugin-link-prompt-command"),l=t("./config"),u=t("./utils"),c=t("./to-markdown"),h=t("./block_mixins"),d=t("./simple-block"),p=t("./block-reorder"),f=t("./block-deletion"),m=t("./block-positioner"),g=t("./event-bus"),v=t("spin.js"),y=function(t,e,n,i){d.apply(this,arguments)};y.prototype=Object.create(d.prototype),y.prototype.constructor=y;var b=["<div class='st-block__ui-delete-controls'>","<label class='st-block__delete-label'>","<%= i18n.t('general:delete') %>","</label>","<a class='st-block-ui-btn st-block-ui-btn--confirm-delete st-icon' data-icon='tick'></a>","<a class='st-block-ui-btn st-block-ui-btn--deny-delete st-icon' data-icon='close'></a>","</div>"].join("\n");Object.assign(y.prototype,d.fn,t("./block-validations"),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender"],className:"st-block st-icon--add",attributes:function(){return Object.assign(d.fn.attributes.call(this),{"data-icon-after":"add"})},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title()})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(i.isObject(t)){var e="initialize"+t.mixinName;i.isUndefined(this[e])&&(Object.assign(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.$editor=this.$inner.children().first(),this.droppable||this.pastable||this.uploadable){var t=r("<div>",{"class":"st-block__inputs"});this.$inner.append(t),this.$inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(t){this[t]&&this.withMixin(h[u.classify(t)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),this.$el.remove()},loading:function(){i.isUndefined(this.spinner)||this.ready(),this.spinner=new v(l.defaults.spinner),this.spinner.spin(this.$el[0]),this.$el.addClass("st--is-loading")},ready:function(){this.$el.removeClass("st--is-loading"),i.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){u.log("toData for "+this.blockID);var t={};return this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.text.length>0&&this.options.convertToMarkdown&&(t.text=c(t.text,this.type))),this.$(":input").not(".st-paste-block").length>0&&this.$(":input").each(function(e,n){n.getAttribute("name")&&(t[n.getAttribute("name")]=n.value)}),t},focus:function(){this.getTextBlock().focus()},blur:function(){this.getTextBlock().blur()},onFocus:function(){this.getTextBlock().bind("focus",this._onFocus)},onBlur:function(){this.getTextBlock().bind("blur",this._onBlur)},_onFocus:function(){this.trigger("blockFocus",this.$el)},_onBlur:function(){},onBlockRender:function(){this.focus()},onDrop:function(t){},onDeleteClick:function(t){t.preventDefault();var e=function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID),this.remove()},n=function(t){t.preventDefault(),this.$el.removeClass("st-block--delete-active"),r.remove()};if(this.isEmpty())return void e.call(this,new Event("click"));this.$inner.append(i.template(b)),this.$el.addClass("st-block--delete-active");var r=this.$inner.find(".st-block__ui-delete-controls");this.$inner.on("click",".st-block-ui-btn--confirm-delete",e.bind(this)).on("click",".st-block-ui-btn--deny-delete",n.bind(this))},beforeLoadingData:function(){this.loading(),(this.droppable||this.uploadable||this.pastable)&&(this.$editor.show(),this.$inputs.hide()),d.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(i.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";var e=this._scribe.getCommand(t);this._scribe.el.focus(),e.execute()},queryTextBlockCommandState:function(t){if(i.isUndefined(this._scribe))throw"No Scribe instance found to query command";var e=this._scribe.getCommand(t),n=new this._scribe.api.Selection;return n.range&&e.queryState()},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,r(t.currentTarget)),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){var t=new m(this.$el,this.mediator);this._withUIComponent(t,".st-block-ui-btn--reorder",t.toggle),this._withUIComponent(new p(this.$el,this.mediator)),this._withUIComponent(new f,".st-block-ui-btn--delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(e){if(!i.isUndefined(e.keyCode)){var n=!1;t.$el.on("keyup",".st-text-block",function(t){(17===t.which||224===t.which||91===t.which)&&(n=!1)}).on("keydown",".st-text-block",{formatter:e},function(e){(17===e.which||224===e.which||91===e.which)&&(n=!0),e.which===e.data.formatter.keyCode&&n&&(e.preventDefault(),t.execTextBlockCommand(e.data.formatter.cmd))})}})},_initTextBlocks:function(){this.getTextBlock().bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter).bind("DOMNodeInserted",this.clearInsertedStyles);var t=this.getTextBlock().get(0);!i.isUndefined(t)&&i.isUndefined(this._scribe)&&(this._scribe=new o(t,{debug:l.scribeDebug}),this._scribe.use(a()),this._scribe.use(s()),i.isFunction(this.options.configureScribe)&&this.options.configureScribe.call(this,this._scribe))},getSelectionForFormatter:function(){var t=this;setTimeout(function(){var e=window.getSelection(),n=e.toString().trim(),i="formatter:"+(""===n?"hide":"position");t.mediator.trigger(i,t),g.trigger(i,t)},1)},clearInsertedStyles:function(t){var e=t.target;e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return i.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getHTML()},setTextBlockHTML:function(t){return this._scribe.setContent(t)},isEmpty:function(){return i.isEmpty(this.getBlockData())}}),y.extend=t("./helpers/extend"),e.exports=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./block-deletion":140,"./block-positioner":142,"./block-reorder":143,"./block-validations":145,"./block_mixins":151,"./config":162,"./event-bus":165,"./helpers/extend":175,"./lodash":178,"./simple-block":181,"./to-markdown":183,"./utils":184,"scribe-editor":132,"scribe-plugin-formatter-plain-text-convert-new-lines-to-html":135,"scribe-plugin-link-prompt-command":136,"spin.js":137}],147:[function(t,e,n){"use strict";var i=t("../utils");e.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){i.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){i.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter(function(e){return e.name!==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(t){i.log("Aborting queued request: "+t.name),t.deferred.abort()},this)}}},{"../utils":184}],148:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("../utils");e.exports={mixinName:"Controllable",initializeControllable:function(){r.log("Adding controllable to block "+this.blockID),this.$control_ui=i("<div>",{"class":"st-block__control-ui"}),Object.keys(this.controls).forEach(function(t){this.addUiControl(t,this.controls[t].bind(this))},this),this.$inner.append(this.$control_ui)},getControlTemplate:function(t){return i("<a>",{"data-icon":t,"class":"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t})},addUiControl:function(t,e){this.$control_ui.append(this.getControlTemplate(t)),this.$control_ui.on("click",".st-block-control-ui-btn--"+t,e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils":184}],149:[function(t,e,n){(function(n){"use strict";var i=t("../lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("../config"),a=t("../utils"),s=t("../event-bus");e.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],initializeDroppable:function(){a.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},o.defaults.Block.drop_options,this.drop_options);var t=r(i.template(this.drop_options.html,{block:this,_:i}));this.$editor.hide(),this.$inputs.append(t),this.$dropzone=t,this.$dropzone.dropArea().bind("drop",this._handleDrop.bind(this)),this.$inner.addClass("st-block__inner--droppable")},_handleDrop:function(t){t.preventDefault(),t=t.originalEvent;var e=r(t.target),n=t.dataTransfer.types;e.removeClass("st-dropzone--dragover"),n&&n.some(function(t){return this.valid_drop_file_types.includes(t)},this)&&this.onDrop(t.dataTransfer),s.trigger("block:content:dropped",this.blockID)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../config":162,"../event-bus":165,"../lodash":178,"../utils":184}],150:[function(t,e,n){(function(n){"use strict";var i=t("../lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null;e.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(t("./ajaxable"))},fetch:function(t,e,n){var o=i.uniqueId(this.blockID+"_fetch"),a=r.ajax(t);return this.resetMessages(),this.addQueuedItem(o,a),i.isUndefined(e)||a.done(e.bind(this)),i.isUndefined(n)||a.fail(n.bind(this)),a.always(this.removeQueuedItem.bind(this,o)),a}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lodash":178,"./ajaxable":147}],151:[function(t,e,n){"use strict";e.exports={Ajaxable:t("./ajaxable.js"),Controllable:t("./controllable.js"),Droppable:t("./droppable.js"),Fetchable:t("./fetchable.js"),Pastable:t("./pastable.js"),Uploadable:t("./uploadable.js")}},{"./ajaxable.js":147,"./controllable.js":148,"./droppable.js":149,"./fetchable.js":150,"./pastable.js":152,"./uploadable.js":153}],152:[function(t,e,n){(function(n){"use strict";var i=t("../lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("../config"),a=t("../utils");e.exports={mixinName:"Pastable",initializePastable:function(){a.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},o.defaults.Block.paste_options,this.paste_options),this.$inputs.append(i.template(this.paste_options.html,this)),this.$(".st-paste-block").bind("click",function(){r(this).select()}).bind("paste",this._handleContentPaste).bind("submit",this._handleContentPaste)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../config":162,"../lodash":178,"../utils":184}],153:[function(t,e,n){"use strict";var i=t("../lodash"),r=t("../config"),o=t("../utils"),a=t("../extensions/file-uploader");e.exports={mixinName:"Uploadable",uploadsCount:0,initializeUploadable:function(){o.log("Adding uploadable to block "+this.blockID),this.withMixin(t("./ajaxable")),this.upload_options=Object.assign({},r.defaults.Block.upload_options,this.upload_options),this.$inputs.append(i.template(this.upload_options.html,this))},uploader:function(t,e,n){return a(this,t,e,n)}}},{"../config":162,"../extensions/file-uploader":168,"../lodash":178,"../utils":184,"./ajaxable":147}],154:[function(t,e,n){"use strict";var i=t("../block"),r=t("../to-html");e.exports=i.extend({type:"Heading",title:function(){return i18n.t("blocks:heading:title")},editorHTML:'<div class="st-required st-text-block st-text-block--heading" contenteditable="true"></div>',icon_name:"heading",loadData:function(t){this.getTextBlock().html(r(t.text,this.type))}})},{"../block":146,"../to-html":182}],155:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("../block");e.exports=r.extend({type:"image",title:function(){return i18n.t("blocks:image:title")},droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.$editor.html(i("<img>",{src:t.file.url}))},onBlockRender:function(){this.$inputs.find("button").bind("click",function(t){t.preventDefault()}),this.$inputs.find("input").on("change",function(t){this.onDrop(t.currentTarget)}.bind(this))},onDrop:function(t){var e=t.files[0],n="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),this.$inputs.hide(),this.$editor.html(i("<img>",{src:n.createObjectURL(e)})).show(),this.uploader(e,function(t){this.setData(t),this.ready()},function(t){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../block":146}],156:[function(t,e,n){"use strict";e.exports={Text:t("./text"),Quote:t("./quote"),Image:t("./image"),Heading:t("./heading"),List:t("./list"),Tweet:t("./tweet"),Video:t("./video")}},{"./heading":154,"./image":155,"./list":157,"./quote":158,"./text":159,"./tweet":160,"./video":161}],157:[function(t,e,n){"use strict";var i=t("../lodash"),r=t("../block"),o=t("../to-html"),a='<div class="st-text-block st-required" contenteditable="true"><ul><li></li></ul></div>';e.exports=r.extend({type:"list",title:function(){return i18n.t("blocks:list:title")},icon_name:"list",editorHTML:function(){return i.template(a,this)},loadData:function(t){this.setTextBlockHTML("<ul>"+o(t.text,this.type)+"</ul>")},onBlockRender:function(){this.checkForList=this.checkForList.bind(this),this.getTextBlock().on("click keyup",this.checkForList),this.focus()},checkForList:function(){0===this.$("ul").length&&document.execCommand("insertUnorderedList",!1,!1)},toMarkdown:function(t){return t.replace(/<\/li>/gm,"\n").replace(/<\/?[^>]+(>|$)/g,"").replace(/^(.+)$/gm," - $1")},toHTML:function(t){return t=t.replace(/^ - (.+)$/gm,"<li>$1</li>").replace(/\n/gm,"")},onContentPasted:function(t,e){this.$("ul").html(this.pastedMarkdownToHTML(e[0].innerHTML)),this.getTextBlock().caretToEnd()},isEmpty:function(){return i.isEmpty(this.getBlockData().text)}})},{"../block":146,"../lodash":178,"../to-html":182}],158:[function(t,e,n){"use strict";var i=t("../lodash"),r=t("../block"),o=t("../to-html"),a=i.template(['<blockquote class="st-required st-text-block" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string st-required js-cite-input" type="text" />'].join("\n"));e.exports=r.extend({type:"quote",title:function(){return i18n.t("blocks:quote:title")},icon_name:"quote",editorHTML:function(){return a(this)},loadData:function(t){this.getTextBlock().html(o(t.text,this.type)),this.$(".js-cite-input").val(t.cite)},toMarkdown:function(t){return t.replace(/^(.+)$/gm,"> $1")}})},{"../block":146,"../lodash":178,"../to-html":182}],159:[function(t,e,n){"use strict";var i=t("../block"),r=t("../to-html");e.exports=i.extend({type:"text",title:function(){return i18n.t("blocks:text:title")},editorHTML:'<div class="st-required st-text-block" contenteditable="true"></div>',
icon_name:"text",markdownSupport:!0,_serializeData:function(){var t=i.prototype._serializeData.apply(this);return Object.keys(t).length&&this.markdownSupport&&(t.isHtml=!0),t},loadData:function(t){this.markdownSupport&&!t.isHtml?this.getTextBlock().html(r(t.text,this.type)):this.getTextBlock().html(t.text)}})},{"../block":146,"../to-html":182}],160:[function(t,e,n){(function(n){"use strict";var i=t("../lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("../utils"),a=t("../block"),s=i.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>",'<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>'].join("\n"));e.exports=a.extend({type:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},title:function(){return i18n.t("blocks:tweet:title")},fetchUrl:function(t){return"/tweets/?tweet_id="+t},icon_name:"twitter",loadData:function(t){i.isUndefined(t.status_url)&&(t.status_url=""),this.$inner.find("iframe").remove(),this.$inner.prepend(s(t))},onContentPasted:function(t){var e=r(t.target),n=e.val();this.handleTwitterDropPaste(n)},handleTwitterDropPaste:function(t){if(!this.validTweetUrl(t))return void o.log("Invalid Tweet URL");var e=t.match(/[^\/]+$/);if(!i.isEmpty(e)){this.loading(),e=e[0];var n={url:this.fetchUrl(e),dataType:"json"};this.fetch(n,this.onTweetSuccess,this.onTweetFail)}},validTweetUrl:function(t){return o.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../block":146,"../lodash":178,"../utils":184}],161:[function(t,e,n){"use strict";var i=t("../lodash"),r=t("../utils"),o=t("../block");e.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo.com\/(.+)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/(?:http[s]?:\/\/)?(?:www.)?(?:(?:youtube.com\/watch\?(?:.*)(?:v=))|(?:youtu.be\/))([^&].+)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",title:function(){return i18n.t("blocks:video:title")},droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],n="file:"===window.location.protocol?"http:":window.location.protocol,r=e.square?"with-square-media":"with-sixteen-by-nine-media";this.$editor.addClass("st-block__editor--"+r).html(i.template(e.html,{protocol:n,remote_id:t.remote_id,width:this.$editor.width()}))}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,n){var r=t.regex.exec(n);return null==r||i.isUndefined(r[1])?{}:{source:e,remote_id:r[1]}},handleDropPaste:function(t){if(r.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)}})},{"../block":146,"../lodash":178,"../utils":184}],162:[function(t,e,n){"use strict";var i={html:['<div class="st-block__dropzone">','<span class="st-icon"><%= _.result(block, "icon_name") %></span>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},r={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},o={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};e.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:i,paste_options:r,upload_options:o},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",baseImageUrl:"/sir-trevor-uploads/",errorsContainer:void 0,convertToMarkdown:!1,convertFromMarkdown:!0,formatBar:{commands:[{name:"Bold",title:"bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"link",cmd:"unlink",text:"link"}]}}}},{}],163:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("./config"),a=t("./utils"),s=t("./events"),l=t("./event-bus"),u=t("./form-events"),c=t("./block-controls"),h=t("./block-manager"),d=t("./floating-block-controls"),p=t("./format-bar"),f=t("./extensions/editor-store"),m=t("./error-handler"),g=function(t){this.initialize(t)};Object.assign(g.prototype,t("./function-bind"),t("./events"),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","renderBlock","resetBlockControls","blockLimitReached"],events:{"block:reorder:dragend":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){return a.log("Init SirTrevor.Editor"),this.options=Object.assign({},o.defaults,t||{}),this.ID=i.uniqueId("st-editor-"),this._ensureAndSetElements()?(!i.isUndefined(this.options.onEditorRender)&&i.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},s),this._bindFunctions(),o.instances.push(this),this.build(),void u.bindFormSubmit(this.$form)):!1},build:function(){this.$el.hide(),this.errorHandler=new m(this.$outer,this.mediator,this.options.errorsContainer),this.store=new f(this.$el.val(),this.mediator),this.block_manager=new h(this.options,this.ID,this.mediator),this.block_controls=new c(this.block_manager.blockTypes,this.mediator),this.fl_block_controls=new d(this.$wrapper,this.ID,this.mediator),this.formatBar=new p(this.options.formatBar,this.mediator),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block-controls:reset",this.resetBlockControls),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:render",this.renderBlock),this.dataStore="Please use store.retrieve();",this._setEvents(),this.$wrapper.prepend(this.fl_block_controls.render().$el),r(document.body).append(this.formatBar.render().$el),this.$outer.append(this.block_controls.render().$el),r(window).bind("click",this.hideAllTheThings),this.createBlocks(),this.$wrapper.addClass("st-ready"),i.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();t.data.length>0?t.data.forEach(function(t){this.mediator.trigger("block:create",t.type,t.data)},this):this.options.defaultType!==!1&&this.mediator.trigger("block:create",this.options.defaultType,{})},destroy:function(){this.formatBar.destroy(),this.fl_block_controls.destroy(),this.block_controls.destroy(),this.blocks.forEach(function(t){this.mediator.trigger("block:remove",this.block.blockID)},this),this.mediator.stopListening(),this.stopListening(),o.instances=o.instances.filter(function(t){return t.ID!==this.ID},this),this.store.reset(),this.$outer.replaceWith(this.$el.detach())},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},resetBlockControls:function(){this.block_controls.renderInContainer(this.$wrapper),this.block_controls.hide()},blockLimitReached:function(t){this.$wrapper.toggleClass("st--block-limit-reached",t)},_setEvents:function(){Object.keys(this.events).forEach(function(t){l.on(t,this[this.events[t]],this)},this)},hideAllTheThings:function(t){this.block_controls.hide(),this.formatBar.hide()},store:function(t,e){return a.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},renderBlock:function(t){this._renderInPosition(t.render().$el),this.hideAllTheThings(),this.scrollTo(t.$el),t.trigger("onRender")},scrollTo:function(t){r("html, body").animate({scrollTop:t.position().top},300,"linear")},removeBlockDragOver:function(){this.$outer.find(".st-drag-over").removeClass("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var n=this.getBlockPosition(t),i=this.$wrapper.find(".st-block").eq(e),r=n>e?"Before":"After";i&&i.attr("id")!==t.attr("id")&&(this.hideAllTheThings(),t["insert"+r](i),this.scrollTo(t))},_renderInPosition:function(t){this.block_controls.currentContainer?this.block_controls.currentContainer.after(t):this.$wrapper.append(t)},validateAndSaveBlock:function(t,e){if((!o.skipValidation||e)&&!t.valid())return this.mediator.trigger("errors:add",{text:i.result(t,"validationFailMsg")}),void a.log("Block "+t.blockID+" failed validation");var n=t.getData();a.log("Adding data for block "+t.blockID+" to block store:",n),this.store.addData(n)},onFormSubmit:function(t){return t=t===!1?!1:!0,a.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.block_manager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.$el.val(this.store.toString()),this.errorHandler.errors.length},validateBlocks:function(t){var e=this;this.$wrapper.find(".st-block").each(function(n,o){var a=e.block_manager.findBlockById(r(o).attr("id"));i.isUndefined(a)||e.validateAndSaveBlock(a,t)})},findBlockById:function(t){return this.block_manager.findBlockById(t)},getBlocksByType:function(t){return this.block_manager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.block_manager.getBlocksByIDs(t)},getBlockPosition:function(t){return this.$wrapper.find(".st-block").index(t)},_ensureAndSetElements:function(){if(i.isUndefined(this.options.el)||i.isEmpty(this.options.el))return a.log("You must provide an el"),!1;this.$el=this.options.el,this.el=this.options.el[0],this.$form=this.$el.parents("form");var t=r("<div>").attr({id:this.ID,"class":"st-outer",dropzone:"copy link move"}),e=r("<div>").attr({"class":"st-blocks"});return this.$el.wrap(t).wrap(e),this.$outer=this.$form.find("#"+this.ID),this.$wrapper=this.$outer.find(".st-blocks"),!0}}),e.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./block-controls":139,"./block-manager":141,"./config":162,"./error-handler":164,"./event-bus":165,"./events":166,"./extensions/editor-store":167,"./floating-block-controls":170,"./form-events":171,"./format-bar":172,"./function-bind":173,"./lodash":178,"./utils":184}],164:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=function(t,e,n){this.$wrapper=t,this.mediator=e,this.$el=n,i.isUndefined(this.$el)&&(this._ensureElement(),this.$wrapper.prepend(this.$el)),this.$el.hide(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,t("./function-bind"),t("./mediated-events"),t("./renderable"),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=r("<ul>");this.$el.append("<p>"+i18n.t("errors:title")+"</p>").append(t),this.$list=t},render:function(){return 0===this.errors.length?!1:(this.errors.forEach(this.createErrorItem,this),void this.$el.show())},createErrorItem:function(t){var e=r("<li>",{"class":"st-errors__msg",html:t.text});this.$list.append(e)},addMessage:function(t){this.errors.push(t)},reset:function(){return 0===this.errors.length?!1:(this.errors=[],this.$list.html(""),void this.$el.hide())}}),e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./function-bind":173,"./lodash":178,"./mediated-events":179,"./renderable":180}],165:[function(t,e,n){"use strict";e.exports=Object.assign({},t("./events"))},{"./events":166}],166:[function(t,e,n){"use strict";e.exports=t("eventablejs")},{eventablejs:3}],167:[function(t,e,n){"use strict";var i=t("../lodash"),r=t("../utils"),o=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};Object.assign(o.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,void 0,t)},reset:function(){r.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var n=JSON.parse(t);i.isUndefined(n.data)||(e=n)}catch(r){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(r)}return e}}),e.exports=o},{"../lodash":178,"../utils":184}],168:[function(t,e,n){(function(n){"use strict";var i=t("../lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("../config"),a=t("../utils"),s=t("../event-bus");e.exports=function(t,e,n,l){s.trigger("onUploadStart");var u=[t.blockID,(new Date).getTime(),"raw"].join("-"),c=new FormData;c.append("attachment[name]",e.name),c.append("attachment[file]",e),c.append("attachment[uid]",u),t.resetMessages();var h=function(e){a.log("Upload callback called"),s.trigger("onUploadStop"),!i.isUndefined(n)&&i.isFunction(n)&&n.apply(t,arguments)},d=function(e,n,r){a.log("Upload callback error called"),s.trigger("onUploadStop"),!i.isUndefined(l)&&i.isFunction(l)&&l.call(t,n)},p=r.ajax({url:o.defaults.uploadUrl,data:c,cache:!1,contentType:!1,processData:!1,dataType:"json",type:"POST"});return t.addQueuedItem(u,p),p.done(h).fail(d).always(t.removeQueuedItem.bind(t,u)),p}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../config":162,"../event-bus":165,"../lodash":178,"../utils":184}],169:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("../utils"),o=t("../event-bus"),a=function(t){this.$form=t,this.intialize()};Object.assign(a.prototype,{intialize:function(){this.submitBtn=this.$form.find("input[type='submit']");var t=[];this.submitBtn.each(function(e,n){t.push(i(n).attr("value"))}),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){this.submitBtn.attr("value",e)},resetSubmitButton:function(){var t=this.submitBtnTitles;this.submitBtn.each(function(e,n){i(n).attr("value",t[e])})},onUploadStart:function(t){this.globalUploadCount++,r.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(t){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,r.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(t){r.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),this.submitBtn.attr("disabled","disabled").addClass("disabled")},_enableSubmitButton:function(){this.resetSubmitButton(),this.submitBtn.removeAttr("disabled").removeClass("disabled")},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(t){o.on(t,this[this._events[t]],this)},this)}}),e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../event-bus":165,"../utils":184}],170:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("./event-bus"),a=function(t,e,n){this.$wrapper=t,this.instance_id=e,this.mediator=n,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(a.prototype,t("./function-bind"),t("./renderable"),t("./events"),{className:"st-block-controls__top",attributes:function(){return{"data-icon":"add"}},bound:["handleBlockMouseOut","handleBlockMouseOver","handleBlockClick","onDrop"],initialize:function(){this.$el.on("click",this.handleBlockClick).dropArea().bind("drop",this.onDrop),this.$wrapper.on("mouseover",".st-block",this.handleBlockMouseOver).on("mouseout",".st-block",this.handleBlockMouseOut).on("click",".st-block--with-plus",this.handleBlockClick)},onDrop:function(t){t.preventDefault();var e=this.$el,n=t.originalEvent.dataTransfer.getData("text/plain"),a=r("#"+n);i.isUndefined(n)||i.isEmpty(a)||e.attr("id")===n||this.instance_id!==a.attr("data-instance")||e.after(a),o.trigger("block:reorder:dropped",n)},handleBlockMouseOver:function(t){var e=r(t.currentTarget);e.hasClass("st-block--with-plus")||e.addClass("st-block--with-plus")},handleBlockMouseOut:function(t){var e=r(t.currentTarget);e.hasClass("st-block--with-plus")&&e.removeClass("st-block--with-plus")},handleBlockClick:function(t){t.stopPropagation(),this.mediator.trigger("block-controls:render",r(t.currentTarget))}}),e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event-bus":165,"./events":166,"./function-bind":173,"./lodash":178,"./renderable":180}],171:[function(t,e,n){"use strict";var i=t("./config"),r=t("./utils"),o=t("./event-bus"),a=t("./extensions/submittable"),s=!1,l={bindFormSubmit:function(t){s||(new a(t),t.bind("submit",this.onFormSubmit),s=!0)},onBeforeSubmit:function(t){var e=0;return i.instances.forEach(function(n,i){e+=n.onFormSubmit(t)}),r.log("Total errors: "+e),e},onFormSubmit:function(t){var e=l.onBeforeSubmit();e>0&&(o.trigger("onError"),t.preventDefault())}};e.exports=l},{"./config":162,"./event-bus":165,"./extensions/submittable":169,"./utils":184}],172:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,o=t("./config"),a=t("./utils"),s=function(t,e){this.options=Object.assign({},o.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(s.prototype,t("./function-bind"),t("./mediated-events"),t("./events"),t("./renderable"),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){this.$btns=[],this.commands.forEach(function(t){var e=r("<button>",{"class":"st-format-btn st-format-btn--"+t.name+" "+(t.iconName?"st-icon":""),text:t.text,"data-cmd":t.cmd});this.$btns.push(e),e.appendTo(this.$el)},this),this.$b=r(document),this.$el.bind("click",".st-format-btn",this.onFormatButtonClick)},hide:function(){this.$el.removeClass("st-format-bar--is-ready")},show:function(){this.$el.addClass("st-format-bar--is-ready")},remove:function(){this.$el.remove()},renderBySelection:function(){var t=window.getSelection(),e=t.getRangeAt(0),n=e.getBoundingClientRect(),i={};i.top=n.top+20+window.pageYOffset-this.$el.height()+"px",i.left=(n.left+n.right)/2-this.$el.width()/2+"px",this.highlightSelectedButtons(),this.show(),this.$el.css(i)},highlightSelectedButtons:function(){var t=a.getBlockBySelection();this.$btns.forEach(function(e){var n=r(e).data("cmd");e.toggleClass("st-format-btn--is-active",t.queryTextBlockCommandState(n))},this)},onFormatButtonClick:function(t){t.stopPropagation();var e=a.getBlockBySelection();if(i.isUndefined(e))throw"Associated block not found";var n=r(t.target),o=n.data("cmd");return i.isUndefined(o)?!1:(e.execTextBlockCommand(o),this.highlightSelectedButtons(),!1)}}),e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":162,"./events":166,"./function-bind":173,"./lodash":178,"./mediated-events":179,"./renderable":180,"./utils":184}],173:[function(t,e,n){"use strict";e.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(t){this[t]=this[t].bind(this)},this)}}},{}],174:[function(t,e,n){(function(t){"use strict";function e(t){t.preventDefault()}function n(t){t.originalEvent.dataTransfer.dropEffect="copy",r(t.currentTarget).addClass("st-drag-over"),t.preventDefault()}function i(t){r(t.currentTarget).removeClass("st-drag-over"),t.preventDefault()}var r="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null;r.fn.dropArea=function(){return this.bind("dragenter",e).bind("dragover",n).bind("dragleave",i),this},r.fn.noDropArea=function(){return this.unbind("dragenter").unbind("dragover").unbind("dragleave"),this},r.fn.caretToEnd=function(){var t,e;return t=document.createRange(),t.selectNodeContents(this[0]),t.collapse(!1),e=window.getSelection(),e.removeAllRanges(),e.addRange(t),this}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],175:[function(t,e,n){"use strict";e.exports=function(t,e){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},Object.assign(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&Object.assign(n.prototype,t),n.__super__=i.prototype,n}},{}],176:[function(t,e,n){"use strict";var i=t("./lodash");t("object.assign").shim(),t("array.prototype.find"),t("./vendor/array-includes"),t("./helpers/event");var r=t("./utils"),o={config:t("./config"),log:r.log,Locales:t("./locales"),Events:t("./events"),EventBus:t("./event-bus"),EditorStore:t("./extensions/editor-store"),Submittable:t("./extensions/submittable"),FileUploader:t("./extensions/file-uploader"),BlockMixins:t("./block_mixins"),BlockPositioner:t("./block-positioner"),BlockReorder:t("./block-reorder"),BlockDeletion:t("./block-deletion"),BlockValidations:t("./block-validations"),BlockStore:t("./block-store"),BlockManager:t("./block-manager"),SimpleBlock:t("./simple-block"),Block:t("./block"),Blocks:t("./blocks"),BlockControl:t("./block-control"),BlockControls:t("./block-controls"),FloatingBlockControls:t("./floating-block-controls"),FormatBar:t("./format-bar"),Editor:t("./editor"),toMarkdown:t("./to-markdown"),toHTML:t("./to-html"),setDefaults:function(t){Object.assign(o.config.defaults,t||{})},getInstance:r.getInstance,setBlockOptions:function(t,e){var n=o.Blocks[t];i.isUndefined(n)||Object.assign(n.prototype,e||{})},runOnAllInstances:function(t){if(o.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(o.config.instances,function(n){n[t].apply(null,e)})}else o.log("method doesn't exist")}};Object.assign(o,t("./form-events")),e.exports=o},{"./block":146,"./block-control":138,"./block-controls":139,"./block-deletion":140,"./block-manager":141,"./block-positioner":142,"./block-reorder":143,"./block-store":144,"./block-validations":145,"./block_mixins":151,"./blocks":156,"./config":162,"./editor":163,"./event-bus":165,"./events":166,"./extensions/editor-store":167,"./extensions/file-uploader":168,"./extensions/submittable":169,"./floating-block-controls":170,"./form-events":171,"./format-bar":172,"./helpers/event":174,"./locales":177,"./lodash":178,"./simple-block":181,"./to-html":182,"./to-markdown":183,"./utils":184,"./vendor/array-includes":185,"array.prototype.find":2,"object.assign":51}],177:[function(t,e,n){"use strict";var i=t("./lodash"),r=t("./config"),o=t("./utils"),a={en:{general:{"delete":"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(o.log("Using i18n stub"),window.i18n={t:function(t,e){var n,o,s,l,u=t.split(":");for(o=a[r.language],l=0;l<u.length;l++)s=u[l],i.isUndefined(o[s])||(o=o[s]);return n=o,i.isString(n)?(n.indexOf("__")>=0&&Object.keys(e).forEach(function(t){n=n.replace("__"+t+"__",e[t])}),n):""}}):(o.log("Using i18next"),i18n.init({resStore:a,fallbackLng:r.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),e.exports=a},{"./config":162,"./lodash":178,"./utils":184}],178:[function(t,e,n){"use strict";n.isEmpty=t("lodash.isempty"),n.isFunction=t("lodash.isfunction"),n.isObject=t("lodash.isobject"),n.isString=t("lodash.isstring"),n.isUndefined=t("lodash.isundefined"),n.result=t("lodash.result"),n.template=t("lodash.template"),n.uniqueId=t("lodash.uniqueid")},{"lodash.isempty":4,"lodash.isfunction":28,"lodash.isobject":29,"lodash.isstring":31,"lodash.isundefined":32,"lodash.result":33,"lodash.template":34,"lodash.uniqueid":50}],179:[function(t,e,n){"use strict";e.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))},this)}}},{}],180:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null;e.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.$el.find(t)},render:function(){return this},destroy:function(){i.isUndefined(this.stopListening)||this.stopListening(),this.$el.remove()},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t,e=Object.assign({},i.result(this,"attributes"));this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),e.html&&(t=e.html,delete e.html);var n=r("<"+this.tagName+">").attr(e);t&&n.html(t),this._setElement(n)}},_setElement:function(t){return this.$el=r(t),this.el=this.$el[0],this}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lodash":178}],181:[function(t,e,n){(function(n){"use strict";var i=t("./lodash"),r=t("./utils"),o="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,a=t("./block-reorder"),s=function(t,e,n,r){this.createStore(t),this.blockID=i.uniqueId("st-block-"),this.instanceID=e,this.mediator=n,this.options=r||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(s.prototype,t("./function-bind"),t("./events"),t("./renderable"),t("./block-store"),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:i.template("<div class='st-block__inner'><%= editor_html %></div>"),attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return r.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=r.toSlug(this.type),this.blockCSSClass},type:"","class":function(){return r.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=i.result(this,"editorHTML");this.$el.append(this.block_template({editor_html:t})),this.$inner=this.$el.find(".st-block__inner"),this.$inner.bind("click mouseover",function(t){t.stopPropagation()})},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.$el.addClass("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,n){this.$ui.append(t.render().$el),e&&n&&this.$ui.on("click",e,n)},_initUI:function(){var t=o("<div>",{"class":"st-block__ui"});this.$inner.append(t),this.$ui=t,this._initUIComponents()},_initMessages:function(){var t=o("<div>",{"class":"st-block__messages"});this.$inner.prepend(t),this.$messages=t},addMessage:function(t,e){var n=o("<span>",{html:t,"class":"st-msg "+e});return this.$messages.append(n).addClass("st-block__messages--is-visible"),n},resetMessages:function(){this.$messages.html("").removeClass("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new a(this.$el))}}),s.fn=s.prototype,s.extend=t("./helpers/extend"),e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./block-reorder":143,"./block-store":144,"./events":166,"./function-bind":173,"./helpers/extend":175,"./lodash":178,"./renderable":180,"./utils":184}],182:[function(t,e,n){"use strict";var i=t("./lodash"),r=t("./utils");e.exports=function(e,n){var o=t("./blocks");n=r.classify(n);var a=e,s="Text"===n;i.isUndefined(s)&&(s=!1),s&&(a="<p>"+a),a=a.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(t,e,n){return"<a href='"+n+"'>"+e.replace(/\n/g,"")+"</a>"}),a=r.reverse(r.reverse(a).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"})),a=a.replace(/^\> (.+)$/gm,"$1");var l;return o.hasOwnProperty(n)&&(l=o[n],!i.isUndefined(l.prototype.toHTML)&&i.isFunction(l.prototype.toHTML)&&(a=l.prototype.toHTML(a))),s&&(a=a.replace(/\n\s*\n/gm,"</p><p>"),a=a.replace(/\n/gm,"<br>")),a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,""),a=a.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),s&&(a+="</p>"),a}},{"./blocks":156,"./lodash":178,"./utils":184}],183:[function(t,e,n){"use strict";var i=t("./lodash"),r=t("./utils");e.exports=function(e,n){function o(t,e,n){return i.isUndefined(n)&&(n=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+n}function a(t,e,n){return i.isUndefined(n)&&(n=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+n}var s=t("./blocks");n=r.classify(n);var l=e;l=l.replace(/&nbsp;/g," "),l=l.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var u,c,h=["style","script","applet","embed","noframes","noscript"];for(c=0;c<h.length;c++)u=new RegExp("<"+h[c]+".*?"+h[c]+"(.*?)>","gi"),l=l.replace(u,"");l=l.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var d=["em","i","strong","b"];for(c=0;c<d.length;c++)u=new RegExp("<"+d[c]+"><br></"+d[c]+">","gi"),l=l.replace(u,"<br>");l=l.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(t,e,n){return"["+n.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,o).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,o).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,a).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,a),l=l.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">");
var p;return s.hasOwnProperty(n)&&(p=s[n],!i.isUndefined(p.prototype.toMarkdown)&&i.isFunction(p.prototype.toMarkdown)&&(l=p.prototype.toMarkdown(l))),l=l.replace(/<\/?[^>]+(>|$)/g,"")}},{"./blocks":156,"./lodash":178,"./utils":184}],184:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r=t("./lodash"),o=t("./config"),a=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,s={getInstance:function(t){return r.isUndefined(t)?o.instances[0]:r.isString(t)?o.instances.find(function(e){return e.ID===t}):o.instances[t]},getInstanceBySelection:function(){return s.getInstance(i(window.getSelection().anchorNode).parents(".st-block").data("instance"))},getBlockBySelection:function(){return s.getInstanceBySelection().findBlockById(i(window.getSelection().anchorNode).parents(".st-block").get(0).id)},log:function(){!r.isUndefined(console)&&o.debug&&console.log.apply(console,arguments)},isURI:function(t){return a.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},classify:function(t){return s.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:Object.keys(t)).forEach(function(t){e[t]=!0}),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}};e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":162,"./lodash":178}],185:[function(t,e,n){"use strict";[].includes||(Array.prototype.includes=function(t){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var i,r=parseInt(arguments[1])||0;for(r>=0?i=r:(i=n+r,0>i&&(i=0));n>i;){var o=e[i];if(t===o||t!==t&&o!==o)return!0;i++}return!1})},{}]},{},[1])(1)}),function(t,e,n,i){function r(e,i){this.w=t(n),this.el=t(e),this.options=t.extend({},h,i),this.init()}var o="ontouchstart"in e,a=function(){var t=n.createElement("div"),i=n.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t);var r=e.getComputedStyle&&"auto"===e.getComputedStyle(t,"").pointerEvents;return i.removeChild(t),!!r}(),s=o?"touchstart":"mousedown",l=o?"touchmove":"mousemove",u=o?"touchend":"mouseup",c=o?"touchcancel":"mouseup",h={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",noChildrenClass:"dd-nochildren",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button">Expand</button>',collapseBtnHTML:'<button data-action="collapse" type="button">Collapse</button>',group:0,maxDepth:5,threshold:20,reject:[],dropCallback:null,cloneNodeOnDrag:!1,dragOutsideToDelete:!1};r.prototype={init:function(){var n=this;n.reset(),n.el.data("nestable-group",this.options.group),n.placeEl=t('<div class="'+n.options.placeClass+'"/>'),t.each(this.el.find(n.options.itemNodeName),function(e,i){n.setParent(t(i))}),n.el.on("click","button",function(e){if(!n.dragEl&&(o||0===e.button)){var i=t(e.currentTarget),r=i.data("action"),a=i.parent(n.options.itemNodeName);"collapse"===r&&n.collapseItem(a),"expand"===r&&n.expandItem(a)}});var i=function(e){var i=t(e.target);if(n.nestableCopy=i.closest("."+n.options.rootClass).clone(!0),!i.hasClass(n.options.handleClass)){if(i.closest("."+n.options.noDragClass).length)return;i=i.closest("."+n.options.handleClass)}!i.length||n.dragEl||!o&&1!==e.which||o&&1!==e.touches.length||(e.preventDefault(),n.dragStart(o?e.touches[0]:e))},r=function(t){n.dragEl&&(t.preventDefault(),n.dragMove(o?t.touches[0]:t))},a=function(t){n.dragEl&&(t.preventDefault(),n.dragStop(o?t.touches[0]:t))};o?(n.el[0].addEventListener(s,i,!1),e.addEventListener(l,r,!1),e.addEventListener(u,a,!1),e.addEventListener(c,a,!1)):(n.el.on(s,i),n.w.on(l,r),n.w.on(u,a));var h=function(){o?(n.el[0].removeEventListener(s,i,!1),e.removeEventListener(l,r,!1),e.removeEventListener(u,a,!1),e.removeEventListener(c,a,!1)):(n.el.off(s,i),n.w.off(l,r),n.w.off(u,a)),n.el.off("click"),n.el.unbind("destroy-nestable"),n.el.data("nestable",null);var h=n.el[0].getElementsByTagName("button");t(h).remove()};n.el.bind("destroy-nestable",h)},destroy:function(){this.expandAll(),this.el.trigger("destroy-nestable")},serialize:function(){var e,n=0,i=this;step=function(e,n){var r=[],o=e.children(i.options.itemNodeName);return o.each(function(){var e=t(this),o=t.extend({},e.data()),a=e.children(i.options.listNodeName);a.length&&(o.children=step(a,n+1)),r.push(o)}),r};var r;return r=i.el.is(i.options.listNodeName)?i.el:i.el.find(i.options.listNodeName).first(),e=step(r,n)},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.dragItem=null,this.hasNewRoot=!1,this.pointEl=null,this.sourceRoot=null,this.isOutsideRoot=!1},expandItem:function(t){t.removeClass(this.options.collapsedClass),t.children('[data-action="expand"]').hide(),t.children('[data-action="collapse"]').show(),t.children(this.options.listNodeName).show(),this.el.trigger("expand",[t]),t.trigger("expand")},collapseItem:function(t){var e=t.children(this.options.listNodeName);e.length&&(t.addClass(this.options.collapsedClass),t.children('[data-action="collapse"]').hide(),t.children('[data-action="expand"]').show(),t.children(this.options.listNodeName).hide()),this.el.trigger("collapse",[t]),t.trigger("collapse")},expandAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.expandItem(t(this))})},collapseAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.collapseItem(t(this))})},setParent:function(e){e.children(this.options.listNodeName).length&&(e.prepend(t(this.options.expandBtnHTML)),e.prepend(t(this.options.collapseBtnHTML))),(" "+e[0].className+" ").indexOf(" "+h.collapsedClass+" ")>-1?e.children('[data-action="collapse"]').hide():e.children('[data-action="expand"]').hide()},unsetParent:function(t){t.removeClass(this.options.collapsedClass),t.children("[data-action]").remove(),t.children(this.options.listNodeName).remove()},dragStart:function(e){var r=this.mouse,o=t(e.target),a=o.closest("."+this.options.handleClass).closest(this.options.itemNodeName);this.sourceRoot=o.closest("."+this.options.rootClass),this.dragItem=a,this.placeEl.css("height",a.height()),r.offsetX=e.offsetX!==i?e.offsetX:e.pageX-o.offset().left,r.offsetY=e.offsetY!==i?e.offsetY:e.pageY-o.offset().top,r.startX=r.lastX=e.pageX,r.startY=r.lastY=e.pageY,this.dragRootEl=this.el,this.dragEl=t(n.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",a.width()),this.options.cloneNodeOnDrag?a.after(a.clone()):a.after(this.placeEl),a[0].parentNode.removeChild(a[0]),a.appendTo(this.dragEl),t(n.body).append(this.dragEl),this.dragEl.css({left:e.pageX-r.offsetX,top:e.pageY-r.offsetY});var s,l,u=this.dragEl.find(this.options.itemNodeName);for(s=0;s<u.length;s++)l=t(u[s]).parents(this.options.listNodeName).length,l>this.dragDepth&&(this.dragDepth=l)},dragStop:function(e){var n=this.dragEl.children(this.options.itemNodeName).first();if(n[0].parentNode.removeChild(n[0]),this.isOutsideRoot&&this.options.dragOutsideToDelete){var i=this.placeEl.parent();this.placeEl.remove(),i.children().length||this.unsetParent(i.parent()),this.dragRootEl.find(this.options.itemNodeName).length||this.dragRootEl.append('<div class="'+this.options.emptyClass+'"/>')}else this.placeEl.replaceWith(n);this.moving||t(this.dragItem).trigger("click");var r,o=!1;for(r=0;r<this.options.reject.length;r++){var a=this.options.reject[r];if(a.rule.apply(this.dragRootEl)){var s=n.clone(!0);this.dragRootEl.html(this.nestableCopy.children().clone(!0)),a.action&&a.action.apply(this.dragRootEl,[s]),o=!0;break}}if(!o){this.dragEl.remove(),this.el.trigger("change");var l=n.parent().parent(),u=null;if(null===l||l.is("."+this.options.rootClass)||(u=l.data("id")),t.isFunction(this.options.dropCallback)){var c={sourceId:n.data("id"),destId:u,sourceEl:n,destParent:l,destRoot:n.closest("."+this.options.rootClass),sourceRoot:this.sourceRoot};this.options.dropCallback.call(this,c)}this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset()}},dragMove:function(i){var r,o,s,l,u,c=this.options,h=this.mouse;this.dragEl.css({left:i.pageX-h.offsetX,top:i.pageY-h.offsetY}),h.lastX=h.nowX,h.lastY=h.nowY,h.nowX=i.pageX,h.nowY=i.pageY,h.distX=h.nowX-h.lastX,h.distY=h.nowY-h.lastY,h.lastDirX=h.dirX,h.lastDirY=h.dirY,h.dirX=0===h.distX?0:h.distX>0?1:-1,h.dirY=0===h.distY?0:h.distY>0?1:-1;var d=Math.abs(h.distX)>Math.abs(h.distY)?1:0;if(!this.moving)return h.dirAx=d,void(this.moving=!0);h.dirAx!==d?(h.distAxX=0,h.distAxY=0):(h.distAxX+=Math.abs(h.distX),0!==h.dirX&&h.dirX!==h.lastDirX&&(h.distAxX=0),h.distAxY+=Math.abs(h.distY),0!==h.dirY&&h.dirY!==h.lastDirY&&(h.distAxY=0)),h.dirAx=d,h.dirAx&&h.distAxX>=c.threshold&&(h.distAxX=0,s=this.placeEl.prev(c.itemNodeName),h.distX>0&&s.length&&!s.hasClass(c.collapsedClass)&&!s.hasClass(c.noChildrenClass)&&(r=s.find(c.listNodeName).last(),u=this.placeEl.parents(c.listNodeName).length,u+this.dragDepth<=c.maxDepth&&(r.length?(r=s.children(c.listNodeName).last(),r.append(this.placeEl)):(r=t("<"+c.listNodeName+"/>").addClass(c.listClass),r.append(this.placeEl),s.append(r),this.setParent(s)))),h.distX<0&&(l=this.placeEl.next(c.itemNodeName),l.length||(o=this.placeEl.parent(),this.placeEl.closest(c.itemNodeName).after(this.placeEl),o.children().length||this.unsetParent(o.parent()))));var p=!1;a||(this.dragEl[0].style.visibility="hidden"),this.pointEl=t(n.elementFromPoint(i.pageX-n.documentElement.scrollLeft,i.pageY-(e.pageYOffset||n.documentElement.scrollTop))),this.dragRootEl.has(this.pointEl).length?(this.isOutsideRoot=!1,this.dragEl[0].style.opacity=1):(this.isOutsideRoot=!0,this.dragEl[0].style.opacity=.5);var f=this.pointEl.closest("."+c.rootClass),m=this.dragRootEl.data("nestable-id")!==f.data("nestable-id");if(this.isOutsideRoot=!f.length,a||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(c.handleClass)&&(this.pointEl=this.pointEl.closest(c.itemNodeName)),1!=c.maxDepth||this.pointEl.hasClass(c.itemClass)||(this.pointEl=this.pointEl.closest("."+c.itemClass)),this.pointEl.hasClass(c.emptyClass))p=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(c.itemClass))return;if(!h.dirAx||m||p){if(m&&c.group!==f.data("nestable-group"))return;if(u=this.dragDepth-1+this.pointEl.parents(c.listNodeName).length,u>c.maxDepth)return;var g=i.pageY<this.pointEl.offset().top+this.pointEl.height()/2;o=this.placeEl.parent(),p?(r=t(n.createElement(c.listNodeName)).addClass(c.listClass),r.append(this.placeEl),this.pointEl.replaceWith(r)):g?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),o.children().length||this.unsetParent(o.parent()),this.dragRootEl.find(c.itemNodeName).length||this.dragRootEl.append('<div class="'+c.emptyClass+'"/>'),this.dragRootEl=f,m&&(this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},t.fn.nestable=function(e){var n=this,i=this,o=function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var n=t||"-";return e()+e()+n+e()+n+e()+n+e()+n+e()+e()+e()};return n.each(function(){var n=t(this).data("nestable");n?"string"==typeof e&&"function"==typeof n[e]&&(i=n[e]()):(t(this).data("nestable",new r(this,e)),t(this).data("nestable-id",o()))}),i||n}}(window.jQuery||window.Zepto,window,document);var LATIN_MAP={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"AE","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\u0150":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\u0170":"U","\xdd":"Y","\xde":"TH","\xdf":"ss","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\u0151":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\u0171":"u","\xfd":"y","\xfe":"th","\xff":"y"},LATIN_SYMBOLS_MAP={"\xa9":"(c)"},GREEK_MAP={"\u03b1":"a","\u03b2":"b","\u03b3":"g","\u03b4":"d","\u03b5":"e","\u03b6":"z","\u03b7":"h","\u03b8":"8","\u03b9":"i","\u03ba":"k","\u03bb":"l","\u03bc":"m","\u03bd":"n","\u03be":"3","\u03bf":"o","\u03c0":"p","\u03c1":"r","\u03c3":"s","\u03c4":"t","\u03c5":"y","\u03c6":"f","\u03c7":"x","\u03c8":"ps","\u03c9":"w","\u03ac":"a","\u03ad":"e","\u03af":"i","\u03cc":"o","\u03cd":"y","\u03ae":"h","\u03ce":"w","\u03c2":"s","\u03ca":"i","\u03b0":"y","\u03cb":"y","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039a":"K","\u039b":"L","\u039c":"M","\u039d":"N","\u039e":"3","\u039f":"O","\u03a0":"P","\u03a1":"R","\u03a3":"S","\u03a4":"T","\u03a5":"Y","\u03a6":"F","\u03a7":"X","\u03a8":"PS","\u03a9":"W","\u0386":"A","\u0388":"E","\u038a":"I","\u038c":"O","\u038e":"Y","\u0389":"H","\u038f":"W","\u03aa":"I","\u03ab":"Y"},TURKISH_MAP={"\u015f":"s","\u015e":"S","\u0131":"i","\u0130":"I","\xe7":"c","\xc7":"C","\xfc":"u","\xdc":"U","\xf6":"o","\xd6":"O","\u011f":"g","\u011e":"G"},RUSSIAN_MAP={"\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"yo","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044a":"","\u044b":"y","\u044c":"","\u044d":"e","\u044e":"yu","\u044f":"ya","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0401":"Yo","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042a":"","\u042b":"Y","\u042c":"","\u042d":"E","\u042e":"Yu","\u042f":"Ya"},UKRAINIAN_MAP={"\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0490":"G","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0491":"g"},CZECH_MAP={"\u010d":"c","\u010f":"d","\u011b":"e","\u0148":"n","\u0159":"r","\u0161":"s","\u0165":"t","\u016f":"u","\u017e":"z","\u010c":"C","\u010e":"D","\u011a":"E","\u0147":"N","\u0158":"R","\u0160":"S","\u0164":"T","\u016e":"U","\u017d":"Z"},POLISH_MAP={"\u0105":"a","\u0107":"c","\u0119":"e","\u0142":"l","\u0144":"n","\xf3":"o","\u015b":"s","\u017a":"z","\u017c":"z","\u0104":"A","\u0106":"C","\u0118":"e","\u0141":"L","\u0143":"N","\xd3":"o","\u015a":"S","\u0179":"Z","\u017b":"Z"},LATVIAN_MAP={"\u0101":"a","\u010d":"c","\u0113":"e","\u0123":"g","\u012b":"i","\u0137":"k","\u013c":"l","\u0146":"n","\u0161":"s","\u016b":"u","\u017e":"z","\u0100":"A","\u010c":"C","\u0112":"E","\u0122":"G","\u012a":"i","\u0136":"k","\u013b":"L","\u0145":"N","\u0160":"S","\u016a":"u","\u017d":"Z"},ALL_DOWNCODE_MAPS=new Array;ALL_DOWNCODE_MAPS[0]=LATIN_MAP,ALL_DOWNCODE_MAPS[1]=LATIN_SYMBOLS_MAP,ALL_DOWNCODE_MAPS[2]=GREEK_MAP,ALL_DOWNCODE_MAPS[3]=TURKISH_MAP,ALL_DOWNCODE_MAPS[4]=RUSSIAN_MAP,ALL_DOWNCODE_MAPS[5]=UKRAINIAN_MAP,ALL_DOWNCODE_MAPS[6]=CZECH_MAP,ALL_DOWNCODE_MAPS[7]=POLISH_MAP,ALL_DOWNCODE_MAPS[8]=LATVIAN_MAP;var Downcoder=new Object;Downcoder.Initialize=function(){if(!Downcoder.map){Downcoder.map={},Downcoder.chars="";for(var t in ALL_DOWNCODE_MAPS){var e=ALL_DOWNCODE_MAPS[t];for(var n in e)Downcoder.map[n]=e[n],Downcoder.chars+=n}Downcoder.regex=new RegExp("["+Downcoder.chars+"]|[^"+Downcoder.chars+"]+","g")}},downcode=function(t){Downcoder.Initialize();var e="",n=t.match(Downcoder.regex);if(n)for(var i=0;i<n.length;i++){if(1==n[i].length){var r=Downcoder.map[n[i]];if(null!=r){e+=r;continue}}e+=n[i]}else e=t;return e},Spotlight=function(){var t=new Array;return{onLoad:function(e){t.push(e)},activate:function(){for(var e=0;e<t.length;e++)t[e].call()}}}(),"undefined"!=typeof Turbolinks&&$(document).on("page:load",function(){Spotlight.activate()}),$(document).ready(function(){Spotlight.activate()}),Spotlight.onLoad(function(){SpotlightNestable.init(),$.each($(".social-share-button a"),function(){$(this).append($(this).attr("title"))})}),/* ========================================================================
 * Bootstrap: carousel.js v3.3.6
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof e?r.to(e):a?r[a]():o.interval&&r.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var r="prev"==t?-1:1,o=(n+r)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(e,r),a=this.interval,s="next"==e?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([e,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var r=function(n){var i,r=t(this),o=t(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),e.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),/* The MIT License (MIT)

Copyright (c) 2013 Tim Schlechter

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
function(t){"use strict";function e(e,n){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(n)}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function r(t){return t?s.text(t).html():""}function o(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}var a={tagClass:function(t){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(t,e){e.hide().fadeIn()}};e.prototype={constructor:e,add:function(e,n){var i=this;if(!(i.options.maxTags&&i.itemsArray.length>=i.options.maxTags)&&(e===!1||e)){if("object"==typeof e&&!i.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(i.isSelect&&!i.multiple&&i.itemsArray.length>0&&i.remove(i.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var o=e.split(",");if(o.length>1){for(var a=0;a<o.length;a++)this.add(o[a],!0);return void(n||i.pushVal())}}var s=i.options.itemValue(e),l=i.options.itemText(e),u=i.options.tagClass(e),c=t.grep(i.itemsArray,function(t){return i.options.itemValue(t)===s})[0];if(c){if(i.options.onTagExists){var h=t(".tag",i.$container).filter(function(){return t(this).data("item")===c});i.options.onTagExists(e,h)}}else{i.itemsArray.push(e);var d=t('<span class="tag '+r(u)+'">'+r(l)+'<span data-role="remove"></span></span>');if(d.data("item",e),i.findInputWrapper().before(d),d.after(" "),i.isSelect&&!t('option[value="'+escape(s)+'"]',i.$element)[0]){var p=t("<option selected>"+r(l)+"</option>");p.data("item",e),p.attr("value",s),i.$element.append(p)}n||i.pushVal(),i.options.maxTags===i.itemsArray.length&&i.$container.addClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemAdded",{item:e}))}}}},remove:function(e,n){var i=this;i.objectItems&&(e="object"==typeof e?t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==i.options.itemValue(e)})[0]:t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==e})[0]),e&&(t(".tag",i.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",i.$element).filter(function(){return t(this).data("item")===e}).remove(),i.itemsArray.splice(t.inArray(e,i.itemsArray),1)),n||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(),e.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),o=e.options.itemValue(i),a=e.options.itemText(i),s=e.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+r(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=r(a),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===i});l.attr("value",o)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var r=this;r.options=t.extend({},a,e);var s=r.options.typeahead||{};r.objectItems&&(r.options.freeInput=!1),n(r.options,"itemValue"),n(r.options,"itemText"),n(r.options,"tagClass"),r.options.source&&(s.source=r.options.source),s.source&&t.fn.typeahead&&(i(s,"source"),r.$input.typeahead({source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var a=r.options.itemText(t[i]);o[a]=t[i],e.push(a)}n(e)}this.map={};var o=this.map,a=s.source(e);t.isFunction(a.success)?a.success(i):t.when(a).then(i)},updater:function(t){r.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}})),r.$container.on("click",t.proxy(function(t){r.$input.focus()},r)),r.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=r.findInputWrapper();switch(e.which){case 8:if(0===o(n[0])){var a=i.prev();a&&r.remove(a.data("item"))}break;case 46:if(0===o(n[0])){var s=i.next();s&&r.remove(s.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var u=i.next();0===n.val().length&&u[0]&&(u.after(i),n.focus());break;default:r.options.freeInput&&t.inArray(e.which,r.options.confirmKeys)>=0&&(r.add(n.val()),n.val(""),e.preventDefault())}n.attr("size",Math.max(this.inputSize,n.val().length))},r)),r.$container.on("click","[data-role=remove]",t.proxy(function(e){r.remove(t(e.target).closest(".tag").data("item"))},r)),r.options.itemValue===a.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):t("option",r.$element).each(function(){r.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i){var r=[];return this.each(function(){var o=t(this).data("tagsinput");if(o){var a=o[n](i);void 0!==a&&r.push(a)}else o=new e(this,n),t(this).data("tagsinput",o),r.push(o),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?r.length>1?r:r[0]:r},t.fn.tagsinput.Constructor=e;var s=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(){window.SocialShareButton={openUrl:function(t,e){return"true"===e?window.open(t,"popup","height=500,width=500"):(window.open(t),!1)},share:function(t){var e,n,i,r,o,a,s,l,u,c,h,d;switch(s=$(t).data("site"),n=$(t).data("appkey")||"",e=$(t).parent(),l=encodeURIComponent($(t).data(s+"-title")||e.data("title")||""),o=encodeURIComponent(e.data("img")||""),c=encodeURIComponent(e.data("url")||""),h=encodeURIComponent(e.data("via")||""),i=encodeURIComponent(e.data("desc")||" "),a=encodeURIComponent(e.data("popup")||"false"),0===c.length&&(c=encodeURIComponent(location.href)),s){case"email":location.href="mailto:?to=&subject="+l+"&body="+c;break;case"weibo":SocialShareButton.openUrl("http://service.weibo.com/share/share.php?url="+c+"&type=3&pic="+o+"&title="+l+"&appkey="+n,a);break;case"twitter":d="",h.length>0&&(d="&via="+h),SocialShareButton.openUrl("https://twitter.com/intent/tweet?url="+c+"&text="+l+d,a);break;case"douban":SocialShareButton.openUrl("http://shuo.douban.com/!service/share?href="+c+"&name="+l+"&image="+o+"&sel="+i,a);break;case"facebook":SocialShareButton.openUrl("http://www.facebook.com/sharer.php?u="+c,a);break;case"qq":SocialShareButton.openUrl("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+c+"&title="+l+"&pics="+o+"&summary="+i+"&site="+n,a);break;case"tqq":SocialShareButton.openUrl("http://share.v.t.qq.com/index.php?c=share&a=index&url="+c+"&title="+l+"&pic="+o+"&appkey="+n,a);break;case"baidu":SocialShareButton.openUrl("http://hi.baidu.com/pub/show/share?url="+c+"&title="+l+"&content="+i,a);break;case"kaixin001":SocialShareButton.openUrl("http://www.kaixin001.com/rest/records.php?url="+c+"&content="+l+"&style=11&pic="+o+"&aid="+n,a);break;case"renren":SocialShareButton.openUrl("http://widget.renren.com/dialog/share?resourceUrl="+c+"&srcUrl="+c+"&title="+l+"&pic="+o+"&description="+i,a);break;case"google_plus":SocialShareButton.openUrl("https://plus.google.com/share?url="+c,a);break;case"google_bookmark":SocialShareButton.openUrl("https://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk="+c+"&title="+l,a);break;case"delicious":SocialShareButton.openUrl("http://www.delicious.com/save?url="+c+"&title="+l+"&jump=yes&pic="+o,a);break;case"plurk":SocialShareButton.openUrl("http://www.plurk.com/?status="+l+": "+c+"&qualifier=shares",a);break;case"pinterest":SocialShareButton.openUrl("http://www.pinterest.com/pin/create/button/?url="+c+"&media="+o+"&description="+l,a);break;case"tumblr":r=function(e){var n;return n=$(t).attr("data-"+e),n?encodeURIComponent(n):void 0},u=function(){var t,e,n,i;return e=r("type")||"link",t=function(){switch(e){case"text":return l=r("title")||l,"title="+l;case"photo":return l=r("caption")||l,i=r("source")||o,"caption="+l+"&source="+i;case"quote":return n=r("quote")||l,i=r("source")||"","quote="+n+"&source="+i;default:return l=r("title")||l,c=r("url")||c,"name="+l+"&url="+c}}(),"/"+e+"?"+t},SocialShareButton.openUrl("http://www.tumblr.com/share"+u(),a)}return!1}}}.call(this),/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.4.2 (Oct, 2014)

  Copyright (c) 2014 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/
function(t){"use strict";t.fn.serializeJSON=function(e){var n,i,r,o,a,s,l;return s=t.serializeJSON,l=s.optsWithDefaults(e),s.validateOptions(l),i=this.serializeArray(),s.readCheckboxUncheckedValues(i,this,l),n={},t.each(i,function(t,e){r=s.splitInputNameIntoKeysArray(e.name),o=r.pop(),"skip"!==o&&(a=s.parseValue(e.value,o,l),l.parseWithFunction&&"_"===o&&(a=l.parseWithFunction(a,e.name)),s.deepSet(n,r,a,l))}),n},t.serializeJSON={defaultOptions:{parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,checkboxUncheckedValue:void 0,useIntKeysAsArrayIndex:!1},optsWithDefaults:function(e){var n,i;return null==e&&(e={}),n=t.serializeJSON,i=n.optWithDefaults("parseAll",e),{parseNumbers:i||n.optWithDefaults("parseNumbers",e),parseBooleans:i||n.optWithDefaults("parseBooleans",e),parseNulls:i||n.optWithDefaults("parseNulls",e),parseWithFunction:n.optWithDefaults("parseWithFunction",e),checkboxUncheckedValue:n.optWithDefaults("checkboxUncheckedValue",e),useIntKeysAsArrayIndex:n.optWithDefaults("useIntKeysAsArrayIndex",e)}},optWithDefaults:function(e,n){return n[e]!==!1&&""!==n[e]&&(n[e]||t.serializeJSON.defaultOptions[e])},validateOptions:function(t){var e,n;n=["parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","checkboxUncheckedValue","useIntKeysAsArrayIndex"];for(e in t)if(-1===n.indexOf(e))throw new Error("serializeJSON ERROR: invalid option '"+e+"'. Please use one of "+n.join(","))},parseValue:function(e,n,i){var r;return r=t.serializeJSON,"string"==n?e:"number"==n||i.parseNumbers&&r.isNumeric(e)?Number(e):"boolean"==n||i.parseBooleans&&("true"===e||"false"===e)?-1===["false","null","undefined","","0"].indexOf(e):"null"==n||i.parseNulls&&"null"==e?-1!==["false","null","undefined","","0"].indexOf(e)?null:e:"array"==n||"object"==n?JSON.parse(e):"auto"==n?r.parseValue(e,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0}):e},isObject:function(t){return t===Object(t)},isUndefined:function(t){return void 0===t},isValidArrayIndex:function(t){return/^[0-9]+$/.test(String(t))},isNumeric:function(t){return t-parseFloat(t)>=0},splitInputNameIntoKeysArray:function(e){var n,i,r,o,a;return a=t.serializeJSON,o=a.extractTypeFromInputName(e),i=o[0],r=o[1],n=i.split("["),n=t.map(n,function(t){return t.replace(/]/g,"")}),""===n[0]&&n.shift(),n.push(r),n},extractTypeFromInputName:function(e){var n,i;if(i=t.serializeJSON,n=e.match(/(.*):([^:]+)$/)){var r=["string","number","boolean","null","array","object","skip","auto"];if(-1!==r.indexOf(n[2]))return[n[1],n[2]];throw new Error("serializeJSON ERROR: Invalid type "+n[2]+" found in input name '"+e+"', please use one of "+r.join(", "))}return[e,"_"]},deepSet:function(e,n,i,r){var o,a,s,l,u,c;if(null==r&&(r={}),c=t.serializeJSON,c.isUndefined(e))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");o=n[0],1===n.length?""===o?e.push(i):e[o]=i:(a=n[1],""===o&&(l=e.length-1,u=e[l],o=c.isObject(u)&&(c.isUndefined(u[a])||n.length>2)?l:l+1),c.isUndefined(e[o])&&(""===a?e[o]=[]:r.useIntKeysAsArrayIndex&&c.isValidArrayIndex(a)?e[o]=[]:e[o]={}),s=n.slice(1),c.deepSet(e[o],s,i,r))},readCheckboxUncheckedValues:function(e,n,i){var r,o,a,s,l;null==i&&(i={}),l=t.serializeJSON,r="input[type=checkbox][name]:not(:checked,[disabled])",o=n.find(r).add(n.filter(r)),o.each(function(n,r){a=t(r),s=a.attr("data-unchecked-value"),s?e.push({name:r.name,value:s}):l.isUndefined(i.checkboxUncheckedValue)||e.push({name:r.name,value:i.checkboxUncheckedValue})})}}}(window.jQuery||window.Zepto||window.$),function(t){t.fn.addNewPageButton=function(e){function n(n){function i(){n.outerWidth()<=h+5&&n.animate({width:a.animate_width+"px"},a.speed,function(){s.show(0,function(){c.focus(),n.width("auto"),n.width(n.width())})})}function r(){s.hide(),n.animate({width:h+"px"},a.speed)}function o(){return""==t.trim(c.val())}var a=t.extend({speed:n.data("speed")||450,animate_width:n.data("animate_width")||425},e),s=t(n.data("field-target")),l=t("input[data-behavior='save']",s),u=t("input[data-behavior='cancel']",s),c=t("input[type='text']",s),h=n.outerWidth();n.on("mouseenter focus",function(){i()}),l.on("click",function(){return o()?!1:void 0}),u.on("click",function(t){t.preventDefault(),c.val(""),r()}),c.on("blur",function(){o()&&r()})}t.each(this,function(){n(t(this))})}}(jQuery),Spotlight.onLoad(function(){$("[data-expanded-add-button]").addNewPageButton()}),Spotlight.onLoad(function(){addRestoreDefaultBehavior()}),Spotlight.onLoad(function(){addCheckboxToggleBehavior(),addEnableToggleBehavior()}),function(t){SirTrevor.BlockMixins.Autocompleteable={mixinName:"Autocompleteable",preload:!0,initializeAutocompleteable:function(){this.on("onRender",this.addAutocompletetoSirTrevorForm),_.isUndefined(this.autocomplete_url)&&(this.autocomplete_url=function(){return t("form[data-autocomplete-url]").data("autocomplete-url").replace("%25QUERY","%QUERY")}),_.isUndefined(this.autocomplete_template)&&(this.autocomplete_url=function(){return'<div class="autocomplete-item{{#if private}} blacklight-private{{/if}}">{{#if thumbnail}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'}),_.isUndefined(this.transform_autocomplete_results)&&(this.transform_autocomplete_results=_.identity)},autocomplete_control:function(){return'<input type="text" class="st-input-string form-control item-input-field" data-twitter-typeahead="true" placeholder="<%= i18n.t("blocks:autocompleteable:placeholder")%>"/>'},addAutocompletetoSirTrevorForm:function(){this.$("[data-twitter-typeahead]").spotlightSearchTypeAhead({bloodhound:this.bloodhound(),template:this.autocomplete_template()}).on("typeahead:selected typeahead:autocompleted",this.autocompletedHandler()).on("focus",function(){""===t(this).val()&&t(this).data().ttTypeahead.input.trigger("queryChanged","")})},autocompletedHandler:function(e,n){var i=this;return function(e,n){t(this).typeahead("val",""),t(this).val(""),i.createItemPanel(t.extend(n,{display:"true"}))}},bloodhound:function(){var t=this,e=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.title)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:t.autocomplete_url(),filter:t.transform_autocomplete_results}});return e.initialize(),e}},SirTrevor.Block.prototype.availableMixins.push("autocompleteable")}(jQuery),function(t){SirTrevor.BlockMixins.Formable={mixinName:"Formable",preload:!0,initializeFormable:function(){_.isUndefined(this.afterLoadData)&&(this.afterLoadData=function(t){})},formId:function(t){return this.blockID+"_"+t},_serializeData:function(){var e=this.$(":input,textarea,select").not(":input:radio").serializeJSON();return this.$(":input:radio:checked").each(function(n,i){var r=t(i).data("key")||i.getAttribute("name");r.match("\\[")||(e[r]=t(i).val())}),this.hasTextBlock()&&(e.text=this.getTextBlockHTML(),e.text.length>0&&this.options.convertToMarkdown&&(e.text=stToMarkdown(e.text,this.type))),e},loadData:function(t){this.hasTextBlock()&&this.getTextBlock().html(SirTrevor.toHTML(t.text,this.type)),this.loadFormDataByKey(t),this.afterLoadData(t)},loadFormDataByKey:function(e){this.$(":input").not("button,:input[type=hidden]").each(function(n,i){var r=t(i).data("key")||i.getAttribute("name");if(r){r.match("\\[\\]$")&&(r=r.replace("[]",""));var o=e[r];o instanceof Array||(o=[o]),t(this).val(o)}})}},SirTrevor.Block.prototype.availableMixins.push("formable")}(jQuery),function(t){SirTrevor.PreviewButton=function(){this._ensureElement(),this._bindFunctions()},SirTrevor.PreviewButton.prototype=Object.create(SirTrevor.BlockDeletion.prototype),SirTrevor.PreviewButton.prototype.attributes={html:"preview","data-icon":"preview"},SirTrevor.PreviewButton.prototype.className="st-block-ui-btn st-block-ui-btn--preview st-icon",SirTrevor.EditButton=function(){this._ensureElement(),this._bindFunctions()},SirTrevor.EditButton.prototype=Object.create(SirTrevor.BlockDeletion.prototype),SirTrevor.EditButton.prototype.attributes={html:"edit","data-icon":"edit"},SirTrevor.EditButton.prototype.className="st-block-ui-btn st-block-ui-btn--edit st-icon",SirTrevor.BlockMixins.Previewable={mixinName:"Previewable",initializePreviewable:function(){this.on("onRender",this.addPreviewButton),_.isUndefined(this.afterPreviewLoad)&&(this.afterPreviewLoad=function(){})},addPreviewButton:function(){this._prependUIComponent(new SirTrevor.PreviewButton,".st-block-ui-btn--preview",this.previewHandler())},_prependUIComponent:function(t,e,n){this.$ui.prepend(t.render().$el),e&&n&&this.$ui.on("click",e,n)},previewButton:'<button class="st-block-ui-btn preview-btn"><%= i18n.t("blocks:previewable:title") %></button>',previewUrl:function(t){return t.$el.closest("[data-preview-url]").data("preview-url")},previewHandler:function(){var e=this;return function(n){n.stopPropagation();var i=t(this);i.attr("disabled","disabled"),t.post(e.previewUrl(e),{block:JSON.stringify(e.getData())},function(t){e.renderPreview(t).insertAfter(e.$inner),e.$inner.hide(),e.afterPreviewLoad()})}},renderPreview:function(e){var n=(new SirTrevor.EditButton).render().$el;n.on("click",this.editHandler(n));var i=t('<div class="st-block__ui" />').append(n),r=t('<div class="preview clearfix st-block__inner">');return r.append(e).append(i)},editHandler:function(e){var n=this,i=e;return function(e){e.stopPropagation(),n.$inner.show(),t(this).closest(".preview").remove(),i.removeAttr("disabled")}}},SirTrevor.Block.prototype.availableMixins.push("previewable"),SirTrevor.Block.prototype.previewable=!0}(jQuery),function(t){SirTrevor.BlockMixins.Textable={mixinName:"Textable",preload:!0,initializeTextable:function(){_.isUndefined(this.formId)&&this.withMixin(SirTrevor.BlockMixins.Formable),_.isUndefined(this.show_heading)&&(this.show_heading=!0)},align_key:"text-align",text_key:"item-text",heading_key:"title",text_area:function(){return _.template(['<div class="row">','<div class="col-md-8">','<div class="form-group">',this.heading(),'<div class="field">','<label for="<%= formId(text_key) %>" class="control-label"><%= i18n.t("blocks:textable:text") %></label>','<div id="<%= formId(text_key) %>" class="st-text-block form-control" contenteditable="true"></div>',"</div>","</div>","</div>",'<div class="col-md-4">','<div class="text-align">','<p><%= i18n.t("blocks:textable:align:title") %></p>','<input data-key="<%= align_key %>" type="radio" name="<%= formId(align_key) %>" id="<%= formId(align_key + "-left") %>" value="left" checked="true">','<label for="<%= formId(align_key + "-left") %>"><%= i18n.t("blocks:textable:align:left") %></label>','<input data-key="<%= align_key %>" type="radio" name="<%= formId(align_key) %>" id="<%= formId(align_key + "-right") %>" value="right">','<label for="<%= formId(align_key + "-right") %>"><%= i18n.t("blocks:textable:align:right") %></label>',"</div>","</div>","</div>"].join("\n"))(this)},heading:function(){return this.show_heading?['<div class="field">','<label for="<%= formId(heading_key) %>" class="control-label"><%= i18n.t("blocks:textable:heading") %></label>','<input type="text" class="form-control" id="<%= formId(heading_key) %>" name="<%= heading_key %>" />',"</div>"].join("\n"):""}},SirTrevor.Block.prototype.availableMixins.push("textable")}(jQuery),function(t){SirTrevor.BlockMixins.Titleable={mixinName:"Titleable",initializeTitleable:function(){this.$inner.append("<div class='st-title'>"+this.title()+"</div>")}},SirTrevor.Block.prototype.availableMixins.push("titleable"),SirTrevor.Block.prototype.titleable=!0}(jQuery),function(t){Spotlight.Block=SirTrevor.Block.extend({formable:!0,editorHTML:function(){return _.template(this.template)(this)},beforeBlockRender:function(){this.availableMixins.forEach(function(t){this[t]&&SirTrevor.BlockMixins[_.capitalize(t)].preload&&this.withMixin(SirTrevor.BlockMixins[_.capitalize(t)])},this)},$instance:function(){return t("#"+this.instanceID)}})}(jQuery),Spotlight.Block.Resources=function(){return Spotlight.Block.extend({type:"resources",formable:!0,autocompleteable:!0,show_heading:!0,title:function(){return i18n.t("blocks:"+this.type+":title")},description:function(){return i18n.t("blocks:"+this.type+":description")},icon_name:"resources",blockGroup:function(){return i18n.t("blocks:group:items")},primary_field_key:"primary-caption-field",show_primary_field_key:"show-primary-caption",secondary_field_key:"secondary-caption-field",show_secondary_field_key:"show-secondary-caption",display_checkbox:"display-checkbox",globalIndex:0,_itemPanel:function(t){var e,n="item_"+this.globalIndex++;e="true"==t.display?"checked='checked'":"";var i=['<li class="field form-inline dd-item dd3-item" data-id="'+n+'" id="'+this.formId("item_"+t.id)+'">','<input type="hidden" name="item['+n+'][id]" value="'+(t.slug||t.id)+'" />','<input type="hidden" name="item['+n+'][title]" value="'+t.title+'" />','<input type="hidden" name="item['+n+'][full_image_url]" data-item-grid-full-image="true"  value="'+(t.full_image_url||t.thumbnail_image_url||t.thumbnail)+'"/>','<input type="hidden" name="item['+n+'][thumbnail_image_url]" data-item-grid-thumbnail="true"  value="'+(t.thumbnail_image_url||t.thumbnail)+'"/>','<input data-property="weight" type="hidden" name="item['+n+'][weight]" value="'+t.weight+'" />','<div class="dd-handle dd3-handle"><%= i18n.t("blocks:resources:panel:drag") %></div>','<div class="dd3-content panel panel-default">','<div class="panel-heading item-grid">','<div class="checkbox">','<input name="item['+n+'][display]" type="hidden" value="false" />','<input name="item['+n+'][display]" id="'+this.formId(this.display_checkbox+"_"+t.id)+'" type="checkbox" '+e+' class="item-grid-checkbox" value="true"  />','<label class="sr-only" for="'+this.formId(this.display_checkbox+"_"+t.id)+'"><%= i18n.t("blocks:resources:panel:display") %></label>',"</div>",'<div class="pic thumbnail">','<img src="'+(t.thumbnail_image_url||t.thumbnail)+'" />',"</div>",'<div class="main">','<div class="title panel-title">'+t.title+"</div>","<div>"+(t.slug||t.id)+"</div>",'<div data-panel-image-pagination="true"></div>',"</div>",'<div class="remove pull-right">','<a data-item-grid-panel-remove="true" href="#"><%= i18n.t("blocks:resources:panel:remove") %></a>',"</div>","</div>","</div>","</li>"].join("\n"),r=$(_.template(i)(this)),o=this;return $(".remove a",r).on("click",function(t){t.preventDefault(),$(this).closest(".field").remove(),o.afterPanelDelete()}),this.afterPanelRender(t,r),r},afterPanelRender:function(t,e){},afterPanelDelete:function(){},createItemPanel:function(t){var e=this._itemPanel(t);$(e).appendTo(this.$el.find(".panels > ol")),this.$el.find('[data-behavior="nestable"]').trigger("change")},item_options:function(){return""},content:function(){var t=[this.items_selector()];return this.textable&&t.push(this.text_area()),_.template(t.join("<hr />\n"))(this)},items_selector:function(){return['<div class="row">','<div class="col-md-8">','<div class="form-group">','<div class="panels dd nestable-item-grid" data-behavior="nestable" data-max-depth="1"><ol class="dd-list"></ol></div>',this.autocomplete_control(),"</div>","</div>",'<div class="col-md-4">',this.item_options(),"</div>","</div>"].join("\n")},template:['<div class="form resources-admin clearfix">','<div class="widget-header">',"<%= description() %>","</div>","<%= content() %>","</div>"].join("\n"),onBlockRender:function(){SpotlightNestable.init(this.$el.find('[data-behavior="nestable"]')),this.$el.find("[data-input-select-target]").selectRelatedInput()},afterLoadData:function(t){var e=this;$.each(Object.keys(t.item||{}).map(function(e){return t.item[e]}).sort(function(t,e){return t.weight-e.weight}),function(t,n){e.createItemPanel(n)})}})}(),SirTrevor.Blocks.Browse=function(){return Spotlight.Block.Resources.extend({type:"browse",icon_name:"pages",autocomplete_url:function(){return this.$el.closest("form[data-autocomplete-exhibit-searches-path]").data("autocomplete-exhibit-searches-path").replace("%25QUERY","%QUERY")},autocomplete_template:function(){return'<div class="autocomplete-item{{#unless published}} blacklight-private{{/unless}}">{{#if thumbnail_image_url}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail_image_url}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'},item_options:function(){return["<label>",'<input type="checkbox" name="display-item-counts" value="true" checked />','<%= i18n.t("blocks:browse:item_counts") %>',"</label>"].join("\n")}})}(),SirTrevor.Blocks.Iframe=function(){return SirTrevor.Block.extend({type:"Iframe",formable:!0,title:function(){return i18n.t("blocks:iframe:title")},description:function(){return i18n.t("blocks:iframe:description")},icon_name:"iframe",editorHTML:function(){return _.template(this.template,this)(this)},template:['<div class="clearfix">','<div class="widget-header">',"<%= description() %>","</div>",'<textarea name="code" class="form-control" rows="5" placeholder="<%= i18n.t("blocks:iframe:placeholder") %>"></textarea>',"</div>"].join("\n")})}(),SirTrevor.Blocks.Oembed=function(){return Spotlight.Block.extend({textable:!0,id_key:"url",type:"oembed",title:function(){return i18n.t("blocks:oembed:title")},description:function(){return i18n.t("blocks:oembed:description")},icon_name:"oembed",show_heading:!1,template:['<div class="form oembed-text-admin clearfix">','<div class="widget-header">',"<%= description() %>","</div>",'<div class="row">','<div class="form-group col-md-8">','<label for="<%= formId(id_key) %>"><%= i18n.t("blocks:oembed:url") %></label>','<input name="<%= id_key %>" class="form-control col-md-6" type="text" id="<%= formId(id_key) %>" />',"</div>","</div>","<%= text_area() %>","</div>"].join("\n")})}(),SirTrevor.Blocks.FeaturedPages=function(){return Spotlight.Block.Resources.extend({type:"featured_pages",icon_name:"pages",autocomplete_url:function(){return this.$el.closest("form[data-autocomplete-exhibit-feature-pages-path]").data("autocomplete-exhibit-feature-pages-path").replace("%25QUERY","%QUERY")},autocomplete_template:function(){return'<div class="autocomplete-item{{#unless published}} blacklight-private{{/unless}}">{{log "Look at me"}}{{log thumbnail_image_url}}{{#if thumbnail_image_url}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail_image_url}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'}})}(),SirTrevor.Blocks.Rule=function(){return SirTrevor.Block.extend({type:"rule",title:function(){return i18n.t("blocks:rule:title")},icon_name:"rule",previewable:!1,editorHTML:function(){return _.template(this.template,this)(this)},template:"<hr />"})}(),SirTrevor.Blocks.SearchResults=function(){return SirTrevor.Blocks.Browse.extend({type:"search_results",icon_name:"search_results",searches_key:"slug",view_key:"view",textable:!1,content:function(){return _.template([this.items_selector()].join("<hr />\n"))(this)},item_options:function(){var t=this,e=$("[data-blacklight-configuration-search-views]").data("blacklight-configuration-search-views");return $.map(e,function(e){return checkbox="",checkbox+="<div>",checkbox+="<label for='"+t.formId(t.view_key+e.key)+"'>",checkbox+="<input id='"+t.formId(t.view_key+e.key)+"' name='"+t.view_key+"[]' type='checkbox' value='"+e.key+"' /> ",checkbox+=e.label,checkbox+="</label>",checkbox+="</div>",checkbox}).join("\n")},afterPanelRender:function(t,e){this.$el.find(".item-input-field").attr("disabled","disabled")},afterPanelDelete:function(){this.$el.find(".item-input-field").removeAttr("disabled")}})}(),SirTrevor.Blocks.SolrDocuments=function(){return Spotlight.Block.Resources.extend({type:"solr_documents",textable:!0,icon_name:"items",autocomplete_url:function(){return this.$instance().closest("form[data-autocomplete-exhibit-catalog-index-path]").data("autocomplete-exhibit-catalog-index-path").replace("%25QUERY","%QUERY")},autocomplete_template:function(){return'<div class="autocomplete-item{{#if private}} blacklight-private{{/if}}">{{#if thumbnail}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'},transform_autocomplete_results:function(t){return $.map(t.docs,function(t){return t})},caption_option_values:function(){var t=$("[data-blacklight-configuration-index-fields]").data("blacklight-configuration-index-fields");return $.map(t,function(t){return $("<option />").val(t.key).text(t.label)[0].outerHTML}).join("\n")},item_options:function(){return this.caption_options()},caption_options:function(){return['<div class="field-select primary-caption" data-behavior="item-caption-admin">','<input name="<%= show_primary_field_key %>" type="hidden" value="false" />','<input data-input-select-target="#<%= formId(primary_field_key) %>" name="<%= show_primary_field_key %>" id="<%= formId(show_primary_field_key) %>" type="checkbox" value="true" />','<label for="<%= formId(show_primary_field_key) %>"><%= i18n.t("blocks:solr_documents:caption:primary") %></label>','<select data-input-select-target="#<%= formId(show_primary_field_key) %>" name="<%= primary_field_key %>" id="<%= formId(primary_field_key) %>">','<option value=""><%= i18n.t("blocks:solr_documents:caption:placeholder") %></option>',"<%= caption_option_values() %>","</select>","</div>",'<div class="field-select secondary-caption" data-behavior="item-caption-admin">','<input name="<%= show_secondary_field_key %>" type="hidden" value="false" />','<input data-input-select-target="#<%= formId(secondary_field_key) %>" name="<%= show_secondary_field_key %>" id="<%= formId(show_secondary_field_key) %>" type="checkbox" value="true" />','<label for="<%= formId(show_secondary_field_key) %>"><%= i18n.t("blocks:solr_documents:caption:secondary") %></label>','<select data-input-select-target="#<%= formId(show_secondary_field_key) %>" name="<%= secondary_field_key %>" id="<%= formId(secondary_field_key) %>">','<option value=""><%= i18n.t("blocks:solr_documents:caption:placeholder") %></option>',"<%= caption_option_values() %>","</select>","</div>"].join("\n")},afterPanelRender:function(t,e){var n=this;_.isUndefined(t.image_versions)?$.getJSON(this.autocomplete_url().replace("%QUERY","id:"+t.id),function(t){var i=n.transform_autocomplete_results(t)[0];_.isUndefined(i)||e.multiImageSelector(i.image_versions)}):e.multiImageSelector(t.image_versions)}})}(),SirTrevor.Blocks.SolrDocumentsCarousel=function(){return SirTrevor.Blocks.SolrDocuments.extend({textable:!1,type:"solr_documents_carousel",icon_name:"item_carousel",auto_play_images_key:"auto-play-images",auto_play_images_interval_key:"auto-play-images-interval",max_height_key:"max-height",item_options:function(){return""},carouselCycleTimesInSeconds:{values:[3,5,8,12,20],selected:5},carouselMaxHeights:{values:{Small:"small",Medium:"medium",Large:"large"},selected:"Medium"},item_options:function(){return[this.caption_options(),'<div class="field-select auto-cycle-images" data-behavior="auto-cycle-images">','<input name="<%= auto_play_images_key %>" type="hidden" value="false" />','<input name="<%= auto_play_images_key %>" id="<%= formId(auto_play_images_key) %>" data-key="<%= auto_play_images_key %>" type="checkbox" value="true" checked/>','<label for="<%= formId(auto_play_images_key) %>"><%= i18n.t("blocks:solr_documents_carousel:interval:title") %></label>','<select name="<%= auto_play_images_interval_key %>" id="<%= formId(auto_play_images_interval_key) %>" data=key="<%= auto_play_images_interval_key %>">','<option value=""><%= i18n.t("blocks:solr_documents_carousel:interval:placeholder") %></option>',"<%= addCarouselCycleOptions(carouselCycleTimesInSeconds) %>","</select>","</div>",'<div class="field-select max-heights" data-behavior="max-heights">','<label for="<%= formId(max_height_key) %>"><%= i18n.t("blocks:solr_documents_carousel:height:title") %></label><br/>',"<%= addCarouselMaxHeightOptions(carouselMaxHeights) %>","</div>"].join("\n")},addCarouselCycleOptions:function(t){var e="";return $.each(t.values,function(n,i){var r=i===t.selected?"selected":"",o=1e3*parseInt(i,10);e+='<option value="'+o+'" '+r+">"+i+" seconds</option>"}),e},addCarouselMaxHeightOptions:function(t){var e="",n=this;return $.each(t.values,function(i,r){var o=i===t.selected?"checked":"",a=n.formId(n.max_height_key);e+='<input data-key="'+n.max_height_key+'" type="radio" name="'+a+'" value="'+r+'" id="'+a+'" '+o+">",e+='<label class="carousel-size" for="'+a+'">'+i+"</label>"}),e},afterPreviewLoad:function(t){this.$el.find(".carousel").carousel();var e=function(t){var e,n=$(this),i=$(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var r=$.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(r.interval=!1),$.fn.carousel.call(i,r),o&&i.data("bs.carousel").to(o),t.preventDefault()}};this.$el.find(".carousel").on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e)}})}(),SirTrevor.Blocks.SolrDocumentsEmbed=function(){return SirTrevor.Blocks.SolrDocuments.extend({type:"solr_documents_embed",icon_name:"item_embed",item_options:function(){return""},afterPreviewLoad:function(t){this.$el.find("picture[data-openseadragon]").openseadragon()}})}(),SirTrevor.Blocks.SolrDocumentsFeatures=function(){return SirTrevor.Blocks.SolrDocuments.extend({textable:!1,type:"solr_documents_features",icon_name:"item_features",afterPreviewLoad:function(t){this.$el.find(".carousel").carousel();var e=function(t){var e,n=$(this),i=$(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var r=$.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(r.interval=!1),$.fn.carousel.call(i,r),o&&i.data("bs.carousel").to(o),t.preventDefault()}};this.$el.find(".carousel").on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e)}})}(),SirTrevor.Blocks.SolrDocumentsGrid=function(){return SirTrevor.Blocks.SolrDocuments.extend({type:"solr_documents_grid",icon_name:"item_grid",item_options:function(){return""}})}(),SirTrevor.Blocks.UploadedItems=function(){return Spotlight.Block.Resources.extend({textable:!0,uploadable:!0,autocompleteable:!1,id_key:"file",type:"uploaded_items",icon_name:"items",blockGroup:"undefined",upload_options:{html:""},fileInput:function(){return this.$el.find('input[type="file"]')},onBlockRender:function(){SpotlightNestable.init(this.$el.find('[data-behavior="nestable"]')),this.fileInput().on("change",function(t){this.onDrop(t.currentTarget)}.bind(this))},onDrop:function(t){var e=t.files[0];"undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),this.uploader(e,function(t){this.createItemPanel(t),this.fileInput().val(""),this.ready()},function(t){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))},title:function(){return i18n.t("blocks:uploaded_items:title")},description:function(){return i18n.t("blocks:uploaded_items:description")},globalIndex:0,_itemPanel:function(t){var e="file_"+this.globalIndex++,n='checked="checked"';"false"==t.display&&(n="");var i=t.id||t.uid,r=t.title||t.name,o=t.url||t.file.url,a=['<li class="field form-inline dd-item dd3-item" data-id="'+e+'" id="'+this.formId("item_"+i)+'">','<input type="hidden" name="item['+e+'][id]" value="'+i+'" />','<input type="hidden" name="item['+e+'][title]" value="'+r+'" />','<input type="hidden" name="item['+e+'][url]" data-item-grid-thumbnail="true"  value="'+o+'"/>','<input data-property="weight" type="hidden" name="item['+e+'][weight]" value="'+t.weight+'" />','<div class="dd-handle dd3-handle"><%= i18n.t("blocks:resources:panel:drag") %></div>','<div class="dd3-content panel panel-default">','<div class="panel-heading item-grid">','<div class="checkbox">','<input name="item['+e+'][display]" type="hidden" value="false" />','<input name="item['+e+'][display]" id="'+this.formId(this.display_checkbox+"_"+i)+'" type="checkbox" '+n+' class="item-grid-checkbox" value="true"  />','<label class="sr-only" for="'+this.formId(this.display_checkbox+"_"+i)+'"><%= i18n.t("blocks:resources:panel:display") %></label>',"</div>",'<div class="pic thumbnail">','<img src="'+o+'" />',"</div>",'<div class="main">','<div class="title panel-title">'+r+"</div>","</div>",'<div class="remove pull-right">','<a data-item-grid-panel-remove="true" href="#"><%= i18n.t("blocks:resources:panel:remove") %></a>',"</div>","</div>","</div>","</li>"].join("\n"),s=$(_.template(a)(this)),l=this;return $(".remove a",s).on("click",function(t){t.preventDefault(),$(this).closest(".field").remove(),l.afterPanelDelete()}),this.afterPanelRender(t,s),s},template:['<div class="form oembed-text-admin clearfix">','<div class="widget-header">',"<%= description() %>","</div>",'<div class="row">','<div class="form-group col-md-8">','<div class="panels dd nestable-item-grid" data-behavior="nestable" data-max-depth="1">','<ol class="dd-list">',"</ol>","</div>",'<input type="file" id="uploaded_item_url" name="file[file_0][file_data]" />',"</div>","</div>","<%= text_area() %>","</div>"].join("\n")})}(),Spotlight.onLoad(function(){if($("#solr_document_exhibit_tag_list").length>0){$("#solr_document_exhibit_tag_list").tagsinput();var t=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:{url:$("#solr_document_exhibit_tag_list").data("autocomplete_url"),ttl:1,filter:function(t){return $.map(t,function(t){return{name:t}})}}});t.initialize(),$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead({highlight:!0,hint:!1},{name:"tags",displayKey:"name",source:t.ttAdapter()}).bind("typeahead:selected",$.proxy(function(t,e){$("#solr_document_exhibit_tag_list").tagsinput("add",e.name),$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead("val","")})).bind("blur",function(){$("#solr_document_exhibit_tag_list").tagsinput("add",$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead("val")),$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead("val","")})}$(".visiblity_toggle").bl_checkbox_submit({css_class:"toggle_visibility",success:function(t){var e=$($(this).data("label-toggle-target"));t?e.removeClass("blacklight-private"):e.addClass("blacklight-private")}})}),function(t){t.fn.spotlightCheckUserExistence=function(){function e(){d=t(this),""!==d.val()&&c()[0].checkValidity()?t.ajax(h()).success(i).fail(r):i()}function n(){""===t(this).val()&&i()}function i(){l().hide(),u().prop("disabled",!1)}function r(){o(),l().show(),s().on("change",o),u().prop("disabled",!0)}function o(){var t=l().find("a"),e=t.data("inviteUrl"),n=d.val();t.attr("href",e+"?user="+encodeURIComponent(n)+"&role="+encodeURIComponent(a()))}function a(){return s().length>0?s().val():d.closest("tr").find("[data-user-role]").data("userRole")}function s(){return d.closest("tr").find("select")}function l(){return c().find('[data-behavior="no-user-note"]')}function u(){return c().find('input[type="submit"]')}function c(){return d.closest("form")}function h(){return t("[data-user-exists-url]").data("userExistsUrl")+"?user="+d.val()}var d,p=this;return t(p).each(function(){t(this).on("blur",e),t(this).on("change",n)}),this}}(jQuery),Spotlight.onLoad(function(){$('[data-behavior="check-user-existence"]').spotlightCheckUserExistence()}),/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
* The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
* The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
* Code distributed by Google as part of the polymer project is also
* subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(t,i)}}),function(t){function e(t){w.push(t),b||(b=!0,m(i))}function n(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function i(){b=!1;var t=w;w=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var n=t.takeRecords();r(t),n.length&&(t.callback_(n,t),e=!0)}),e&&i()}function r(t){t.nodes_.forEach(function(e){var n=g.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function o(t,e){for(var n=t;n;n=n.parentNode){var i=g.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],a=o.options;if(n===t||a.subtree){var s=e(a);s&&o.enqueue(s)}}}}function a(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++x}function s(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new s(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function u(t,e){return _=new s(t,e)}function c(t){return k?k:(k=l(_),k.oldValue=t,k)}function h(){_=k=void 0}function d(t){return t===k||t===_}function p(t,e){return t===e?t:k&&d(t)?k:null}function f(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}"undefined"==typeof WeakMap&&!function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(e++ +"__")};n.prototype={set:function(e,n){var i=e[this.name];return i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return e&&e[0]===t?(e[0]=e[1]=void 0,!0):!1},has:function(t){var e=t[this.name];return e?e[0]===t:!1}},window.WeakMap=n}();var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),m=function(t){v.push(t),window.postMessage(y,"*")}}var b=!1,w=[],x=0;a.prototype={observe:function(t,e){if(t=n(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var i=g.get(t);i||g.set(t,i=[]);for(var r,o=0;o<i.length;o++)if(i[o].observer===this){r=i[o],r.removeListeners(),r.options=e;break}r||(r=new f(this,t,e),i.push(r),this.nodes_.push(t)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var _,k;f.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var r=n[i-1],o=p(r,t);if(o)return void(n[i-1]=o)}else e(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target,r=new u("attributes",i);r.attributeName=e,r.attributeNamespace=n;var a=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;o(i,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?c(a):r});break;case"DOMCharacterDataModified":var i=t.target,r=u("characterData",i),a=t.prevValue;o(i,function(t){return t.characterData?t.characterDataOldValue?c(a):r:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,l,i=t.relatedNode,d=t.target;"DOMNodeInserted"===t.type?(s=[d],l=[]):(s=[],l=[d]);var p=d.previousSibling,f=d.nextSibling,r=u("childList",i);r.addedNodes=s,r.removedNodes=l,r.previousSibling=p,r.nextSibling=f,o(i,function(t){return t.childList?r:void 0})}h()}},t.JsMutationObserver=a,t.MutationObserver||(t.MutationObserver=a)}(this),Spotlight.onLoad(function(){$('[data-croppable="true"]').croppable()}),function(t){t.fn.croppable=function(e){var n=this,e=e,i={setSelect:"[0,0,200,200]"};return t(n).each(function(){function n(t){u.css({width:Math.round(100/t.w*l.width())+"px",height:Math.round(100/t.h*l.height())+"px",marginLeft:"-"+Math.round(100/t.w*t.x)+"px",marginTop:"-"+Math.round(100/t.h*t.y)+"px"})}function r(e){t("#"+a+"_crop_x").val(e.x),t("#"+a+"_crop_y").val(e.y),t("#"+a+"_crop_w").val(e.w),t("#"+a+"_crop_h").val(e.h),n(e)}var o=t(this),a=o.data("selector")||this.id,s=t("#"+a+"_crop").val(),l=t("#"+a+"_cropbox"),u=t("#"+a+"_previewbox"),c=l.closest(".croppable-loading-area");"[0,0,0,0]"==s&&(s=null);var h={setSelect:t.parseJSON(s||JSON.stringify(o.data("initialSetSelect"))||i.setSelect),selector:a},d=t.extend(h,o.data(),e);l.data("jcropProcessed")||(l[0].complete===!1&&l[0].src==window.location.href&&(l[0].src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="),l.Jcrop(t.extend(d,{onSelect:r,onChange:r}))),l.data("jcropProcessed","true"),l.on("load",function(){c.removeClass("loading-jcrop");var t=l.data("Jcrop");t&&(t.setSelect(d.setSelect),serializeObservedForms(observedForms()))}),o.on("change",function(){var e=l.data("Jcrop");if(c.addClass("loading-jcrop"),this.files){var n=this.files[0],i=l[0];i.file=n;var r=new FileReader;r.onload=function(t){return function(t){e.setImage(t.target.result),l.css({width:"",height:""}),l[0].src=t.target.result,u.length>0&&(u[0].src=t.target.result),e.setSelect(d.setSelect)}}(i),r.readAsDataURL(n)}else{var o=t(this).attr("value");e.setImage(o),l.css({width:"",height:""}),l[0].src=o,u.length>0&&(u[0].src=o),e.setSelect(d.setSelect)}l.closest(".missing-croppable").removeClass("missing-croppable")})}),this}}(jQuery),Spotlight.onLoad(function(){$("[data-in-place-edit-target]").spotlightEditInPlace()}),function(t){t.fn.spotlightEditInPlace=function(){var e=this;return t(e).each(function(){t(this).on("click.inplaceedit",function(){var e=t(this).find(t(this).data("in-place-edit-target")),n=t(this).find(t(this).data("in-place-edit-field-target"));return t(this).addClass("hide-edit-icon"),e.hide(),n.val(e.text()),n.attr("type","text"),n.select(),n.focus(),n.on("keypress",function(t){return 13==t.which?(n.trigger("blur.inplaceedit"),!1):void 0}),n.on("blur.inplaceedit",function(){return e.text(n.val()),e.show(),n.attr("type","hidden"),t("[data-in-place-edit-target]").removeClass("hide-edit-icon"),!1}),!1})}),this}}(jQuery),Spotlight.onLoad(function(){$("#new_exhibit").each(function(){$("#exhibit_title").on("change keyup",function(){$("#exhibit_slug").attr("placeholder",URLify($(this).val(),$(this).val().length))}),$("#exhibit_slug").on("focus",function(){""===$(this).val()&&$(this).val($(this).attr("placeholder"))})}),$("#another-email").on("click",function(){var t=$(this).closest(".form-group"),e=t.find(".contact"),n=e.first().clone();n.find("input").each(function(){$(this).val(""),$(this).attr("id",$(this).attr("id").replace("0",e.length)),$(this).attr("name",$(this).attr("name").replace("0",e.length))}),n.find(".first-row-only").remove(),n.find(".input-group input:only-child").closest(".input-group").removeClass("input-group"),$(n).insertAfter(e.last())}),$(".btn-with-tooltip").tooltip(),$("#save-modal").on("shown.bs.modal",function(){$("#search_title").focus()})}),Spotlight.onLoad(function(){serializeObservedForms(observedForms())}),$(window).on("beforeunload page:before-change",function(t){if(observedFormsStatusHasChanged()){var e="You have unsaved changes. Are you sure you want to leave this page?";return"beforeunload"==t.type?e:confirm(e)}}),/**
 * jquery.Jcrop.js v0.9.12
 * jQuery Image Cropping Plugin - released under MIT License 
 * Author: Kelly Hallman <khallman@gmail.com>
 * http://github.com/tapmodo/Jcrop
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * }}}
 *
 * This is a fork of the above mentioned code which is available at https://github.com/sul-dlss/Jcrop
 */
function(t){t.Jcrop=function(e,n){function i(t){return Math.round(t)+"px"}function r(t){return M.baseClass+"-"+t}function o(){return t.fx.step.hasOwnProperty("backgroundColor")}function a(e){var n=t(e).offset();return[n.left,n.top]}function s(t){return[t.pageX-I[0],t.pageY-I[1]]}function l(e){"object"!=typeof e&&(e={}),M=t.extend(M,e),t.each(["onChange","onSelect","onRelease","onDblClick"],function(t,e){"function"!=typeof M[e]&&(M[e]=function(){})})}function u(t,e,n){if(I=a(U),ft.setCursor("move"===t?t:t+"-resize"),"move"===t)return ft.activateHandlers(h(e),g,n);var i=ht.getFixed(),r=d(t),o=ht.getCorner(d(r));ht.setPressed(ht.getCorner(r)),ht.setCurrent(o),ft.activateHandlers(c(t,i),g,n)}function c(t,e){return function(n){if(M.aspectRatio)switch(t){case"e":n[1]=e.y+1;break;case"w":n[1]=e.y+1;break;case"n":n[0]=e.x+1;break;case"s":n[0]=e.x+1}else switch(t){case"e":n[1]=e.y2;break;case"w":n[1]=e.y2;break;case"n":n[0]=e.x2;break;case"s":n[0]=e.x2}ht.setCurrent(n),pt.update()}}function h(t){var e=t;return mt.watchKeys(),function(t){ht.moveOffset([t[0]-e[0],t[1]-e[1]]),e=t,pt.update()}}function d(t){switch(t){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(t){return function(e){return M.disabled?!1:"move"!==t||M.allowMove?(I=a(U),it=!0,u(t,s(e)),e.stopPropagation(),e.preventDefault(),!1):!1}}function f(t,e,n){var i=t.width(),r=t.height();i>e&&e>0&&(i=e,r=e/t.width()*t.height()),r>n&&n>0&&(r=n,i=n/t.height()*t.width()),et=t.width()/i,nt=t.height()/r,t.width(i).height(r)}function m(t){return{x:t.x*et,y:t.y*nt,x2:t.x2*et,y2:t.y2*nt,w:t.w*et,h:t.h*nt}}function g(t){var e=ht.getFixed();e.w>M.minSelect[0]&&e.h>M.minSelect[1]?(pt.enableHandles(),pt.done()):pt.release(),ft.setCursor(M.allowSelect?"crosshair":"default")}function v(t){if(!M.disabled&&M.allowSelect){it=!0,I=a(U),pt.disableHandles(),ft.setCursor("crosshair");var e=s(t);return ht.setPressed(e),pt.update(),ft.activateHandlers(y,g,"touch"===t.type.substring(0,5)),mt.watchKeys(),t.stopPropagation(),t.preventDefault(),!1}}function y(t){ht.setCurrent(t),pt.update()}function b(){var e=t("<div></div>").addClass(r("tracker"));return R&&e.css({opacity:0,backgroundColor:"white"}),e}function w(t){W.removeClass().addClass(r("holder")).addClass(t)}function x(t,e){function n(){window.setTimeout(y,h)}var i=t[0]/et,r=t[1]/nt,o=t[2]/et,a=t[3]/nt;if(!rt){var s=ht.flipCoords(i,r,o,a),l=ht.getFixed(),u=[l.x,l.y,l.x2,l.y2],c=u,h=M.animationDelay,d=s[0]-u[0],p=s[1]-u[1],f=s[2]-u[2],m=s[3]-u[3],g=0,v=M.swingSpeed;i=c[0],r=c[1],o=c[2],a=c[3],pt.animMode(!0);var y=function(){return function(){g+=(100-g)/v,c[0]=Math.round(i+g/100*d),c[1]=Math.round(r+g/100*p),c[2]=Math.round(o+g/100*f),c[3]=Math.round(a+g/100*m),g>=99.8&&(g=100),100>g?(k(c),n()):(pt.done(),pt.animMode(!1),"function"==typeof e&&e.call(gt))}}();n()}}function _(t){k([t[0]/et,t[1]/nt,t[2]/et,t[3]/nt]),M.onSelect.call(gt,m(ht.getFixed())),pt.enableHandles()}function k(t){ht.setPressed([t[0],t[1]]),ht.setCurrent([t[2],t[3]]),pt.update()}function $(){return m(ht.getFixed())}function S(){return ht.getFixed()}function T(t){l(t),O()}function E(){M.disabled=!0,pt.disableHandles(),pt.setCursor("default"),ft.setCursor("default")}function C(){M.disabled=!1,O()}function P(){pt.done(),ft.activateHandlers(null,null)}function A(){W.remove(),F.show(),F.css("visibility","visible"),t(e).removeData("Jcrop")}function D(t,e){pt.release(),E();var n=new Image;n.onload=function(){var i=n.width,r=n.height,o=M.boxWidth,a=M.boxHeight;U.width(i).height(r),U.attr("src",t),K.attr("src",t),f(U,o,a),q=U.width(),V=U.height(),K.width(q).height(V),st.width(q+2*at).height(V+2*at),W.width(q).height(V),dt.resize(q,V),C(),"function"==typeof e&&e.call(gt)},n.src=t}function N(t,e,n){var i=e||M.bgColor;M.bgFade&&o()&&M.fadeTime&&!n?t.animate({backgroundColor:i},{queue:!1,duration:M.fadeTime}):t.css("backgroundColor",i)}function O(t){M.allowResize?t?pt.enableOnly():pt.enableHandles():pt.disableHandles(),ft.setCursor(M.allowSelect?"crosshair":"default"),pt.setCursor(M.allowMove?"move":"default"),M.hasOwnProperty("trueSize")&&(et=M.trueSize[0]/q,nt=M.trueSize[1]/V),M.hasOwnProperty("setSelect")&&(_(M.setSelect),pt.done(),delete M.setSelect),dt.refresh(),M.bgColor!=lt&&(N(M.shade?dt.getShades():W,M.shade?M.shadeColor||M.bgColor:M.bgColor),lt=M.bgColor),ut!=M.bgOpacity&&(ut=M.bgOpacity,M.shade?dt.refresh():pt.setBgOpacity(ut)),Z=M.maxSize[0]||0,Q=M.maxSize[1]||0,J=M.minSize[0]||0,tt=M.minSize[1]||0,M.hasOwnProperty("outerImage")&&(U.attr("src",M.outerImage),delete M.outerImage),pt.refresh()}var I,M=t.extend({},t.Jcrop.defaults),B=navigator.userAgent.toLowerCase(),R=/msie/.test(B),j=/msie [1-6]\./.test(B);"object"!=typeof e&&(e=t(e)[0]),"object"!=typeof n&&(n={}),l(n);var L={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},F=t(e),H=!0;if("IMG"==e.tagName){if(0!=F[0].width&&0!=F[0].height)F.width(F[0].width),F.height(F[0].height);else{var z=new Image;z.src=F[0].src,F.width(z.width),F.height(z.height)}var U=F.clone().removeAttr("id").css(L).show();U.width(F.width()),U.height(F.height()),F.after(U).hide()}else U=F.css(L).show(),H=!1,null===M.shade&&(M.shade=!0);f(U,M.boxWidth,M.boxHeight);var q=U.width(),V=U.height(),W=t("<div />").width(q).height(V).addClass(r("holder")).css({position:"relative",backgroundColor:M.bgColor}).insertAfter(F).append(U);M.addClass&&W.addClass(M.addClass);var K=t("<div />"),G=t("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=t("<div />").width("100%").height("100%").css("zIndex",320),Y=t("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var t=ht.getFixed();M.onDblClick.call(gt,t)}).insertBefore(U).append(G,X);H&&(K=t("<img />").attr("src",U.attr("src")).css(L).width(q).height(V),G.append(K)),j&&Y.css({overflowY:"hidden"});var Z,Q,J,tt,et,nt,it,rt,ot,at=M.boundary,st=b().width(q+2*at).height(V+2*at).css({position:"absolute",top:i(-at),left:i(-at),zIndex:290}).mousedown(v),lt=M.bgColor,ut=M.bgOpacity;I=a(U);var ct=function(){function t(){var t,e={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(t=0;t<n.length;t++){var r=n[t];r="on"+r;var o=r in i;o||(i.setAttribute(r,"return;"),o="function"==typeof i[r]),e[n[t]]=o}return e.touchstart&&e.touchend&&e.touchmove}catch(a){return!1}}function e(){return M.touchSupport===!0||M.touchSupport===!1?M.touchSupport:t()}return{createDragger:function(t){return function(e){return M.disabled?!1:"move"!==t||M.allowMove?(I=a(U),it=!0,u(t,s(ct.cfilter(e)),!0),e.stopPropagation(),e.preventDefault(),!1):!1}},newSelection:function(t){return v(ct.cfilter(t))},cfilter:function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t},isSupported:t,support:e()}}(),ht=function(){function t(t){t=a(t),f=d=t[0],m=p=t[1]}function e(t){t=a(t),c=t[0]-f,h=t[1]-m,f=t[0],m=t[1]}function n(){return[c,h]}function i(t){var e=t[0],n=t[1];0>d+e&&(e-=e+d),0>p+n&&(n-=n+p),m+n>V&&(n+=V-(m+n)),f+e>q&&(e+=q-(f+e)),d+=e,f+=e,p+=n,m+=n}function r(t){var e=o();switch(t){case"ne":return[e.x2,e.y];case"nw":return[e.x,e.y];case"se":return[e.x2,e.y2];case"sw":return[e.x,e.y2]}}function o(){if(!M.aspectRatio)return l();var t,e,n,i,r=M.aspectRatio,o=M.minSize[0]/et,a=M.maxSize[0]/et,c=M.maxSize[1]/nt,h=f-d,g=m-p,v=Math.abs(h),y=Math.abs(g),b=v/y;return 0===a&&(a=10*q),0===c&&(c=10*V),r>b?(e=m,n=y*r,t=0>h?d-n:n+d,0>t?(t=0,i=Math.abs((t-d)/r),e=0>g?p-i:i+p):t>q&&(t=q,i=Math.abs((t-d)/r),e=0>g?p-i:i+p)):(t=f,i=v/r,e=0>g?p-i:p+i,0>e?(e=0,n=Math.abs((e-p)*r),t=0>h?d-n:n+d):e>V&&(e=V,n=Math.abs(e-p)*r,t=0>h?d-n:n+d)),t>d?(o>t-d?t=d+o:t-d>a&&(t=d+a),e=e>p?p+(t-d)/r:p-(t-d)/r):d>t&&(o>d-t?t=d-o:d-t>a&&(t=d-a),e=e>p?p+(d-t)/r:p-(d-t)/r),0>t?(d-=t,t=0):t>q&&(d-=t-q,t=q),0>e?(p-=e,e=0):e>V&&(p-=e-V,e=V),u(s(d,p,t,e))}function a(t){return t[0]<0&&(t[0]=0),t[1]<0&&(t[1]=0),t[0]>q&&(t[0]=q),t[1]>V&&(t[1]=V),[Math.round(t[0]),Math.round(t[1])]}function s(t,e,n,i){var r=t,o=n,a=e,s=i;return t>n&&(r=n,o=t),e>i&&(a=i,s=e),[r,a,o,s]}function l(){var t,e=f-d,n=m-p;return Z&&Math.abs(e)>Z/et&&(f=e>0?d+Z/et:d-Z/et),Q&&Math.abs(n)>Q/nt&&(m=n>0?p+Q/nt:p-Q/nt),tt/nt&&Math.abs(n)<tt/nt&&(m=n>0?p+tt/nt:p-tt/nt),J/et&&Math.abs(e)<J/et&&(f=e>0?d+J/et:d-J/et),0>d&&(f-=d,d-=d),0>p&&(m-=p,p-=p),0>f&&(d-=f,f-=f),0>m&&(p-=m,m-=m),f>q&&(t=f-q,d-=t,f-=t),m>V&&(t=m-V,p-=t,m-=t),d>q&&(t=d-V,m-=t,p-=t),p>V&&(t=p-V,m-=t,p-=t),u(s(d,p,f,m))}function u(t){return{x:t[0],y:t[1],x2:t[2],y2:t[3],w:t[2]-t[0],h:t[3]-t[1]}}var c,h,d=0,p=0,f=0,m=0;return{flipCoords:s,setPressed:t,setCurrent:e,getOffset:n,moveOffset:i,getCorner:r,getFixed:o}}(),dt=function(){function e(t,e){f.left.css({height:i(e)}),f.right.css({height:i(e)})}function n(){return r(ht.getFixed())}function r(t){f.top.css({left:i(t.x),width:i(t.w),height:i(t.y)}),f.bottom.css({top:i(t.y2),left:i(t.x),width:i(t.w),height:i(V-t.y2)}),f.right.css({left:i(t.x2),width:i(q-t.x2)}),f.left.css({width:i(t.x)})}function o(){return t("<div />").css({position:"absolute",backgroundColor:M.shadeColor||M.bgColor}).appendTo(p)}function a(){d||(d=!0,p.insertBefore(U),n(),pt.setBgOpacity(1,0,1),K.hide(),s(M.shadeColor||M.bgColor,1),pt.isAwake()?u(M.bgOpacity,1):u(1,1))}function s(t,e){N(h(),t,e)}function l(){d&&(p.remove(),K.show(),d=!1,pt.isAwake()?pt.setBgOpacity(M.bgOpacity,1,1):(pt.setBgOpacity(1,1,1),pt.disableHandles()),N(W,0,1))}function u(t,e){d&&(M.bgFade&&!e?p.animate({opacity:1-t},{queue:!1,duration:M.fadeTime}):p.css({opacity:1-t}))}function c(){M.shade?a():l(),pt.isAwake()&&u(M.bgOpacity)}function h(){return p.children()}var d=!1,p=t("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:o(),left:o().height(V),right:o().height(V),bottom:o()};return{update:n,updateRaw:r,getShades:h,setBgColor:s,enable:a,disable:l,resize:e,refresh:c,opacity:u}}(),pt=function(){function e(e){var n=t("<div />").css({position:"absolute",opacity:M.borderOpacity}).addClass(r(e));return G.append(n),n}function n(e,n){var i=t("<div />").mousedown(p(e)).css({cursor:e+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+e);return ct.support&&i.bind("touchstart.jcrop",ct.createDragger(e)),X.append(i),i}function o(t){var e=M.handleSize,i=n(t,E++).css({opacity:M.handleOpacity}).addClass(r("handle"));return e&&i.width(e).height(e),i}function a(t){return n(t,E++).addClass("jcrop-dragbar")}function s(t){var e;for(e=0;e<t.length;e++)A[t[e]]=a(t[e])}function l(t){var n,i;for(i=0;i<t.length;i++){switch(t[i]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}C[t[i]]=e(n)}}function u(t){var e;for(e=0;e<t.length;e++)P[t[e]]=o(t[e])}function c(t,e){M.shade||K.css({top:i(-e),left:i(-t)}),Y.css({top:i(e),left:i(t)})}function h(t,e){Y.width(Math.round(t)).height(Math.round(e))}function d(){var t=ht.getFixed();ht.setPressed([t.x,t.y]),ht.setCurrent([t.x2,t.y2]),f()}function f(t){return T?g(t):void 0}function g(t){var e=ht.getFixed();h(e.w,e.h),c(e.x,e.y),M.shade&&dt.updateRaw(e),T||y(),t?M.onSelect.call(gt,m(e)):M.onChange.call(gt,m(e))}function v(t,e,n){(T||e)&&(M.bgFade&&!n?U.animate({opacity:t},{queue:!1,duration:M.fadeTime}):U.css("opacity",t))}function y(){Y.show(),M.shade?dt.opacity(ut):v(ut,!0),T=!0}function w(){k(),Y.hide(),M.shade?dt.opacity(1):v(1),T=!1,M.onRelease.call(gt)}function x(){D&&X.show()}function _(){return D=!0,M.allowResize?(X.show(),!0):void 0}function k(){D=!1,X.hide()}function $(t){t?(rt=!0,k()):(rt=!1,_())}function S(){$(!1),d()}var T,E=370,C={},P={},A={},D=!1;M.dragEdges&&t.isArray(M.createDragbars)&&s(M.createDragbars),t.isArray(M.createHandles)&&u(M.createHandles),M.drawBorders&&t.isArray(M.createBorders)&&l(M.createBorders),t(document).bind("touchstart.jcrop-ios",function(e){t(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()});var N=b().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return ct.support&&N.bind("touchstart.jcrop",ct.createDragger("move")),G.append(N),k(),{updateVisible:f,update:g,release:w,refresh:d,isAwake:function(){return T},setCursor:function(t){N.css("cursor",t)},enableHandles:_,enableOnly:function(){D=!0},showHandles:x,disableHandles:k,animMode:$,setBgOpacity:v,done:S}}(),ft=function(){function e(e){st.css({zIndex:450}),e?t(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",l):d&&t(document).bind("mousemove.jcrop",i).bind("mouseup.jcrop",r)}function n(){st.css({zIndex:290}),t(document).unbind(".jcrop")}function i(t){return c(s(t)),!1}function r(t){return t.preventDefault(),t.stopPropagation(),it&&(it=!1,h(s(t)),pt.isAwake()&&M.onSelect.call(gt,m(ht.getFixed())),n(),c=function(){},h=function(){}),!1}function o(t,n,i){return it=!0,c=t,h=n,e(i),!1}function a(t){return c(s(ct.cfilter(t))),!1}function l(t){return r(ct.cfilter(t))}function u(t){st.css("cursor",t)}var c=function(){},h=function(){},d=M.trackDocument;return d||st.mousemove(i).mouseup(r).mouseout(r),U.before(st),{activateHandlers:o,setCursor:u}}(),mt=function(){function e(){M.keySupport&&(o.show(),o.focus())}function n(t){o.hide()}function i(t,e,n){M.allowMove&&(ht.moveOffset([e,n]),pt.updateVisible(!0)),t.preventDefault(),t.stopPropagation()}function r(t){if(t.ctrlKey||t.metaKey)return!0;ot=t.shiftKey?!0:!1;var e=ot?10:1;switch(t.keyCode){case 37:i(t,-e,0);break;case 39:i(t,e,0);break;case 38:i(t,0,-e);break;case 40:i(t,0,e);break;case 27:M.allowSelect&&pt.release();break;case 9:return!0}return!1}var o=t('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),a=t("<div />").css({position:"absolute",overflow:"hidden"}).append(o);return M.keySupport&&(o.keydown(r).blur(n),j||!M.fixedSupport?(o.css({position:"absolute",left:"-20px"}),a.append(o).insertBefore(U)):o.insertBefore(U)),{watchKeys:e}}();ct.support&&st.bind("touchstart.jcrop",ct.newSelection),X.hide(),O(!0);var gt={setImage:D,animateTo:x,setSelect:_,setOptions:T,tellSelect:$,tellScaled:S,setClass:w,disable:E,enable:C,cancel:P,release:pt.release,destroy:A,focus:mt.watchKeys,getBounds:function(){return[q*et,V*nt]},getWidgetSize:function(){return[q,V]},getScaleFactor:function(){return[et,nt]},getOptions:function(){return M},ui:{holder:W,selection:Y}};return R&&W.bind("selectstart",function(){return!1}),F.data("Jcrop",gt),gt},t.fn.Jcrop=function(e,n){var i;return this.each(function(){if(t(this).data("Jcrop")){if("api"===e)return t(this).data("Jcrop");t(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?t.Jcrop.Loader(this,function(){t(this).css({display:"block",visibility:"hidden"}),i=t.Jcrop(this,e),t.isFunction(n)&&n.call(i)}):(t(this).css({display:"block",visibility:"hidden"}),i=t.Jcrop(this,e),t.isFunction(n)&&n.call(i))}),this},t.Jcrop.Loader=function(e,n,i){function r(){a.complete?(o.unbind(".jcloader"),t.isFunction(n)&&n.call(a)):window.setTimeout(r,50)}var o=t(e),a=o[0];o.bind("load.jcloader",r).bind("error.jcloader",function(e){o.unbind(".jcloader"),t.isFunction(i)&&i.call(a)}),a.complete&&t.isFunction(n)&&(o.unbind(".jcloader"),n.call(a))},t.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),Spotlight.onLoad(function(){function t(t){$.ajax({url:$(t).data("lock"),type:"POST",data:{_method:"delete"},async:!1}),$(t).removeAttr("data-lock")}$("[data-lock]").on("click",function(e){t(this)})}),function(){$.fn.multiImageSelector=function(t){function e(e){f=e,t&&t.length>1&&(n(),c())}function n(){$("[data-panel-image-pagination]",f).html("Image <span data-current-image='true'>"+r(i())+"</span> of "+t.length).show().append(m),o()}function i(){return $("[data-item-grid-thumbnail]",f).attr("value")}function r(t){return(index=y.indexOf(t))>-1?index+1:1}function o(){m.on("click",function(){g.slideToggle(),a(),l(),u(),s(),d($(this))})}function a(){var t=0;$("li",v).each(function(){t+=$(this).outerWidth()}),v.width(t+5)}function s(){var t=g.width(),e=0;$("li",v).each(function(){var n=$(this),i=$("img",n),r=e+=n.width();position=v.position().left+r-n.width(),position>=0&&position<t&&i.prop("src",i.data("src"))})}function l(){g.scrollStop(function(){s()})}function u(){var t=g.width()/2,e=($(".active",v).position()||$("li",v).first().position()).left,n=$(".active",v).width()/2;g.scrollLeft(e-t+n)}function c(){p(),h(),$(".panel-heading",f).append(g.append(v))}function h(){$("li",v).each(function(){var t=$(this);$("img",t).attr("data-src")==i()&&t.addClass("active")})}function d(t){t.text("Change"==t.text()?"Cancel":"Change")}function p(){$.each(t,function(e){var n=$('<li><a href="javascript:;"><img data-full-image="'+t[e].full+'" data-src="'+t[e].thumb+'" /></a></li>');n.on("click",function(){var t=$("img",$(this)).attr("src");$("li",v).removeClass("active"),$(this).addClass("active"),$(".pic.thumbnail img",f).attr("src",t),$("[data-item-grid-thumbnail]",f).attr("value",t),$("[data-item-grid-full-image]",f).attr("value",$("img",$(this)).data("full-image")),$("[data-panel-image-pagination] [data-current-image]",f).text(r(i())),u()}),$("img",n).on("load",function(){a()}),v.append(n)})}var f,m=$(" <a href='javascript:;'>Change</a>"),g=$("<div class='thumbs-list' style='display:none'></div>"),v=$("<ul></ul>"),y=$.map(t,function(t){return t.thumb});return e(this)}}(jQuery),jQuery.fn.scrollStop=function(t){$(this).scroll(function(){var e=this,n=$(e);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(t,250,e))})},Spotlight.onLoad(function(){SirTrevor.setDefaults({uploadUrl:$("[data-attachment-endpoint]").data("attachment-endpoint")});var t=$(".js-st-instance").first();if(t.length){var e=new SirTrevor.Editor({el:t,onEditorRender:function(){serializeObservedForms(observedForms())},blockTypeLimits:{SearchResults:1,Tweet:-1}});new Spotlight.BlockLimits(e).enforceLimits()}$(".carousel").carousel()}),Spotlight.onLoad(function(){$("input[type='checkbox'][data-readonly]").on("click",function(t){t.preventDefault()})}),Spotlight.onLoad(function(){$('[data-behavior="reindex-monitor"]').reindexMonitor()}),function(t){t.fn.reindexMonitor=function(){function e(e){t.ajax(e).success(n).fail(i)}function n(t){t.in_progress?(u().show(),r(t)):u().hide()}function i(){u().hide()}function r(t){c().text(t.started),h().text(t.updated_at),p().text(t.completed),s(t),a(t),o(t)}function o(t){var e=l(t);f().attr("aria-valuemax",t.total).attr("aria-valuenow",e).css("width",e+"%").text(e+"%")}function a(t){t.errored?m().show():m().hide()}function s(e){d().each(function(){t(this).text(e.total)})}function l(t){return Math.floor(t.completed/t.total*100)}function u(){return g.find(".index-status")}function c(){return u().find('[data-behavior="monitor-start"]').find('[data-behavior="date"]')}function h(){return u().find('[data-behavior="monitor-current"]').find('[data-behavior="date"]')}function d(){return u().find('[data-behavior="total"]')}function p(){return u().find('[data-behavior="monitor-current"]').find('[data-behavior="completed"]')}function f(){return u().find(".progress-bar")}function m(){return u().find('[data-behavior="monitor-error"]')}var g,v=this,y=3e3;return t(v).each(function(){g=t(this);var n=g.data("monitorUrl"),i=g.data("refreshRate")||y;setInterval(function(){e(n)},i)}),this}}(jQuery),function(t){t.fn.reportProblem=function(e){function n(){target_val=o.attr("data-target"),target_val&&(a=t("#"+target_val),o.on("click",i),a.find('[data-behavior="cancel-link"]').on("click",r))}function i(t){t.preventDefault(),a.slideToggle("slow")}function r(t){t.preventDefault(),a.slideUp("fast")}var o,a;t.extend({},e);return this.each(function(){o=t(this),n()})}}(jQuery),Spotlight.onLoad(function(){$('[data-behavior="contact-link"]').reportProblem()}),/*!
 * typeahead.js 0.10.2
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(t){var e={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var o,a,s=this,l=arguments;return o=function(){i=null,n||(r=t.apply(s,l))},a=n&&!i,clearTimeout(i),i=setTimeout(o,e),a&&(r=t.apply(s,l)),r}},throttle:function(t,e){var n,i,r,o,a,s;return a=0,s=function(){a=new Date,r=null,o=t.apply(n,i)},function(){var l=new Date,u=e-(l-a);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,a=l,o=t.apply(n,i)):r||(r=setTimeout(s,u)),o}},noop:function(){}},n="0.10.2",i=function(){function t(t){return t.split(/\s+/)}function e(t){return t.split(/\W+/)}function n(t){return function(e){return function(n){return t(n[e])}}}return{nonword:e,whitespace:t,obj:{nonword:n(e),whitespace:n(t)}}}(),r=function(){function t(t){this.maxSize=t||100,this.size=0,this.hash={},this.list=new n}function n(){this.head=this.tail=null}function i(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(t.prototype,{set:function(t,e){var n,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new i(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(),o=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function n(){return(new Date).getTime()}function i(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(t){return JSON.parse(t)}var o,a;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(s){o=null}return a=o&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),r(o.getItem(this._prefix(t)))},set:function(t,r,a){return e.isNumber(a)?o.setItem(this._ttlKey(t),i(n()+a)):o.removeItem(this._ttlKey(t)),o.setItem(this._prefix(t),i(r))},remove:function(t){return o.removeItem(this._ttlKey(t)),o.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=o.length;for(t=0;i>t;t++)(e=o.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(t){var i=r(o.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(t.prototype,a),t}(),a=function(){function n(e){e=e||{},this._send=e.transport?i(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get}function i(n){return function(i,r){function o(t){e.defer(function(){s.resolve(t)})}function a(t){e.defer(function(){s.reject(t)})}var s=t.Deferred();return n(i,r,o,a),s}}var o=0,a={},s=6,l=new r(10);return n.setMaxPendingRequests=function(t){s=t},n.resetCache=function(){l=new r(10)},e.mixin(n.prototype,{_get:function(t,e,n){function i(e){n&&n(null,e),l.set(t,e)}function r(){n&&n(!0)}function u(){o--,delete a[t],h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var c,h=this;(c=a[t])?c.done(i).fail(r):s>o?(o++,a[t]=this._send(t,e).done(i).fail(r).always(u)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(t,n,i){var r;return e.isFunction(n)&&(i=n,n={}),(r=l.get(t))?e.defer(function(){i&&i(null,r)}):this._get(t,n,i),!!r}}),n}(),s=function(){function n(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){return{ids:[],children:{}}}function o(t){for(var e={},n=[],i=0;i<t.length;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function a(t,e){function n(t,e){return t-e}var i=0,r=0,o=[];for(t=t.sort(n),e=e.sort(n);i<t.length&&r<e.length;)t[i]<e[r]?i++:t[i]>e[r]?r++:(o.push(t[i]),i++,r++);return o}return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,a;o=n.datums.push(t)-1,a=i(n.datumTokenizer(t)),e.each(a,function(t){var e,i,a;for(e=n.trie,i=t.split("");a=i.shift();)e=e.children[a]||(e.children[a]=r()),e.ids.push(o)})})},get:function(t){var n,r,s=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,o;if(r&&0===r.length)return!1;for(e=s.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];return e&&0===n.length?(o=e.ids.slice(0),void(r=r?a(r,o):o)):(r=[],!1)}),r?e.map(o(r),function(t){return s.datums[t]}):[]},reset:function(){this.datums=[],this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){function i(t){return t.local||null}function r(i){var r,o;return o={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=i.prefetch||null)&&(r=e.isString(r)?{url:r}:r,r=e.mixin(o,r),r.thumbprint=n+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&t.error("prefetch requires url to be set")),r}function o(n){function i(t){return function(n){return e.debounce(n,t)}}function r(t){return function(n){return e.throttle(n,t)}}var o,a;return a={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(o=n.remote||null)&&(o=e.isString(o)?{url:o}:o,o=e.mixin(a,o),o.rateLimiter=/^throttle$/i.test(o.rateLimitBy)?r(o.rateLimitWait):i(o.rateLimitWait),o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",delete o.rateLimitBy,delete o.rateLimitWait,!o.url&&t.error("remote requires url to be set")),o}return{local:i,prefetch:r,remote:o}}();!function(n){function r(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=u(e.sorter),this.dupDetector=e.dupDetector||c,this.local=l.local(e),this.prefetch=l.prefetch(e),this.remote=l.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new o(this.cacheKey):null}function u(t){function n(e){return e.sort(t)}function i(t){return t}return e.isFunction(t)?n:i}function c(){return!1}var h,d;return h=n.Bloodhound,d={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=r,r.noConflict=function(){return n.Bloodhound=h,r},r.tokenizers=i,e.mixin(r.prototype,{_loadPrefetch:function(e){function n(t){o.clear(),o.add(e.filter?e.filter(t):t),o._saveToStorage(o.index.serialize(),e.thumbprint,e.ttl)}var i,r,o=this;return(i=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(i),r=t.Deferred().resolve()):r=t.ajax(e.url,e.ajax).done(n),r},_getFromRemote:function(t,e){function n(t,n){e(t?[]:o.remote.filter?o.remote.filter(n):n)}var i,r,o=this;return t=t||"",r=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(i,this.remote.ajax,n)},_saveToStorage:function(t,e,n){this.storage&&(this.storage.set(d.data,t,n),this.storage.set(d.protocol,location.protocol,n),this.storage.set(d.thumbprint,e,n))},_readFromStorage:function(t){var e,n={};return this.storage&&(n.data=this.storage.get(d.data),n.protocol=this.storage.get(d.protocol),n.thumbprint=this.storage.get(d.thumbprint)),e=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!e?n.data:null},_initialize:function(){function n(){r.add(e.isFunction(o)?o():o)}var i,r=this,o=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),o&&i.done(n),this.transport=this.remote?new a(this.remote):null,this.initPromise=i.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(t,n){function i(t){var i=o.slice(0);e.each(t,function(t){var n;return n=e.some(i,function(e){return r.dupDetector(t,e)}),!n&&i.push(t),i.length<r.limit}),n&&n(r.sorter(i))}var r=this,o=[],a=!1;o=this.index.get(t),o=this.sorter(o).slice(0,this.limit),o.length<this.limit&&this.transport&&(a=this._getFromRemote(t,i)),a||(o.length>0||!this.transport)&&n&&n(o)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&a.resetCache()},ttAdapter:function(){return e.bind(this.get,this)}}),r}(this);var u={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},c={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(c.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(c.input,{marginTop:"-1px"});var h=function(){function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i="typeahead:";return e.mixin(n.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(i+t,e)}}),n}(),d=function(){function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(l),n=i?s(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,a;if(!this._callbacks)return this;for(t=t.split(l),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=o(n.sync,this,[e].concat(i)),a=o(n.async,this,[e].concat(i)),r()&&u(a);return this}function o(t,e,n){function i(){for(var i,r=0;!i&&r<t.length;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function a(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function s(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,u=a();return{onSync:n,onAsync:e,off:i,trigger:r}}(),p=function(t){function n(t,n,i){for(var r,o=[],a=0;a<t.length;a++)o.push(e.escapeRegExChars(t[a]));return r=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(e){var n,i;return(n=s.exec(e.data))&&(wrapperNode=t.createElement(r.tagName),r.className&&(wrapperNode.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),wrapperNode.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(wrapperNode,i)),!!n}function a(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:a(n,e)}var s;r=e.mixin({},i,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],s=n(r.pattern,r.caseSensitive,r.wordsOnly),a(r.node,o))}}(window.document),f=function(){function n(n){var r,o,s,l,u=this;n=n||{},n.input||t.error("input is missing"),r=e.bind(this._onBlur,this),o=e.bind(this._onFocus,this),s=e.bind(this._onKeydown,this),l=e.bind(this._onInput,this),this.$hint=t(n.hint),this.$input=t(n.input).on("blur.tt",r).on("focus.tt",o).on("keydown.tt",s),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(u._onInput,u,t))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,d,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,r;switch(t){case"tab":i=this.getHint(),r=this.getInputValue(),n=i&&i!==r&&!o(e);break;case"up":case"down":n=!o(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!o(e);break;default:n=!0}return n},_checkInputValue:function(){var t,e,n;t=this.getInputValue(),e=r(t,this.query),n=e?this.query.length!==t.length:!1,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=t)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:document.selection?(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){function n(n){n=n||{},n.templates=n.templates||{},n.source||t.error("missing source"),n.name&&!o(n.name)&&t.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||e.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=r(n.templates,this.displayFn),this.$el=t(u.dataset.replace("%CLASS%",this.name))}function i(t){function n(e){return e[t]}return t=t||"value",e.isFunction(t)?t:n}function r(t,n){function i(t){return"<p>"+n(t)+"</p>"}return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||i}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var a="ttDataset",s="ttValue",l="ttDatum";return n.extractDatasetName=function(e){return t(e).data(a)},n.extractValue=function(e){return t(e).data(s)},n.extractDatum=function(e){return t(e).data(l)},e.mixin(n.prototype,d,{_render:function(n,i){function r(){return m.templates.empty({query:n,isEmpty:!0})}function o(){function r(e){var n;return n=t(u.suggestion).append(m.templates.suggestion(e)).data(a,m.name).data(s,m.displayFn(e)).data(l,e),n.children().each(function(){t(this).css(c.suggestionChild)}),n}var o,h;return o=t(u.suggestions).css(c.suggestions),h=e.map(i,r),o.append.apply(o,h),m.highlight&&p({node:o[0],pattern:n}),o}function h(){return m.templates.header({query:n,isEmpty:!f})}function d(){return m.templates.footer({query:n,isEmpty:!f})}if(this.$el){var f,m=this;this.$el.empty(),f=i&&i.length,!f&&this.templates.empty?this.$el.html(r()).prepend(m.templates.header?h():null).append(m.templates.footer?d():null):f&&this.$el.html(o()).prepend(m.templates.header?h():null).append(m.templates.footer?d():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){n.canceled||t!==n.query||n._render(t,e)}var n=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){function n(n){var r,o,a,s=this;n=n||{},n.menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(n.datasets,i),r=e.bind(this._onSuggestionClick,this),o=e.bind(this._onSuggestionMouseEnter,this),a=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(n.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",a),e.each(this.datasets,function(t){s.$menu.append(t.getRoot()),t.onSync("rendered",s._onRendered,s)})}function i(t){return new m(t)}return e.mixin(n.prototype,d,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",t(e.currentTarget))},_onSuggestionMouseEnter:function(e){this._removeCursor(),this._setCursor(t(e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,n,i,r;if(this.isOpen){if(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),i=e.index(n)+t,i=(i+1)%(e.length+1)-1,-1===i)return void this.trigger("cursorRemoved");-1>i&&(i=e.length-1),this._setCursor(r=e.eq(i)),this._ensureVisible(r)}},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(i+e):n>r&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:m.extractDatum(t),value:m.extractValue(t),datasetName:m.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function n(e){e.update(t)}e.each(this.datasets,n)},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,t)}}),n}(),v=function(){function n(n){var r,o,a;n=n||{},n.input||t.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),r=this.$node.find(".tt-dropdown-menu"),o=this.$node.find(".tt-input"),a=this.$node.find(".tt-hint"),o.on("blur.tt",function(t){var n,i,a;n=document.activeElement,i=r.is(n),a=r.has(n).length>0,e.isMsie()&&(i||a)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){o.focus()}))}),r.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=n.eventBus||new h({el:o}),this.dropdown=new g({menu:r,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new f({input:o,hint:a}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(e,n){var i,o,s,l;i=t(e),o=t(u.wrapper).css(c.wrapper),s=t(u.dropdown).css(c.dropdown),l=i.clone().css(c.hint).css(r(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),i.data(a,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(h){}return i.wrap(o).parent().prepend(n?l:null).append(s)}function r(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function o(t){var n=t.find(".tt-input");e.each(n.data(a),function(t,i){e.isUndefined(t)?n.removeAttr(i):n.attr(i,t)}),n.detach().removeData(a).removeClass("tt-input").insertAfter(t),t.remove()}var a="ttAttrs";return e.mixin(n.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,n,i,r,o,a;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=f.normalizeQuery(n),r=e.escapeRegExChars(i),o=new RegExp("^(?:"+r+")(.+$)","i"),a=o.exec(t.value),a?this.input.setHint(n+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,r;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&(r=this.dropdown.getDatumForTopSuggestion(),r&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),n}();!function(){var n,i,r;n=t.fn.typeahead,i="ttTypeahead",r={initialize:function(n,r){function o(){var o,a,s=t(this);e.each(r,function(t){t.highlight=!!n.highlight}),a=new v({input:s,eventBus:o=new h({el:s}),withHint:e.isUndefined(n.hint)?!0:!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:r}),s.data(i,a)}return r=e.isArray(r)?r:[].slice.call(arguments,1),n=n||{},this.each(o)},open:function(){function e(){var e,n=t(this);(e=n.data(i))&&e.open()}return this.each(e)},close:function(){function e(){var e,n=t(this);(e=n.data(i))&&e.close()}return this.each(e)},val:function(e){function n(){var n,r=t(this);(n=r.data(i))&&n.setVal(e)}function r(t){var e,n;return(e=t.data(i))&&(n=e.getVal()),n}return arguments.length?this.each(n):r(this.first())},destroy:function(){function e(){var e,n=t(this);(e=n.data(i))&&(e.destroy(),n.removeData(i))}return this.each(e)}},t.fn.typeahead=function(t){return r[t]?r[t].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this}}()}(window.jQuery);/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return s[t]||"&amp;"}function n(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function i(t){return t instanceof a?t.toString():t||0===t?(t=""+t,u.test(t)?t.replace(l,e):t):""}function r(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var o={},a=t,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;o.extend=n;var c=Object.prototype.toString;o.toString=c;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var h;o.isFunction=h;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return o.isArray=d,o.escapeExpression=i,o.isEmpty=r,o}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),o=0;o<n.length;o++)this[n[o]]=r[n[o]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new s("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},r=n.fn;return d(e)&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?i(this):h(e)?e.length>0?t.helpers.each(e,n):i(this):r(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,r=e.inverse,o=0,a="";if(d(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(h(t))for(var s=t.length;s>o;o++)n&&(n.index=o,n.first=0===o,n.last=o===t.length-1),a+=i(t[o],{data:n});else for(var l in t)t.hasOwnProperty(l)&&(n&&(n.key=l,n.index=o,n.first=0===o),a+=i(t[l],{data:n}),o++);return 0===o&&(a=r(this)),a}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||a.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),a.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function r(t,e){m.log(t,e)}var o={},a=t,s=e,l="1.3.0";o.VERSION=l;var u=4;o.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=c;var h=a.isArray,d=a.isFunction,p=a.toString,f="[object Object]";o.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:r,registerHelper:function(t,e,n){if(p.call(t)===f){if(n||e)throw new s("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){p.call(t)===f?a.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};o.logger=m,o.log=r;var g=function(t){var e={};return a.extend(e,t),e};return o.createFrame=g,o}(e,n),r=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=p[n],r=p[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new h("No environment passed to template");var n=function(t,n,i,r,o,a){var s=e.VM.invokePartial.apply(this,arguments);if(null!=s)return s;if(e.compile){var l={helpers:r,partials:o,data:a};return o[n]=e.compile(t,{data:void 0!==a},e),o[n](i,l)}throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=a(t,e,n):i||(i=this.programs[t]=a(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},c.extend(n,e),c.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var o,a,s=r.partial?r:e;r.partial||(o=r.helpers,a=r.partials);var l=t.call(i,s,n,o,a,r.data);return r.partial||e.VM.checkRevision(i.compilerInfo),l}}function o(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r}function a(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function s(t,e,n,i,r,o){var a={partial:!0,helpers:i,partials:r,data:o};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,a):void 0}function l(){return""}var u={},c=t,h=e,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.checkRevision=i,u.template=r,u.programWithDepth=o,u.program=a,u.invokePartial=s,u.noop=l,u}(e,n,i),o=function(t,e,n,i,r){"use strict";var o,a=t,s=e,l=n,u=i,c=r,h=function(){var t=new a.HandlebarsEnvironment;return u.extend(t,a),t.SafeString=s,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=h();return d.create=h,o=d}(i,t,n,e,r),a=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,r={ProgramNode:function(t,n,i,o){var a,s;3===arguments.length?(o=i,i=null):2===arguments.length&&(o=n,n=null),e.call(this,o),this.type="program",this.statements=t,this.strip={},i?(s=i[0],s?(a={first_line:s.firstLine,last_line:s.lastLine,last_column:s.lastColumn,first_column:s.firstColumn},this.inverse=new r.ProgramNode(i,n,a)):this.inverse=new r.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(t,n,i,o,a){if(e.call(this,a),this.type="mustache",this.strip=o,null!=i&&i.charAt){var s=i.charAt(3)||i.charAt(2);this.escaped="{"!==s&&"&"!==s}else this.escaped=!!i;t instanceof r.SexprNode?this.sexpr=t:this.sexpr=new r.SexprNode(t,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=t[0],o=this.params=t.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(o.length||n)},PartialNode:function(t,n,i,r){e.call(this,r),this.type="partial",this.partialName=t,this.context=n,this.strip=i},BlockNode:function(t,n,r,o,a){if(e.call(this,a),t.sexpr.id.original!==o.path.original)throw new i(t.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.strip={left:t.strip.left,right:o.strip.right},(n||r).strip.left=t.strip.right,(r||n).strip.right=o.strip.left,r&&!n&&(this.isInverse=!0)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var r="",o=[],a=0,s=0,l=t.length;l>s;s++){var u=t[s].part;if(r+=(t[s].separator||"")+u,".."===u||"."===u||"this"===u){if(o.length>0)throw new i("Invalid path: "+r,this);".."===u?a++:this.isScoped=!0}else o.push(u)}this.original=r,this.parts=o,this.string=o.join("."),this.depth=a,this.isSimple=1===t.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,n){e.call(this,n),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t}};return n=r}(n),s=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,n,i,r,o,a,s){var l=a.length-1;switch(o){case 1:return new r.ProgramNode(a[l-1],this._$);case 2:return new r.ProgramNode([],this._$);case 3:this.$=new r.ProgramNode([],a[l-1],a[l],this._$);break;case 4:this.$=new r.ProgramNode(a[l-2],a[l-1],a[l],this._$);break;case 5:this.$=new r.ProgramNode(a[l-1],a[l],[],this._$);break;case 6:this.$=new r.ProgramNode(a[l],this._$);break;case 7:this.$=new r.ProgramNode([],this._$);break;case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[a[l]];break;case 10:a[l-1].push(a[l]),this.$=a[l-1];break;case 11:this.$=new r.BlockNode(a[l-2],a[l-1].inverse,a[l-1],a[l],this._$);break;case 12:this.$=new r.BlockNode(a[l-2],a[l-1],a[l-1].inverse,a[l],this._$);break;case 13:this.$=a[l];break;case 14:this.$=a[l];break;case 15:this.$=new r.ContentNode(a[l],this._$);break;case 16:this.$=new r.CommentNode(a[l],this._$);break;case 17:this.$=new r.MustacheNode(a[l-1],null,a[l-2],t(a[l-2],a[l]),this._$);break;case 18:this.$=new r.MustacheNode(a[l-1],null,a[l-2],t(a[l-2],a[l]),this._$);break;case 19:this.$={path:a[l-1],strip:t(a[l-2],a[l])};break;case 20:this.$=new r.MustacheNode(a[l-1],null,a[l-2],t(a[l-2],a[l]),this._$);break;case 21:this.$=new r.MustacheNode(a[l-1],null,a[l-2],t(a[l-2],a[l]),this._$);break;case 22:this.$=new r.PartialNode(a[l-2],a[l-1],t(a[l-3],a[l]),this._$);break;case 23:this.$=t(a[l-1],a[l]);break;case 24:this.$=new r.SexprNode([a[l-2]].concat(a[l-1]),a[l],this._$);break;case 25:this.$=new r.SexprNode([a[l]],null,this._$);break;case 26:this.$=a[l];break;case 27:this.$=new r.StringNode(a[l],this._$);break;case 28:this.$=new r.IntegerNode(a[l],this._$);break;case 29:this.$=new r.BooleanNode(a[l],this._$);break;case 30:this.$=a[l];break;case 31:a[l-1].isHelper=!0,this.$=a[l-1];break;case 32:this.$=new r.HashNode(a[l],this._$);break;case 33:this.$=[a[l-2],a[l]];break;case 34:this.$=new r.PartialNameNode(a[l],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(a[l],this._$),this._$);break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(a[l],this._$));break;case 37:this.$=new r.DataNode(a[l],this._$);break;case 38:this.$=new r.IdNode(a[l],this._$);break;case 39:a[l-2].push({part:a[l],separator:a[l-1]}),this.$=a[l-2];break;case 40:this.$=[{part:a[l]}];break;case 43:this.$=[];break;case 44:a[l-1].push(a[l]);break;case 47:this.$=[a[l]];break;case 48:a[l-1].push(a[l])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],a=this.table,s="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,w,x,_={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=e()),g=a[m]&&a[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!c){x=[];for(y in a[m])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],_.$=r[r.length-b],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(_._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,s,u,l,this.yy,g[1],r,o),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),r.push(_.$),o.push(_._$),w=a[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(n=this._input.match(this.rules[o[a]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function r(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return r(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return r(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=r(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=r(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=r(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function n(t){return t.constructor===o.ProgramNode?t:(r.yy=o,r.parse(t))}var i={},r=t,o=e;return i.parser=r,i.parse=n,i}(s,a),u=function(t){"use strict";function e(){}function n(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i=n.parse(t),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)}function i(t,e,n){function i(){var i=n.parse(t),r=(new n.Compiler).compile(i,e),o=(new n.JavaScriptCompiler).compile(r,e,void 0,!0);return n.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}}var r={},o=t;return r.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,a=i.length;a>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var s=0;s<t.args.length;s++)n=t.args[s],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==r.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=e.sexpr,o=this.classifySexpr(r);"helper"===o?this.helperSexpr(r,n,i):"simple"===o?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+r,t);this.opcode("invokeHelper",i.length,r,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new o("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},r.precompile=n,r.compile=i,r}(n),c=function(t,e){"use strict";function n(t){this.value=t}function i(){}var r,o=t.COMPILER_REVISION,a=t.REVISION_CHANGES,s=t.log,l=e;i.prototype={nameLookup:function(t,e){var n,r;return 0===t.indexOf("depth")&&(n=!0),r=/^[0-9]+$/.test(e)?t+"["+e+"]":i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",n?"("+t+" && "+r+")":r},compilerInfo:function(){var t=o,e=a[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,o=t.opcodes;this.i=0;for(var a=o.length;this.i<a;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),
this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;o>r;r++)i.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),t)return i.push(a),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return s("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),r=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+i.name+" || "+r;i.paramsInit&&(o+=","+i.paramsInit),this.push("("+o+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+o+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+r+"; "+o+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,a=r.length;a>o;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);null==s?(this.context.programs.push(""),s=this.context.programs.length,n.index=s,n.name="program"+s,this.context.programs[s]=i.compile(n,e,this.context),this.context.environments[s]=n):(n.index=s,n.name="program"+s)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,a=i.length;a>o;o++)e=i[o],1===e?r.push("depth0"):r.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,r,o="",a=this.isInline();if(a){var s=this.popStack(!0);if(s instanceof n)e=s.value,r=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();o="("+this.push(l)+" = "+s+"),",e=this.topStack()}}else e=this.topStack();var u=t.call(this,e);return a?(r||this.popStack(),i&&this.stackSlot--,this.push("("+o+u+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+o+u+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var r=t[e];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[],r=this.setupParams(t,i,n),o=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:r,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,r,o=[],a=[],s=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),i=this.popStack(),r=this.popStack(),(r||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),o.push("inverse:"+i),o.push("fn:"+r));for(var l=0;t>l;l++)n=this.popStack(),e.push(n),this.options.stringParams&&(s.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+a.join(",")+"]"),o.push("types:["+s.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},h=0,d=u.length;d>h;h++)c[u[h]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},r=i}(i,n),h=function(t,e,n,i,r){"use strict";var o,a=t,s=e,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,d=i.precompile,p=r,f=a.create,m=function(){var t=f();return t.compile=function(e,n){return h(e,n,t)},t.precompile=function(e,n){return d(e,n,t)},t.AST=s,t.Compiler=c,t.JavaScriptCompiler=p,t.Parser=l,t.parse=u,t};return a=m(),a.create=m,o=a}(o,a,l,u,c);return h}();!function(t){t.fn.spotlightSearchTypeAhead=function(e){function n(n,i){var i=t.extend({displayKey:"title",minLength:0,highlight:n.data("autocomplete-highlight")||!0,hint:n.data("autocomplete-hint")||!1,autoselect:n.data("autocomplete-autoselect")||!0},e);n.typeahead(i,{displayKey:i.displayKey,source:i.bloodhound.ttAdapter(),templates:{suggestion:Handlebars.compile(i.template)}})}return t.each(this,function(){n(t(this))}),this}}(jQuery),Spotlight.onLoad(function(){addAutocompletetoFeaturedImage(),addAutocompletetoMastheadUpload()}),Spotlight.onLoad(function(){$("[data-input-select-target]").selectRelatedInput()}),function(t){t.fn.selectRelatedInput=function(){var e=this;return t(e).each(function(){var e,n=t(t(this).data("input-select-target"));e=t(this).is("select")?"change":"click",t(this).on(e,function(){n.is(":checkbox")||n.is(":radio")?n.prop("checked",!0):n.focus()})}),this}}(jQuery),function(t){SirTrevor.BlockControl.prototype.render=function(){return this.$el.html('<span class="st-icon st-icon-'+_.result(this.block_type,"type")+'">'+_.result(this.block_type,"icon_name")+"</span>"+_.result(this.block_type,"title")),this}}(jQuery),Spotlight.BlockLimits=function(t){this.editor=t},Spotlight.BlockLimits.prototype.enforceLimits=function(){this.addEditorCallbacks(),this.checkGlobalBlockTypeLimit()()},Spotlight.BlockLimits.prototype.addEditorCallbacks=function(){SirTrevor.EventBus.on("block:create:new",this.checkBlockTypeLimitOnAdd()),SirTrevor.EventBus.on("block:remove",this.checkGlobalBlockTypeLimit())},Spotlight.BlockLimits.prototype.checkBlockTypeLimitOnAdd=function(){var t=this.editor;return function(e){var n=t.$outer.find("a[data-type='"+e.blockCSSClass()+"']");n.toggleClass("disabled",!t.block_manager.canAddBlockType(e["class"]()))}},Spotlight.BlockLimits.prototype.checkGlobalBlockTypeLimit=function(){var t=this.editor;return function(){$.each(t.block_manager.blockTypes,function(e){var n=SirTrevor.Blocks[e].prototype,i=t.$outer.find(".st-block-control[data-type='"+n.type+"']");t.block_manager._getBlockTypeLimit(e)<0?i.remove():i.toggleClass("disabled",!t.block_manager.canAddBlockType(e))})}},SirTrevor.BlockControls.prototype.initialize=function(){var t={};for(var e in this.available_types)if(SirTrevor.Blocks.hasOwnProperty(e)){var n=new SirTrevor.BlockControl(e,this.instance_scope);if(n.can_be_rendered){var i;i=$.isFunction(SirTrevor.Blocks[e].prototype.blockGroup)?SirTrevor.Blocks[e].prototype.blockGroup():SirTrevor.Blocks[e].prototype.blockGroup,t[i]=t[i]||[],t[i].push(n.render().$el)}}for(groupKey in t){var r=t[groupKey];("undefined"==groupKey||void 0===groupKey)&&(groupKey=i18n.t("blocks:group:undefined"));var o=$("<div class='st-controls-group'><div class='st-group-control-label'>"+groupKey+"</div></div>");$.each(r,function(){o.append($(this))}),this.$el.append(o)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick)},SirTrevor.Locales.en.blocks=$.extend(SirTrevor.Locales.en.blocks,{autocompleteable:{placeholder:"Enter a title..."},browse:{title:"Browse Categories",description:"This widget highlights browse categories. Each highlighted category links to the corresponding browse category results page.",item_counts:"Include item counts?"},iframe:{title:"IFrame",description:"This widget embeds iframe-based embed code into pages",placeholder:"Enter embed code here. It should begin with e.g. '<iframe'"},oembed:{title:"Embed + Text",description:"This widget embeds a web resource and a text block to the left or right of it.",url:"URL"},uploaded_items:{title:"Uploaded Item Row",description:"This widget displays uploaded items in a horizontal row. Optionally, you can add a heading and/or text to be displayed adjacent to the items."},featured_pages:{title:"Feature Pages",description:"This widget highlights feature pages. Each highlighted item links to the corresponding feature page."},previewable:{title:"Preview"},resources:{panel:{drag:"Drag",display:"Display?",remove:"Remove"}},rule:{title:"Horizontal Rule"},search_results:{title:"Search Results",description:"This widget displays a set of search results on a page. Specify a search result set by selecting an existing browse category. You can also select the view types that are available to the user when viewing the result set."},solr_documents:{title:"Item Row",description:"This widget displays exhibit items in a horizontal row. Optionally, you can add a heading and/or text to be displayed adjacent to the items.",caption:{placeholder:"Select...",primary:"Primary caption",secondary:"Secondary caption"}},solr_documents_carousel:{title:"Item Carousel",description:"This widget displays exhibit items in a carousel. You can configure the item captions, how the images are cycled, and the size of the carousel.",interval:{title:"Automatically cycle images",placeholder:"Select..."},height:{title:"Maximum carousel height"}},solr_documents_embed:{title:"Item Embed",description:"This widget embeds exhibit items on a page. Optionally, you can add a heading and/or text to be displayed adjacent to the items."},solr_documents_features:{title:"Item Slideshow",description:"This widget displays exhibit items in a static slideshow. The user will move between items in the slideshow using the field you select as the primary caption."},solr_documents_grid:{title:"Item Grid",description:"This widget displays exhibit items in a multi-row grid. Optionally, you can add a heading and/or text to be displayed adjacent to the items."},textable:{heading:"Heading",text:"Text",align:{title:"Display text on:",left:"Left",right:"Right"}},group:{undefined:"Standard widgets",items:"Exhibit item widgets"}}),function(t){var e=function(){function t(t){t.on("change",function(t){var r=$(t.currentTarget),o=$(this).nestable("serialize"),a=0;for(var s in o){var l=o[s].id;if(parent_node=e(l,r),n(parent_node,a++),o[s].children){var u=o[s].children;for(var c in u){var h=u[c].id;child_node=e(h,r),n(child_node,a++),i(child_node,l)}}else i(parent_node,"")}})}function e(t,e){return e.find("[data-id="+t+"]")}function n(t,e){r(t).val(e)}function i(t,e){o(t).val(e)}function r(t){return a(t,"weight")}function o(t){return a(t,"parent_page")}function a(t,e){return t.find("input[data-property="+e+"]")}var s='[data-behavior="nestable"]';return{init:function(e){$(e||s).each(function(){$(this).nestable($(this).data()),t($(this))})}}}();t.SpotlightNestable=e}(this),Spotlight.onLoad(function(){if($("[role=tabpanel]").length>0&&window.location.hash){var t=$(window.location.hash).closest("[role=tabpanel]");$("a[role=tab][href=#"+t.attr("id")+"]").tab("show")}}),function(t){t.fn.spotlight_users=function(e){function n(e){e.preventDefault(),t(this).closest("tr").hide(),id=t(this).attr("data-target"),edit_view=t("[data-edit-for='"+id+"']",u).show(),t.each(edit_view.find('input[type="text"], select'),function(){t(this).data("orig",t(this).val())})}function i(e){e.preventDefault(),id=t(this).closest("tr").attr("data-edit-for"),edit_view=t("[data-edit-for='"+id+"']",u).hide(),r(edit_view),o(edit_view),t("[data-show-for='"+id+"']",u).show()}function r(t){t.find(".has-error").removeClass("has-error").find(".help-block").remove()}function o(e){t.each(e.find('input[type="text"], select'),function(){t(this).val(t(this).data("orig")).trigger("change")})}function a(e){id=t(this).attr("data-target"),t("[data-destroy-for='"+id+"']",u).val("1")}function s(e){e.preventDefault(),edit_view=t("[data-edit-for='new']",u).show(),t.each(edit_view.find('input[type="text"], select'),function(){t(this).data("orig",t(this).val())})}function l(){edit_row=u.find(".has-error").closest("[data-edit-for]"),edit_row.show(),edit_row.next().show()}var u;t.extend({},e);return this.each(function(){u=t(this),t("[data-edit-for]",u).hide(),l(),t("[data-behavior='edit-user']",u).on("click",n),t("[data-behavior='cancel-edit']",u).on("click",i),t("[data-behavior='destroy-user']",u).on("click",a),t("[data-behavior='new-user']",u).on("click",s)})}}(jQuery),Spotlight.onLoad(function(){$(".edit_exhibit, .admin-users").spotlight_users()}),/*!
* jQuery Cookie Plugin v1.3
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2011, Klaus Hartl
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://www.opensource.org/licenses/mit-license.php
* http://www.opensource.org/licenses/GPL-2.0
*/
function(t,e,n){function i(t){return t}function r(t){return decodeURIComponent(t.replace(o," "))}var o=/\+/g,a=t.cookie=function(o,s,l){if(s!==n){if(l=t.extend({},a.defaults,l),null===s&&(l.expires=-1),"number"==typeof l.expires){var u=l.expires,c=l.expires=new Date;c.setDate(c.getDate()+u)}return s=a.json?JSON.stringify(s):String(s),e.cookie=[encodeURIComponent(o),"=",a.raw?s:encodeURIComponent(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=a.raw?i:r,d=e.cookie.split("; "),p=0,f=d.length;f>p;p++){var m=d[p].split("=");if(h(m.shift())===o){var g=h(m.join("="));return a.json?JSON.parse(g):g}}return null};a.defaults={},t.removeCookie=function(e,n){return null!==t.cookie(e)?(t.cookie(e,null,n),!0):!1}}(jQuery,document),function(t){Blacklight.onLoad(function(){t("video, audio").each(function(e,n){void 0!==t(n).data("able-player")&&new AblePlayer(t(this),t(n))})}),window.onYouTubeIframeAPIReady=function(){AblePlayer.youtubeIframeAPIReady=!0,t("body").trigger("youtubeIframeAPIReady",[])},t(window).keydown(function(t){1===AblePlayer.nextIndex&&AblePlayer.lastCreated.onPlayerKeyPress(t)}),window.AblePlayer=function(e){if(AblePlayer.lastCreated=this,this.setDefaults(),this.media=e,0===t(e).length)return void console.log("ERROR: No media specified.");void 0!==t(e).attr("autoplay")&&"false"!==t(e).attr("autoplay")?this.autoplay=!0:this.autoplay=!1;var n=e.data("include-transcript");if((void 0===n||""===n)&&e.find('track[kind="captions"], track[kind="subtitles"]').length>0&&(n=!0),n?this.includeTranscript=!0:this.includeTranscript=!1,void 0!==t(e).data("start-time")&&""!==t(e).data("start-time")?this.startTime=t(e).data("start-time"):this.startTime=0,void 0!==t(e).data("transcript-div")&&""!==t(e).data("transcript-div")&&(this.transcriptDivLocation=t(e).data("transcript-div")),void 0!==t(e).data("use-transcript-button")&&t(e).data("use-transcript-button")===!1&&(this.useTranscriptButton=!1),void 0!==t(e).data("lyrics-mode")&&"false"!==t(e).data("lyrics-mode")&&(this.lyricsMode=!0),void 0!==t(e).data("transcript-title")&&(this.transcriptTitle=t(e).data("transcript-title")),void 0!==t(e).data("youtube-id")&&""!==t(e).data("youtube-id")&&(this.youtubeId=t(e).data("youtube-id")),void 0!==t(e).data("youtube-desc-id")&&""!==t(e).data("youtube-desc-id")&&(this.youtubeDescId=t(e).data("youtube-desc-id")),void 0!==t(e).data("debug")&&"false"!==t(e).data("debug")&&(this.debug=!0),void 0!==t(e).data("volume")&&""!==t(e).data("volume")){var i=t(e).data("volume");i>=0&&1>=i&&(this.defaultVolume=i)}if(void 0!==t(e).data("icon-type")&&""!==t(e).data("icon-type")){var r=t(e).data("icon-type");("font"===r||"image"==r)&&(this.iconType=r)}if(void 0!==t(e).data("seek-interval")&&""!==t(e).data("seek-interval")){var o=t(e).data("seek-interval");/^[1-9][0-9]*$/.test(o)&&(this.seekInterval=o,this.useFixedSeekInterval=!0)}if(void 0!==t(e).data("show-now-playing")&&"false"!==t(e).data("show-now-playing")&&(this.showNowPlaying=!0),void 0!==t(e).data("fallback")&&""!==t(e).data("fallback")){var a=t(e).data("fallback");"jw"===a&&(this.fallback=a)}if(void 0!==t(e).data("test-fallback")&&"false"!==t(e).data("test-fallback")&&(this.testFallback=!0),void 0!==t(e).data("fallback-path")&&"false"!==t(e).data("fallback-path")&&(this.fallbackPath=t(e).data("fallback-path")),void 0!==t(e).data("translation-path")&&"false"!==t(e).data("translation-path")&&(this.translationPath=t(e).data("translation-path")),void 0!==t(e).data("lang")&&""!==t(e).data("lang")){var s=t(e).data("lang");2==s.length&&(this.lang=s)}void 0!==t(e).data("force-lang")&&"false"!==t(e).data("force-lang")&&(this.forceLang=!0),void 0!==t(e).data("meta-div")&&""!==t(e).data("meta-div")&&(this.metaDiv=t(e).data("meta-div")),void 0!==t(e).data("search")&&""!==t(e).data("search")&&void 0!==t(e).data("search-div")&&""!==t(e).data("search-div")&&(this.searchString=t(e).data("search"),this.searchDiv=t(e).data("search-div")),this.ableIndex=AblePlayer.nextIndex,AblePlayer.nextIndex+=1,this.title=t(e).attr("title"),this.tt=[];var l=this;t.when(this.getTranslationText()).then(function(){l.countProperties(l.tt)>50?(l.setup(),l.startTime>0&&!l.autoplay&&l.onMediaUpdateTime()):console.log("ERROR: Failed to load translation table")},function(t){console.log("ERROR2: Failed to load translation table. "+t)})},AblePlayer.nextIndex=0,AblePlayer.prototype.setup=function(){var t=this;this.debug&&this.startTime>0&&console.log("Will start media at "+this.startTime+" seconds"),this.reinitialize().then(function(){t.player?t.setupInstance().then(function(){t.recreatePlayer()}):t.provideFallback()})},AblePlayer.youtubeIframeAPIReady=!1,AblePlayer.loadingYoutubeIframeAPI=!1}(jQuery),function(t){AblePlayer.prototype.setDefaults=function(){this.debug=!1,this.rootPath=this.getRootWebSitePath(),this.defaultVolume=.5,this.playerWidth=480,this.playerHeight=360,this.iconColor="white",this.iconType="font",this.seekInterval=10,this.useFixedSeekInterval=!1,this.useSlider=!0,this.showNowPlaying=!0,this.fallback="jw",this.fallbackPath=this.rootPath+"/thirdparty/",this.testFallback=!1,this.translationPath=this.rootPath+"/translations/",this.lang="en",this.forceLang=!1,this.loop=!0,this.lyricsMode=!1,this.transcriptTitle="Transcript",this.useTranscriptButton=!0,this.setButtonImages()},AblePlayer.prototype.getRootWebSitePath=function(){var t=document.location.toString(),e=t.indexOf("/",t.indexOf("://")+3),n=t.substring(0,e)+"/",i=t.indexOf("/",t.indexOf(n)+n.length),r=t.substring(0,i);return r},AblePlayer.prototype.setButtonImages=function(){var t="../images/"+this.iconColor+"/";this.playButtonImg=t+"play.png",this.pauseButtonImg=t+"pause.png",this.rewindButtonImg=t+"rewind.png",this.forwardButtonImg=t+"forward.png",this.fasterButtonImg=t+"slower.png",this.slowerButtonImg=t+"faster.png",this.volumeMuteButtonImg=t+"volume-mute.png",this.volumeLoudButtonImg=t+"volume-loud.png",this.volumeIncreaseButtonImg=t+"volume-up.png",this.volumeDecreaseButtonImg=t+"volume-down.png",this.captionsButtonImg=t+"captions.png",this.chaptersButtonImg=t+"chapters.png",this.signButtonImg=t+"sign.png",this.transcriptButtonImg=t+"transcript.png",this.descriptionsButtonImg=t+"descriptions.png",this.fullscreenExpandButtonImg=t+"fullscreen-expand.png",this.fullscreenCollapseButtonImg=t+"fullscreen-collapse.png",this.prefsButtonImg=t+"preferences.png",this.helpButtonImg=t+"help.png"},AblePlayer.prototype.reinitialize=function(){var e=new t.Deferred,n=e.promise();if(window.console||(this.debug=!1),this.startedPlaying=!1,this.autoScrollTranscript=!0,this.$media=t(this.media).first(),this.media=this.$media[0],this.$media.is("audio"))this.mediaType="audio";else{if(!this.$media.is("video"))return this.mediaType=this.$media.get(0).tagName,this.debug&&(console.log("You initialized Able Player with "+this.mediaId+", which is a "+this.mediaType+" element."),console.log("Able Player only works with HTML audio or video elements."),console.log("The element with id "+this.mediaId+" is a "+this.mediaType+" element."),console.log("Expecting an audio or video element.")),e.fail(),n;this.mediaType="video"}return this.$sources=this.$media.find("source"),this.debug&&console.log("found "+this.$sources.length+" media sources"),this.player=this.getPlayer(),this.setIconType(),this.setDimensions(),e.resolve(),n},AblePlayer.prototype.setDimensions=function(){this.$media.attr("width")&&(this.playerWidth=parseInt(this.$media.attr("width"),10)),this.$media.attr("height")&&(this.playerHeight=parseInt(this.$media.attr("height"),10))},AblePlayer.prototype.setIconType=function(){var e;e=t("<span>",{"class":"icon-play able-clipped"}),t("body").append(e),"font"===this.iconType&&(window.getComputedStyle?(this.controllerFont=window.getComputedStyle(e.get(0),null).getPropertyValue("font-family"),this.controllerFont?(this.controllerFont=this.controllerFont.replace(/["']/g,""),this.iconType="font"):this.iconType="image"):this.iconType="image"),this.debug&&(console.log("Using "+this.iconType+"s for player controls"),"font"===this.iconType&&console.log("User font for controller is "+this.controllerFont)),e.remove()},AblePlayer.prototype.setupInstance=function(){var e=new t.Deferred,n=e.promise();return this.$media.attr("id")?this.mediaId=this.$media.attr("id"):(this.mediaId="ableMediaId_"+this.ableIndex,this.$media.attr("id",this.mediaId)),this.setupInstancePlaylist(),e.resolve(),n},AblePlayer.prototype.setupInstancePlaylist=function(){var e=this;if(this.hasPlaylist=!1,t(".able-playlist").each(function(){if(t(this).data("player")===e.mediaId){e.hasPlaylist=!0,e.$playlist=t(this).find("li"),t(this).find("li").attr("tabindex","0"),e.playlistIndex=0;var n=t(this).data("embedded");"undefined"!=typeof n&&n!==!1?e.playlistEmbed=!0:e.playlistEmbed=!1}}),this.hasPlaylist&&this.playlistEmbed){var n=this.$playlist.parent();this.$playlistDom=n.clone(),n.remove()}},AblePlayer.prototype.recreatePlayer=function(){var t=this;return this.player?(this.setMediaAttributes(),this.loadCurrentPreferences(),this.injectPlayerCode(),this.initSignLanguage(),void this.setupTracks().then(function(){t.setupPopups(),t.initDescription(),t.updateDescription(),t.initializing=!1,t.initPlayer(),t.initDefaultCaption(),t.updateCaption(),t.updateTranscript(),t.showSearchResults()})):void console.log("Can't create player; no appropriate player type detected.")},AblePlayer.prototype.initPlayer=function(){var e,n=this;this.debug&&this.player&&console.log("Using the "+this.player+" media player"),"html5"===this.player?e=this.initHtml5Player():"jw"===this.player?e=this.initJwPlayer():"youtube"===this.player&&(e=this.initYouTubePlayer());var i=new t.Deferred,r=i.promise();return e.done(function(){if(n.addControls(),n.addEventListeners(),n.setMute(!1),n.setFullscreen(!1),n.setVolume(n.defaultVolume),n.initializing=!0,n.initializing=!1,n.refreshControls(),"html5"===n.player&&n.isIOS()&&n.$media[0].load(),n.useFixedSeekInterval===!1){var t=n.getDuration();t>0?(n.seekInterval=Math.max(n.seekInterval,t/10),n.seekIntervalCalculated=!0):n.seekIntervalCalculated=!1}i.resolve()}),r},AblePlayer.prototype.initDefaultCaption=function(){var t;if(this.captions.length>0){for(t=0;t<this.captions.length;t++)this.captions[t].def===!0&&(this.captionLang=this.captions[t].language,this.selectedCaptions=this.captions[t]);if("undefined"==typeof this.captionLang)for(t=0;t<this.captions.length;t++)this.captions[t].language===this.lang&&(this.captionLang=this.captions[t].language,this.selectedCaptions=this.captions[t]);"undefined"==typeof this.captionLang&&(this.captionLang=this.captions[0].language,this.selectedCaptions=this.captions[0]),"undefined"!=typeof this.captionLang&&this.$transcriptLanguageSelect&&this.$transcriptLanguageSelect.find("option[lang="+this.captionLang+"]").attr("selected","selected")}},AblePlayer.prototype.initHtml5Player=function(){var e=new t.Deferred,n=e.promise();return e.resolve(),n},AblePlayer.prototype.initJwPlayer=function(){var e,n=this,i=new t.Deferred,r=i.promise();return t.getScript(this.fallbackPath+"jwplayer.js").done(function(r,o){n.debug&&console.log("Successfully loaded the JW Player"),n.jwId=n.mediaId+"_fallback",n.$mediaContainer.attr("id",n.jwId),e="audio"===n.mediaType?"0px":n.playerHeight;var a=[];t.each(n.$sources,function(e,n){a.push({file:t(n).attr("src")})});var s=n.fallbackPath+"jwplayer.flash.swf",l=n.fallbackPath+"jwplayer.html5.js";"video"===n.mediaType?n.jwPlayer=jwplayer(n.jwId).setup({playlist:[{sources:a}],flashplayer:s,html5player:l,image:n.$media.attr("poster"),controls:!1,volume:100*n.defaultVolume,height:e,width:n.playerWidth,fallback:!1,primary:"flash",wmode:"transparent"}):n.jwPlayer=jwplayer(n.jwId).setup({playlist:[{sources:a}],flashplayer:s,html5player:l,controls:!1,volume:100*this.defaultVolume,height:e,fallback:!1,primary:"flash"}),n.$media.remove(),i.resolve()}).fail(function(t,e,r){n.debug&&console.log("Unable to load JW Player."),n.player=null,i.fail()}),r},AblePlayer.prototype.initYouTubePlayer=function(){var e=this,n=new t.Deferred,i=n.promise(),r=function(){var i=e.mediaId+"_youtube";e.$mediaContainer.prepend(t("<div>").attr("id",i));var r;if(e.youtubeDescId&&e.prefDesc?(r=e.youtubeDescId,e.showAlert(e.tt.alertDescribedVersion)):r=e.youtubeId,e.youTubeCaptionsReady=!1,e.hasCaptions)var o=0;else var o=1;e.youTubePlayer=new YT.Player(i,{videoId:r,height:e.playerHeight.toString(),width:e.playerWidth.toString(),playerVars:{start:e.startTime,controls:0,cc_load_policy:o,hl:e.lang,modestbranding:1,rel:0,html5:1},events:{onReady:function(){n.resolve(),e.ytPlayingJustEnough=!0,e.playMedia()},onError:function(t){n.fail()},onStateChange:function(t){e.ytPlayingJustEnough&&(e.handleStop(),e.ytPlayingJustEnough=!1)},onPlaybackQualityChange:function(){},onApiChange:function(t){"undefined"==typeof e.ytCaptionModule&&e.initYouTubeCaptions(),e.resettingYouTubeCaptions&&(e.youTubePlayer.setOption(e.ytCaptionModule,"track",{languageCode:e.captionLang}),e.resettingYouTubeCaptions=!1)}}}),e.$media.remove()};return AblePlayer.youtubeIframeAPIReady?r():(AblePlayer.loadingYoutubeIframeAPI||t.getScript("https://www.youtube.com/iframe_api").fail(function(){e.debug&&console.log("Unable to load Youtube API.")}),t("body").on("youtubeIframeAPIReady",function(){r()})),i},AblePlayer.prototype.initYouTubeCaptions=function(){var e,n,i,r,o,a,s,l,u,c,h,d,p,f,m,g,v;if(e=this,this.ytCaptions=[],n=this.youTubePlayer.getOptions(),n.length){for(var y=0;y<n.length;y++){if("cc"==n[y]){this.ytCaptionModule="cc";break}if("captions"==n[y]){this.ytCaptionModule="captions";break}}if("cc"==this.ytCaptionModule||"captions"==this.ytCaptionModule)if(this.hasCaptions)this.usingYouTubeCaptions=!1,this.youTubePlayer.unloadModule(this.ytCaptionModule);else if(this.usingYouTubeCaptions=!0,a=this.youTubePlayer.getOption(this.ytCaptionModule,"tracklist"),r=this.youTubePlayer.getOption(this.ytCaptionModule,"track"),o="undefined"!=typeof r.languageCode?r.languageCode:!1,a.length){for(var y=0;y<a.length;y++)s=a[y].languageCode,"cc"==this.ytCaptionModule?l=a[y].name:"captions"==this.ytCaptionModule&&(l=a[y].languageName),""==l&&(l=this.getLanguageName(s)),o?u=s==o?!0:!1:a[y].is_default?(u=!0,o=s):u=!1,this.ytCaptions.push({language:s,label:l,def:u});if(!o)for(var y in this.ytCaptions)if("en"==this.ytCaptions[y].language){this.ytCaptions[y].def=!0;break}c=this.youTubePlayer.getOption(this.ytCaptionModule,"fontSize"),h=this.youTubePlayer.getOption(this.ytCaptionModule,"displaySettings"),"undefined"==typeof this.$ccButton&&(this.prefCaptions&&1===this.prefCaptions?(this.captionsOn=!0,p=a.length>1?this.tt.captions:this.tt.hideCaptions):(this.captionsOn=!1,p=a.length>1?this.tt.captions:this.tt.showCaptions),f=this.getButtonTitle("captions"),d=t("<button>",{type:"button",tabindex:"0","aria-label":p,"class":"able-button-handler-captions"}),"font"===this.iconType?(g=t("<span>",{"class":"icon-captions","aria-hidden":"true"}),d.append(g)):(v=t("<img>",{src:"../images/"+this.iconColor+"/captions.png",alt:"",role:"presentation"}),d.append(v)),m=t("<span>",{"class":"able-clipped"}).text(f),d.append(m),this.captionsOn||d.addClass("buttonOff").attr("title",p),this.$ccButton=d,this.$controllerDiv.children("span.able-left-controls").eq(1).append(this.$ccButton),this.controls.push("captions"),this.setupPopups(),this.$ccButton.on("mouseenter focus",function(n){var r=t(this).attr("aria-label"),o=t(this).position(),a=t(this).height(),s=(t(this).width(),o.top-a-15),l=!0,u=e.mediaId+"-tooltip";if(t(this).is(":first-child")){l=!1;var c=o.left,h={left:c+"px",right:"",top:s+"px"}}if(l)var d=t("#"+u).text(r).width(),c=o.left-d/2,h={left:c+"px",right:"",top:s+"px"};i=t("#"+u).text(r).css(h),e.showTooltip(i),t(this).on("mouseleave blur",function(){t("#"+u).text("").hide()})}),this.$ccButton.click(function(){e.onClickPlayerButton(this)}),this.$ccButton.keydown(function(t){AblePlayer.nextIndex>1&&e.onPlayerKeyPress(t)}),this.refreshControls())}}},AblePlayer.prototype.setMediaAttributes=function(){this.$media.attr("tabindex",-1);var t=this.$media.get(0).textTracks;if(t)for(var e=0;e<t.length;)t[e].mode="disabled",e+=1},AblePlayer.prototype.getPlayer=function(){return this.youtubeId?"video"!==this.mediaType?null:"youtube":this.testFallback||(this.isUserAgent("msie 7")||this.isUserAgent("msie 8")||this.isUserAgent("msie 9"))&&"video"===this.mediaType||this.isIOS()&&(this.isIOS(4)||this.isIOS(5)||this.isIOS(6))?"jw"===this.fallback&&this.jwCanPlay()?"jw":null:this.media.canPlayType?"html5":null},AblePlayer.prototype.jwCanPlay=function(){var e,n,i;if(this.$sources.length>0)for(e=0;e<this.$sources.length;e++)if(n=this.$sources[e].getAttribute("type"),"video"===this.mediaType&&"video/mp4"===n||"audio"===this.mediaType&&"audio/mpeg"===n)return!0;if(t(".able-playlist")&&(i=t(".able-playlist").eq(0).find("li").eq(0),"audio"===this.mediaType)){if(i.attr("data-mp3"))return!0;if("video"===this.mediaType&&i.attr("data-mp4"))return!0}return!1}}(jQuery),function(t){AblePlayer.prototype.setCookie=function(e){t.cookie.json=!0,t.isFunction(t.cookie)&&t.cookie("Able-Player",e,90)},AblePlayer.prototype.getCookie=function(){var e={preferences:{}};if(t.cookie.json=!0,t.isFunction(t.cookie)){var n;try{n=t.cookie("Able-Player")}catch(i){this.setCookie(e),n=e}return n?n:e}},AblePlayer.prototype.getAvailablePreferences=function(){var t=[];return t.push({name:"prefAltKey",label:this.tt.prefAltKey,"default":1}),t.push({name:"prefCtrlKey",label:this.tt.prefCtrlKey,"default":1}),t.push({name:"prefShiftKey",label:this.tt.prefShiftKey,"default":0}),"video"===this.mediaType?(t.push({name:"prefCaptions",label:this.tt.prefCaptions,"default":1}),t.push({name:"prefSignLanguage",label:this.tt.prefSignLanguage,"default":1}),t.push({name:"prefDesc",label:this.tt.prefDesc,"default":0}),t.push({name:"prefClosedDesc",label:this.tt.prefClosedDesc,"default":0}),t.push({name:"prefDescPause",label:this.tt.prefDescPause,"default":0}),t.push({name:"prefVisibleDesc",label:this.tt.prefVisibleDesc,"default":1}),t.push({name:"prefTranscript",label:this.tt.prefTranscript,"default":0}),t.push({name:"prefHighlight",label:this.tt.prefHighlight,"default":1}),t.push({name:"prefTabbable",label:this.tt.prefTabbable,"default":0})):(t.push({name:"prefTranscript",label:this.tt.prefTranscript,"default":0}),t.push({name:"prefHighlight",label:this.tt.prefHighlight,"default":1}),t.push({name:"prefTabbable",label:this.tt.prefTabbable,"default":0})),t},AblePlayer.prototype.loadCurrentPreferences=function(){for(var t=this.getAvailablePreferences(),e=this.getCookie(),n=0;n<t.length;n++){var i=t[n].name,r=t[n]["default"];void 0!==e.preferences[i]?this[i]=e.preferences[i]:(e.preferences[i]=r,this[i]=r)}this.setCookie(e)},AblePlayer.prototype.injectPrefsForm=function(){var e,n,i,r,o,a,s,l,u,c,h,d,p,f,m;for(f=this,m=this.getAvailablePreferences(),e=t("<div>",{"class":"able-prefs-form"}),n="<p>"+this.tt.prefIntro+"</p>\n",i=t("<p>",{html:n}),r=t("<fieldset>"),o=t("<legend>"+this.tt.prefFeatures+"</legend>"),r.append(o),a=t("<fieldset>"),s=t("<legend>"+this.tt.prefKeys+"</legend>"),a.append(s),l=0;l<m.length;l++)u=m[l].name,c=t("<div>"),h=this.mediaId+"_"+u,d=t('<label for="'+h+'"> '+m[l].label+"</label>"),p=t("<input>",{type:"checkbox",name:u,id:h,value:"true"}),c.append(p).append(d),1===this[u]&&p.prop("checked",!0),0===l||1===l||2===l?a.append(c):r.append(c);e.append(i).append(a).append(r),t("body").append(e);var g=new AccessibleDialog(e,"dialog",f.tt.prefTitle,i,f.tt.closeButtonLabel,"32em");e.append("<hr>");var v=t('<button class="modal-button">'+this.tt.save+"</button>"),y=t('<button class="modal-button">'+this.tt.cancel+"</button>");v.click(function(){g.hide(),f.savePrefsFromForm()}),y.click(function(){g.hide()}),e.append(v),e.append(y),this.prefsDialog=g},AblePlayer.prototype.savePrefsFromForm=function(){var e;e=0;for(var n=this.getCookie(),i=this.getAvailablePreferences(),r=0;r<i.length;r++){var o=i[r].name;t('input[name="'+o+'"]').is(":checked")?(n.preferences[o]=1,1===this[o]||(this[o]=1,e++)):(n.preferences[o]=0,1===this[o]&&(this[o]=0,e++))}e>0?(this.setCookie(n),this.showAlert(this.tt.prefSuccess)):this.showAlert(this.tt.prefNoChange),this.updatePrefs()},AblePlayer.prototype.updatePrefs=function(){var e;e=1===this.prefAltKey?"Alt + ":"",1===this.prefCtrlKey&&(e+="Control + "),1===this.prefShiftKey&&(e+="Shift + "),t(".able-help-modifiers").text(e),1===this.prefTabbable?t(".able-transcript span.able-transcript-seekpoint").attr("tabindex","0"):t(".able-transcript span.able-transcript-seekpoint").removeAttr("tabindex"),this.updateCaption(),this.updateDescription()},AblePlayer.prototype.usingModifierKeys=function(t){return(1!==this.prefAltKey||t.altKey)&&(1!==this.prefCtrlKey||t.ctrlKey)&&(1!==this.prefShiftKey||t.shiftKey)?!0:!1}}(jQuery),function(t){function e(t,e){var i=[];for(var r in e)i.push(n(t,e[r]));return i}function n(t,e){var n=e(t);if(null!==t.error)throw t.error;return n}function i(t,e){for(var n in e)"\n"===e[n]?(t.column=1,t.line+=1):t.column+=1}function r(t,e){var n=t.text.substring(0,e);return i(t,n),t.text=t.text.substring(e),n}function o(t,e){var n,r=t.text.indexOf("\n");return-1===r?(n=t.text,i(t,n),t.text=""):(n=t.text.substring(0,r),i(t,n+"\n"),t.text=t.text.substring(r+1)),n}function a(t){var e=t.text.indexOf("\n");return-1===e?t.text:t.text.substring(0,e)}function s(t){e(t,[y,b]);var n=t.text[0];" "===n||"	"===n||"\n"===n?e(t,[k,l,S,d]):t.error="WEBVTT signature not followed by whitespace."}function l(t){for(;;){var e=a(t);if(-1!==e.indexOf("-->"))return;if(0===e.length)return;var i=n(t,c);t.metadata[i[0]]=i[1],n(t,k)}}function u(t){var e=[],n=t.indexOf(" ");n>=0&&e.push(n);var i=t.indexOf("	");i>=0&&e.push(i);var r=t.indexOf("\n");return r>=0&&e.push(r),Math.min.apply(null,e)}function c(t){var e=t.text.indexOf("\n"),n=r(t,e),i=n.indexOf(":");if(-1===i)return void(t.error="Missing colon.");var o=n.substring(0,i),a=n.substring(i+1);return[o,a]}function h(t){var e=u(t.text),n=r(t,e),i=n.indexOf(":");if(-1===i)return void(t.error="Missing colon.");var o=n.substring(0,i),a=n.substring(i+1);return[o,a]}function d(i){for(;;){var r=a(i);if(0!==r.indexOf("NOTE")||4!==r.length&&" "!==r[4]&&"	"!==r[4]){if(0===t.trim(r).length)return;n(i,p)}else e(i,[v,$])}}function p(t){var i,s=a(t);-1===s.indexOf("-->")&&(i=o(t));var l=e(t,[T,_,w,_,T]),u=l[0],c=l[4];if(u>=c)return void(t.error="Start time is not sooner than end time.");n(t,x);var h=n(t,f);r(t,1);var d=n(t,m);t.cues.push({id:i,start:u,end:c,settings:h,components:d})}function f(t){for(var e={};t.text.length>0&&"\n"!==t.text[0];){var i=n(t,h);e[i[0]]=i[1],n(t,x)}return e}function m(e){for(var i={type:"internal",tagName:"",value:"",classes:[],annotation:"",parent:null,children:[],language:""},o=i,s=[];e.text.length>0;){var l=a(e);if(-1!==l.indexOf("-->"))break;if(e.text.length>=2&&"\n"===e.text[0]&&"\n"===e.text[1]){r(e,2);break}var u=g(e);if("string"===u.type)o.children.push(u);else if("startTag"===u.type)u.type=u.tagName,u.parent=o,-1!==t.inArray(u.tagName,["c","i","b","u","ruby"])?(s.length>0&&(o.language=s[s.length-1]),o.children.push(u),o=u):"rt"===u.tagName&&"ruby"===o.tagName?(s.length>0&&(o.language=s[s.length-1]),o.children.push(u),o=u):"v"===u.tagName?(u.value=u.annotation,s.length>0&&(o.language=s[s.length-1]),o.children.push(u),o=u):"lang"===u.tagName&&(s.push(u.annotation),s.length>0&&(o.language=s[s.length-1]),o.children.push(u),o=u);else if("endTag"===u.type)u.tagName===o.type&&-1!==t.inArray(u.tagName,["c","i","b","u","ruby","rt","v"])?o=o.parent:"lang"===u.tagName&&"lang"===o.type?(o=o.parent,s.pop()):"ruby"===u.tagName&&"rt"===o.type&&(o=o.parent.parent);else if("timestampTag"===u.type){var c={text:u.value,error:null,metadata:{},cues:[],line:1,column:1};try{var h=n(c,T);0===c.text.length&&(u.value=h,o.push(u))}catch(d){}}}return i}function g(e){for(var n="data",i=[],o="",a={type:"",tagName:"",value:"",classes:[],annotation:"",children:[]};;){var s;if(s=e.text.length>=2&&"\n"===e.text[0]&&"\n"===e.text[1]?"":e.text.length>0?e.text[0]:"","data"===n)if("&"===s)o="&";else if("<"===s){if(0!==i.length)return a.type="string",a.value=i.join(""),a;n="tag"}else{if(""===s)return{type:"string",value:i.join("")};i.push(s)}else if("escape"===n)if("&"===s)i.push(o),o="&";else if(s.match(/[0-9a-z]/))o+=s;else if(";"===s)"&amp"===o?i.push("&"):"&lt"===o?i.push("<"):"&gt"===o?i.push(">"):"&lrm"===o?i.push("\u200e"):"&rlm"===o?i.push("\u200f"):"&nbsp"===o?i.push("\xa0"):(i.push(o),i.push(";")),n="data";else{if("<"===s||""===s)return i.push(o),a.type="string",a.value=i.join(""),a;i.push(o),n="data"}else if("tag"===n)if("	"===s||"\n"===s||"\f"===s||" "===s)n="startTagAnnotation";else if("."===s)n="startTagClass";else if("/"===s)n="endTag";else if(s.match("[0-9]"))n="timestampTag",i.push(s);else{if(">"===s){r(e,1);break}if(""===s)return a.tagName="",a.type="startTag",a;i.push(s),n="startTag"}else if("startTag"===n)if("	"===s||"\f"===s||" "===s)n="startTagAnnotation";else if("\n"===s)o=s,n="startTagAnnotation";else if("."===s)n="startTagClass";else{if(">"===s)return r(e,1),a.tagName=i.join(""),a.type="startTag",a;if(""===s)return a.tagName=i.join(""),a.type="startTag",a;i.push(s)}else if("startTagClass"===n)if("	"===s||"\f"===s||" "===s)a.classes.push(o),o="",n="startTagAnnotation";else if("\n"===s)a.classes.push(o),o=s,n="startTagAnnotation";else if("."===s)a.classes.push(o),o="";else{if(">"===s)return r(e,1),a.classes.push(o),a.type="startTag",a.tagName=i.join(""),a;if(""===s)return a.classes.push(o),a.type="startTag",a.tagName=i.join(""),a;o+="c"}else if("startTagAnnotation"===n){if(">"===s)return r(e,1),o=t.trim(o).replace(/ +/," "),a.type="startTag",a.tagName=i.join(""),a.annotation=o,a;if(""===s)return o=t.trim(o).replace(/ +/," "),a.type="startTag",a.tagName=i.join(""),a.annotation=o,a;o+=s}else if("endTag"===n){if(">"===s)return r(e,1),a.type="endTag",a.tagName=i.join(""),a;if(""===s)return a.type="endTag",a.tagName=i.join(""),a;i.push(s)}else{if("timestampTag"!==n)throw"Unknown tokenState "+n;if(">"===s)return r(e,1),a.type="timestampTag",a.name=i.join(""),a;if(""===s)return a.type="timestampTag",a.name=i.join(""),a;i.push(s)}r(e,1)}}function v(e){var n=o(e);if(-1!==n.indexOf("-->"))return void(e.error="Invalid syntax: --> in NOTE line.");for(;;){var i=a(e);if(0===t.trim(i).length)return;if(-1!==i.indexOf("-->"))return void(e.error="Invalid syntax: --> in comment.");o(e)}}function y(t){"\ufeff"===t.text[0]&&r(t,1)}function b(t){"WEBVTT"===t.text.substring(0,6)?r(t,6):t.error="Invalid signature."}function w(t){t.text.length<3||"-->"!==t.text.substring(0,3)?t.error="Missing -->":r(t,3)}function x(t){for(;"	"===t.text[0]||" "===t.text[0];)r(t,1)}function _(t){for(var e=0;"	"===t.text[0]||" "===t.text[0];)r(t,1),e+=1;0===e&&(t.error="Missing space.")}function k(t){var e=t.text.indexOf("\n");-1===e?t.error="Missing EOL.":r(t,e+1)}function $(e){for(;e.text.length>0;){var n=a(e);if(0!==t.trim(n).length)break;o(e)}}function S(e){for(var n=0;e.text.length>0;){var i=a(e);if(0!==t.trim(i).length)break;o(e),n+=1}0===n&&(e.error="Missing empty line.")}function T(t){var e=u(t.text);if(-1===e)return void t.error("Missing timing.");var n=r(t,e),i=/((\d\d):)?((\d\d):)(\d\d).(\d\d\d)|(\d+).(\d\d\d)/.exec(n);if(!i)return void(t.error="Unable to parse timestamp.");var o=0,a=i[2],s=i[4];if(s){if(parseInt(s,10)>59)return void(t.error="Invalid minute range.");a&&(o+=3600*parseInt(a,10)),o+=60*parseInt(s,10);var l=i[5];if(parseInt(l,10)>59)return void(t.error="Invalid second range.");o+=parseInt(l,10),o+=parseInt(i[6],10)/1e3}else o+=parseInt(i[7],10),o+=parseInt(i[8],10)/1e3;return o}AblePlayer.prototype.parseWebVTT=function(t){t=t.replace(/(\r\n|\n|\r)/g,"\n");var e={text:t,error:null,metadata:{},cues:[],line:1,column:1};try{n(e,s)}catch(i){console.log("Line: "+e.line+"\nColumn: "+e.column),console.log(i)}return e}}(jQuery),function(t){AblePlayer.prototype.injectPlayerCode=function(){if(this.$mediaContainer=this.$media.wrap('<div class="able-media-container"></div>').parent(),this.$ableDiv=this.$mediaContainer.wrap('<div class="able"></div>').parent(),this.$ableDiv.width(this.playerWidth),this.injectOffscreenHeading(),"video"===this.mediaType){"youtube"!==this.player&&this.injectBigPlayButton();var e=t("<div>",{"class":"able-vidcap-container"});this.$vidcapContainer=this.$mediaContainer.wrap(e).parent()}this.injectPlayerControlArea(),this.injectTextDescriptionArea(),this.includeTranscript&&(this.injectTranscriptArea(),this.addTranscriptAreaEvents()),this.injectAlert(),this.injectPlaylist(),this.injectPrefsForm()},AblePlayer.prototype.injectOffscreenHeading=function(){var e,n=this.$ableDiv.parents();if(n.each(function(){var n=t(this),i=n.find("h1, h2, h3, h4, h5, h6"),r=i.length;return r?(e=i.eq(r-1).prop("tagName"),!1):void 0}),"undefined"==typeof e)var e="h1";else{var i=parseInt(e[1]);i+=1,i>6&&(i=6),e="h"+i.toString()}this.playerHeadingLevel=i,this.$headingDiv=t("<"+e+">"),this.$ableDiv.prepend(this.$headingDiv),this.$headingDiv.addClass("able-offscreen"),this.$headingDiv.text(this.tt.playerHeading)},AblePlayer.prototype.injectBigPlayButton=function(){this.$bigPlayButton=t("<button>",{"class":"able-big-play-button icon-play","aria-hidden":!0,tabindex:-1});var e=this;this.$bigPlayButton.click(function(){e.handlePlay()}),this.$mediaContainer.prepend(this.$bigPlayButton)},AblePlayer.prototype.injectPlayerControlArea=function(){this.$playerDiv=t("<div>",{"class":"able-player",role:"region","aria-label":this.mediaType+" player"}),this.$playerDiv.addClass("able-"+this.mediaType),this.$nowPlayingDiv=t("<div>",{"class":"able-now-playing",role:"alert"}),this.$controllerDiv=t("<div>",{"class":"able-controller"}),this.$controllerDiv.addClass("able-"+this.iconColor+"-controls"),this.$statusBarDiv=t("<div>",{"class":"able-status-bar"}),this.$timer=t("<span>",{"class":"able-timer"}),this.$elapsedTimeContainer=t("<span>",{"class":"able-elapsedTime",text:"0:00"}),this.$durationContainer=t("<span>",{"class":"able-duration"}),this.$timer.append(this.$elapsedTimeContainer).append(this.$durationContainer),this.$speed=t("<span>",{"class":"able-speed",role:"alert"}).text(this.tt.speed+": 1x"),this.$status=t("<span>",{"class":"able-status",role:"alert"}),this.$statusBarDiv.append(this.$timer,this.$speed,this.$status),this.$playerDiv.append(this.$nowPlayingDiv,this.$controllerDiv,this.$statusBarDiv),this.$ableDiv.append(this.$playerDiv)},AblePlayer.prototype.injectTextDescriptionArea=function(){this.$descDiv=t("<div>",{"class":"able-descriptions",role:"alert"}),this.$descDiv.hide(),(0===this.prefClosedDesc||0===this.prefVisibleDesc)&&this.$descDiv.addClass("able-clipped"),this.$ableDiv.append(this.$descDiv)},AblePlayer.prototype.injectTranscriptArea=function(){this.$transcriptArea=t("<div>",{"class":"able-transcript-area"}),this.$transcriptToolbar=t("<div>",{"class":"able-transcript-toolbar"}),this.$transcriptDiv=t("<div>",{"class":"able-transcript"}),this.$autoScrollTranscriptCheckbox=t('<input id="autoscroll-transcript-checkbox" type="checkbox">'),this.$transcriptToolbar.append(t('<label for="autoscroll-transcript-checkbox">'+this.tt.autoScroll+": </label>"),this.$autoScrollTranscriptCheckbox),this.$transcriptLanguageSelect=t('<select id="transcript-language-select">'),this.$unknownTranscriptOption=t('<option val="unknown">'+this.tt.unknown+"</option>"),this.$transcriptLanguageSelect.append(this.$unknownTranscriptOption),this.$transcriptLanguageSelect.prop("disabled",!0);var e=t('<div style="float: right;">');this.$transcriptLanguageSelectContainer=e,e.append(t('<label for="transcript-language-select">'+this.tt.language+": </label>"),this.$transcriptLanguageSelect),this.$transcriptToolbar.append(e),this.$transcriptArea.append(this.$transcriptToolbar,this.$transcriptDiv),this.transcriptDivLocation?t("#"+this.transcriptDivLocation).append(this.$transcriptArea):this.$ableColumnRight?this.$ableColumnRight.prepend(this.$transcriptArea):this.splitPlayerIntoColumns("transcript"),this.prefTranscript||this.transcriptDivLocation||this.$transcriptArea.hide()},AblePlayer.prototype.splitPlayerIntoColumns=function(t){this.$ableColumnLeft=this.$ableDiv.wrap('<div class="able-column-left">').parent(),this.$ableColumnLeft.width(this.playerWidth),"transcript"===t?(this.$transcriptArea.insertAfter(this.$ableColumnLeft),this.$ableColumnRight=this.$transcriptArea.wrap('<div class="able-column-right">').parent()):"sign"==t&&(this.$signArea.insertAfter(this.$ableColumnLeft),this.$ableColumnRight=this.$signArea.wrap('<div class="able-column-right">').parent()),this.$ableColumnRight.width(this.playerWidth)},AblePlayer.prototype.injectAlert=function(){this.alertBox=t('<div role="alert"></div>'),this.alertBox.addClass("able-alert"),this.alertBox.appendTo(this.$ableDiv),
this.alertBox.css({top:this.$mediaContainer.offset().top})},AblePlayer.prototype.injectPlaylist=function(){if(this.playlistEmbed===!0){var t=this.$playlistDom.clone();t.insertBefore(this.$statusBarDiv),this.$playlist=t.find("li")}this.hasPlaylist&&0===this.$sources.length&&(this.initializing=!0,this.swapSource(0),this.$sources=this.$media.find("source"),this.debug&&console.log("after initializing playlist, there are "+this.$sources.length+" media sources"))},AblePlayer.prototype.addTranscriptAreaEvents=function(){var t=this;this.$autoScrollTranscriptCheckbox.click(function(){t.handleTranscriptLockToggle(t.$autoScrollTranscriptCheckbox.prop("checked"))}),this.$transcriptDiv.bind("mousewheel DOMMouseScroll click scroll",function(e){t.scrollingTranscript||(t.autoScrollTranscript=!1,t.refreshControls()),t.scrollingTranscript=!1}),this.$transcriptLanguageSelect.change(function(){var e=t.$transcriptLanguageSelect.val();for(var n in t.captions)t.captions[n].language===e&&(t.transcriptCaptions=t.captions[n]);for(var n in t.descriptions)t.descriptions[n].language===e&&(t.transcriptDescriptions=t.descriptions[n]);t.updateTranscript()})},AblePlayer.prototype.createPopup=function(e){var n,i,r,o,a,s;return n=this,i=t("<div>",{id:this.mediaId+"-"+e+"-menu","class":"able-popup"}),i.on("keydown",function(e){r=t(this).find("input:focus"),o=r.parent(),o.is(":first-child")?(a=t(this).find("input").last(),s=o.next().find("input")):o.is(":last-child")?(a=o.prev().find("input"),s=t(this).find("input").first()):(a=o.prev().find("input"),s=o.next().find("input")),9===e.which?e.shiftKey?(o.removeClass("able-focus"),a.focus(),a.parent().addClass("able-focus")):(o.removeClass("able-focus"),s.focus(),s.parent().addClass("able-focus")):40===e.which||39===e.which?(o.removeClass("able-focus"),s.focus(),s.parent().addClass("able-focus")):38==e.which||37===e.which?(o.removeClass("able-focus"),a.focus(),a.parent().addClass("able-focus")):32===e.which||13===e.which?t("input:focus").click():27===e.which&&(o.removeClass("able-focus"),n.closePopups()),e.preventDefault()}),this.$controllerDiv.append(i),i},AblePlayer.prototype.closePopups=function(){this.chaptersPopup&&this.chaptersPopup.is(":visible")&&(this.chaptersPopup.hide(),this.$chaptersButton.focus()),this.captionsPopup&&this.captionsPopup.is(":visible")&&(this.captionsPopup.hide(),this.$ccButton.focus()),this.$windowPopup&&this.$windowPopup.is(":visible")&&(this.$windowPopup.hide(),this.$windowButton.show().focus())},AblePlayer.prototype.setupPopups=function(){var e,n,i,r,o,a,s,l,u,c,h,d,p;if(e=[],"undefined"!=typeof this.ytCaptions){if(!this.ytCaptions.length)return!1;e.push("ytCaptions")}else this.captions.length>0&&e.push("captions"),this.chapters.length>0&&e.push("chapters");if(e.length>0){n=this;for(var r=0;r<e.length;r++){var f=e[r];i=!1,"captions"==f?(this.captionsPopup=this.createPopup("captions"),a=this.captions):"chapters"==f?(this.chaptersPopup=this.createPopup("chapters"),a=this.chapters):"ytCaptions"==f&&(this.captionsPopup=this.createPopup("captions"),a=this.ytCaptions);var s=t("<ul></ul>");c=this.mediaId+"-"+f+"-choice";for(o in a){if(l=t("<li></li>"),u=a[o],h=this.mediaId+"-"+f+"-"+o,d=t("<input>",{type:"radio",val:o,name:c,id:h}),u.def&&(d.attr("checked","checked"),i=!0),p=t("<label>",{"for":h}),"undefined"!==u.language&&d.attr("lang",u.language),"captions"==f||"ytCaptions"==f)p.text(u.label||u.language),d.click(this.getCaptionClickFunction(u));else if("chapters"==f){p.text(this.flattenCueForCaption(u)+" - "+this.formatSecondsAsColonTime(u.start));var m=function(t){return function(){n.seekTo(t),n.hidingPopup=!0,n.chaptersPopup.hide(),setTimeout(function(){n.hidingPopup=!1},100),n.$chaptersButton.focus()}};d.on("click keypress",m(u.start))}l.append(d,p),s.append(l)}("captions"==f||"ytCaptions"==f)&&(h=this.mediaId+"-captions-off",l=t("<li></li>"),d=t("<input>",{type:"radio",name:c,id:h}),p=t("<label>",{"for":h}),p.text(this.tt.captionsOff),d.click(this.getCaptionOffFunction()),l.append(d,p),s.append(l)),i||s.find("input").first().attr("checked","checked"),"captions"==f||"ytCaptions"==f?this.captionsPopup.append(s):"chapters"==f&&this.chaptersPopup.append(s)}}},AblePlayer.prototype.provideFallback=function(e){var n,i,r,o,a,s,l,u,c,h;if(n=this.$media.find("div,p,ul"),o=!1,0===n.length&&("No Support"!==e&&"undefined"!=typeof e?n=t("<p>").text(e):(i=this.tt.fallbackError1+" "+this.tt[this.mediaType]+". ",i+=this.tt.fallbackError2+":",n=t("<p>").text(i),o=!0)),r=t("<div>",{"class":"able-fallback",role:"alert",width:this.playerWidth}),this.$media.before(r),r.html(n),o){for(u=t("<ul>"),a=this.getSupportingBrowsers(),s=0;s<a.length;s++)l=t("<li>"),l.text(a[s].name+" "+a[s].minVersion+" "+this.tt.orHigher),u.append(l);r.append(u)}if(this.$media.attr("poster")){c=this.$media.attr("poster");var h=t("<img>",{src:c,alt:"",role:"presentation"});r.append(h)}this.$media.remove()},AblePlayer.prototype.getSupportingBrowsers=function(){var t=[];return t[0]={name:"Chrome",minVersion:"31"},t[1]={name:"Firefox",minVersion:"34"},t[2]={name:"Internet Explorer",minVersion:"10"},t[3]={name:"Opera",minVersion:"26"},t[4]={name:"Safari for Mac OS X",minVersion:"7.1"},t[5]={name:"Safari for iOS",minVersion:"7.1"},t[6]={name:"Android Browser",minVersion:"4.1"},t[7]={name:"Chrome for Android",minVersion:"40"},t},AblePlayer.prototype.addHelp=function(){var e,n,i,r,o,a,s,l,u;for(e=t("<div></div>",{"class":"able-help-div"}),n=t("<div></div>"),i=t("<p></p>").text(this.tt.helpKeys),r=t("<p></p>").text(this.tt.helpKeysDisclaimer),o="<ul>\n",a=0;a<this.controls.length;a++)"play"===this.controls[a]?(s=this.tt.play+"/"+this.tt.pause,l="p </span><em>"+this.tt.or+'</em><span class="able-help-modifiers"> '+this.tt.spacebar):"stop"===this.controls[a]?(s=this.tt.stop,l="s"):"rewind"===this.controls[a]?(s=this.tt.rewind,l="r"):"forward"===this.controls[a]?(s=this.tt.forward,l="f"):"mute"===this.controls[a]?(s=this.tt.mute,l="m"):"volumeUp"===this.controls[a]?(s=this.tt.volumeUp,l="u </b><em>"+this.tt.or+"</em><b> 1-5"):"volumeDown"===this.controls[a]?(s=this.tt.volumeDown,l="d </b><em>"+this.tt.or+"</em><b> 1-5"):"captions"===this.controls[a]?(s=this.captions.length>1?this.tt.captions:this.captionsOn?this.tt.hideCaptions:this.tt.showCaptions,l="c"):"descriptions"===this.controls[a]?(s=this.descOn?this.tt.turnOffDescriptions:this.tt.turnOnDescriptions,l="n"):"prefs"===this.controls[a]?(s=this.tt.preferences,l="t"):"help"===this.controls[a]?(s=this.tt.help,l="h"):s=!1,s&&(o+='<li><span class="able-help-modifiers">',1===this.prefAltKey&&(o+=this.tt.prefAltKey+" + "),1===this.prefCtrlKey&&(o+=this.tt.prefCtrlKey+" + "),1===this.prefShiftKey&&(o+=this.tt.prefShiftKey+" + "),o+=l+"</span> = "+s+"</li>\n");o+="</ul>\n",n.append(i,o,r),e.append(n),t("body").append(e);var c=new AccessibleDialog(e,"alertdialog",this.tt.helpTitle,n,this.tt.closeButtonLabel,"40em");e.append("<hr>"),u=t("<button>"+this.tt.ok+"</button>"),u.click(function(){c.hide()}),e.append(u),this.helpDialog=c},AblePlayer.prototype.calculateControlLayout=function(){var t={ul:["play","stop"],ur:[],bl:[],br:[]};this.useSlider&&(t.ur.push("rewind"),t.ur.push("seek"),t.ur.push("forward"));var e=[];this.browserSupportsVolume()&&(e.push("mute"),e.push("volume-up"),e.push("volume-down"));var n=[];return"video"===this.mediaType&&(this.hasCaptions&&n.push("captions"),this.hasSignLanguage&&n.push("sign"),(this.hasOpenDesc||this.hasClosedDesc)&&n.push("descriptions")),this.includeTranscript&&this.useTranscriptButton&&n.push("transcript"),this.isPlaybackRateSupported()&&(n.push("slower"),n.push("faster")),"video"===this.mediaType&&this.hasChapters&&n.push("chapters"),e.length>0&&n.length>0?(t.bl=e,t.bl.push("pipe"),t.bl=t.bl.concat(n)):t.bl=e.concat(n),t.br.push("preferences"),t.br.push("help"),"video"===this.mediaType&&"jw"!==this.player&&t.br.push("fullscreen"),t},AblePlayer.prototype.addControls=function(){var e,n,i,r,o,a,s,l,u,c,h,d,p,f,m,g=this,v=100,y=this.calculateControlLayout(),b={0:"ul",1:"ur",2:"bl",3:"br"};for(o=this.mediaId+"-tooltip",a=t("<div>",{id:o,"class":"able-tooltip"}),this.$controllerDiv.append(a),e=0;3>=e;e++){for(i=y[b[e]],r=e%2===0?t("<span>",{"class":"able-left-controls"}):t("<span>",{"class":"able-right-controls"}),this.$controllerDiv.append(r),n=0;n<i.length;n++)if(s=i[n],"seek"===s){var w=t('<div class="able-seekbar"></div>');r.append(w),this.seekBar=new AccessibleSeekBar(w,v)}else if("pipe"===s){var x=t("<span>",{tabindex:"-1","aria-hidden":"true"});if("font"===this.iconType)x.addClass("icon-pipe");else{var _=t("<img>",{src:"../images/"+this.iconColor+"/pipe.png",alt:"",role:"presentation"});x.append(_)}r.append(x)}else{u="mute"===s?"../images/"+this.iconColor+"/volume-mute.png":"fullscreen"===s?"../images/"+this.iconColor+"/fullscreen-expand.png":"../images/"+this.iconColor+"/"+s+".png",c=this.getButtonTitle(s),h=t("<button>",{type:"button",tabindex:"0","aria-label":c,"class":"able-button-handler-"+s}),"font"===this.iconType?(d="icon-"+s,p=t("<span>",{"class":d,"aria-hidden":"true"}),h.append(p)):(l=t("<img>",{src:u,alt:"",role:"presentation"}),h.append(l));var k=t("<span>",{"class":"able-clipped"}).text(c);h.append(k),h.on("mouseenter focus",function(e){var n=t(this).attr("aria-label"),i=t(this).position(),r=t(this).height(),a=(t(this).width(),i.top-r-15),s=!0;if(t(this).closest("span").hasClass("able-right-controls")){if(t(this).is(":last-child")){s=!1;var l=0,u={left:"",right:l+"px",top:a+"px"}}}else if(t(this).is(":first-child")){s=!1;var l=i.left,u={left:l+"px",right:"",top:a+"px"}}if(s)var c=t("#"+o).text(n).width(),l=i.left-c/2,u={left:l+"px",right:"",top:a+"px"};var h=t("#"+o).text(n).css(u);g.showTooltip(h),t(this).on("mouseleave blur",function(){t("#"+o).text("").hide()})}),"captions"===s?this.prefCaptions&&1===this.prefCaptions||(m=this.captions.length>1?this.tt.captions:this.tt.showCaptions,h.addClass("buttonOff").attr("title",m)):"descriptions"===s&&(this.prefDesc&&1===this.prefDesc||h.addClass("buttonOff").attr("title",this.tt.turnOnDescriptions)),r.append(h),"play"===s?this.$playpauseButton=h:"captions"===s?this.$ccButton=h:"sign"===s?this.$signButton=h:"descriptions"===s?(this.$descButton=h,this.descOn||this.$descButton.addClass("buttonOff").attr("title",this.tt.turnOnDescriptions)):"mute"===s?this.$muteButton=h:"transcript"===s?this.$transcriptButton=h:"fullscreen"===s?this.$fullscreenButton=h:"chapters"===s&&(this.$chaptersButton=h)}e%2==1&&this.$controllerDiv.append('<div style="clear:both;"></div>')}"video"===this.mediaType&&(f={width:this.playerWidth+"px",height:this.playerHeight+"px"},this.$vidcapContainer&&this.$vidcapContainer.css(f),this.$captionDiv&&this.$captionDiv.css("width",this.playerWidth+"px"),this.$descDiv&&this.$descDiv.css("width",this.playerWidth+"px")),this.controls=[];for(var $ in y)this.controls=this.controls.concat(y[$]);this.addHelp(),this.refreshControls()},AblePlayer.prototype.swapSource=function(e){var n,i,r,o,a,s,l,u,c;for(this.$media.find("source").remove(),n=this.$playlist.eq(e),i=n.html(),n.attr("lang")&&(r=n.attr("lang")),o=[],a=0,"audio"===this.mediaType?(n.attr("data-mp3")&&(s=n.attr("data-mp3"),o[a]=new Array("audio/mpeg",s),a++),n.attr("data-webm")&&(o[a]=new Array("audio/webm",n.attr("data-webm")),a++),n.attr("data-webma")&&(o[a]=new Array("audio/webm",n.attr("data-webma")),a++),n.attr("data-ogg")&&(o[a]=new Array("audio/ogg",n.attr("data-ogg")),a++),n.attr("data-oga")&&(o[a]=new Array("audio/ogg",n.attr("data-oga")),a++),n.attr("data-wav")&&(o[a]=new Array("audio/wav",n.attr("data-wav")),a++)):"video"===this.mediaType&&(n.attr("data-mp4")&&(s=n.attr("data-mp4"),o[a]=new Array("video/mp4",s),a++),n.attr("data-webm")&&(o[a]=new Array("video/webm",n.attr("data-webm")),a++),n.attr("data-webmv")&&(o[a]=new Array("video/webm",n.attr("data-webmv")),a++),n.attr("data-ogg")&&(o[a]=new Array("video/ogg",n.attr("data-ogg")),a++),n.attr("data-ogv")&&(o[a]=new Array("video/ogg",n.attr("data-ogv")),a++)),l=0;l<o.length;l++)u=t("<source>",{type:o[l][0],src:o[l][1]}),this.$media.append(u);this.$playlist.removeClass("able-current"),n.addClass("able-current"),this.showNowPlaying===!0&&(c=t("<span>"),"undefined"!=typeof r&&c.attr("lang",r),c.html("<span>Selected track:</span>"+i),this.$nowPlayingDiv.html(c)),this.initializing?this.swappingSrc=!1:(this.swappingSrc=!0,"html5"===this.player?this.media.load():"jw"===this.player?this.jwPlayer.load({file:s}):"youtube"===this.player)},AblePlayer.prototype.getButtonTitle=function(t){var e;return"playpause"===t?this.tt.play:"play"===t?this.tt.play:"pause"===t?this.tt.pause:"stop"===t?this.tt.stop:"rewind"===t?this.tt.rewind:"forward"===t?this.tt.forward:"captions"===t?(e=this.usingYouTubeCaptions?this.ytCaptions.length:this.captions.length,e>1?this.tt.captions:this.captionsOn?this.tt.hideCaptions:this.tt.showCaptions):"descriptions"===t?this.descOn?this.tt.turnOffDescriptions:this.tt.turnOnDescriptions:"transcript"===t?this.$transcriptDiv.is(":visible")?this.tt.hideTranscript:this.tt.showTranscript:"chapters"===t?this.tt.chapters:"sign"===t?this.tt.sign:"mute"===t?this.getVolume()>0?this.tt.mute:this.tt.unmute:"volume-up"===t?this.tt.volumeUp:"volume-down"===t?this.tt.volumeDown:"faster"===t?this.tt.faster:"slower"===t?this.tt.slower:"preferences"===t?this.tt.preferences:"help"===t?this.tt.help:(this.debug&&console.log("Found an untranslated label: "+t),t.charAt(0).toUpperCase()+t.slice(1))}}(jQuery),function(t){AblePlayer.prototype.setupTracks=function(){var e=new t.Deferred,n=e.promise();this.$tracks=this.$media.find("track"),this.captions=[],this.captionLabels=[],this.descriptions=[],this.chapters=[],this.meta=[];for(var i=[],r=0;r<this.$tracks.length;r++){var o=this.$tracks[r],a=o.getAttribute("kind"),s=o.getAttribute("src");o.getAttribute("default");if(s){var l=this.loadTextObject(s),u=this;i.push(l),l.then(function(t,e){return function(n){var i=u.parseWebVTT(n).cues;"captions"===e||"subtitles"===e?u.setupCaptions(t,i):"descriptions"===e?u.setupDescriptions(t,i):"chapters"===e?u.setupChapters(t,i):"metadata"===e&&u.setupMetadata(t,i)}}(o,a))}}return t.when.apply(t,i).then(function(){e.resolve()}),n},AblePlayer.prototype.setupCaptions=function(e,n){this.hasCaptions=!0;var i=e.getAttribute("srclang")||this.lang,r=e.getAttribute("label")||this.getLanguageName(i);if("string"==typeof e.getAttribute("default")){var o=!0;e.removeAttribute("default")}else var o=!1;if("video"===this.mediaType&&(this.$captionDiv||(this.$captionDiv=t("<div>",{"class":"able-captions","aria-hidden":"true"}),this.$vidcapContainer.append(this.$captionDiv))),this.currentCaption=-1,1===this.prefCaptions?this.captionsOn=!0:this.captionsOn=!1,this.includeTranscript){this.$unknownTranscriptOption&&(this.$unknownTranscriptOption.remove(),this.$unknownTranscriptOption=null);var a=t("<option></option>",{value:i,lang:i}).text(r)}if(this.includeTranscript)var s=this.$transcriptLanguageSelect.find("option");if(0===this.captions.length)this.captions.push({cues:n,language:i,label:r,def:o}),this.includeTranscript&&(o&&a.attr("selected","selected"),this.$transcriptLanguageSelect.append(a)),this.captionLabels.push(r);else{for(var l=!1,u=0;u<this.captions.length;u++){this.captionLabels[u];if(r.toLowerCase()<this.captionLabels[u].toLowerCase()){this.captions.splice(u,0,{cues:n,language:i,label:r,def:o}),this.includeTranscript&&(o&&a.attr("selected","selected"),a.insertBefore(s.eq(u))),this.captionLabels.splice(u,0,r),l=!0;break}}l||(this.captions.push({cues:n,language:i,label:r,def:o}),this.includeTranscript&&(o&&a.attr("selected","selected"),this.$transcriptLanguageSelect.append(a)),this.captionLabels.push(r))}this.includeTranscript&&this.$transcriptLanguageSelect.find("option").length>1&&this.$transcriptLanguageSelect.prop("disabled",!1)},AblePlayer.prototype.setupDescriptions=function(t,e){var n=t.getAttribute("srclang");this.descOn=!1,this.hasClosedDesc=!0,this.currentDescription=-1,1===this.prefDesc&&1===this.prefClosedDesc&&(this.descOn=!0),this.descriptions.push({cues:e,language:n})},AblePlayer.prototype.setupChapters=function(t,e){this.hasChapters=!0,this.chapters=e},AblePlayer.prototype.setupMetadata=function(e,n){this.metaDiv&&t("#"+this.metaDiv)&&(this.$metaDiv=t("#"+this.metaDiv),this.hasMeta=!0),this.meta=n},AblePlayer.prototype.loadTextObject=function(e){var n=new t.Deferred,i=n.promise(),r=this,o=t("<div>",{style:"display:none"});return o.load(e,function(t,i,a){"error"===i?(r.debug&&console.log("error reading file "+e+": "+i),n.fail()):n.resolve(t),o.remove()}),i}}(jQuery),function(t){window.AccessibleSeekBar=function(e,n){var i=this;this.position=0,this.tracking=!1,this.trackDevice=null,this.keyTrackPosition=0,this.lastTrackPosition=0,this.nextStep=1,this.inertiaCount=0,this.bodyDiv=t(e),this.loadedDiv=t("<div></div>"),this.playedDiv=t("<div></div>"),this.seekHead=t('<div class="able-seek-head"></div>'),this.seekHead.attr("tabindex","0"),this.seekHead.attr("role","slider"),this.seekHead.attr("aria-value-min",0),this.timeTooltip=t("<div>"),this.bodyDiv.append(this.timeTooltip),this.timeTooltip.attr("role","tooltip"),this.timeTooltip.addClass("able-tooltip"),this.bodyDiv.append(this.loadedDiv),this.bodyDiv.append(this.playedDiv),this.bodyDiv.append(this.seekHead),this.bodyDiv.wrap("<div></div>"),this.wrapperDiv=this.bodyDiv.parent(),this.wrapperDiv.width(n),this.wrapperDiv.addClass("able-seekbar-wrapper"),this.loadedDiv.width(0),this.loadedDiv.addClass("able-seekbar-loaded"),this.playedDiv.width(0),this.playedDiv.addClass("able-seekbar-played");var r="0.8em";this.seekHead.addClass("able-seekhead").css({height:r,width:r,"border-radius":r,"-webkit-border-radius":r,"-moz-border-radius":r,"-o-border-radius":r}),this.setDuration(100),this.seekHead.hover(function(t){i.overHead=!0,i.refreshTooltip()},function(t){i.overHead=!1,!i.overBody&&i.tracking&&"mouse"===i.trackDevice&&i.stopTracking(i.pageXToPosition(t.pageX)),i.refreshTooltip()}),this.seekHead.mousemove(function(t){i.tracking&&"mouse"===i.trackDevice&&i.trackHeadAtPageX(t.pageX)}),this.bodyDiv.hover(function(){i.overBody=!0,i.refreshTooltip()},function(t){i.overBody=!1,i.overBodyMousePos=null,i.refreshTooltip(),!i.overHead&&i.tracking&&"mouse"===i.trackDevice&&i.stopTracking(i.pageXToPosition(t.pageX))}),this.bodyDiv.mousemove(function(t){i.overBodyMousePos={x:t.pageX,y:t.pageY},i.tracking&&"mouse"===i.trackDevice&&i.trackHeadAtPageX(t.pageX),i.refreshTooltip()}),this.bodyDiv.mousedown(function(t){i.startTracking("mouse",i.pageXToPosition(t.pageX)),i.trackHeadAtPageX(t.pageX),i.seekHead.is(":focus")||i.seekHead.focus(),t.preventDefault()}),this.seekHead.mousedown(function(t){i.startTracking("mouse",i.pageXToPosition(i.seekHead.offset()+i.seekHead.width()/2)),i.bodyDiv.is(":focus")||i.bodyDiv.focus(),t.preventDefault()}),this.bodyDiv.mouseup(function(t){i.tracking&&"mouse"===i.trackDevice&&i.stopTracking(i.pageXToPosition(t.pageX))}),this.seekHead.mouseup(function(t){i.tracking&&"mouse"===i.trackDevice&&i.stopTracking(i.pageXToPosition(t.pageX))}),this.bodyDiv.keydown(function(t){if(36===t.which)i.trackImmediatelyTo(0);else if(35===t.which)i.trackImmediatelyTo(i.duration);else if(37===t.which||40===t.which)i.arrowKeyDown(-1);else{if(39!==t.which&&38!==t.which)return;i.arrowKeyDown(1)}t.preventDefault()}),this.bodyDiv.keyup(function(t){(35===t.which||36===t.which||37===t.which||38===t.which||39===t.which||40===t.which)&&(i.tracking&&"keyboard"===i.trackDevice&&i.stopTracking(i.keyTrackPosition),t.preventDefault())})},AccessibleSeekBar.prototype.arrowKeyDown=function(t){this.tracking&&"keyboard"===this.trackDevice?(this.keyTrackPosition=this.boundPos(this.keyTrackPosition+this.nextStep*t),this.inertiaCount+=1,20===this.inertiaCount&&(this.inertiaCount=0,this.nextStep*=2),this.trackHeadAtPosition(this.keyTrackPosition)):(this.nextStep=1,this.inertiaCount=0,this.keyTrackPosition=this.boundPos(this.position+this.nextStep*t),this.startTracking("keyboard",this.keyTrackPosition),this.trackHeadAtPosition(this.keyTrackPosition))},AccessibleSeekBar.prototype.pageXToPosition=function(t){var e=t-this.bodyDiv.offset().left,n=this.duration*(e/this.bodyDiv.width());return this.boundPos(n)},AccessibleSeekBar.prototype.boundPos=function(t){return Math.max(0,Math.min(t,this.duration))},AccessibleSeekBar.prototype.setDuration=function(t){t!==this.duration&&(this.duration=t,this.resetHeadLocation(),this.seekHead.attr("aria-value-max",t))},AccessibleSeekBar.prototype.setWidth=function(t){this.wrapperDiv.width(t),this.resizeDivs(),this.resetHeadLocation()},AccessibleSeekBar.prototype.getWidth=function(){return this.wrapperDiv.width()},AccessibleSeekBar.prototype.resizeDivs=function(){this.playedDiv.width(this.bodyDiv.width()*(this.position/this.duration)),this.loadedDiv.width(this.bodyDiv.width()*this.buffered)},AccessibleSeekBar.prototype.resetHeadLocation=function(){var t=this.position/this.duration,e=this.bodyDiv.width()*t;this.seekHead.css("left",e-this.seekHead.width()/2),this.tracking&&this.stopTracking(this.position)},AccessibleSeekBar.prototype.setPosition=function(t,e){this.position=t,this.resetHeadLocation(),this.refreshTooltip(),this.resizeDivs(),this.updateAriaValues(t,e)},AccessibleSeekBar.prototype.setBuffered=function(t){this.buffered=t,this.redrawDivs},AccessibleSeekBar.prototype.startTracking=function(t,e){this.tracking||(this.trackDevice=t,this.tracking=!0,this.bodyDiv.trigger("startTracking",[e]))},AccessibleSeekBar.prototype.stopTracking=function(t){this.trackDevice=null,this.tracking=!1,this.bodyDiv.trigger("stopTracking",[t]),this.setPosition(t,!0)},AccessibleSeekBar.prototype.trackHeadAtPageX=function(t){var e=this.pageXToPosition(t),n=t-this.bodyDiv.offset().left-this.seekHead.width()/2;n=Math.max(0,Math.min(n,this.bodyDiv.width()-this.seekHead.width())),this.lastTrackPosition=e,this.seekHead.css("left",n),this.reportTrackAtPosition(e)},AccessibleSeekBar.prototype.trackHeadAtPosition=function(t){var e=t/this.duration,n=this.bodyDiv.width()*e;this.lastTrackPosition=t,this.seekHead.css("left",n-this.seekHead.width()/2),this.reportTrackAtPosition(t)},AccessibleSeekBar.prototype.reportTrackAtPosition=function(t){this.bodyDiv.trigger("tracking",[t]),this.updateAriaValues(t,!0)},AccessibleSeekBar.prototype.updateAriaValues=function(e,n){var i,r=Math.floor(e/3600),o=Math.floor(e%3600/60),a=Math.floor(e%60),s=1===o?"minute":"minutes",l=1===a?"second":"seconds";i=r>0?r+" "+pHourword+", "+o+" "+s+", "+a+" "+l:o>0?o+" "+s+", "+a+" "+l:a+" "+l,this.liveAriaRegion||(this.liveAriaRegion=t("<span>",{"class":"able-offscreen","aria-live":"polite"}),this.wrapperDiv.append(this.liveAriaRegion)),n&&this.liveAriaRegion.text()!==i&&this.liveAriaRegion.text(i)},AccessibleSeekBar.prototype.trackImmediatelyTo=function(t){this.startTracking("keyboard",t),this.trackHeadAtPosition(t),this.keyTrackPosition=t},AccessibleSeekBar.prototype.refreshTooltip=function(){this.overHead?(this.timeTooltip.show(),this.tracking?this.timeTooltip.text(this.positionToStr(this.lastTrackPosition)):this.timeTooltip.text(this.positionToStr(this.position)),this.setTooltipPosition(this.seekHead.position().left+this.seekHead.width()/2)):this.overBody&&this.overBodyMousePos?(this.timeTooltip.show(),this.timeTooltip.text(this.positionToStr(this.pageXToPosition(this.overBodyMousePos.x))),this.setTooltipPosition(this.overBodyMousePos.x-this.bodyDiv.offset().left)):this.timeTooltip.hide()},AccessibleSeekBar.prototype.setTooltipPosition=function(t){this.timeTooltip.css({left:t-this.timeTooltip.width()/2-10,bottom:this.seekHead.height()+10})},AccessibleSeekBar.prototype.positionToStr=function(t){var e=Math.floor(t/60),n=Math.floor(t%60);return 10>n&&(n="0"+n),e+":"+n}}(jQuery),function(t){var e="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";window.AccessibleDialog=function(n,i,r,o,a,s,l,u){this.title=r,this.closeButtonLabel=a,this.escapeHook=u,this.baseId=t(n).attr("id")||Math.floor(1e9*Math.random()).toString();var c=this,h=n;if(this.modal=h,h.css({width:s||"50%",top:l?"0":"25%"}),h.addClass("modalDialog"),!l){var d=t("<button>",{"class":"modalCloseButton",title:c.closeButtonLabel,"aria-label":c.closeButtonLabel}).text("X");d.keydown(function(t){32===t.which&&c.hide()}).click(function(){c.hide()});var p=t("<h1></h1>");p.attr("id","modalTitle-"+this.baseId),p.css("text-align","center"),p.text(r),o.attr("id","modalDesc-"+this.baseId),h.attr({"aria-labelledby":"modalTitle-"+this.baseId,"aria-describedby":"modalDesc-"+this.baseId}),h.prepend(p),h.prepend(d)}h.attr({"aria-hidden":"true",role:i}),h.keydown(function(n){if(27===n.which)c.escapeHook?c.escapeHook(n,this):(c.hide(),n.preventDefault());else if(9===n.which){var i=h.find("*"),r=i.filter(e).filter(":visible");if(0===r.length)return;var o=t(":focus"),a=r.index(o);n.shiftKey?0===a&&(r.get(r.length-1).focus(),n.preventDefault()):a===r.length-1&&(r.get(0).focus(),n.preventDefault())}n.stopPropagation()}),t("body > *").not(".modalOverlay").not(".modalDialog").attr("aria-hidden","false")},AccessibleDialog.prototype.show=function(){if(!this.overlay){var n=t("<div></div>").attr({"class":"modalOverlay",tabindex:"-1"});this.overlay=n,t("body").append(n),n.on("mousedown.accessibleModal",function(t){t.preventDefault()})}t("body > *").not(".modalOverlay").not(".modalDialog").attr("aria-hidden","true"),this.overlay.css("display","block"),this.modal.css("display","block"),this.modal.attr({"aria-hidden":"false",tabindex:"-1"}),this.focusedElementBeforeModal=t(":focus");var i=this.modal.find("*").filter(e).filter(":visible");0===i.length&&this.focusedElementBeforeModal.blur();var r=this;setTimeout(function(){r.modal.focus()},300)},AccessibleDialog.prototype.hide=function(){this.overlay&&this.overlay.css("display","none"),this.modal.css("display","none"),this.modal.attr("aria-hidden","true"),t("body > *").not(".modalOverlay").not(".modalDialog").attr("aria-hidden","false"),this.focusedElementBeforeModal.focus()}}(jQuery),function(t){AblePlayer.prototype.countProperties=function(t){var e,n;e=0;for(n in t)t.hasOwnProperty(n)&&++e;return e},AblePlayer.prototype.formatSecondsAsColonTime=function(t){var e=Math.floor(t/60),n=Math.floor(t%60);return 10>n&&(n="0"+n),e+":"+n}}(jQuery),function(t){AblePlayer.prototype.initDescription=function(){this.descFile=this.$sources.first().attr("data-desc-src"),this.descFile?(this.debug&&console.log("This video has a described version: "+this.descFile),this.hasOpenDesc=!0,this.prefDesc&&(this.descOn=!0)):(this.debug&&console.log("This video does not have a described version"),this.hasOpenDesc=!1),this.updateDescription()},AblePlayer.prototype.updateDescription=function(t){var e;this.descOn?this.prefClosedDesc?(e=!1,this.hasClosedDesc&&(this.prefVisibleDesc?(this.$descDiv.show(),this.$descDiv.removeClass("able-clipped")):(this.$descDiv.hide(),this.$descDiv.addClass("able-clipped")),this.showDescription(t||this.getElapsed()))):e=!0:(this.$descDiv.hide(),e=!1),this.hasOpenDesc&&this.usingAudioDescription()!==e&&this.swapDescription()},AblePlayer.prototype.usingAudioDescription=function(){return this.$sources.first().attr("data-desc-src")===this.$sources.first().attr("src")},AblePlayer.prototype.swapDescription=function(){var t,e,n,i,r,o;if(this.usingAudioDescription()){for(t=0;t<this.$sources.length;t++)e=this.$sources[t].getAttribute("data-orig-src"),i=this.$sources[t].getAttribute("type"),e&&this.$sources[t].setAttribute("src",e),"video/mp4"===i&&(r=t);this.swappingSrc=!0}else{for(t=0;t<this.$sources.length;t++)e=this.$sources[t].getAttribute("src"),n=this.$sources[t].getAttribute("data-desc-src"),i=this.$sources[t].getAttribute("type"),n&&(this.$sources[t].setAttribute("src",n),this.$sources[t].setAttribute("data-orig-src",e)),"video/mp4"===i&&(r=t);this.initializing?this.swappingSrc=!1:this.swappingSrc=!0}"html5"===this.player?this.media.load():"jw"===this.player&&this.jwPlayer?(o=this.$sources[r].getAttribute("src"),this.jwPlayer.load({file:o})):"youtube"===this.player},AblePlayer.prototype.showDescription=function(t){var e,n,i,r=function(t){var e=[];if("string"===t.type)e.push(t.value);else for(var n in t.children)e.push(r(t.children[n]));return e.join("")};i=this.selectedDescriptions?this.selectedDescriptions.cues:this.descriptions.length>=1?this.descriptions[0].cues:[];for(e in i)if(i[e].start<=t&&i[e].end>t){n=e;break}"undefined"!=typeof n?this.currentDescription!==n&&(this.$descDiv.html(r(i[n].components)),this.prefDescPause&&this.pauseMedia(),this.currentDescription=n,this.$descDiv.is(":hidden")&&this.$descDiv.show()):(this.$descDiv.html(""),this.currentDescription=-1)}}(jQuery),function(t){AblePlayer.prototype.browserSupportsVolume=function(){var t,e;return t=navigator.userAgent.toLowerCase(),e=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(t),e?"android"===e[0]&&/firefox/.test(t)?!0:!1:!0},AblePlayer.prototype.isUserAgent=function(t){var e;return e=navigator.userAgent.toLowerCase(),this.debug&&console.log("User agent: "+e),-1!==e.indexOf(t)?!0:!1},AblePlayer.prototype.isIOS=function(t){var e,n;return e=navigator.userAgent.toLowerCase(),n=/ipad|iphone|ipod/.exec(e),n?"undefined"!=typeof t?-1!==e.indexOf("os "+t)?!0:!1:!0:!1},AblePlayer.prototype.nativeFullscreenSupported=function(){return"jw"===this.player?!1:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}(jQuery),function(t){AblePlayer.prototype.seekTo=function(t){if("html5"===this.player){var e;this.startTime=t,e=this.media.seekable,e.length>0&&this.startTime>=e.start(0)&&this.startTime<=e.end(0)&&(this.media.currentTime=this.startTime,this.hasSignLanguage&&this.signVideo&&(this.signVideo.currentTime=this.startTime))}else"jw"===this.player&&this.jwPlayer?(this.jwSeekPause=!0,this.jwPlayer.seek(t)):"youtube"===this.player&&this.youTubePlayer.seekTo(t,!0);this.liveUpdatePending=!0,this.refreshControls()},AblePlayer.prototype.getDuration=function(){var t;return"html5"===this.player?t=this.media.duration:"jw"===this.player&&this.jwPlayer?t=this.jwPlayer.getDuration():"youtube"===this.player&&(t=this.youTubePlayer.getDuration()),void 0===t||isNaN(t)||-1===t?0:t},AblePlayer.prototype.getElapsed=function(){var t;if("html5"===this.player)t=this.media.currentTime;else if("jw"===this.player&&this.jwPlayer){if("IDLE"===this.jwPlayer.getState())return 0;t=this.jwPlayer.getPosition()}else"youtube"===this.player&&this.youTubePlayer&&(t=this.youTubePlayer.getCurrentTime());return void 0===t||isNaN(t)||-1===t?0:t},AblePlayer.prototype.getPlayerState=function(){if("html5"===this.player)return this.media.paused?0===this.getElapsed()?"stopped":this.media.ended?"ended":"paused":4!==this.media.readyState?"buffering":"playing";if("jw"===this.player&&this.jwPlayer){if("PAUSED"===this.jwPlayer.getState()||"IDLE"===this.jwPlayer.getState()||void 0===this.jwPlayer.getState())return 0===this.getElapsed()?"stopped":this.getElapsed()===this.getDuration()?"ended":"paused";if("BUFFERING"===this.jwPlayer.getState())return"buffering";if("PLAYING"===this.jwPlayer.getState())return"playing"}else if("youtube"===this.player){var t=this.youTubePlayer.getPlayerState();if(-1===t||5===t)return"stopped";if(0===t)return"ended";if(1===t)return"playing";if(2===t)return"paused";if(3===t)return"buffering"}},AblePlayer.prototype.isMuted=function(){return this.browserSupportsVolume()?"html5"===this.player?this.media.muted:"jw"===this.player&&this.jwPlayer?this.jwPlayer.getMute():"youtube"===this.player?this.youTubePlayer.isMuted():void 0:!1},AblePlayer.prototype.setMute=function(t){this.browserSupportsVolume()&&(t?(this.$muteButton.attr("aria-label",this.tt.unmute),this.$muteButton.find("span").first().removeClass("icon-volume-loud").addClass("icon-volume-mute"),this.$muteButton.find("span.able-clipped").text(this.tt.unmute)):(this.$muteButton.attr("aria-label",this.tt.mute),this.$muteButton.find("span").first().removeClass("icon-volume-mute").addClass("icon-volume-loud"),this.$muteButton.find("span.able-clipped").text(this.tt.mute)),"html5"===this.player?this.media.muted=t:"jw"===this.player&&this.jwPlayer?this.jwPlayer.setMute(t):"youtube"===this.player&&(t?this.youTubePlayer.mute():this.youTubePlayer.unMute()),t||this.lastVolume&&this.setVolume(this.lastVolume))},AblePlayer.prototype.setVolume=function(t){this.browserSupportsVolume()&&("html5"===this.player?(this.media.volume=t,this.hasSignLanguage&&this.signVideo&&(this.signVideo.volume=0)):"jw"===this.player&&this.jwPlayer?this.jwPlayer.setVolume(100*t):"youtube"===this.player&&this.youTubePlayer.setVolume(100*t),this.lastVolume=t)},AblePlayer.prototype.getVolume=function(t){return this.browserSupportsVolume()?"html5"===this.player?this.media.volume:"jw"===this.player&&this.jwPlayer?this.jwPlayer.getVolume()/100:"youtube"===this.player?this.youTubePlayer.getVolume()/100:void 0:1;
},AblePlayer.prototype.isPlaybackRateSupported=function(){return"html5"===this.player?this.media.playbackRate?!0:!1:"jw"===this.player&&this.jwPlayer?!1:"youtube"===this.player?this.youTubePlayer.getAvailablePlaybackRates().length>1:void 0},AblePlayer.prototype.setPlaybackRate=function(t){t=Math.max(.5,t),"html5"===this.player?this.media.playbackRate=t:"youtube"===this.player&&this.youTubePlayer.setPlaybackRate(t),this.$speed.text(this.tt.speed+": "+t.toFixed(2).toString()+"x")},AblePlayer.prototype.getPlaybackRate=function(){return"html5"===this.player?this.media.playbackRate:"jw"===this.player&&this.jwPlayer?1:"youtube"===this.player?this.youTubePlayer.getPlaybackRate():void 0},AblePlayer.prototype.isPaused=function(){var t=this.getPlayerState();return"paused"===t||"stopped"===t||"ended"===t},AblePlayer.prototype.pauseMedia=function(){"html5"===this.player?(this.media.pause(!0),this.hasSignLanguage&&this.signVideo&&this.signVideo.pause(!0)):"jw"===this.player&&this.jwPlayer?this.jwPlayer.pause(!0):"youtube"===this.player&&this.youTubePlayer.pauseVideo()},AblePlayer.prototype.playMedia=function(){"html5"===this.player?(this.media.play(!0),this.hasSignLanguage&&this.signVideo&&this.signVideo.play(!0)):"jw"===this.player&&this.jwPlayer?this.jwPlayer.play(!0):"youtube"===this.player&&(this.youTubePlayer.playVideo(),this.stoppingYouTube=!1),this.startedPlaying=!0},AblePlayer.prototype.refreshControls=function(){var e=this,n=this.getDuration(),i=this.getElapsed();if(this.useFixedSeekInterval===!1&&this.seekIntervalCalculated===!1&&n>0&&n>0&&(this.seekInterval=Math.max(this.seekInterval,n/10),this.seekIntervalCalculated=!0),this.seekBar&&(this.seekBar.setDuration(n),!this.seekBar.tracking)){var r=this.liveUpdatePending||this.seekBar.seekHead.is(t(document.activeElement));this.liveUpdatePending=!1,this.seekBar.setPosition(i,r)}var o;o=this.seekBar.tracking?this.seekBar.lastTrackPosition:i,this.$durationContainer.text(" / "+this.formatSecondsAsColonTime(n)),this.$elapsedTimeContainer.text(this.formatSecondsAsColonTime(o));var a={stopped:this.tt.statusStopped,paused:this.tt.statusPaused,playing:this.tt.statusPlaying,buffering:this.tt.statusBuffering,ended:this.tt.statusEnd};if(this.stoppingYouTube)this.$status.text()!==this.tt.statusStopped&&this.$status.text(this.tt.statusStopped),this.$playpauseButton.find("span").first().hasClass("icon-pause")&&("font"===this.iconType?(this.$playpauseButton.find("span").first().removeClass("icon-pause").addClass("icon-play"),this.$playpauseButton.find("span.able-clipped").text(this.tt.play)):this.$playpauseButton.find("img").attr("src",this.playButtonImg));else{if(this.$status.text()===a[this.getPlayerState()]||this.seekBar.tracking)this.statusDebounceStart=null,clearTimeout(this.statusTimeout),this.statusTimeout=null;else{var s=(new Date).getTime();this.statusDebounceStart?s-this.statusDebounceStart>250&&(this.$status.text(a[this.getPlayerState()]),this.statusDebounceStart=null,clearTimeout(this.statusTimeout),this.statusTimeout=null):(this.statusDebounceStart=s,this.statusTimeout=setTimeout(function(){e.refreshControls()},300))}this.seekBar.tracking||this.stoppingYouTube||(this.isPaused()?(this.$playpauseButton.attr("aria-label",this.tt.play),"font"===this.iconType?(this.$playpauseButton.find("span").first().removeClass("icon-pause").addClass("icon-play"),this.$playpauseButton.find("span.able-clipped").text(this.tt.play)):this.$playpauseButton.find("img").attr("src",this.playButtonImg)):(this.$playpauseButton.attr("aria-label",this.tt.pause),"font"===this.iconType?(this.$playpauseButton.find("span").first().removeClass("icon-play").addClass("icon-pause"),this.$playpauseButton.find("span.able-clipped").text(this.tt.pause)):this.$playpauseButton.find("img").attr("src",this.pauseButtonImg)))}if(this.seekBar){var l=0,u=this.seekBar.wrapperDiv.parent().prev();u.children().each(function(){l+=t(this).is(":hidden")?e.getHiddenWidth(t(this)):t(this).width()});for(var c=this.seekBar.wrapperDiv.prev();c.length>0;)l+=c.is(":hidden")?e.getHiddenWidth(c):c.width(),c=c.prev();for(var h=this.seekBar.wrapperDiv.next();h.length>0;)l+=h.is(":hidden")?e.getHiddenWidth(h):h.width(),h=h.next();var d=this.playerWidth-l-20;Math.abs(d-this.seekBar.getWidth())>5&&this.seekBar.setWidth(d)}if(this.$descButton&&(this.descOn?(this.$descButton.removeClass("buttonOff").attr("aria-label",this.tt.turnOffDescriptions),this.$descButton.find("span.able-clipped").text(this.tt.turnOffDescriptions)):(this.$descButton.addClass("buttonOff").attr("aria-label",this.tt.turnOnDescriptions),this.$descButton.find("span.able-clipped").text(this.tt.turnOnDescriptions))),this.$ccButton){if(this.usingYouTubeCaptions)var p=this.ytCaptions.length;else var p=this.captions.length;this.captionsOn?(this.$ccButton.removeClass("buttonOff"),1===p&&(this.$ccButton.attr("aria-label",this.tt.hideCaptions),this.$ccButton.find("span.able-clipped").text(this.tt.hideCaptions))):(this.$ccButton.addClass("buttonOff"),1===p&&(this.$ccButton.attr("aria-label",this.tt.showCaptions),this.$ccButton.find("span.able-clipped").text(this.tt.showCaptions))),p>1&&(this.$ccButton.attr({"aria-label":this.tt.captions,"aria-haspopup":"true","aria-controls":this.mediaId+"-captions-menu"}),this.$ccButton.find("span.able-clipped").text(this.tt.captions))}if(this.$chaptersButton&&this.$chaptersButton.attr({"aria-label":this.tt.chapters,"aria-haspopup":"true","aria-controls":this.mediaId+"-chapters-menu"}),this.$muteButton&&(this.isMuted()?"font"===this.iconType?(this.$muteButton.find("span").first().removeClass("icon-volume-loud").addClass("icon-volume-mute"),this.$muteButton.find("span.able-clipped").text(this.tt.unmute)):this.$muteButton.find("img").attr("src",this.volumeMuteButtonImg):"font"===this.iconType?(this.$muteButton.find("span").first().removeClass("icon-volume-mute").addClass("icon-volume-loud"),this.$muteButton.find("span.able-clipped").text(this.tt.mute)):this.$muteButton.find("img").attr("src",this.volumeLoudButtonImg)),this.$fullscreenButton&&(this.isFullscreen()?(this.$fullscreenButton.attr("aria-label",this.tt.exitFullScreen),"font"===this.iconType?(this.$fullscreenButton.find("span").first().removeClass("icon-fullscreen-expand").addClass("icon-fullscreen-collapse"),this.$fullscreenButton.find("span.able-clipped").text(this.tt.exitFullScreen)):this.$fullscreenButton.find("img").attr("src",this.fullscreenCollapseButtonImg)):(this.$fullscreenButton.attr("aria-label",this.tt.enterFullScreen),"font"===this.iconType?(this.$fullscreenButton.find("span").first().removeClass("icon-fullscreen-collapse").addClass("icon-fullscreen-expand"),this.$fullscreenButton.find("span.able-clipped").text(this.tt.enterFullScreen)):this.$fullscreenButton.find("img").attr("src",this.fullscreenExpandButtonImg))),"undefined"!=typeof this.$bigPlayButton&&(this.isPaused()&&!this.seekBar.tracking?(this.$bigPlayButton.show(),this.isFullscreen()?(this.$bigPlayButton.width(t(window).width()),this.$bigPlayButton.height(t(window).height())):(this.$bigPlayButton.width(this.$mediaContainer.width()),this.$bigPlayButton.height(this.$mediaContainer.height()))):this.$bigPlayButton.hide()),this.includeTranscript&&(this.autoScrollTranscript!==this.$autoScrollTranscriptCheckbox.prop("checked")&&this.$autoScrollTranscriptCheckbox.prop("checked",this.autoScrollTranscript),this.autoScrollTranscript&&this.currentHighlight)){var f=Math.floor(t(".able-transcript").scrollTop()+t(this.currentHighlight).position().top-t(".able-transcript").height()/2+t(this.currentHighlight).height()/2);f!==Math.floor(t(".able-transcript").scrollTop())&&(this.scrollingTranscript=!0,t(".able-transcript").scrollTop(f))}"html5"===this.player?this.media.buffered.length>0&&this.seekBar.setBuffered(this.media.buffered.end(0)/this.getDuration()):"jw"===this.player&&this.jwPlayer?this.seekBar.setBuffered(this.jwPlayer.getBuffer()/100):"youtube"===this.player&&this.seekBar.setBuffered(this.youTubePlayer.getVideoLoadedFraction())},AblePlayer.prototype.getHiddenWidth=function(t){var e=t.clone().appendTo("body"),n=e.outerWidth();return e.remove(),n},AblePlayer.prototype.handlePlay=function(t){this.isPaused()?this.playMedia():this.pauseMedia(),this.refreshControls()},AblePlayer.prototype.handleStop=function(){"html5"==this.player?(this.pauseMedia(),this.seekTo(0)):"jw"===this.player&&this.jwPlayer?this.jwPlayer.stop():"youtube"===this.player&&(this.youTubePlayer.pauseVideo(),this.seekTo(0),this.stoppingYouTube=!0),this.refreshControls()},AblePlayer.prototype.handleRewind=function(){var t=this.getElapsed()-this.seekInterval;0>t?this.seekTo(0):this.seekTo(t)},AblePlayer.prototype.handleFastForward=function(){var t=this.getElapsed()+this.seekInterval;t>this.getDuration()?this.seekTo(this.getDuration()):this.seekTo(t)},AblePlayer.prototype.handleMute=function(){this.isMuted()?this.setMute(!1):this.setMute(!0)},AblePlayer.prototype.handleVolume=function(t){var e;this.isMuted()&&this.setMute(!1),e=this.getVolume(),"up"===t?e=.9>e?Math.round(10*(e+.1))/10:1:"down"===t?e=e>.1?Math.round(10*(e-.1))/10:0:(t>=49||53>=t)&&(e=.2*(t-48)),this.setVolume(e),0===e&&this.setMute(!0)},AblePlayer.prototype.handleRateIncrease=function(){this.changeRate(1)},AblePlayer.prototype.handleRateDecrease=function(){this.changeRate(-1)},AblePlayer.prototype.changeRate=function(t){if("html5"===this.player)this.setPlaybackRate(this.getPlaybackRate()+.25*t);else if("youtube"===this.player){var e=this.youTubePlayer.getAvailablePlaybackRates(),n=this.getPlaybackRate(),i=e.indexOf(n);-1===i?console.log("ERROR: Youtube returning unknown playback rate "+n.toString()):(i+=t,i<e.length&&i>=0&&this.setPlaybackRate(e[i]))}},AblePlayer.prototype.handleCaptionToggle=function(){var t;if(this.hidingPopup)return this.hidingPopup=!1,!1;if(this.usingYouTubeCaptions,t=this.captions.length?this.captions:this.ytCaptions.length?this.ytCaptions:[],1===t.length){if(this.captionsOn===!0)this.captionsOn=!1,this.usingYouTubeCaptions?this.youTubePlayer.unloadModule(this.ytCaptionModule):this.$captionDiv.hide();else{this.captionsOn=!0,this.usingYouTubeCaptions?this.youTubePlayer.loadModule(this.ytCaptionModule):this.$captionDiv.show();for(var e=0;e<t.length;e++)t[e].def===!0&&(this.selectedCaptions=t[e]);this.selectedCaptions=this.captions[0],this.descriptions.length>=0&&(this.selectedDescriptions=this.descriptions[0])}this.refreshControls()}else this.captionsPopup.is(":visible")?(this.captionsPopup.hide(),this.hidingPopup=!1,this.$ccButton.focus()):(this.closePopups(),this.captionsPopup.show(),this.captionsPopup.css("top",this.$ccButton.position().top-this.captionsPopup.outerHeight()),this.captionsPopup.css("left",this.$ccButton.position().left),this.captionsPopup.find("li").removeClass("able-focus"),this.captionsPopup.find("input:checked")?this.captionsPopup.find("input:checked").focus().parent().addClass("able-focus"):this.captionsPopup.find("input").first().focus().parent().addClass("able-focus"))},AblePlayer.prototype.handleChapters=function(){return this.hidingPopup?(this.hidingPopup=!1,!1):void(this.chaptersPopup.is(":visible")?(this.chaptersPopup.hide(),this.hidingPopup=!1,this.$chaptersButton.focus()):(this.closePopups(),this.chaptersPopup.show(),this.chaptersPopup.css("top",this.$chaptersButton.position().top-this.chaptersPopup.outerHeight()),this.chaptersPopup.css("left",this.$chaptersButton.position().left),this.chaptersPopup.find("li").removeClass("able-focus"),this.chaptersPopup.find("input:checked")?this.chaptersPopup.find("input:checked").focus().parent().addClass("able-focus"):this.chaptersPopup.find("input").first().focus().parent().addClass("able-focus")))},AblePlayer.prototype.handleDescriptionToggle=function(){this.descOn=!this.descOn,this.updateDescription(),this.refreshControls()},AblePlayer.prototype.handlePrefsClick=function(){this.setFullscreen(!1),this.prefsDialog.show()},AblePlayer.prototype.handleHelpClick=function(){this.setFullscreen(!1),this.helpDialog.show()},AblePlayer.prototype.handleTranscriptToggle=function(){this.$transcriptDiv.is(":visible")?(this.$transcriptArea.hide(),this.$transcriptButton.addClass("buttonOff").attr("aria-label",this.tt.showTranscript),this.$transcriptButton.find("span.able-clipped").text(this.tt.showTranscript)):(this.$transcriptArea.show(),this.$transcriptButton.removeClass("buttonOff").attr("aria-label",this.tt.hideTranscript),this.$transcriptButton.find("span.able-clipped").text(this.tt.hideTranscript))},AblePlayer.prototype.handleSignToggle=function(){if(this.$signWindow.is(":visible"))this.$signWindow.hide(),this.$signButton.addClass("buttonOff").attr("aria-label",this.tt.showSign),this.$signButton.find("span.able-clipped").text(this.tt.showSign);else{this.$signWindow.show();var t=this.$signWindow.offset();this.dragStartX=t.left,this.dragStartY=t.top,this.$signButton.removeClass("buttonOff").attr("aria-label",this.tt.hideSign),this.$signButton.find("span.able-clipped").text(this.tt.hideSign)}},AblePlayer.prototype.isFullscreen=function(){return this.nativeFullscreenSupported()?document.fullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement?!0:!1:this.modalFullscreenActive?!0:!1},AblePlayer.prototype.setFullscreen=function(e){if(this.isFullscreen()!=e){var n=this,i=this.$ableDiv,r=i[0];if(this.nativeFullscreenSupported())e?r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen&&r.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{if(!this.fullscreenDialog){var o=t("<div>");this.fullscreenDialog=new AccessibleDialog(o,"Fullscreen dialog","Fullscreen video player","100%",!0,function(){n.handleFullscreenToggle()}),t("body").append(o)}var a=this.isPaused();if(e){this.modalFullscreenActive=!0,this.fullscreenDialog.show(),this.$modalFullscreenPlaceholder=t('<div class="placeholder">'),this.$modalFullscreenPlaceholder.insertAfter(i),i.appendTo(this.fullscreenDialog.modal),i===this.$ableColumnLeft&&i.width("100%");var s=t(window).height()-this.$playerDiv.height();this.$descDiv.is(":hidden")||(s-=n.$descDiv.height()),this.resizePlayer(t(window).width(),s)}else this.modalFullscreenActive=!1,i===this.$ableColumnLeft&&i.width("50%"),i.insertAfter(this.$modalFullscreenPlaceholder),this.$modalFullscreenPlaceholder.remove(),this.fullscreenDialog.hide(),this.resizePlayer(this.playerWidth,this.playerHeight);!a&&this.isPaused()&&this.playMedia()}this.refreshControls()}},AblePlayer.prototype.handleFullscreenToggle=function(){this.setFullscreen(!this.isFullscreen())},AblePlayer.prototype.handleTranscriptLockToggle=function(t){this.autoScrollTranscript=t,this.refreshControls()},AblePlayer.prototype.showTooltip=function(t){t.is(":animated")?t.stop(!0,!0).show().delay(4e3).fadeOut(1e3):t.stop().show().delay(4e3).fadeOut(1e3)},AblePlayer.prototype.showAlert=function(t,e){var n,i;n="sign"===e?this.$windowAlert:this.alertBox,n.show(),n.text(t),"sign"===e?(i=this.$signWindow.width()>n.width()?this.$signWindow.width()/2-n.width()/2:10,n.css({top:this.$signWindow.height()/3*2,left:i})):n.css({left:this.$playerDiv.offset().left+this.$playerDiv.width()/2-n.width()/2}),setTimeout(function(){n.fadeOut(300)},3e3)},AblePlayer.prototype.resizePlayer=function(t,e){this.$media.height(e),this.$media.width(t),this.$captionDiv&&(this.$captionDiv.width(t),e!==this.playerHeight?this.$captionDiv.css("font-size",e/this.playerHeight*18):this.$captionDiv.css("font-size","")),this.$descDiv&&this.$descDiv.width(t),this.$vidcapContainer&&(this.$vidcapContainer.height(e),this.$vidcapContainer.width(t)),this.$ableDiv.width(t),this.jwPlayer?this.jwPlayer.resize(t,e):this.youTubePlayer&&this.youTubePlayer.setSize(t,e),this.refreshControls()}}(jQuery),function(t){AblePlayer.prototype.updateCaption=function(t){this.usingYouTubeCaptions||(this.captionsOn?(this.$captionDiv.show(),this.showCaptions(t||this.getElapsed())):this.$captionDiv&&this.$captionDiv.hide())},AblePlayer.prototype.getCaptionClickFunction=function(t){var e=this;return function(){if(e.selectedCaptions=t,e.captionLang=t.language,e.currentCaption=-1,e.usingYouTubeCaptions)e.captionsOn?e.youTubePlayer.setOption(e.ytCaptionModule,"track",{languageCode:e.captionLang}):(e.resettingYouTubeCaptions=!0,e.youTubePlayer.loadModule(e.ytCaptionModule));else{for(var n in e.descriptions)e.descriptions[n].language===t.language&&(e.selectedDescriptions=e.descriptions[n],e.currentDescription=-1);e.updateCaption(),e.updateDescription()}e.captionsOn=!0,e.hidingPopup=!0,e.captionsPopup.hide(),setTimeout(function(){e.hidingPopup=!1},100),e.$ccButton.focus(),e.refreshControls()}},AblePlayer.prototype.getCaptionOffFunction=function(){var t=this;return function(){"youtube"==t.player&&t.youTubePlayer.unloadModule(t.ytCaptionModule),t.captionsOn=!1,t.currentCaption=-1,t.hidingPopup=!0,t.captionsPopup.hide(),setTimeout(function(){t.hidingPopup=!1},100),t.$ccButton.focus(),t.refreshControls(),t.updateCaption()}},AblePlayer.prototype.showCaptions=function(t){var e,n,i;i=this.selectedCaptions?this.selectedCaptions.cues:this.captions.length>=1?this.captions[0].cues:[];for(e in i)if(i[e].start<=t&&i[e].end>t){n=e;break}"undefined"!=typeof n?this.currentCaption!==n&&(this.$captionDiv.html(this.flattenCueForCaption(i[n]).replace("\n","<br>")),this.currentCaption=n):(this.$captionDiv.html(""),this.currentCaption=-1)},AblePlayer.prototype.flattenCueForCaption=function(t){var e=[],n=function(t){var e=[];if("string"===t.type)e.push(t.value);else if("v"===t.type){e.push("["+t.value+"]");for(var i in t.children)e.push(n(t.children[i]))}else for(var i in t.children)e.push(n(t.children[i]));return e.join("")};for(var i in t.components.children)e.push(n(t.components.children[i]));return e.join("")}}(jQuery),function(t){AblePlayer.prototype.updateMeta=function(t){this.hasMeta&&(this.$metaDiv.show(),this.showMeta(t||this.getElapsed()))},AblePlayer.prototype.showMeta=function(t){var e,n,i;i=this.meta.length>=1?this.meta:[];for(e in i)if(i[e].start<=t&&i[e].end>t){n=e;break}"undefined"!=typeof n?this.currentMeta!==n&&(this.$metaDiv.html(this.flattenCueForMeta(i[n]).replace("\n","<br>")),this.currentMeta=n):(this.$metaDiv.html(""),this.currentMeta=-1)},AblePlayer.prototype.flattenCueForMeta=function(t){var e=[],n=function(t){var e=[];if("string"===t.type)e.push(t.value);else if("v"===t.type){e.push("["+t.value+"]");for(var i in t.children)e.push(n(t.children[i]))}else for(var i in t.children)e.push(n(t.children[i]));return e.join("")};for(var i in t.components.children)e.push(n(t.components.children[i]));return e.join("")}}(jQuery),function(t){AblePlayer.prototype.getSupportedLangs=function(){var t=["en","de","es"];return t},AblePlayer.prototype.getTranslationText=function(){var e,n,i,r;return e=t.Deferred(),this.forceLang||(t("body").attr("lang")?n=t("body").attr("lang"):t("html").attr("lang")&&(n=t("html").attr("lang")),n!==this.lang&&(r="Language of web page ("+n+") ",-1!==t.inArray(n,this.getSupportedLangs())?(r+=" has a translation table available.",this.lang=n):r+=" is not currently supported. Using default language ("+this.lang+")",this.debug&&console.log(r))),i=this,t.getJSON(this.translationPath+this.lang+".js",function(t,e,n){return"success"!==e?!1:(i.tt=t,void(i.debug&&(console.log("Successfully assigned JSON data to trans"),console.log(i.tt))))}).then(function(){e.resolve()},function(t,n){e.reject(n)}),e.promise()}}(jQuery),function(t){AblePlayer.prototype.updateTranscript=function(){if(this.includeTranscript){var e,n,i;if(this.transcriptCaptions?(i=this.transcriptCaptions.language,e=this.transcriptCaptions.cues):this.selectedCaptions&&(i=this.captionLang,e=this.selectedCaptions.cues),this.transcriptDescriptions)n=this.transcriptDescriptions.cues;else if(this.descriptions.length>0){if(i)for(var r in this.descriptions)this.descriptions[r].language===i&&(n=this.descriptions[r].cues);n||(n=this.descriptions[0].cues)}var o=this.generateTranscript(e||[],n||[]);this.$transcriptDiv.html(o);var a=this;1===this.prefTabbable&&t(".able-transcript span.able-transcript-seekpoint").attr("tabindex","0"),t(".able-transcript").length>0&&t(".able-transcript span.able-transcript-seekpoint").click(function(e){var n=parseFloat(t(this).attr("data-start"));n+=.01,a.seekTo(n)})}},AblePlayer.prototype.highlightTranscript=function(e){if(this.includeTranscript){var n,i,r=this;e=parseFloat(e),t(".able-transcript span.able-transcript-caption").each(function(){return n=parseFloat(t(this).attr("data-start")),i=parseFloat(t(this).attr("data-end")),e>=n&&i>=e?(t(".able-highlight").removeClass("able-highlight"),t(this).addClass("able-highlight"),!1):void 0}),r.currentHighlight=t(".able-highlight"),0===r.currentHighlight.length&&(r.currentHighlight=null)}},AblePlayer.prototype.generateTranscript=function(e,n){var i=this,r=t('<div class="able-transcript-container"></div>'),o="Transcript";if("undefined"!=typeof this.transcriptTitle?o=this.transcriptTitle:this.lyricsMode&&(o="Lyrics"),"undefined"==typeof this.transcriptDivLocation&&""!=o){var a=this.playerHeadingLevel;a+=1,a>6&&(a=6);var s="h"+a.toString(),l="<"+s+' class="able-transcript-heading">';l+=o,l+="</"+s+">",r.append(l)}for(var u=0,c=0,h=function(e,n){var i=t('<div class="able-desc"><span class="hidden">Description: </span></div>'),r=function(t){var e=[];if("string"===t.type)e.push(t.value);else for(var n in t.children)e=e.concat(r(t.children[n]));return e},o=t('<span class="able-transcript-seekpoint"></span>');for(var a in n.components.children){var s=r(n.components.children[a]);for(var l in s)o.append(s[l])}o.attr("data-start",n.start.toString()),o.attr("data-end",n.end.toString()),i.append(o),e.append(i)},d=function(e,n){var r=t('<span class="able-transcript-seekpoint able-transcript-caption"></span>'),o=function(e){var n=[],i=function(e){var n=[];if(""===e)return n;var r=e.indexOf("["),o=e.indexOf("]"),a=e.indexOf("("),s=e.indexOf(")"),l=-1!==r&&-1!==o,u=-1!==a&&-1!==s;return u&&l&&a>r||l?(n=n.concat(i(e.substring(0,r))),n.push(t('<div></div><span class="able-unspoken">'+e.substring(r,o+1)+"</span>")),n=n.concat(i(e.substring(o+1)))):u?(n=n.concat(i(e.substring(0,a))),n.push(t('<div></div><span class="able-unspoken">'+e.substring(a,s+1)+"</span>")),n=n.concat(i(e.substring(s+1)))):n.push(e),n};if("string"===e.type)n=n.concat(i(e.value));else if("v"===e.type){var r=t('<div></div><span class="able-unspoken">['+e.value+"]</span>");n.push(r);for(var a in e.children){var s=o(e.children[a]);for(var l in s)n.push(s[l])}}else for(var a in e.children)n=n.concat(o(e.children[a]));return n};for(var a in n.components.children){var s=o(n.components.children[a]);for(var l in s){var u=s[l];"string"==typeof u&&i.lyricsMode&&(u=u.replace("\n","<br>")+"<br>"),r.append(u)}}r.attr("data-start",n.start.toString()),r.attr("data-end",n.end.toString()),e.append(r),e.append("\n")};u<e.length||c<n.length;)u<e.length&&c<n.length?n[c].start<=e[u].start?(h(r,n[c]),c+=1):(d(r,e[u]),u+=1):u<e.length?(d(r,e[u]),u+=1):c<n.length&&(h(r,n[c]),c+=1);return r}}(jQuery),function(t){AblePlayer.prototype.showSearchResults=function(){var e=this;if(this.searchDiv&&this.searchString&&t("#"+this.SearchDiv)){var n=this.searchFor(this.searchString);if(n.length>0){var i=t("<p>",{"class":"able-search-results-summary"}),r="Found <strong>"+n.length+"</strong> matching items. ";r+="Click the time associated with any item ",r+="to play the video from that point.",i.html(r);var o=t("<ul>");for(var a in n){var s=t("<li>",{}),l=this.secondsToTime(n[a].start),u=t("<span>",{"class":"able-search-results-time","data-start":n[a].start,title:l.title,tabindex:"0"});u.text(l.value),u.click(function(n){var i=parseFloat(t(this).attr("data-start"));i+=.01,e.seeking=!0,e.seekTo(i)});var c=t("<span>",{"class":"able-search-result-text"});c.html("..."+n[a].caption+"..."),s.append(u,c),o.append(s)}t("#"+this.searchDiv).append(i,o)}else{var h=t("<p>").text("No results found.");t("#"+this.searchDiv).append(h)}}},AblePlayer.prototype.searchFor=function(t){var e,n,i,r,o,a,s,l=t.split(" ");if(this.captions.length>0&&(e=this.captions[0].language,n=this.captions[0].cues,n.length>0)){var i=[];o=0;for(a in n)if("string"===n[a].components.children[0].type){r=n[a].components.children[0].value;for(s in l)if(-1!==r.indexOf(l[s])){i[o]=[],i[o].start=n[a].start,i[o].caption=this.highlightSearchTerm(l,s,r),o++;break}}}return i},AblePlayer.prototype.highlightSearchTerm=function(t,e,n){var i,r,o,a,s,l,u;for(i=e;i<t.length;i++)r=t[i],o=n.indexOf(r),-1!==o&&(a=r.length,a>0?(s=n.substring(0,o),l='<span class="able-search-term">'+r+"</span>",u=n.substring(o+a),n=s+l+u):(s='<span class="able-search-term">'+r+"</span>",l=n.substring(o+a),n=s+l));return n},AblePlayer.prototype.secondsToTime=function(t){var t=Math.floor(t),e=parseInt(t/3600)%24,n=parseInt(t/60)%60,i=t%60,r="",o="";e>0&&(r+=e+":"),10>n?(r+="0"+n+":",n>0&&(o+=n+" minutes ")):(r+=n+":",o+=n+" minutes "),10>i?(r+="0"+i,i>0&&(o+=i+" seconds ")):(r+=i,o+=i+" seconds ");var a=[];return a.value=r,a.title=o,a}}(jQuery),function(t){AblePlayer.prototype.onMediaUpdateTime=function(){this.startedPlaying||(this.startTime?this.startTime===this.media.currentTime?(this.autoplay||this.seeking)&&(this.playMedia(),this.seeking=!1):this.seekTo(this.startTime):this.autoplay&&this.playMedia()),1===this.prefHighlight&&this.highlightTranscript(this.getElapsed()),this.updateCaption(),this.updateDescription(),this.updateMeta(),this.refreshControls()},AblePlayer.prototype.onMediaPause=function(){this.debug&&console.log("media pause event")},AblePlayer.prototype.onMediaComplete=function(){this.hasPlaylist&&(this.playlistIndex===this.$playlist.length-1?this.loop&&(this.playlistIndex=0,this.swapSource(0)):(this.playlistIndex++,this.swapSource(this.playlistIndex))),this.refreshControls()},AblePlayer.prototype.onMediaNewSourceLoad=function(){if(this.swappingSrc===!0){if("jw"===this.player){var t=this.jwPlayer;setTimeout(function(){t.play(!0)},500)}else this.playMedia();this.swappingSrc=!1,this.refreshControls()}},AblePlayer.prototype.onWindowResize=function(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.modalFullscreenActive){var e=t(window).height()-this.$playerDiv.height();this.$descDiv.is(":hidden")||(e-=this.$descDiv.height()),this.resizePlayer(t(window).width(),e)}else this.resizePlayer(this.playerWidth,this.playerHeight)},AblePlayer.prototype.addSeekbarListeners=function(){var t=this;this.seekBar.bodyDiv.on("startTracking",function(e){t.pausedBeforeTracking=t.isPaused(),t.pauseMedia()}).on("tracking",function(e,n){t.highlightTranscript(n),t.updateCaption(n),t.updateDescription(n),t.updateMeta(n),t.refreshControls()}).on("stopTracking",function(e,n){t.seekTo(n),t.pausedBeforeTracking||setTimeout(function(){t.playMedia()},200)})},AblePlayer.prototype.onClickPlayerButton=function(e){var n=t(e).attr("class").split(" ")[0].substr(20);"play"===n?this.handlePlay():"stop"===n?this.handleStop():"rewind"===n?this.handleRewind():"forward"===n?this.handleFastForward():"mute"===n?this.handleMute():"volume-up"===n?this.handleVolume("up"):"volume-down"===n?this.handleVolume("down"):"faster"===n?this.handleRateIncrease():"slower"===n?this.handleRateDecrease():"captions"===n?this.handleCaptionToggle():"chapters"===n?this.handleChapters():"descriptions"===n?this.handleDescriptionToggle():"sign"===n?this.handleSignToggle():"preferences"===n?this.handlePrefsClick():"help"===n?this.handleHelpClick():"transcript"===n?this.handleTranscriptToggle():"fullscreen"===n&&this.handleFullscreenToggle()},AblePlayer.prototype.okToHandleKeyPress=function(){var e=t(document.activeElement).prop("tagName");return"INPUT"===e?!1:!0},AblePlayer.prototype.onPlayerKeyPress=function(e){if(!this.okToHandleKeyPress())return!1;var n=e.which;if(n>=65&&90>=n&&(n+=32),27===n)this.closePopups();else if(32===n)t(".able-controller button").is(":focus")||this.handlePlay();else if(112===n)this.usingModifierKeys(e)&&this.handlePlay();else if(115===n)this.usingModifierKeys(e)&&this.handleStop();else if(109===n)this.usingModifierKeys(e)&&this.handleMute();else if(117===n)this.usingModifierKeys(e)&&this.handleVolume("up");else if(100===n)this.usingModifierKeys(e)&&this.handleVolume("down");else if(n>=49&&53>=n)this.usingModifierKeys(e)&&this.handleVolume(n);else if(99===n)this.usingModifierKeys(e)&&this.handleCaptionToggle();else if(102===n)this.usingModifierKeys(e)&&this.handleFastForward();else if(114===n)this.usingModifierKeys(e)&&this.handleRewind();else if(110===n)this.usingModifierKeys(e)&&this.handleDescriptionToggle();else if(104===n)this.usingModifierKeys(e)&&this.handleHelpClick();else if(116===n)this.usingModifierKeys(e)&&this.handlePrefsClick();else if(104===n)this.usingModifierKeys(e)&&this.handleHelpClick();else if(13===n){var i=t(document.activeElement);"SPAN"===i.prop("tagName")?i.click():"LI"===i.prop("tagName")&&i.click()}},AblePlayer.prototype.addHtml5MediaListeners=function(){var t=this;this.$media.on("emptied",function(){t.debug&&console.log("media has been emptied")}).on("loadedmetadata",function(){t.debug&&console.log("meta data has loaded"),t.onMediaNewSourceLoad()}).on("canplay",function(){t.debug&&console.log("canplay event"),t.startTime&&!t.startedPlaying&&t.seekTo(t.startTime)}).on("canplaythrough",function(){t.debug&&console.log("canplaythrough event"),t.startTime&&!t.startedPlaying&&t.seekTo(t.startTime)}).on("playing",function(){t.refreshControls()}).on("ended",function(){t.onMediaComplete()}).on("progress",function(){t.refreshControls()}).on("waiting",function(){t.refreshControls()}).on("durationchange",function(){t.refreshControls()}).on("timeupdate",function(){t.onMediaUpdateTime()}).on("play",function(){t.debug&&console.log("media play event")}).on("pause",function(){t.onMediaPause()}).on("ratechange",function(){t.debug&&console.log("media ratechange")}).on("volumechange",function(){t.debug&&console.log("media volume change")}).on("error",function(){if(t.debug)switch(t.media.error.code){case 1:console.log("HTML5 Media Error: MEDIA_ERR_ABORTED");break;case 2:console.log("HTML5 Media Error: MEDIA_ERR_NETWORK ");break;case 3:console.log("HTML5 Media Error: MEDIA_ERR_DECODE ");break;case 4:console.log("HTML5 Media Error: MEDIA_ERR_SRC_NOT_SUPPORTED ")}})},AblePlayer.prototype.addJwMediaListeners=function(){var e=this;this.jwPlayer.onTime(function(){e.onMediaUpdateTime()}).onComplete(function(){e.onMediaComplete()}).onReady(function(){e.debug&&console.log("JW Player onReady event fired"),t("#"+e.jwId).removeAttr("tabindex"),e.startTime>0&&!e.startedPlaying&&(e.seekTo(e.startTime),e.startedPlaying=!0),e.refreshControls()}).onSeek(function(t){e.debug&&console.log("Seeking to "+t.position+"; target: "+t.offset),e.jwSeekPause&&(e.jwSeekPause=!1,e.playMedia()),setTimeout(function(){e.refreshControls()},300)}).onPlay(function(){e.debug&&console.log("JW Player onPlay event fired"),e.refreshControls()}).onPause(function(){e.onMediaPause()}).onBuffer(function(){e.debug&&console.log("JW Player onBuffer event fired"),e.refreshControls()}).onBufferChange(function(){e.refreshControls()}).onIdle(function(t){e.debug&&console.log("JW Player onIdle event fired"),e.refreshControls()}).onMeta(function(){e.debug&&console.log("JW Player onMeta event fired")}).onPlaylist(function(){e.debug&&console.log("JW Player onPlaylist event fired"),e.onMediaNewSourceLoad()})},AblePlayer.prototype.addEventListeners=function(){var e;e=this,t(window).resize(function(){e.onWindowResize()}),this.addSeekbarListeners(),this.$controllerDiv.find("button").click(function(){e.onClickPlayerButton(this)}),this.$ableDiv.keydown(function(t){AblePlayer.nextIndex>1&&e.onPlayerKeyPress(t)}),this.$playlist&&this.$playlist.click(function(){e.playlistIndex=t(this).index(),e.swapSource(e.playlistIndex)}),this.$media.click(function(){e.handlePlay()}),"html5"===this.player?this.addHtml5MediaListeners():"jw"===this.player?this.addJwMediaListeners():"youtube"===this.player&&setInterval(function(){e.onMediaUpdateTime()},300)}}(jQuery),function(t){AblePlayer.prototype.initDragDrop=function(t){this.$activeWindow=t,t.is(".able-sign-window")&&(this.windowName="sign-window"),this.addWindowMenu()},AblePlayer.prototype.addWindowMenu=function(){var e=this;this.$windowAlert=t('<div role="alert"></div>'),this.$windowAlert.addClass("able-alert"),this.$windowAlert.appendTo(this.$activeWindow),this.$windowAlert.css({top:this.$activeWindow.offset().top
});var n=t("<button>",{type:"button",tabindex:"0","aria-label":this.tt.windowButtonLabel,"class":"able-button-handler-preferences"});if("font"===this.iconType){var i=t("<span>",{"class":"icon-preferences","aria-hidden":"true"});n.append(i)}else{var r="../images/"+this.iconColor+"/preferences.png",o=t("<img>",{src:r,alt:"",role:"presentation"});n.append(o)}var a=t("<span>",{"class":"able-clipped"}).text(this.tt.windowButtonLabel);n.append(a);var s=this.mediaId+"-"+this.windowName+"-tooltip",l=t("<div>",{"class":"able-tooltip",id:s});n.on("mouseenter focus",function(n){var i=t(this).attr("aria-label"),r=t(this).position(),o=t(this).height(),a=(t(this).width(),r.top-o-5),l=0,u={left:"",right:l+"px",top:a+"px"},c=t("#"+s).text(i).css(u);e.showTooltip(c),t(this).on("mouseleave blur",function(){t("#"+s).text("").hide()})}),this.addResizeDialog();var u=this.createPopup(this.windowName),c=t("<ul></ul>"),h=this.mediaId+"-"+this.windowName+"-choice";if("sign-window"==this.windowName){var d=[];d.push({name:"move",label:this.tt.windowMove}),d.push({name:"resize",label:this.tt.windowResize}),this.$activeWindow.css("z-index")>0?d.push({name:"sendBack",label:this.tt.windowSendBack}):d.push({name:"bringTop",label:this.tt.windowBringTop});for(var p in d){var f=t("<li></li>"),m=d[p],g=h+"-"+p,v=t("<input>",{type:"radio",val:m.name,name:h,id:g}),y=t("<label>",{"for":g});y.text(m.label),v.on("click keypress",function(n){n.preventDefault(),e.handleMenuChoice(t(this).val())}),f.append(v,y),c.append(f)}}u.append(c),n.on("click keydown",function(t){e.handleWindowButtonClick(t)}),this.$activeWindow.append(n,l,u),this.$windowButton=n,this.$windowPopup=u},AblePlayer.prototype.addResizeDialog=function(){var e=this,n=this.mediaId+"-resize-width",i=(this.mediaId+"-resize-height",this.$activeWindow.width()),r=(this.$activeWindow.height(),t("<div></div>",{"class":"able-resize-form"})),o=t("<div></div>"),a=t("<div></div>"),s=t("<input>",{type:"text",id:n,value:i}),l=t("<label>",{"for":n}).text(this.tt.width),u=t('<button class="modal-button">'+this.tt.save+"</button>"),c=t('<button class="modal-button">'+this.tt.cancel+"</button>");u.click(function(){var r=t("#"+n).val();r!==i&&(e.$activeWindow.css("width",r),e.$activeWindow.find("video").css({width:r+"px"})),e.resizeDialog.hide(),e.$windowPopup.hide(),e.$windowButton.show().focus()}),c.click(function(){dialog.hide()}),a.append(l,s),o.append(a),r.append(o,"<hr>",u,c),t("body").append(r),this.resizeDialog=new AccessibleDialog(r,"alert",this.tt.windowResizeHeading,o,this.tt.closeButtonLabel,"20em")},AblePlayer.prototype.handleWindowButtonClick=function(t){return t.which>1&&32!==t.which&&13!==t.which?!1:this.hidingPopup?(this.hidingPopup=!1,!1):(this.$windowButton.hide(),this.$windowPopup.show(),this.$windowPopup.find("li").removeClass("able-focus"),this.$windowPopup.find("input:checked").val()?this.$windowPopup.find("input:checked").focus().parent().addClass("able-focus"):this.$windowPopup.find("input").first().focus().parent().addClass("able-focus"),void t.preventDefault())},AblePlayer.prototype.handleMenuChoice=function(t){var e=this;if("move"==t)this.showAlert(this.tt.windowMoveAlert,"sign"),e.startDrag(),this.$windowPopup.hide().parent().focus();else if("resize"==t)this.resizeDialog.show(),this.showAlert(this.tt.windowResizeAlert,"sign");else if("sendBack"==t){this.$activeWindow.css("z-index","0"),this.$windowPopup.css("z-index","4000").hide(),this.$windowButton.show().focus(),this.showAlert(this.tt.windowSendBackAlert,"sign");var n=this.$windowPopup.find("input:last");n.val("bringTop"),n.next("label").text(this.tt.windowBringTop)}else if("bringTop"==t){this.$activeWindow.css({"z-index":"4000"}),this.$windowPopup.hide(),this.$windowButton.show().focus(),this.showAlert(this.tt.windowBringTopAlert,"sign");var n=this.$windowPopup.find("input:last");n.val("sendBack"),n.next("label").text(this.tt.windowSendBack)}},AblePlayer.prototype.startDrag=function(){var e,n,i,r;return e=this,this.$activeWindow.addClass("able-drag").css({position:"absolute",top:this.dragStartY+"px",left:this.dragStartX+"px"}),n=this.$activeWindow.offset(),this.dragStartX=this.dXKeys=n.left,this.dragStartY=this.dYKeys=n.top,t(document).on("mousedown",function(t){e.dragging=!0,e.startMouseX=t.pageX,e.startMouseY=t.pageY,e.dragOffsetX=e.startMouseX-e.dragStartX,e.dragOffsetY=e.startMouseY-e.dragStartY}),t(document).on("mousemove",function(t){e.dragging&&(i=t.pageX-e.dragOffsetX,r=t.pageY-e.dragOffsetY,e.resetDraggedObject(i,r))}),t(document).on("mouseup",function(){e.dragging&&e.dragEnd()}),this.startingDrag=!0,this.$activeWindow.on("keydown",function(t){e.dragKeys(t)}),!1},AblePlayer.prototype.dragKeys=function(t){var e,n;if(this.startingDrag)return this.startingDrag=!1,!1;switch(e=t.which,n=10,e){case 37:case 63234:this.dXKeys-=n;break;case 38:case 63232:this.dYKeys-=n;break;case 39:case 63235:this.dXKeys+=n;break;case 40:case 63233:this.dYKeys+=n;break;case 13:case 27:return this.dragEnd(),!1;default:return!1}return this.resetDraggedObject(this.dXKeys,this.dYKeys),t.preventDefault&&t.preventDefault(),!1},AblePlayer.prototype.resetDraggedObject=function(t,e){this.$activeWindow.css({left:t+"px",top:e+"px"})},AblePlayer.prototype.dragEnd=function(){t(document).off("mousemove mouseup"),this.$activeWindow.off("keydown").removeClass("able-drag"),this.hidingPopup=!0,this.$windowPopup.hide(),setTimeout(function(){this.hidingPopup=!1},100),this.$windowButton.show().focus(),this.dragging=!1}}(jQuery),function(t){AblePlayer.prototype.initSignLanguage=function(){"html5"===this.player&&this.prefSignLanguage&&(this.signFile=this.$sources.first().attr("data-sign-src"),this.signFile?(this.debug&&console.log("This video has an accompanying sign language video: "+this.signFile),this.hasSignLanguage=!0,this.injectSignPlayerCode()):this.hasSignLanguage=!1)},AblePlayer.prototype.injectSignPlayerCode=function(){var e,n,i,r,o,a;for(e=this,n=this.mediaId+"-sign",this.$signVideo=t("<video>",{id:n,width:this.playerWidth,tabindex:"-1"}),this.signVideo=this.$signVideo[0],i=0;i<this.$sources.length;i++){if(r=this.$sources[i].getAttribute("data-sign-src"),o=this.$sources[i].getAttribute("type"),!r){this.hasSignLanguage=!1;break}a=t("<source>",{src:r,type:o}),this.$signVideo.append(a)}this.$signWindow=t("<div>",{"class":"able-sign-window",draggable:"true",tabindex:"-1"}),this.$signWindow.append(this.$signVideo).hide(),this.$ableColumnRight?this.$ableColumnRight.append(this.$signWindow):this.splitPlayerIntoColumns("sign"),this.initDragDrop(this.$signWindow)}}(jQuery),function(t){var e={ab:{name:"Abkhaz",nativeName:"\u0430\u04a7\u0441\u0443\u0430"},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:"\u12a0\u121b\u122d\u129b"},ar:{name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},an:{name:"Aragonese",nativeName:"Aragon\xe9s"},hy:{name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},as:{name:"Assamese",nativeName:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be"},av:{name:"Avaric",nativeName:"\u0430\u0432\u0430\u0440 \u043c\u0430\u0446\u04c0, \u043c\u0430\u0433\u04c0\u0430\u0440\u0443\u043b \u043c\u0430\u0446\u04c0"},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"az\u0259rbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:"\u0431\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435"},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f"},bn:{name:"Bengali",nativeName:"\u09ac\u09be\u0982\u09b2\u09be"},bh:{name:"Bihari",nativeName:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940"},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a"},my:{name:"Burmese",nativeName:"\u1017\u1019\u102c\u1005\u102c"},ca:{name:"Catalan",nativeName:"Catal\xe0"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:"\u043d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442"},ny:{name:"Chichewa",nativeName:"chiChe\u0175a, chinyanja"},zh:{name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n), \u6c49\u8bed, \u6f22\u8a9e"},cv:{name:"Chuvash",nativeName:"\u0447\u04d1\u0432\u0430\u0448 \u0447\u04d7\u043b\u0445\u0438"},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423"},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"\u010desky, \u010de\u0161tina"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi",nativeName:"\u078b\u07a8\u0788\u07ac\u0780\u07a8"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"E\u028begbe"},fo:{name:"Faroese",nativeName:"f\xf8royskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"fran\xe7ais, langue fran\xe7aise"},ff:{name:"Fula",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek",nativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},gn:{name:"Guaran\xed",nativeName:"Ava\xf1e\u1ebd"},gu:{name:"Gujarati",nativeName:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"},ht:{name:"Haitian",nativeName:"Krey\xf2l ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, \u0647\u064e\u0648\u064f\u0633\u064e"},he:{name:"Hebrew",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea"},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940, \u0939\u093f\u0902\u0926\u0940"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"As\u1ee5s\u1ee5 Igbo"},ik:{name:"Inupiaq",nativeName:"I\xf1upiaq, I\xf1upiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"\xcdslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"\u1403\u14c4\u1483\u144e\u1450\u1466"},ja:{name:"Japanese",nativeName:"\u65e5\u672c\u8a9e (\u306b\u307b\u3093\u3054\uff0f\u306b\u3063\u307d\u3093\u3054)"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"\u0915\u0936\u094d\u092e\u0940\u0930\u0940, \u0643\u0634\u0645\u064a\u0631\u064a\u200e"},kk:{name:"Kazakh",nativeName:"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456"},km:{name:"Khmer",nativeName:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"},ki:{name:"Kikuyu",nativeName:"G\u0129k\u0169y\u0169"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kyrgyz",nativeName:"\u043a\u044b\u0440\u0433\u044b\u0437 \u0442\u0438\u043b\u0438"},kv:{name:"Komi",nativeName:"\u043a\u043e\u043c\u0438 \u043a\u044b\u0432"},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:"\ud55c\uad6d\uc5b4 (\u97d3\u570b\u8a9e), \uc870\uc120\ub9d0 (\u671d\u9bae\u8a9e)"},ku:{name:"Kurdish",nativeName:"Kurd\xee, \u0643\u0648\u0631\u062f\u06cc\u200e"},kj:{name:"Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish",nativeName:"L\xebtzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Ling\xe1la"},lo:{name:"Lao",nativeName:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7"},lt:{name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latvie\u0161u valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu, \u0628\u0647\u0627\u0633 \u0645\u0644\u0627\u064a\u0648\u200e"},ml:{name:"Malayalam",nativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"M\u0101ori",nativeName:"te reo M\u0101ori"},mr:{name:"Marathi",nativeName:"\u092e\u0930\u093e\u0920\u0940"},mh:{name:"Marshallese",nativeName:"Kajin M\u0327aje\u013c"},mn:{name:"Mongolian",nativeName:"\u043c\u043e\u043d\u0433\u043e\u043b"},na:{name:"Nauru",nativeName:"Ekakair\u0169 Naoero"},nv:{name:"Navajo",nativeName:"Din\xe9 bizaad, Din\xe9k\u02bceh\u01f0\xed"},nb:{name:"Norwegian Bokm\xe5l",nativeName:"Norsk bokm\xe5l"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"\u0928\u0947\u092a\u093e\u0932\u0940"},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:"\ua188\ua320\ua4bf Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe",nativeName:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0"},cu:{name:"Church Slavonic",nativeName:"\u0469\u0437\u044b\u043a\u044a \u0441\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"\u0b13\u0b21\u0b3c\u0b3f\u0b06"},os:{name:"Ossetian",nativeName:"\u0438\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433"},pa:{name:"Punjabi",nativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40, \u067e\u0646\u062c\u0627\u0628\u06cc\u200e"},pi:{name:"P\u0101li",nativeName:"\u092a\u093e\u0934\u093f"},fa:{name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06cc"},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto",nativeName:"\u067e\u069a\u062a\u0648"},pt:{name:"Portuguese",nativeName:"Portugu\xeas"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian",nativeName:"rom\xe2n\u0103"},ru:{name:"Russian",nativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},sa:{name:"Sanskrit",nativeName:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"\u0938\u093f\u0928\u094d\u0927\u0940, \u0633\u0646\u068c\u064a\u060c \u0633\u0646\u062f\u06be\u06cc\u200e"},se:{name:"Northern Sami",nativeName:"Davvis\xe1megiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"y\xe2ng\xe2 t\xee s\xe4ng\xf6"},sr:{name:"Serbian",nativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a"},gd:{name:"Gaelic",nativeName:"G\xe0idhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhalese",nativeName:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},sk:{name:"Slovak",nativeName:"sloven\u010dina"},sl:{name:"Slovene",nativeName:"sloven\u0161\u010dina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish",nativeName:"espa\xf1ol, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"},te:{name:"Telugu",nativeName:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},tg:{name:"Tajik",nativeName:"\u0442\u043e\u04b7\u0438\u043a\u04e3, to\u011fik\u012b, \u062a\u0627\u062c\u06cc\u06a9\u06cc\u200e"},th:{name:"Thai",nativeName:"\u0e44\u0e17\u0e22"},ti:{name:"Tigrinya",nativeName:"\u1275\u130d\u122d\u129b"},bo:{name:"Tibetan",nativeName:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42"},tk:{name:"Turkmen",nativeName:"T\xfcrkmen, \u0422\u04af\u0440\u043a\u043c\u0435\u043d"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, \u170f\u1712\u1703\u1705\u1714 \u1706\u1704\u170e\u1713\u1704\u1714"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"T\xfcrk\xe7e"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"\u0442\u0430\u0442\u0430\u0440\u0447\u0430, tatar\xe7a, \u062a\u0627\u062a\u0627\u0631\u0686\u0627\u200e"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"Uy\u01a3urq\u0259, \u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5\u200e"},uk:{name:"Ukrainian",nativeName:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},ur:{name:"Urdu",nativeName:"\u0627\u0631\u062f\u0648"},uz:{name:"Uzbek",nativeName:"zbek, \u040e\u0437\u0431\u0435\u043a, \u0623\u06c7\u0632\u0628\u06d0\u0643\u200e"},ve:{name:"Venda",nativeName:"Tshiven\u1e13a"},vi:{name:"Vietnamese",nativeName:"Ti\u1ebfng Vi\u1ec7t"},vo:{name:"Volap\xfck",nativeName:"Volap\xfck"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9"},yo:{name:"Yoruba",nativeName:"Yor\xf9b\xe1"},za:{name:"Zhuang",nativeName:"Sa\u026f cue\u014b\u0185, Saw cuengh"}};AblePlayer.prototype.getLanguageName=function(t){t=t.slice(0,2);var n=e[t];return n?n.name:void 0},AblePlayer.prototype.getLanguageNativeName=function(t){t=t.slice(0,2);var n=e[t];return n?n.nativeName:void 0}}(jQuery);